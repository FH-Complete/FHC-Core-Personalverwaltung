import t from"../../../../../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js?2025102901";import e from"../../../../../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js?2025102901";import n from"../../../../../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js?2025102901";import r from"../../../../../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js?2025102901";var i={updatePersonUnrulyStatus(t,e){try{const n={person_id:t,unruly:e},r="/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus";return this.$fhcApi.post(r,n,null)}catch(t){throw t}},filterPerson(t,e=""){try{const n=e+"/api/frontend/v1/checkperson/CheckPerson/filterPerson";return axios.post(n,t)}catch(t){throw t}}},a={getGemeinden:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getGemeinden",params:{plz:t}}),getOrtschaften:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getOrtschaften",params:{plz:t}}),getContractExpire:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getContractExpire",params:{year:t,month:e}}),getContractNew:(t,e)=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getContractNew",params:{year:t,month:e}}),getBirthdays:t=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getBirthdays",params:{date:t}}),getCovidState:(t,e)=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getCovidState",params:{person_id:t,d:e}}),getAllCourseHours:t=>({method:"get",url:`extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAllCourseHours?uid=${t}`}),getAllSupportHours:t=>({method:"get",url:`extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAllSupportHours?uid=${t}`}),getNations:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getNations"}),getSachaufwandTyp:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getSachaufwandtyp"}),getKontakttyp:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getKontakttyp"}),getAdressentyp:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAdressentyp"}),getSprache:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getSprache"}),getAusbildung:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAusbildung"}),getStandorteIntern:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getStandorteIntern"}),getOrte:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getOrte"}),getKarenztypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getKarenztypen"}),getGehaltstypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getGehaltstypen"}),getVertragsarten:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsarten"}),getVertragsbestandteiltypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsbestandteiltypen"}),getTeilzeittypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getTeilzeittypen"}),getFreitexttypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getFreitexttypen"}),getStundensatztypen:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getStundensatztypen"})},s={getUnternehmen:()=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getUnternehmen"}),getVertragsarten:()=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsarten"}),getDVByID:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvByID/"+t}),endDV:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/endDV",params:t}),deactivateDV:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/deactivateDV",params:t}),getDvEndeGruende:()=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getDvEndeGruende"})};const o={emits:["dataFetched"],props:{refresh:{type:Boolean},apiFunction:{required:!0,type:Function},apiFunctionParameters:{}},watch:{refresh:function(t,e){this.fetchData()}},data:function(){return{loading:!1,error:!1,errorMessage:null}},created:function(){this.fetchData()},methods:{fetchData:function(){if(this.loading=!0,this.error=!1,this.errorMessage=null,"function"==typeof this.apiFunction){let t=this.apiFunction(this.apiFunctionParameters);t instanceof Promise?t.then(this.successHandler).catch(this.errorHandler).finally(this.finallyHandler):this.setError("The called apiFunction does not return a Promise")}else this.setError("Property apiFunction is not a function")},setError:function(t){this.loading=!1,this.error=!0,this.errorMessage=t},successHandler:function(t){this.$emit("dataFetched",t?t.data:void 0)},errorHandler:function(t){t.response?.data?.retval?this.setError(t.response.data.retval):t.data?.message?this.setError(t.data.message):this.setError(t.message)},finallyHandler:function(){this.loading=!1}},template:'\n\t\t<slot v-if="loading" name="loading">\n\t\t\t<div class="fetch-loader">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if="error" name="error" :error-message="errorMessage">\n\t\t\t<div class="fetch-error">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t'},l="Filter Component New Filter";var d={props:{filters:{type:Array,default:[]},columns:{type:Array,default:[]},fields:{type:Array,default:[]}},emits:{switchFilter:["filterId"],applyFilterConfig:["filterFields"],saveCustomFilter:["customFilterName"]},data:function(){return{currentFields:[]}},computed:{types(){return this.columns.reduce((t,e)=>{let n=e.type.toLowerCase();return n.indexOf("int")>=0?t[e.name]="Numeric":n.indexOf("varchar")>=0||n.indexOf("text")>=0||n.indexOf("bpchar")>=0?t[e.name]="Text":n.indexOf("timestamp")>=0||n.indexOf("date")>=0?t[e.name]="Date":t[e.name]="",t},{})}},watch:{fields(t){this.currentFields=t}},methods:{switchFilter(t){this.$emit("switchFilter",t.currentTarget.value)},applyFilterConfig(){const t=this.currentFields.filter(t=>t.name!=l);t.filter(t=>""==t.condition).length?alert("Please fill all the filter options"):this.$emit("applyFilterConfig",t)},addField(t){this.currentFields.push({name:l})},removeField(t){this.currentFields.splice(t,1)}},template:'\n\t<div class="filter-config">\n\t\t<div class="card">\n\t\t\t<div class="card-body">\n\t\t\t\t<div v-if="filters.length" class="mb-4">\n\t\t\t\t\t<select class="form-select" @change="switchFilter">\n\t\t\t\t\t\t<option value="">Bitte auswählen...</option>\n\t\t\t\t\t\t<option v-for="filter in filters" :value="filter.id">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class="btn btn-outline-dark" type="button" @click=addField>\n\t\t\t\t\t\t<span class="fa-solid fa-plus" aria-hidden="true"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="filter-config-fields my-3">\n\t\t\t\t\t<div v-for="(filterField, index) in currentFields" class="filter-config-field row">\n\n\t\t\t\t\t\t<div class="col-5">\n\t\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t\t<span class="input-group-text">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass="form-select"\n\t\t\t\t\t\t\t\t\tv-model="filterField.name"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value="">Feld zum Filter hinzufügen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for="col in columns" :value="col.name">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- Numeric --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Numeric\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="equal">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="nequal">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="gt">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value="lt">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-3">\n\t\t\t\t\t\t\t\t<input type="number" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\x3c!-- Text --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Text\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="equal">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="nequal">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value="contains">Enthält</option>\n\t\t\t\t\t\t\t\t\t<option value="ncontains">Enthält nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-3">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t\x3c!-- Timestamp and date --\x3e\n\t\t\t\t\t\t<template v-if="types[filterField.name] == \'Date\'">\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.operation">\n\t\t\t\t\t\t\t\t\t<option value="gt">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value="lt">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value="set">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value="nset">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-1">\n\t\t\t\t\t\t\t\t<input type="number" class="form-control" v-model="filterField.condition">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-2">\n\t\t\t\t\t\t\t\t<select class="form-select" v-model="filterField.option">\n\t\t\t\t\t\t\t\t\t<option value="minutes">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value="hours">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value="days">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value="months">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class="col text-end">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass="btn btn-outline-dark"\n\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\t@click="removeField(index)"\n\t\t\t\t\t\t\t\ttitle="Filter entfernen"\n\t\t\t\t\t\t\t\taria-title="Filter entfernen"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class="fa-solid fa-minus" aria-hidden="true"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- Filter save options --\x3e\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-7">\n\t\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t\t<input ref="filterName" type="text" class="form-control" placeholder="Filternamen eingeben...">\n\t\t\t\t\t\t\t<button type="button" class="btn btn-outline-secondary" @click="$emit(\'saveCustomFilter\', $refs.filterName.value)">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col">\n\t\t\t\t\t\t<button type="button" class="btn btn-outline-dark" @click="applyFilterConfig">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'},u={props:{fields:Array,selected:{type:Array,default:[]},names:{type:Object,default:{}}},emits:{hide:["fieldName"],show:["fieldName"]},data:function(){return{selectedFields:[]}},watch:{selected(t){this.selectedFields=t}},methods:{toggle(t){-1!=this.selectedFields.indexOf(t)?(this.selectedFields.splice(this.selectedFields.indexOf(t),1),this.$emit("hide",t)):(this.selectedFields.push(t),this.$emit("show",t))}},template:'\n\t<div class="filter-columns">\n\t\t<div class="card">\n\t\t\t<div class="d-flex flex-wrap gap-2 p-3 justify-content-center">\n\t\t\t\t<div\n\t\t\t\t\tv-for="fieldToDisplay in fields"\n\t\t\t\t\tclass="btn"\n\t\t\t\t\t:class="selectedFields.indexOf(fieldToDisplay) != -1 ? \'btn-dark\' : \'btn-outline-dark\' "\n\t\t\t\t\t@click="toggle(fieldToDisplay)"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t'};const p={jsonLines:"fa-file-lines",xlsx:"fa-file-excel",pdf:"fa-file-pdf",html:"fa-file-code",json:"fa-file",csv:"fa-file-csv"},c={jsonLines:"Download as JSONLINES",xlsx:"Download as XLSX",pdf:"Download as PDF",html:"Download as HTML",json:"Download as JSON",csv:"Download as CSV "};var f={props:{tabulator:Object,config:{type:[Boolean,String,Function,Array,Object],default:!1},iconClass:[String,Array,Object]},computed:{currentConfig(){if(!this.config)return!1;let t=this.config;if(t instanceof Function)return[t];if(null===t)return[];if(!0===this.config&&(t=["csv"]),"[object String]"===Object.prototype.toString.call(t)&&(t=t.split(",")),"object"==typeof t&&!Array.isArray(t)){let i=[];for(var e in t){var n,r=t[e];r&&("[object String]"===Object.prototype.toString.call(r)?null!==(n=this.stringToFileFormatter(r))?i.push({icon:"fa-solid "+p[n],label:r===e?c[n]:e,formatter:n}):null!==(n=this.stringToFileFormatter(e))?i.push({icon:"fa-solid "+p[n],label:r,formatter:n}):alert("neither "+e+" nor "+r+" are supported download file types"):"object"!=typeof r||Array.isArray(r)?null!==(n=this.stringToFileFormatter(e))?i.push({icon:"fa-solid "+p[n],label:c[n],formatter:n}):alert(e+" is not a supported download file type"):null!==(n=this.stringToFileFormatter(e))?(void 0===r.formatter&&(r.formatter=n),void 0===r.label&&(r.label=c[n]),void 0===r.icon&&(r.icon=p[n]),i.push(r)):(void 0===r.label&&(r.label=e),i.push(r)))}t=i}if(Array.isArray(t)){if(t=t.map(t=>{if("[object String]"===Object.prototype.toString.call(t)){let e=this.stringToFileFormatter(t);return null===e?null:{icon:"fa-solid "+p[e],label:c[e],formatter:e}}if(t instanceof Function)return{formatter:t};if("object"==typeof t&&!Array.isArray(t)&&null!==t){if(t.formatter instanceof Function)return t;if(this.validateFileFormatter(t.formatter))return t}return null}).filter(t=>null!==t),t.length<2)return t;if(t.filter(t=>t.label||t.icon).length==t.length)return t;alert("Config not valid")}return[]}},methods:{stringToFileFormatter(t){let e=t.toLowerCase();return"jsonlines"==e?"jsonLines":["xlsx","pdf","html","json","csv"].includes(e)?e:null},validateFileFormatter(t){let e=this.stringToFileFormatter(t);if(!e)return alert(t+" is not a supported file formatter"),!1;if("xlsx"==e&&!window.XLSX)return alert("XLSX Library not loaded"),!1;if("pdf"==e){if(!window.jspdf)return alert("jsPDF Library not loaded"),!1;if(!new jspdf.jsPDF({}).autoTable)return alert("jsPDF-AutoTable Plugin not loaded"),!1}return!0},download(t){this.tabulator.download(t.formatter,t.file,t.options)}},template:'\n\t<template v-if="currentConfig">\n\t\t<template v-if="currentConfig.length == 1">\n\t\t\t<a\n\t\t\t\thref="#"\n\t\t\t\tclass="table-download"\n\t\t\t\tv-bind="$attrs"\n\t\t\t\ttitle="Download"\n\t\t\t\taria-title="Download"\n\t\t\t\t@click.prevent="download(currentConfig[0])"\n\t\t\t>\n\t\t\t\t<span :class="iconClass || \'fa-solid fa-xl fa-download\'" aria-hidden="true"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class="dropdown d-inline">\n\t\t\t<a\n\t\t\t\thref="#"\n\t\t\t\tclass="table-download"\n\t\t\t\tv-bind="$attrs"\n\t\t\t\ttitle="Download"\n\t\t\t\taria-title="Download"\n\t\t\t\trole="button"\n\t\t\t\tdata-bs-toggle="dropdown"\n\t\t\t\taria-expanded="false"\n\t\t\t>\n\t\t\t\t<span :class="iconClass || \'fa-solid fa-xl fa-download\'" aria-hidden="true"></span>\n\t\t\t</a>\n\t\t\t<ul class="dropdown-menu dropdown-menu-end">\n\t\t\t\t<li v-for="(conf, i) in currentConfig" :key="i">\n\t\t\t\t\t<a class="dropdown-item" href="#" @click.prevent="download(conf)">\n\t\t\t\t\t\t<span v-if="conf.icon" :class="conf.icon" aria-hidden="true"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t'};const h=new WeakMap;var m={mounted(t,e){let n=!1;h.set(t,e=>{if(!n)return;if(t.contains(e.target))return;const r=bootstrap.Collapse.getInstance(t);r&&r.hide()}),t.addEventListener("shown.bs.collapse",()=>{n=!0}),t.addEventListener("hide.bs.collapse",()=>{n=!1}),document.addEventListener("click",h.get(t),!0)},beforeUnmount(t,e){document.removeEventListener("click",h.get(t)),delete t.collapsibleAutoHideFunc}};window.Tabulator?.extendModule("layout","modes",{fitDataStretchFrozen(t,e){var n=0,r=this.table.rowManager.element.clientWidth,i=0,a=!1;t.forEach((t,e)=>{t.widthFixed||t.reinitializeWidth(),(this.table.options.responsiveLayout?t.modules.responsive.visible:t.visible&&!t.definition.frozen)&&(a=t),t.visible&&(n+=t.getWidth())}),a?(i=r-n+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),i>0?a.setWidth(i):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}});var g={saveCustomFilter:t=>({method:"post",url:"/api/frontend/v1/filter/saveCustomFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,customFilterName:t.customFilterName}}),removeCustomFilter:t=>({method:"post",url:"/api/frontend/v1/filter/removeCustomFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId}}),applyFilterFields:t=>({method:"post",url:"/api/frontend/v1/filter/applyFilterFields",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterFields:t.filterFields}}),addFilterField:t=>({method:"post",url:"/api/frontend/v1/filter/addFilterField",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField}}),removeFilterField:t=>({method:"post",url:"/api/frontend/v1/filter/removeFilterField",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField}}),getFilterById:t=>({method:"get",url:"/api/frontend/v1/filter/getFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId}}),getFilter:t=>({method:"get",url:"/api/frontend/v1/filter/getFilter",params:{filterUniqueId:t.filterUniqueId,filterType:t.filterType}})},v=0;const b={components:{CoreFetchCmpt:o,FilterConfig:d,FilterColumns:u,TableDownload:f},directives:{collapseAutoClose:m},emits:["nwNewEntry","click:new","tableBuilt","uuidDefined"],props:{onNwNewEntry:Function,title:String,description:String,sideMenu:{type:Boolean,default:!0},filterType:{type:String},tabulatorOptions:Object,tabulatorEvents:Array,tableOnly:Boolean,noColumnFilter:Boolean,reload:Boolean,reloadBtnInfotext:String,download:{type:[Boolean,String,Function,Array,Object],default:!1},newBtnShow:Boolean,newBtnClass:[String,Array,Object],newBtnDisabled:Boolean,newBtnLabel:String,uniqueId:String,idField:String,parentIdField:String,countOnly:Boolean,useSelectionSpan:{type:Boolean,default:!0}},data:function(){return{uuid:0,filterName:null,filterActive:!1,fields:null,dataset:null,datasetMetadata:null,selectedFields:null,filterFields:null,availableFilters:null,selectedFilter:null,fetchCmptRefresh:!1,fetchCmptApiFunction:null,fetchCmptApiFunctionParams:null,fetchCmptDataFetched:null,fetchResult:null,tabulator:null,tableBuilt:!1,tabulatorHasSelector:!1,selectedData:[],persistence:{sort:!0,columns:!0,filter:!1,headerFilter:!1,group:!1,page:!1}}},computed:{notSelectedFields(){return this.fields&&this.selectedFields?this.fields.filter(t=>-1===this.selectedFields.indexOf(t)):null},filteredData(){return this.dataset?JSON.parse(JSON.stringify(this.dataset)):[]},filteredColumns(){let t=JSON.parse(JSON.stringify(this.fields))||[],e=JSON.parse(JSON.stringify(this.selectedFields))||[],n=null;if(this.tabulatorOptions&&this.tabulatorOptions.hasOwnProperty("columns")&&(n=this.tabulatorOptions.columns),!Array.isArray(n)||Array.isArray(n)&&n.length<t.length){n=[];for(let r of t){let t={title:r,field:r};t.visible=e.indexOf(r)>=0,n.push(t)}}else for(let r of n)r.visible=e.indexOf(r.field)>=0||-1==t.indexOf(r.field),r.hasOwnProperty("resizable")&&(r.resizable=r.visible);return n},fieldIdsForVisibilty(){return this.tableBuilt?this.tabulator.getColumns().filter(t=>{let e=t.getDefinition();return!e.frozen&&e.title&&"responsiveCollapse"!=e.formatter}).map(t=>t.getField()):[]},fieldNames(){return this.tableBuilt?this.tabulator.getColumns().reduce((t,e)=>(t[e.getField()]=e.getDefinition().title,t),{}):{}},idExtra(){return this.uuid?"-"+this.uuid:""},columnsForFilter(){if(!this.filteredColumns||!this.datasetMetadata)return[];const t=this.filteredColumns.reduce((t,e)=>(t[e.field]=e.title,t),{});return this.datasetMetadata.map(e=>({...e,title:t[e.name]}))}},methods:{reloadTable(){this.tableOnly?this.tabulator.setData():this.getFilter()},async initTabulator(){let t="< Phrasen Plugin not loaded! >";this.$p&&(await this.$p.loadCategory("ui"),t=this.$p.t("ui/keineDatenVorhanden")),this.tableOnly||await new Promise(t=>{const e=window.location.hash?window.location.hash.slice(1):null,n=e=>{this.setRenderData(e),t()};null===e?this.startFetchCmpt(t=>this.$api.call(g.getFilter(t)),null,n):this.startFetchCmpt(t=>this.$api.call(g.getFilterById(t)),{filterId:e},n)});let e={layout:"fitDataStretchFrozen",movableColumns:!0,columnDefaults:{tooltip:!0},placeholder:t,persistence:this.persistence,...this.tabulatorOptions||{}};if(void 0===e.height&&void 0===e.minHeight&&void 0===e.maxHeight&&(e.height=500),this.tableOnly?e.columns.forEach(t=>{void 0===t.visible&&(t.visible=!0)}):(e.data=this.filteredData,e.columns=this.filteredColumns),(e.selectable||e.columns&&e.columns.filter(t=>"rowSelection"==t.formatter).length)&&(this.tabulatorHasSelector=!0),this.idField&&(this.parentIdField&&(e.dataTree=!0),e.index=this.idField),this.tabulator=new Tabulator(this.$refs.table,e),Array.isArray(this.tabulatorEvents)&&this.tabulatorEvents.length>0)for(let t of this.tabulatorEvents)this.tabulator.on(t.event,t.handler);this.tabulator.on("tableBuilt",()=>{this.tableBuilt=!0,this.$emit("tableBuilt")}),this.tabulator.on("rowSelectionChanged",t=>{this.selectedData=t}),this.parentIdField&&this.idField&&this.tabulator.on("dataLoading",t=>{let e=[];for(let n=0;n<t.length;n++){let r=t[n];r[this.parentIdField]&&this.appendChild(t,r)&&e.push(n)}for(let n=0;n<e.length;n++)t.splice(e[n]-n,1)}),this.tableOnly&&this.tabulator.on("tableBuilt",()=>{const t=this.tabulator.getColumns();this.fields=t.map(t=>t.getField()),this.selectedFields=t.filter(t=>t.isVisible()).map(t=>t.getField()),this.tabulator.options.persistence.headerFilter&&this._setHeaderFilter()}),this.tabulator.on("dataFiltered",t=>{this.filterActive=t.length>0})},updateTabulator(){this.tabulator&&(this.tableBuilt?this._updateTabulator():this.tabulator.on("tableBuilt",this._updateTabulator))},_updateTabulator(){this.tabulatorHasSelector=this.tabulatorOptions.selectable||this.filteredColumns.filter(t=>"rowSelection"==t.formatter).length,this.tabulator.setColumns(this.filteredColumns),this.tabulator.setData(this.filteredData),this._setHeaderFilter()},clearFilters(){this.tabulator.getHeaderFilters().forEach(t=>{this.tabulator.setHeaderFilterValue(t.field,"")}),this.tabulator.clearFilter(),this.filterActive=!1},_setHeaderFilter(){this.tabulator.getHeaderFilters().forEach(t=>{this.tabulator.setHeaderFilterValue(t.field,t.value)})},getFilter(){null===this.selectedFilter?this.startFetchCmpt(t=>this.$api.call(g.getFilter(t)),null,this.render):this.startFetchCmpt(t=>this.$api.call(g.getFilterById(t)),{filterId:this.selectedFilter},this.render)},setRenderData(t){this.fetchResult=t,this.filterName=t.filterName,this.dataset=t.dataset,this.datasetMetadata=t.datasetMetadata,this.fields=t.fields,this.selectedFields=t.selectedFields,this.filterFields=[];for(let e=0;e<t.datasetMetadata.length;e++)for(let n=0;n<t.filters.length;n++)if(t.datasetMetadata[e].name==t.filters[n].name){let r=t.filters[n];r.type=t.datasetMetadata[e].type,this.filterFields.push(r)}},render(t){let e=t;this.setRenderData(e),!0===this.sideMenu?this.setSideMenu(e):this.setDropDownMenu(e),this.updateTabulator()},setSideMenu(t){let e=t.sideMenu.filters,n=t.sideMenu.personalFilters,r=[];for(let t=0;t<e.length;t++){let n=e[t].link;null==n&&(n="#"),r[r.length]={id:e[t].filter_id,link:n+e[t].filter_id,description:e[t].desc,sort:t,onClickCall:this.handlerGetFilterById}}for(let t=0;t<n.length;t++){let e=n[t].link;null==e&&(e="#"),r[r.length]={id:n[t].filter_id,link:e+n[t].filter_id,description:n[t].desc,subscriptDescription:n[t].subscriptDescription,subscriptLinkClass:n[t].subscriptLinkClass,subscriptLinkValue:n[t].subscriptLinkValue,sort:t,onClickCall:this.handlerGetFilterById,onClickSubscriptCall:this.handlerRemoveCustomFilter}}this.availableFilters=r,this.$emit("nwNewEntry",{link:"#",description:"Filters",icon:"filter",children:r})},setDropDownMenu(t){let e=t.sideMenu.filters,n=t.sideMenu.personalFilters,r=[];for(let t=0;t<e.length;t++)e[t].link,r[r.length]={id:e[t].filter_id,option:e[t].filter_id,description:e[t].desc};for(let t=0;t<n.length;t++)n[t].link,r[r.length]={id:n[t].filter_id,option:n[t].filter_id,description:n[t].desc};this.availableFilters=r},startFetchCmpt(t,e,n){this.fetchCmptApiFunction=t,null==e&&(e={}),e.filterUniqueId=FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method,e.filterType=this.filterType,this.uniqueId&&(e.filterUniqueId+="_"+this.uniqueId),this.fetchCmptApiFunctionParams=e,this.fetchCmptDataFetched=n,!0===this.fetchCmptRefresh?this.fetchCmptRefresh=!1:this.fetchCmptRefresh=!0},handlerSaveCustomFilter(t){this.selectedFilter=null,this.startFetchCmpt(t=>this.$api.call(g.saveCustomFilter(t)),{customFilterName:t},this.getFilter)},handlerRemoveCustomFilter(t){let e=t.currentTarget.getAttribute("href").substring(1);e===this.selectedFilter&&(this.selectedFilter=null),this.startFetchCmpt(t=>this.$api.call(g.removeCustomFilter(t)),{filterId:e},this.getFilter)},handlerGetFilterById:function(t){let e=null,n=t.currentTarget.getAttribute("href");e=null==n?t.currentTarget.value:n.substring(1),this.switchFilter(e)},switchFilter(t){this.selectedFilter=t,this.getFilter()},applyFilterConfig(t){this.selectedFilter=null,this.startFetchCmpt(t=>this.$api.call(g.applyFilterFields(t)),{filterFields:t},this.getFilter)},appendChild(t,e){let n=e[this.parentIdField];for(let r=0;r<t.length;r++){let i=t[r];if(i[this.idField]==n)return i._children||(i._children=[]),i._children.includes(e)||i._children.push(e),!0;i._children&&this.appendChild(i._children,e)}return!1}},beforeCreate(){!this.tableOnly==!this.filterType&&alert("You can not have a filter-type in table-only mode!")},created(){!this.sideMenu||this.$props.onNwNewEntry&&this.$props.onNwNewEntry instanceof Function||alert('"nwNewEntry" listener is mandatory when sideMenu is true'),this.uuid=v++,this.$emit("uuidDefined",this.uuid)},mounted(){this.initTabulator().then(()=>{this.tableOnly||(this.selectedFilter=window.location.hash?window.location.hash.slice(1):null,this.render(this.fetchResult))})},template:'\n\t\t\x3c!-- Load filter data --\x3e\n\t\t<core-fetch-cmpt\n\t\t\tv-if="!tableOnly && fetchCmptApiFunction"\n\t\t\tv-bind:api-function="fetchCmptApiFunction"\n\t\t\tv-bind:api-function-parameters="fetchCmptApiFunctionParams"\n\t\t\tv-bind:refresh="fetchCmptRefresh"\n\t\t\t@data-fetched="fetchCmptDataFetched">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class="row" v-if="title != null && title != \'\'">\n\t\t\t<div class="col-lg-12">\n\t\t\t\t<h3 class="page-header mt-1 mb-4">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id="\'filterCollapsables\' + idExtra">\n\n\t\t\t<div class="d-flex flex-row justify-content-between flex-wrap">\n\t\t\t\t<div v-if="newBtnShow || reload || $slots.search || $slots.actions" class="d-flex gap-2 align-items-baseline flex-wrap">\n\t\t\t\t\t<button v-if="newBtnShow" class="btn btn-primary" :class="newBtnClass" :title="newBtnLabel ? undefined : \'New\'" :aria-label="newBtnLabel ? undefined : \'New\'" @click="$emit(\'click:new\', $event)" :disabled="newBtnDisabled">\n\t\t\t\t\t\t<span class="fa-solid fa-plus" aria-hidden="true"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if="reload" class="btn btn-outline-secondary" aria-label="Reload" @click="reloadTable">\n\t\t\t\t\t\t<span class="fa-solid fa-rotate-right" aria-hidden="true"  :title="reloadBtnInfotext ? reloadBtnInfotext : \'Reload\'" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if="$slots.actions && tabulatorHasSelector && useSelectionSpan">\n\t\t\t\t\t\t<span v-if="countOnly">{{ selectedData.length }} ausgewählt</span>\n\t\t\t\t\t\t<span v-else id="selected-info-text"> Mit {{ selectedData.length }} ausgewählten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name="actions" v-bind="{selected: tabulatorHasSelector ? selectedData : []}"></slot>\n\t\t\t\t\t<slot name="search"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class="d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end">\n\t\t\t\t\t<span v-if="!tableOnly">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if="description" v-html="description"></span>\n\t\t\t\t\t<a aria-label="filter" v-if="!tableOnly || $slots.filter" href="#" class="btn btn-link px-0 fhc-text" data-bs-toggle="collapse" :data-bs-target="\'#collapseFilters\' + idExtra">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-filter"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label="filter" v-if="filterActive"  class="btn btn-link px-0 fhc-text" :title="$p.t(\'ui\',\'filterdelete\')" @click="clearFilters">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-filter-circle-xmark"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label="filter" href="#" class="btn btn-link px-0 fhc-text" data-bs-toggle="collapse" :data-bs-target="\'#collapseColumns\' + idExtra">\n\t\t\t\t\t\t<span class="fa-solid fa-xl fa-table-columns"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class="btn btn-link px-0 fhc-text" :tabulator="tabulator" :config="download"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id="\'collapseColumns\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\t:fields="fieldIdsForVisibilty"\n\t\t\t\t:selected="selectedFields"\n\t\t\t\t:names="fieldNames"\n\t\t\t\t@hide="tabulator.hideColumn($event)"\n\t\t\t\t@show="tabulator.showColumn($event)"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if="!tableOnly"\n\t\t\t\t:id="\'collapseFilters\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\t:filters="!sideMenu ? (availableFilters || []) : []"\n\t\t\t\t:columns="columnsForFilter"\n\t\t\t\t:fields="filterFields || []"\n\t\t\t\t@switch-filter="switchFilter"\n\t\t\t\t@apply-filter-config="applyFilterConfig"\n\t\t\t\t@save-custom-filter="handlerSaveCustomFilter"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if="$slots.filter"\n\t\t\t\t:id="\'collapseFilters\' + idExtra"\n\t\t\t\tclass="card-body collapse"\n\t\t\t\t:data-bs-parent="\'#filterCollapsables\' + idExtra"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name="filter"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- Tabulator --\x3e\n\t\t<div ref="table" :id="\'filterTableDataset\' + idExtra" class="filter-table-dataset"></div>\n\t'};var y={getHeader:t=>({method:"get",url:"/api/frontend/v1/navigation/header",params:{navigation_page:t}}),getMenu:t=>({method:"get",url:"/api/frontend/v1/navigation/menu",params:{navigation_page:t}})};const A={components:{CoreFetchCmpt:o},props:{addHeaderMenuEntries:Object,addSideMenuEntries:Object,hideTopMenu:Boolean,leftNavCssClasses:{type:String,default:"navbar navbar-left-side"}},data:()=>({headerMenu:{},sideMenu:{}}),computed:{headerMenuEntries(){let t=this.headerMenu?{...this.headerMenu}:{};return null!=this.headerMenu&&null!=this.addHeaderMenuEntries&&Object.keys(this.addHeaderMenuEntries).length>0&&(t[this.addHeaderMenuEntries.description]=this.addHeaderMenuEntries),t},sideMenuEntries(){let t=this.sideMenu?{...this.sideMenu}:{};return null!=this.sideMenu&&null!=this.addSideMenuEntries&&Object.keys(this.addSideMenuEntries).length>0&&(t[this.addSideMenuEntries.description]=this.addSideMenuEntries),t}},methods:{getNavigationPage:()=>FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method,fetchCmptApiFunctionHeader(){return this.$api.call(y.getHeader(this.getNavigationPage()))},fetchCmptApiFunctionSideMenu(){return this.$api.call(y.getMenu(this.getNavigationPage()))},fetchCmptDataFetchedHeader(t){this.headerMenu=t||{}},fetchCmptDataFetchedMenu(t){this.sideMenu=t||{}},getDataBsToggle:t=>t.children?"dropdown":null},template:'\n\t\t\x3c!-- Load head menu --\x3e\n\t\t<core-fetch-cmpt v-bind:api-function="fetchCmptApiFunctionHeader" @data-fetched="fetchCmptDataFetchedHeader"></core-fetch-cmpt>\n\t\t\x3c!-- Load side menu --\x3e\n\t\t<core-fetch-cmpt v-bind:api-function="fetchCmptApiFunctionSideMenu" @data-fetched="fetchCmptDataFetchedMenu"></core-fetch-cmpt>\n\n\t\t\x3c!-- Top menu --\x3e\n\t\t<nav class="navbar navbar-expand-lg navbar-header" v-if="!hideTopMenu">\n\t\t\t<ul class="navbar-nav">\n\t\t\t\t\x3c!-- 1st level --\x3e\n\t\t\t\t<template v-for="header in headerMenuEntries">\n\t\t\t\t\t<li class="nav-item dropdown">\n\t\t\t\t\t\t<a class="nav-link header-menu-link-entry"\n\t\t\t\t\t\t\tv-bind:data-bs-toggle="this.getDataBsToggle(header)"\n\t\t\t\t\t\t\tv-bind:class="{ \'dropdown-toggle\': header.children }"\n\t\t\t\t\t\t\tv-bind:href="header.link"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class="fa-solid fa-fw header-menu-icon" v-bind:class="\'fa-\' + header.icon" v-if="header.icon"></i> {{ header.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="dropdown-menu" v-if="header.children">\n\t\t\t\t\t\t\t\x3c!-- 2nd level --\x3e\n\t\t\t\t\t\t\t<template v-for="child in header.children">\n\t\t\t\t\t\t\t\t<li><a class="dropdown-item" v-bind:href="child.link">{{ child.description }}</a></li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t\t<slot></slot>\n\t\t</nav>\n\n\t\t\x3c!-- Left side menu --\x3e\n\t\t<nav :class="leftNavCssClasses">\n\t\t\t<ul class="navbar-nav">\n\t\t\t\t\x3c!-- 1st level --\x3e\n\t\t\t\t<template v-for="menu in sideMenuEntries">\n\t\t\t\t\t<li class="nav-item">\n\t\t\t\t\t\t<a class="nav-link left-side-menu-link-entry" v-bind:href="menu.link" @click=menu.onClickCall>\n\t\t\t\t\t\t\t<i class="fa fa-fw" v-bind:class="\'fa-\'+ menu.icon"></i> {{ menu.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="nav-link left-side-menu-second-level" v-if="menu.children">\n\t\t\t\t\t\t\t\x3c!-- 2nd level --\x3e\n\t\t\t\t\t\t\t<template v-for="child in menu.children">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a class="nav-link left-side-menu-link-entry" v-bind:href="child.link" @click=child.onClickCall>\n\t\t\t\t\t\t\t\t\t\t&emsp;&emsp;{{ child.description }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass="nav-link left-side-menu-link-entry"\n\t\t\t\t\t\t\t\t\t\tv-bind:class="child.subscriptLinkClass"\n\t\t\t\t\t\t\t\t\t\tv-if="child.subscriptDescription"\n\t\t\t\t\t\t\t\t\t\tv-bind:href="child.link"\n\t\t\t\t\t\t\t\t\t\t@click=child.onClickSubscriptCall\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ child.subscriptDescription }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t</nav>\n\t'};var _={name:"VerticalSplit",data:function(){return{availHeight:0,topheight:0,bottomheight:0,mousePosY:0,resize:!1,vsplitter:null,vsplitterOffset:0,selfOffsetTop:0}},template:'\n    <div ref="verticalsplit">\n        <div ref="toppanel" class="verticalsplitted" \n             :style="{height: this.topheightcss}">\n            <slot name="top">\n                <p>Top Panel</p>\n            </slot>\n        </div>\n        <div ref="vsplitter" class="verticalsplitter" \n             :class="this.topOrBottomClass" @mousedown="this.dragStart">\n            <div class="splitactions" :class="this.topOrBottomClass">\n                <span @click="this.collapseTop" class="splitaction">\n                    <i class="fas fa-angle-up text-muted"></i>\n                </span>\n                <span @dblclick="this.showBoth" class="splitaction resize">\n                    <i class="fas fa-grip-lines text-muted"></i>\n                </span>\n                <span @click="this.collapseBottom" class="splitaction">\n                    <i class="fas fa-angle-down text-muted"></i>\n                </span>\n            </div>\n        </div>\n        <div ref="bottompanel" class="verticalsplitted"\n             :style="{height: this.bottomheightcss}">\n            <slot name="bottom">\n                <p/>\n            </slot>\n        </div>\n    </div>\n    ',mounted:function(){this.calcHeights(),this.trackVerticalSplitterOffsetTop(),window.addEventListener("resize",this.calcHeights)},updated:function(){this.trackVerticalSplitterOffsetTop()},methods:{calcHeights:function(){var t=window.innerHeight,e=this.availHeight;this.selfOffsetTop=this.$refs.verticalsplit.offsetTop,this.availHeight=t-this.selfOffsetTop-this.$refs.vsplitter.offsetHeight,0===this.topheight&&0===this.bottomheight||0===e?this.topheight=Math.floor(this.availHeight/2):this.topheight=Math.floor(100*this.topheight/e/100*this.availHeight),this.bottomheight=this.availHeight-this.topheight},collapseTop:function(){this.calcHeights(),this.topheight=0,this.bottomheight=this.availHeight},collapseBottom:function(){this.calcHeights(),this.topheight=this.availHeight,this.bottomheight=0},showBoth:function(){this.topheight=Math.floor(this.availHeight/2),this.bottomheight=Math.floor(this.availHeight/2)},isCollapsed:function(){return 0===this.topheight?"top":0===this.bottomheight&&"bottom"},dragStart:function(t){t.preventDefault(),t.stopPropagation(),window.addEventListener("mouseup",this.dragEnd),window.addEventListener("mousemove",this.drag),this.resize=!0,this.mousePosY=t.clientY},drag:function(t){if(this.resize){t.preventDefault(),t.stopPropagation();var e=t.clientY-this.mousePosY;this.topheight=this.topheight+e,this.topheight<0&&(this.topheight=0),this.topheight>this.availHeight&&(this.topheight=this.availHeight),this.bottomheight=this.availHeight-this.topheight,this.mousePosY=t.clientY}},dragEnd:function(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.dragEnd),this.resize=!1,this.mousePosY=t.clientY},trackVerticalSplitterOffsetTop:function(){this.vsplitterOffset=this.$refs.vsplitter.offsetTop}},computed:{topOrBottomClass:function(){return this.vsplitterOffset-this.selfOffsetTop<=Math.floor(this.availHeight/2)?"top":"bottom"},topheightcss:function(){return this.topheight+"px"},bottomheightcss:function(){return this.bottomheight+"px"}}};const C={name:"Modal",props:{type:String,title:String,noscroll:Boolean},expose:["show","hide"],setup(t,{emit:e}){let n,r=Vue.ref(null);Vue.onMounted(()=>{n=new bootstrap.Modal(r.value)});return{modalEle:r,show:()=>{n.show()},hide:function(){n.hide()}}},template:'\n    <div class="modal fade " id="customModal" tabindex="-1" aria-labelledby=""\n        aria-hidden="true" ref="modalEle">\n        <div class="modal-dialog modal-lg" :class="(!noscroll) ? \'modal-dialog-scrollable\' : \'\'">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title" id="customModalLabel">{{ title }}</h5>\n                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                </div>\n                <div class="modal-body">\n                    <slot name="body" />\n                </div>\n                <div class="modal-footer">\n                    <slot name="footer"></slot>\n                    \x3c!-- button type="button" class="btn btn-secondary" data-bs-dismiss="modal">\n                        OK\n                    </button--\x3e\n                </div>\n            </div>\n        </div>\n    </div>'},F={},k={};function P(t,e){return t.filter(t=>t.category==e).reduce((t,e)=>(t[e.phrase]||(t[e.phrase]=e.text),t),{})}function $(t){for(;k[t].length;){var e=k[t].pop();e[0].value=w(t,e[1],e[2]),Vue.triggerRef(e[0])}}function w(t,e,n){let r=F[t][e];return r?(n&&(r=r.replace(/\{([^}]*)\}/g,(t,e)=>void 0===n[e]?t:n[e])),r):"<< PHRASE "+e+">>"}const S={t_ref(t,e,n){if(void 0===n&&(Array.isArray(t)&&2==t.length||t.split&&2==t.split("/").length)&&(n=e,[t,e]=t.split?t.split("/"):t),void 0===e)return console.error("invalid input"),"";if(!F[t]){var r="";if(void 0!==window.FHC_JS_PHRASES_STORAGE_OBJECT){var i=P(FHC_JS_PHRASES_STORAGE_OBJECT,t);void 0!==i[e]&&(r=i[e])}if(!F[t]||0===Object.keys(F[t]).length){F[t]=void 0;let i=Vue.ref(r);return function(t,e,n,r){if(k[t])return k[t].push([e,n,r]),void(F[t]&&$(t));k[t]=[[e,n,r]],axios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/components/Phrasen/loadModule/"+t).then(e=>{e.data.retval?F[t]=P(e.data.retval,t):F[t]={},$(t)}).catch(t=>console.error(t))}(t,i,e,n),i}}var a=w(t,e,n);return Vue.ref(a)},t(t,e,n){return Vue.unref(this.t_ref(t,e,n))}};function D(){return{t:function(t,e,n){return S.t(t,e,n)}}}const E={name:"ModalDialog",props:{type:String,title:String},expose:["show","hide"],setup(t,{emit:e}){let n,r,i=Vue.ref(null);const{t:a}=D();Vue.onMounted(()=>{n=new bootstrap.Modal(i.value)});return{modalConfirmEle:i,show:async()=>(n.show(),new Promise(function(t,e){r=t})),hide:function(){n.hide()},ok:()=>{r(!0)},cancel:()=>{r(!1)},t:a}},template:'\n    <div class="modal fade " id="customModalDialog" tabindex="-1" aria-labelledby=""\n        aria-hidden="true" ref="modalConfirmEle">\n        <div class="modal-dialog modal-lg">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title" id="customModalDialogLabel">{{ title }}</h5>\n                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                </div>\n                <div class="modal-body">\n                    <slot name="body" />\n                </div>\n                <div class="modal-footer">\n                    <slot name="footer"></slot>\n                    <button type="button" class="btn btn-secondary" @click="cancel" data-bs-dismiss="modal">\n                      {{ t(\'ui\',\'abbrechen\') }}\n                    </button>\n                    <button type="button" class="btn btn-primary" @click="ok" data-bs-dismiss="modal">\n                        {{ t(\'ui\',\'ok\') }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>'};var T={filterPerson:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/filterPerson",params:{searchVal:t}}),personBaseData:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personBaseData",params:{person_id:t}}),updatePersonBaseData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/updatePersonBaseData",params:t}),personEmployeeData:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personEmployeeData",params:{person_id:t}}),updatePersonEmployeeData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/updatePersonEmployeeData",params:t}),personEmployeeKurzbzExists:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personEmployeeKurzbzExists",params:{uid:t,kurzbz:e}}),deletePersonBankData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonBankData",params:{bankverbindung_id:t}}),upsertPersonBankData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonBankData",params:t}),personBankData:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personBankData",params:{person_id:t}}),personAddressData:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personAddressData",params:{person_id:t}}),deletePersonAddressData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonAddressData",params:{adresse_id:t}}),upsertPersonAddressData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonAddressData",params:t}),personContactData:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personContactData",params:{person_id:t}}),deletePersonContactData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonContactData",params:{kontakt_id:t}}),upsertPersonContactData:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonContactData",params:t}),uidByPerson:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/uidByPerson",params:{person_id:t,person_uid:e}}),personMaterialExpenses:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personMaterialExpenses",params:{person_id:t,person_uid:e}}),deletePersonMaterialExpenses:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonMaterialExpenses",params:{sachaufwand_id:t}}),upsertPersonMaterialExpenses:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonMaterialExpenses",params:t}),deletePersonJobFunction:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonJobFunction",params:{benutzerfunktion_id:t}}),upsertPersonJobFunction:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonJobFunction",params:t}),updatePersonUnruly:t=>({method:"post",url:"/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus",params:t})};const x={name:"EmailTelData",components:{Modal:C,ModalDialog:E},props:{personID:{type:Number,required:!0},writePermission:{type:Boolean,required:!1}},setup(t){const e=Vue.inject("$api"),n=Vue.inject("$fhcAlert"),{personID:r}=Vue.toRefs(t),{t:i}=D();Vue.ref("");const a=Vue.ref([]),s=Vue.ref(!1),o=Vue.ref(),l=Vue.ref(),d=Vue.inject("kontakttyp"),u=Vue.ref(!1);Vue.watch(r,(t,e)=>{console.log("ContactData watch",t),p()});const p=async()=>{if(null!=r.value)try{const t=await e.call(T.personContactData(r.value));a.value=t.data}catch(t){console.log(t)}finally{s.value=!1}else a.value=[]};Vue.onMounted(()=>{console.log("ContactData mounted",t.personID),p()});const c=Vue.computed(()=>Object.values(a.value));let f=Vue.ref();const h=()=>{f.value.hide()},m=Vue.ref(),g=Vue.reactive({kontaktBlured:!1,wasValidated:!1}),v=t=>!!t&&""!=t.trim(),b=()=>(g.kontaktBlured=!0,!!v(o.value.kontakt)),y=()=>{n.alertSuccess(i("person","kontaktdatenGespeichert"))},A=()=>{n.alertSuccess(i("person","kontaktdatenGeloescht"))};return{contactList:a,contactListArray:c,currentContact:o,showEditModal:t=>{o.value={...a.value[t]},f.value.show()},showAddModal:()=>{o.value={kontakt_id:0,person_id:r,kontakttyp:"email",anmerkung:"",kontakt:"",zustellung:!0,updateamum:"",updatevon:"",insertamum:"",insertvon:"",ext_id:null,standort_id:null},g.kontaktBlured=!1,f.value.show()},showDeleteModal:async t=>{if(o.value={...a.value[t]},!1!==await n.confirm({message:i("person","kontaktinformation")+" "+o.value?.kontakt+" "+i("person","wirklichLoeschen"),acceptLabel:"Löschen",acceptClass:"p-button-danger"}))try{const n=await e.call(T.deletePersonContactData(t));"success"==n?.meta?.status&&(delete a.value[t],A())}catch(t){console.log(t)}finally{s.value=!1}},hideModal:h,modalRef:f,kontakttyp:d,confirmDeleteRef:l,okHandler:async()=>{if(b()){try{const t=await e.call(T.upsertPersonContactData(o.value));"success"==t?.meta?.status&&(a.value[t.data[0].kontakt_id]=t.data[0],y())}catch(t){console.log(t)}finally{s.value=!1}h()}else console.log("form invalid")},t:i,getKontakttyp:t=>d.value.find(e=>e.kontakttyp==t),validKontakt:v,frmState:g,contactDataFrm:m,readonly:u}},template:'\n            <div class="row">\n\n                \x3c!--div class="d-flex bd-highlight">\n                    <div class="flex-grow-1 bd-highlight"></div>        \n                    <div class="p-2 bd-highlight">                   \n                        <button type="button" class="btn btn-outline-dark btn-sm"  @click="showAddModal()" style="margin-right:1.85rem;">\n                            <i class="fa fa-plus"></i>\n                        </button>\n                    </div>\n                </div--\x3e\n            </div>\n         \n             \n        <button type="button" class="btn btn-primary btn-sm my-2"  @click="showAddModal()">\n                <i class="fa fa-plus"></i> {{ t(\'global\',\'kontakt\') }}\n        </button>\n        <div class="table-responsive">\n            <table class="table table-hover table-sm">\n                <thead>\n                <tr>\n                    <th scope="col">{{ t(\'global\',\'typ\') }}</th>\n                    <th scope="col">{{ t(\'global\',\'kontakt\') }}</th>\n                    <th scope="col">{{ t(\'person\', \'zustellung\') }}</th>\n                    <th scope="col">{{ t(\'global\', \'anmerkung\') }}</th>\n                    <th scope="col">{{ t(\'ui\',\'aktion\') }}</th>\n                </tr>\n                </thead>\n                <tbody>               \n                    <tr v-for="contact in contactListArray" :key="contact.kontakt_id">\n                        <td class="align-middle">{{ getKontakttyp(contact.kontakttyp).beschreibung }}</td>\n                        <td class="align-middle" v-if="contact.kontakttyp == \'email\'"><a v-bind:href="[\'mailto:\' + contact.kontakt]">{{ contact.kontakt }}</a></td>\n                        <td class="align-middle" v-else-if="contact.kontakttyp == \'mobil\' || contact.kontakttyp == \'telefon\' || contact.kontakttyp == \'firmenhandy\'"><a v-bind:href="[\'tel:\' + contact.kontakt]">{{ contact.kontakt }}</a></td>\n                        <td class="align-middle" v-else >{{ contact.kontakt }}</td>\n                        <td class="align-middle">{{ contact.zustellung == true ? "X" : "" }}</td>\n                        <td class="align-middle">{{ contact.anmerkung }}</td>\n                        <td class="align-middle" width="5%">\n                            <div class="d-grid gap-2 d-md-flex align-middle">           \n                                <button type="button" class="btn btn-outline-secondary btn-sm" @click="showEditModal(contact.kontakt_id)">\n                                    <i class="fa fa-pen"></i>\n                                </button>\n                                <button type="button" class="btn btn-outline-secondary btn-sm" @click="showDeleteModal(contact.kontakt_id)">\n                                    <i class="fa fa-xmark"></i>\n                                </button>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        \x3c!-- Detail Modal --\x3e\n        <Modal :title="t(\'global\',\'kontakt\')" ref="modalRef">\n            <template #body>\n                <form class="row g-3" v-if="currentContact != null"  ref="contactDataFrm" >\n                                \n                    <div class="col-md-4">\n                        <label for="kontakttyp" class="form-label">{{ t(\'global\',\'typ\') }}</label>\n                        <select  id="kontakttyp" class="form-select form-select-sm" aria-label=".form-select-sm "  v-model="currentContact.kontakttyp" >\n                            <option v-for="(item, index) in kontakttyp" :value="item.kontakttyp">\n                                {{ item.beschreibung }}\n                            </option>\n                        </select>\n                    </div>\n                    <div class="col-md-4">\n                        <label for="kontakt" class="required form-label">{{ t(\'global\',\'kontakt\') }}</label>\n                        <input type="text" @blur="frmState.kontaktBlured = true" :readonly="readonly" class="form-control-sm" :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly, \'is-invalid\': !validKontakt(currentContact.kontakt) && frmState.kontaktBlured}" id="kontakt" maxlength="128" v-model="currentContact.kontakt">\n                    </div>\n                    \n                    <div class="col-md-2">                                             \n                        <label for="zustellung" class="form-label">{{ t(\'person\',\'zustellung\') }}</label>\n                        <div>\n                            <input class="form-check-input" type="checkbox" id="zustellung" v-model="currentContact.zustellung">\n                        </div>\n                    </div>      \n                    \n                    <div class="col-md-8">\n                        <label for="anmerkung" class="form-label">{{ t(\'global\',\'anmerkung\') }}</label>\n                        <input type="text" :readonly="readonly" class="form-control-sm" :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly }" id="anmerkung" maxlength="64" v-model="currentContact.anmerkung">\n                    </div>                                                            \n\n                </form>        \n\n            </template>\n            <template #footer>\n                <button type="button" class="btn btn-primary" @click="okHandler()" >\n                {{ t(\'ui\',\'speichern\') }}\n                </button>\n            </template>\n        </Modal>\n\n    '};var O={getAllBetriebsmittel:(t,e,n)=>({method:"get",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/"+t+"/"+e,params:{betriebsmitteltypes:n}}),addNewBetriebsmittel:(t,e)=>({method:"post",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/"+t,params:e}),loadBetriebsmittel:t=>({method:"post",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/"+t}),updateBetriebsmittel:(t,e)=>({method:"post",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/"+t,params:e}),deleteBetriebsmittel:t=>({method:"post",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/"+t}),getTypenBetriebsmittel:t=>({method:"get",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/",params:{betriebsmitteltypes:t}}),loadInventarliste:t=>({method:"get",url:"api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/"+t})},B={name:"BootstrapModal",data:()=>({modal:null,fullscreen:!1}),props:{backdrop:{type:[Boolean,String],default:!0,validator:t=>["static",!0,!1].includes(t)},focus:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},noCloseBtn:Boolean,dialogClass:[String,Array,Object],headerClass:{type:[String,Array,Object],default:""},bodyClass:{type:[String,Array,Object],default:"px-4 py-5"},footerClass:{type:[String,Array,Object],default:""},allowFullscreenExpand:{type:Boolean,default:!1}},emits:["hideBsModal","hiddenBsModal","hidePreventedBsModal","showBsModal","shownBsModal"],methods:{dispose(){return this.modal.dispose()},handleUpdate(){return this.modal.handleUpdate()},hide(){return this.modal.hide()},show(t){return this.modal.show(t)},toggle(){return this.modal.toggle()},toggleFullscreen(){this.fullscreen=!this.fullscreen}},mounted(){this.$refs.modal&&(this.modal=new bootstrap.Modal(this.$refs.modal,{backdrop:this.backdrop,focus:this.focus,keyboard:this.keyboard}))},popup(t,e,n,r){const i=this,a={};void 0!==t&&(a.default=()=>t),void 0!==n&&(a.title=()=>n),void 0!==r&&(a.footer=()=>r);let s=!1;return"undefined"!=typeof primevue&&(s=!0),new Promise((t,n)=>{const r=Vue.createApp({name:"ModalTmpApp",setup:()=>()=>Vue.h(i,{class:"fade",...e,ref:"modal","onHidden.bs.modal":r.unmount},a),mounted(){this.$refs.modal.show()},beforeUnmount(){this.$refs.modal&&(!1!==this.$refs.modal.result?t(this.$refs.modal.result):n())},unmounted(){o.parentElement.removeChild(o)}}),o=document.createElement("div");s&&r.use(primevue.config.default,{zIndex:{overlay:9999}}),Promise.resolve().then(function(){return Dt}).then(t=>{r.use(t.default),r.mount(o),document.body.appendChild(o)})})},template:'<div ref="modal" class="bootstrap-modal modal" tabindex="-1" @[`hide.bs.modal`]="$emit(\'hideBsModal\')" @[`hidden.bs.modal`]="$emit(\'hiddenBsModal\')" @[`hidePrevented.bs.modal`]="$emit(\'hidePreventedBsModal\')" @[`show.bs.modal`]="$emit(\'showBsModal\')" @[`shown.bs.modal`]="$emit(\'shownBsModal\')">\n\t\t<div class="modal-dialog" :class="fullscreen ? \'modal-fullscreen\' : dialogClass">\n\t\t\t<div class="modal-content">\n\t\t\t\t<div v-if="$slots.title" class="modal-header" :class="headerClass">\n\t\t\t\t\t<h5 class="modal-title"><slot name="title"/></h5>\n\t\t\t\t\t<div class="d-flex align-items-center ms-auto">\n\t\t\t\t\t\t<button type="button" class="btn ms-auto" style="filter: invert(1)" v-if="allowFullscreenExpand" @click="toggleFullscreen">\n\t\t\t\t\t\t  <i v-if="!fullscreen" class="fa-solid fa-expand"></i>\n\t\t\t\t\t\t  <i v-else class="fa-solid fa-compress"></i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button v-if="!noCloseBtn" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<slot name="modal-header-content"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body" :class="bodyClass">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="$slots.footer" class="modal-footer" :class="footerClass">\n\t\t\t\t\t<slot name="footer"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>'},V={render(){return this.$slots&&this.$slots.default?this.$slots.default():null}};let H={};var I={components:{CoreFilterCmpt:b,BsModal:B,CoreForm:{components:{FhcFragment:V},provide(){return{$registerToForm:t=>{this.inputs.indexOf(t)<0&&this.inputs.push(t)},$clearValidationForName:this.clearValidationForName}},props:{tag:{type:String,default:"form"}},data:()=>({inputs:[]}),computed:{sortedInputs(){return this.inputs.reduce((t,e)=>{let n=e.name||"_default";return t[n]||(t[n]=[]),t[n].push(e),"checkbox"==e.lcType&&"]"==n.substr(-1)&&n.indexOf("[")&&(n=n.substr(0,n.lastIndexOf("[")),t[n]||(t[n]=[]),t[n].push(e)),t},{})},factory(){console.warn("<form>.factory is deprecated! Use <form>.call() instead.");const t=Object.create(Object.getPrototypeOf(this.$fhcApi.factory),Object.getOwnPropertyDescriptors(this.$fhcApi.factory));return t.$fhcApi={get:this.get,post:this.post,_defaultErrorHandlers:this.$fhcApi._defaultErrorHandlers},t}},methods:{get(...t){return"object"==typeof t[0]&&t[0].clearValidation&&t[0].setFeedback?t[0]=this:t.unshift(this),this.$api?this.$api.get(...t):this.$fhcApi.get(...t)},post(...t){return"object"==typeof t[0]&&t[0].clearValidation&&t[0].setFeedback?t[0]=this:t.unshift(this),this.$api?this.$api.post(...t):this.$fhcApi.post(...t)},call(t,e){return this.$api.call(t,e,this)},_sendFeedbackToInput(t,e,n){return t.length?(t.forEach(t=>t.setFeedback(n,e)),!1):!this.$fhcAlert||(this.$fhcAlert[n?"alertSuccess":"alertError"](e),!1)},setFeedback(t,e){if(Array.isArray(e)){let n=e.filter(e=>this._sendFeedbackToInput(this.sortedInputs._default||[],e,t));return n.length?n:null}if("object"==typeof e){let n=Object.entries(e).filter(([e,n])=>this._sendFeedbackToInput(this.sortedInputs[e.split(".")[0]+e.split(".").slice(1).map(t=>`[${t}]`).join("")]||this.sortedInputs._default||[],n,t));return n.length?Object.fromEntries(n):null}return this._sendFeedbackToInput(this.sortedInputs._default||[],e,t)?e:null},clearValidation(){this.inputs.forEach(t=>t.clearValidation())},send(t){return new Promise((e,n)=>{t.then(t=>{if(200==t?.status&&t.data){if("object"!=typeof t.data||!t.data.hasOwnProperty("retval"))return n(t);if(t.data.error)return n(t);const r=t.data.retval;return 1==t.data.code&&this.setFeedback(!0,r),e(r)}n(t)}).catch(t=>{if(400==t?.response?.status&&t.response.data){if("object"!=typeof t.response.data||!t.response.data.hasOwnProperty("retval"))return n(t);this.clearValidation();const e=this.setFeedback(!1,t.response.data.retval);if(e)return t.response.data.retval=e,n(t)}else{if(500!=t?.response?.status)return n(t);if(!this.$fhcAlert)return n(t);this.$fhcAlert.handleSystemError(t)}})})},clearValidationForName(t){(this.sortedInputs[t.split(".")[0]+t.split(".").slice(1).map(t=>`[${t}]`).join("")]||this.sortedInputs._default||[]).forEach(t=>t.clearValidation())}},template:'\n\t<component :is="tag || \'FhcFragment\'" v-bind="$attrs">\n\t\t<slot></slot>\n\t</component>'},FormInput:{name:"FormInput",inheritAttrs:!1,components:{FhcFragment:V},inject:{registerToForm:{from:"$registerToForm",default:null},clearValidationForName:{from:"$clearValidationForName",default:null}},props:{bsFeedback:Boolean,noAutoClass:Boolean,noFeedback:Boolean,inputGroup:Boolean,type:String,name:String,containerClass:[String,Array,Object],label:String,onInput:[Array,Function],"onUpdate:modelValue":[Array,Function]},data:()=>({valid:void 0,feedback:[],modelValueDummy:void 0}),computed:{hasContainer(){if(!this.bsFeedback)return!0;if(this.containerClass)return!0;for(const t in this.autoContainerClass)if(Object.hasOwn(this.autoContainerClass,t))return!0;return!1},acc(){return this.containerClass?"string"==typeof this.containerClass||this.containerClass instanceof String?this.containerClass.split(" ").reduce((t,e)=>(t[e]=!0,t),{}):Array.isArray(this.containerClass)?this.containerClass.reduce((t,e)=>(t[e]=!0,t),{}):this.containerClass:{}},autoContainerClass(){if(this.noAutoClass)return this.acc;const t={...this.acc};return this.inputGroup&&(t["input-group-item"]=!0),"radio"!=this.lcType&&"checkbox"!=this.lcType||(t["form-check"]=!0),this.inputGroup&&t["form-check"]&&(t["input-group-item"]=!1,t["form-check"]=!1,t["input-group-text"]=!0),t},lcType(){return this.type?this.type.toLowerCase():"text"},tag(){switch(this.lcType){case"textarea":case"select":return this.lcType;case"datepicker":return"VueDatePicker";case"autocomplete":return"PvAutocomplete";case"uploadimage":return"UploadImage";case"uploadfile":case"uploaddms":return"UploadDms";default:return"input"}},validationClass(){const t=[];if(this.valid?t.push("is-valid"):!1===this.valid&&t.push("is-invalid"),!this.noAutoClass){let e=this.$attrs.class?this.$attrs.class.split(" "):[];switch(this.lcType){case"select":e.includes("form-select")||t.push("form-select");break;case"range":e.includes("form-range")||t.push("form-range");break;case"radio":case"checkbox":e.includes("form-check-input")||e.includes("btn-check")||t.push("form-check-input");break;case"color":e.includes("form-control-color")||t.push("form-control-color"),e.includes("form-control")||t.push("form-control");break;case"autocomplete":case"datepicker":t.push("p-0"),t.push("border-0"),e.includes("form-control")||t.push("form-control");break;case"text":case"number":case"password":case"textarea":e.includes("form-control")||t.push("form-control")}}return t},feedbackClass(){return this.feedback&&!0!==this.feedback?this.bsFeedback?{"valid-feedback":!0===this.valid,"invalid-feedback":!1===this.valid}:{"valid-tooltip":!0===this.valid,"invalid-tooltip":!1===this.valid}:""},modelValueCmp:{get(){return this.$attrs.hasOwnProperty("modelValue")?this.$attrs.modelValue:this.modelValueDummy},set(t){this.$attrs.hasOwnProperty("modelValue")||(this.modelValueDummy=t),this.$emit("update:modelValue",t)}},idCmp(){let t=this.$attrs.id;if("datepicker"==this.lcType&&(t=this.$attrs.uid),!t&&this.label&&(t="fhc-form-input"),t)return"datepicker"==this.lcType&&(t="dp-input-"+t),void 0===H[t]&&(H[t]=0),t+"-"+H[t]++}},methods:{clearValidation(){this.valid=void 0,this.feedback=[]},clearValidationForThisName(){void 0!==this.valid&&(this.clearValidationForName&&this.name?this.clearValidationForName(this.name):this.clearValidation())},setFeedback(t,e){if(e||(e=[]),Array.isArray(e)||(e=[e]),this.valid=t,this.name&&("radio"==this.lcType||"checkbox"==this.lcType)){const t='input[type="'+this.lcType+'"][name="'+this.name+'"]';if([...this.$el.parentNode.querySelectorAll(t)].pop()!=this.$refs.input)return}this.feedback=e},_loadComponents(){"VueDatePicker"!=this.tag||this._.components.VueDatePicker?"PvAutocomplete"!=this.tag||this._.components.PvAutocomplete?"UploadImage"!=this.tag||this._.components.UploadImage?"UploadDms"!=this.tag||this._.components.UploadDms||(this._.components.UploadDms=Vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return Yt}))):this._.components.UploadImage=Vue.defineAsyncComponent(()=>Promise.resolve().then(function(){return Kt})):this._.components.PvAutocomplete=primevue.autocomplete:this._.components.VueDatePicker=Vue.defineAsyncComponent(()=>import("../../../../../../js/components/vueDatepicker.js.php?2025102901"))}},beforeMount(){this._loadComponents()},beforeUpdate(){this._loadComponents()},mounted(){this.registerToForm&&this.registerToForm(this)},template:'\n\t<component :is="!hasContainer ? \'FhcFragment\' : \'div\'" class="position-relative" :class="autoContainerClass">\n\t\t<label v-if="label && lcType != \'radio\' && lcType != \'checkbox\'" :class="!noAutoClass && \'form-label\'" :for="idCmp">{{label}}</label>\n\t\t<input v-if="tag == \'input\'" :type="lcType" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)">\n\t\t<textarea v-else-if="tag == \'textarea\'" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)"></textarea>\n\t\t<select v-else-if="tag == \'select\'" ref="input" v-model="modelValueCmp" v-bind="$attrs" :id="idCmp" :name="name" :class="validationClass" :modelValue="undefined" @input="clearValidationForThisName(); $emit(\'input\', $event)">\n\t\t\t<slot></slot>\n\t\t</select>\n\t\t<component\n\t\t\tv-else-if="tag == \'VueDatePicker\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:uid="idCmp ? idCmp.substr(9) : idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t:input-class-name=\n\t\t\t"[...Object.entries({\'form-control\': !noAutoClass, \'is-valid\': valid === true, \'is-invalid\': valid === false}).reduce((a,[k,v]) => {if(v) a.push(k);return a}, []), ...($attrs[\'input-class-name\'] ? $attrs[\'input-class-name\'].split(\' \') : [])].join(\' \')"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<component\n\t\t\tv-else-if="tag == \'PvAutocomplete\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:input-props="{name}"\n\t\t\t:class="validationClass"\n\t\t\t:input-class="[...Object.entries({\'form-control\': !noAutoClass, \'is-valid\': valid === true, \'is-invalid\': valid === false}).reduce((a,[k,v]) => {if(v) a.push(k);return a}, []), ...($attrs[\'input-class\'] ? $attrs[\'input-class\'].split(\' \') : [])].join(\' \')"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t\t<template #chip="data"><slot name="chip" v-bind="data"></slot></template>\n\t\t\t<template #header="data"><slot name="header" v-bind="data"></slot></template>\n\t\t\t<template #footer="data"><slot name="footer" v-bind="data"></slot></template>\n\t\t\t<template #option="data"><slot name="option" v-bind="data"></slot></template>\n\t\t\t<template #optiongroup="data"><slot name="optiongroup" v-bind="data"></slot></template>\n\t\t\t<template #content="data"><slot name="content" v-bind="data"></slot></template>\n\t\t\t<template #loader="data"><slot name="loader" v-bind="data"></slot></template>\n\t\t\t<template #empty="data"><slot name="empty" v-bind="data"></slot></template>\n\t\t\t<template #dropdownicon="data"><slot name="dropdownicon" v-bind="data"></slot></template>\n\t\t\t<template #removetokenicon="data"><slot name="removetokenicon" v-bind="data"></slot></template>\n\t\t\t<template #loadingicon="data"><slot name="loadingicon" v-bind="data"></slot></template>\n\t\t</component>\n\t\t<component\n\t\t\tv-else-if="tag == \'UploadDms\'"\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t:input-class="validationClass"\n\t\t\t:no-list="inputGroup"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<component\n\t\t\tv-else\n\t\t\tref="input"\n\t\t\t:is="tag"\n\t\t\t:type="type"\n\t\t\tv-model="modelValueCmp"\n\t\t\tv-bind="$attrs"\n\t\t\t:id="idCmp"\n\t\t\t:name="name"\n\t\t\t:class="validationClass"\n\t\t\t@update:model-value="clearValidationForThisName"\n\t\t\t>\n\t\t\t<slot></slot>\n\t\t</component>\n\t\t<label v-if="label && (lcType == \'radio\' || lcType == \'checkbox\')" :for="idCmp" :class="!noAutoClass && \'form-check-label\'" v-html="label"></label>\n\t\t<div v-if="valid !== undefined && feedback.length && !noFeedback" :class="feedbackClass">\n\t\t\t<template v-for="(msg, i) in feedback" :key="i">\n\t\t\t\t<hr v-if="i" class="m-0">\n\t\t\t\t{{msg}}\n\t\t\t</template>\n\t\t</div>\n\t</component>\n\t'}},inject:{cisRoot:{from:"cisRoot"}},props:{endpoint:{type:Object,required:!0},typeId:String,id:{type:[Number,String],required:!0},uid:{type:[Number,String],required:!0},betriebsmittelTypes:{type:Array,default:null},filterByProvidedTypes:Boolean},data(){return{tabulatorOptions:{ajaxURL:"dummy",ajaxRequestFunc:()=>this.$api.call(this.endpoint.getAllBetriebsmittel(this.typeId,this.id,this.filterByProvidedTypes?this.betriebsmittelTypes:null)),ajaxResponse:(t,e,n)=>n.data,columns:[{title:"Nummer",field:"nummer",width:150},{title:"PersonId",field:"person_id",visible:!1},{title:"Typ",field:"betriebsmitteltyp",width:125},{title:"Anmerkung",field:"anmerkung",visible:!1},{title:"Retourdatum",field:"retouram",width:128,formatter:function(t){const e=t.getValue();if(!e)return"";return new Date(e).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!1})}},{title:"Beschreibung",field:"beschreibung"},{title:"UID",field:"uid",width:87},{title:"Kaution",field:"kaution",visible:!1},{title:"Ausgabedatum",field:"ausgegebenam",width:144,visible:!1,formatter:function(t){const e=t.getValue();if(!e)return"";return new Date(e).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!1})}},{title:"Betriebsmittel ID",field:"betriebsmittel_id",visible:!1},{title:"Betriebsmittelperson ID",field:"betriebsmittelperson_id",visible:!1},{title:"Aktionen",field:"actions",minWidth:150,maxWidth:150,formatter:(t,e,n)=>{let r=document.createElement("div");r.className="d-flex gap-2";let i=document.createElement("button");i.className="btn btn-outline-secondary btn-action",i.innerHTML='<i class="fa fa-print"></i>',i.title=this.$p.t("betriebsmittel","btn_printUebernahmebestaetigung");let a=t.getData();return i.addEventListener("click",t=>{let e=this.cisRoot+"/content/pdfExport.php?xml=betriebsmittelperson.rdf.php&xsl=Uebernahme&id="+a.betriebsmittelperson_id+"&output=pdf";window.open(e,"_blank")}),r.append(i),i=document.createElement("button"),i.className="btn btn-outline-secondary btn-action",i.innerHTML='<i class="fa fa-edit"></i>',i.title=this.$p.t("betriebsmittel","btn_editBetriebsmittel"),i.addEventListener("click",e=>this.actionEditBetriebsmittel(t.getData().betriebsmittelperson_id)),r.append(i),i=document.createElement("button"),i.className="btn btn-outline-secondary btn-action",i.innerHTML='<i class="fa fa-xmark"></i>',i.title=this.$p.t("betriebsmittel","btn_deleteBetriebsmittel"),i.addEventListener("click",()=>this.actionDeleteBetriebsmittel(t.getData().betriebsmittelperson_id)),r.append(i),r},frozen:!0}],layout:"fitColumns",layoutColumnsOnNewData:!1,height:"550",persistenceID:"core-betriebsmittel"},tabulatorEvents:[{event:"tableBuilt",handler:async()=>{await this.$p.loadCategory(["wawi","global","infocenter","betriebsmittel","person"]);let t=this.$refs.table.tabulator.columnManager;t.getColumnByField("nummer").component.updateDefinition({title:this.$p.t("wawi","nummer")}),t.getColumnByField("betriebsmitteltyp").component.updateDefinition({title:this.$p.t("global","typ")}),t.getColumnByField("anmerkung").component.updateDefinition({title:this.$p.t("global","anmerkung")}),t.getColumnByField("retouram").component.updateDefinition({title:this.$p.t("wawi","retourdatum")}),t.getColumnByField("beschreibung").component.updateDefinition({title:this.$p.t("global","beschreibung")}),t.getColumnByField("kaution").component.updateDefinition({title:this.$p.t("infocenter","kaution")}),t.getColumnByField("ausgegebenam").component.updateDefinition({title:this.$p.t("wawi","ausgabedatum")}),t.getColumnByField("betriebsmittel_id").component.updateDefinition({title:this.$p.t("ui","betriebsmittel_id")}),t.getColumnByField("betriebsmittelperson_id").component.updateDefinition({title:this.$p.t("ui","betriebsmittelperson_id")}),t.getColumnByField("person_id").component.updateDefinition({title:this.$p.t("person","person_id")}),t.getColumnByField("uid").component.updateDefinition({title:this.$p.t("person","uid")})}}],listBetriebsmitteltyp:[],formData:{ausgegebenam:new Date,betriebsmitteltyp:"Zutrittskarte"},statusNew:!0,filteredInventar:[]}},watch:{id(){this.$refs.table.reloadTable()}},methods:{actionEditBetriebsmittel(t){this.statusNew=!1,this.loadBetriebsmittel(t).then(this.$refs.betriebsmittelModal.show)},actionNewBetriebsmittel(){this.resetModal(),this.$refs.betriebsmittelModal.show()},actionDeleteBetriebsmittel(t){this.$fhcAlert.confirmDelete().then(e=>e?t:Promise.reject({handled:!0})).then(t=>this.$api.call(this.endpoint.deleteBetriebsmittel(t))).then(t=>{this.$fhcAlert.alertSuccess(this.$p.t("ui","successDelete")),window.scrollTo(0,0),this.reload()}).catch(this.$fhcAlert.handleSystemError)},addNewBetriebsmittel(){return this.formData.uid=this.uid,"Inventar"==this.formData.betriebsmitteltyp&&(this.formData.betriebsmittel_id=this.formData.inventarData?.betriebsmittel_id),this.$refs.betriebsmittelData.call(this.endpoint.addNewBetriebsmittel(this.id,this.formData)).then(t=>{this.$fhcAlert.alertSuccess(this.$p.t("ui","successSave")),this.$refs.betriebsmittelModal.hide(),this.resetModal(),window.scrollTo(0,0),this.reload()}).catch(this.$fhcAlert.handleSystemError)},updateBetriebsmittel(t){return"Inventar"==this.formData.betriebsmitteltyp&&(this.formData.betriebsmittel_id=this.formData.inventarData?.betriebsmittel_id),this.$refs.betriebsmittelData.call(this.endpoint.updateBetriebsmittel(t,this.formData)).then(t=>{this.$fhcAlert.alertSuccess(this.$p.t("ui","successSave")),this.$refs.betriebsmittelModal.hide(),this.resetModal(),window.scrollTo(0,0),this.reload()}).catch(this.$fhcAlert.handleSystemError)},loadBetriebsmittel(t){return this.resetModal(),this.statusNew=!1,this.$api.call(this.endpoint.loadBetriebsmittel(t)).then(t=>{this.formData=t.data}).catch(this.$fhcAlert.handleSystemError)},searchInventar(t){const e=encodeURIComponent(t.query);return this.$api.call(this.endpoint.loadInventarliste(e)).then(t=>{this.filteredInventar=t.data})},reload(){this.$refs.table.reloadTable()},resetModal(){this.formData={},this.formData.ausgegebenam=new Date,this.formData.retouram=null,this.formData.betriebsmitteltyp=null,this.formData.nummer=null,this.formData.nummer2=null,this.formData.kaution=null,this.formData.anmerkung=null,this.formData.beschreibung=null,this.statusNew=!0}},created(){return this.$api.call(this.endpoint.getTypenBetriebsmittel(this.betriebsmittelTypes)).then(t=>{this.listBetriebsmitteltyp=t.data}).catch(this.$fhcAlert.handleSystemError)},template:'\n\t<div class="core-betriebsmittel h-100 d-flex flex-column">\n\t\t<core-filter-cmpt\n\t\t\tref="table"\n\t\t\t:tabulator-options="tabulatorOptions"\n\t\t\t:tabulator-events="tabulatorEvents"\n\t\t\ttable-only\n\t\t\t:side-menu="false"\n\t\t\treload\n\t\t\t:reload-btn-infotext="this.$p.t(\'table\', \'reload\')"\n\t\t\tnew-btn-show\n\t\t\t:new-btn-label="this.$p.t(\'ui\', \'betriebsmittel\')"\n\t\t\t@click:new="actionNewBetriebsmittel"\n\t\t\t>\n\t\t</core-filter-cmpt>\t\t\n\t\t\n\t\t\x3c!--Modal: betriebsmittelModal--\x3e\n\t\t<bs-modal ref="betriebsmittelModal">\n\t\t\t<template #title>\n\t\t\t\t<p v-if="statusNew" class="fw-bold mt-3">{{$p.t(\'ui\', \'add_betriebsmittel\')}}</p>\n\t\t\t\t<p v-else class="fw-bold mt-3">{{$p.t(\'ui\', \'edit_betriebsmittel\')}}</p>\n\t\t\t</template>\n\t\t\t\n\t\t\t<core-form class="row g-3" ref="betriebsmittelData">\t\t\n\t\t\t\t<legend>Details</legend>\n\t\t\t\t<div class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="select"\n\t\t\t\t\t\t:label="$p.t(\'global/typ\') + \' *\'"\n\t\t\t\t\t\tname="betriebsmitteltyp"\n\t\t\t\t\t\tv-model="formData.betriebsmitteltyp"\n\t\t\t\t\t\t:disabled="!statusNew"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<option\n\t\t\t\t\t\t\tv-for="entry in listBetriebsmitteltyp"\n\t\t\t\t\t\t\t:key="entry.betriebsmitteltyp"\n\t\t\t\t\t\t\t:value="entry.betriebsmitteltyp"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{entry.beschreibung}}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div v-if="formData.betriebsmitteltyp == \'Inventar\'" class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="autocomplete"\n\t\t\t\t\t\t:label="$p.t(\'wawi/inventarnummer\')"\n\t\t\t\t\t\tname="betriebsmittel_id"\n\t\t\t\t\t\tv-model="formData.inventarData"\n\t\t\t\t\t\toption-label="dropdowntext" \n\t\t\t\t\t\t:suggestions="filteredInventar" \n\t\t\t\t\t\t@complete="searchInventar" \n\t\t\t\t\t\t:min-length="3"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t<div v-else-if="formData.inventarnummer" class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t:label="$p.t(\'wawi/inventarnummer\')"\n\t\t\t\t\t\tname="inventarnummer"\n\t\t\t\t\t\tv-model="formData.inventarnummer"\n\t\t\t\t\t\t:disabled="!statusNew"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div v-if="formData.betriebsmitteltyp!=\'Inventar\' && !formData.inventarnummer" class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t:label="$p.t(\'wawi/nummer\')"\n\t\t\t\t\t\tname="nummer"\n\t\t\t\t\t\tv-model="formData.nummer"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div v-if="formData.betriebsmitteltyp!=\'Inventar\' && !formData.inventarnummer" class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t:label="$p.t(\'wawi/nummer\') + \' 2\'"\n\t\t\t\t\t\tname="nummer2"\n\t\t\t\t\t\tv-model="formData.nummer2"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div v-if="formData.betriebsmitteltyp!=\'Inventar\'" class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="textarea"\n\t\t\t\t\t\t:label="$p.t(\'global/beschreibung\')"\n\t\t\t\t\t\tname="beschreibung"\n\t\t\t\t\t\tv-model="formData.beschreibung"\n\t\t\t\t\t\t:disabled="formData.inventarnummer"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t:label="$p.t(\'infocenter/kaution\')"\n\t\t\t\t\t\tname="kaution"\n\t\t\t\t\t\tv-model="formData.kaution"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="textarea"\n\t\t\t\t\t\t:label="$p.t(\'global/anmerkung\')"\n\t\t\t\t\t\tname="anmerkung"\n\t\t\t\t\t\tv-model="formData.anmerkung"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="DatePicker"\n\t\t\t\t\t\t:label="$p.t(\'wawi/ausgegebenam\')"\n\t\t\t\t\t\tname="ausgegebenam"\n\t\t\t\t\t\tv-model="formData.ausgegebenam"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:enable-time-picker="false"\n\t\t\t\t\t\ttext-input\n\t\t\t\t\t\tformat="dd.MM.yyyy"\n\t\t\t\t\t\tpreview-format="dd.MM.yyyy"\n\t\t\t\t\t\t:teleport="true"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="row mb-3">\n\t\t\t\t\t<form-input\n\t\t\t\t\t\ttype="DatePicker"\n\t\t\t\t\t\t:label="$p.t(\'wawi/retouram\')"\n\t\t\t\t\t\tname="retouram"\n\t\t\t\t\t\tv-model="formData.retouram"\n\t\t\t\t\t\tauto-apply\n\t\t\t\t\t\t:enable-time-picker="false"\n\t\t\t\t\t\ttext-input\n\t\t\t\t\t\tformat="dd.MM.yyyy"\n\t\t\t\t\t\tpreview-format="dd.MM.yyyy"\n\t\t\t\t\t\t:teleport="true"\n\t\t\t\t\t\t>\n\t\t\t\t\t</form-input>\n\t\t\t\t</div>\n\t\t\t</core-form>\n\t\t\t\n\t\t\t<template #footer>\n\t\t\t\t<button type="button" class="btn btn-primary" @click="statusNew ? addNewBetriebsmittel() : updateBetriebsmittel(formData.betriebsmittelperson_id)">{{$p.t(\'ui\', \'speichern\')}}</button>\n\t\t\t</template>\n\t\t</bs-modal>\n\t</div>'},z={getOrgStructure:t=>({method:"get",url:`/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgStructure?oe=${t}`}),getOrgPersonen:t=>({method:"get",url:`/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgPersonen?oe=${t}`}),getOrgHeads:()=>({method:"get",url:"extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgHeads"})};const M={name:"OrgChooser",props:{placeholder:String,customClass:String,oe:String},emits:["orgSelected"],setup(t,{emit:e}){const n=Vue.ref([]),r=Vue.ref(!1),i=Vue.toRefs(t).oe,a=Vue.ref(),s=Vue.inject("$api");Vue.onMounted(()=>{(async()=>{r.value=!0;try{const i=await s.call(z.getOrgHeads());n.value=i.data,n.value.length>0&&((null==t.oe||null!=t.oe&&""==t.oe)&&(a.value=n.value[0].oe_kurzbz),e("orgSelected",a.value)),r.value=!1}catch(t){console.log(t),r.value=!1}})()});return Vue.watch(i,(t,e)=>{console.log("prop value changed",t),a.value=t}),{orgList:n,selected:a,orgSelected:t=>{e("orgSelected",t.target.value)}}},template:'\n    <select  id="orgHeadChooser" v-model="selected" @change="orgSelected" class="form-control-sm" aria-label=".form-select-sm " >\n        <option v-for="(item, index) in orgList" :value="item.oe_kurzbz"  :key="item.oe_kurzbz">\n            {{ item.bezeichnung }}\n        </option>         \n    </select>\n    '};var L={getContractFunctions(t){var e="/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getContractFunctions";return null!=t&&(e=e+"/"+t),{method:"get",url:e}},getOrgetsForCompany:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgetsForCompany/"+t}),getCompanyByOrget:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getCompanyByOrget/"+t}),getCurrentFunctions:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getCurrentFunctions/"+t+"/"+e}),getAllUserFunctions:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getAllUserFunctions/"+t}),getAllFunctions:()=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getAllFunctions"})};const R={name:"JobFunction",components:{Modal:C,ModalDialog:E,OrgChooser:M,datepicker:VueDatePicker},props:{modelValue:{type:Object,default:()=>({}),required:!1},config:{type:Object,default:()=>({}),required:!1},readonlyMode:{type:Boolean,required:!1,default:!1},personID:{type:Number,required:!1},personUID:{type:String,required:!1},writePermission:{type:Boolean,required:!1}},emits:["updateHeader"],setup(t,{emit:e}){const n=Vue.inject("$api"),r=Vue.inject("$fhcAlert"),i=Vue.ref(!1),{t:a}=D(),s=Vue.computed(()=>t.personID),o=Vue.computed(()=>t.personUID),l=Vue.ref(),d=Vue.ref(!1),u=Vue.computed({get:()=>t.modelValue,set:t=>e("update:modelValue",t)}),p=Vue.ref(),c=Vue.ref([]),f=Vue.ref([]),h=Vue.ref([{value:"",label:"-"}]),m=Vue.ref(!0),g=Vue.ref(null),v=Vue.ref(null),b=Vue.reactive([]);FHC_JS_DATA_STORAGE_OBJECT.app_root,FHC_JS_DATA_STORAGE_OBJECT.ci_router;const y=!0!==t.readonlyMode?VueRouter.useRoute():null,A=(t,e)=>t.reduce((t,n)=>({...t,[n[e]]:n}),{}),_=async()=>{if(null!=s.value||null!=u.value.personID){d.value=!0;try{const t=await n.call(L.getAllUserFunctions(u.value.personUID||o.value));if("success"!=t.meta.status){let t=[];b.value=[],c.value=A(t,"benutzerfunktion_id")}else{let e=t.data;b.value=t.data,c.value=A(e,"benutzerfunktion_id")}}catch(t){console.log(t)}finally{d.value=!1}}else c.value=[]},C=()=>({benutzerfunktion_id:0,uid:u.value.personUID||o.value,oe_kurzbz:"",funktion_kurzbz:"",datum_von:"",datum_bis:"",bezeichnung:"",wochenstunden:0}),F=Vue.ref(C()),k=Vue.ref(C());Vue.watch([s,o],([t,e])=>{_()}),Vue.watch(p,t=>{j(t),J()});Vue.onMounted(async()=>{F.value=C(),await _();const e=t=>t.getValue()?.replace(/(.*)-(.*)-(.*)/,"$3.$2.$1"),n=(t,e)=>{const n=document.createElement("button"),r=document.createAttribute("class");r.value="btn btn-outline-secondary btn-sm",n.setAttributeNode(r),n.addEventListener("click",e);const i=document.createElement("i"),a=document.createAttribute("class");return a.value=t,i.setAttributeNode(a),n.appendChild(i),n},r=t=>{const e=document.createElement("div"),r=document.createAttribute("class");r.value="d-grid gap-2 d-md-flex justify-content-end align-middle",e.setAttributeNode(r);const i=n("fa fa-xmark",()=>{x(t.getValue())}),a=n("fa fa-pen",()=>{E(t.getValue())});return null===t.getRow().getData().dienstverhaeltnis_unternehmen&&(e.appendChild(a),e.appendChild(i)),e},i=[{title:a("person","dv_unternehmen"),field:"dienstverhaeltnis_unternehmen",formatter:e=>{if(!0===t.readonlyMode)return null!=e.getValue()?e.getValue():"";const n=N+y.params.id+"/"+y.params.uid+"/contract/"+e.getRow().getData().dienstverhaeltnis_id;return null!=e.getValue()?`<a href="${n}">`+e.getValue()+"</a>":""},sorter:"string",headerFilter:"list",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:a("person","zuordnung_taetigkeit"),field:"funktion_beschreibung",hozAlign:"left",headerFilter:"list",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:a("lehre","organisationseinheit"),field:"funktion_oebezeichnung",headerFilter:"list",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:a("person","wochenstunden"),field:"wochenstunden",hozAlign:"right",width:140,headerFilter:!0},{title:a("ui","from"),field:"datum_von",hozAlign:"center",formatter:e,width:140,sorter:"string",headerFilter:!0,headerFilterFunc:o},{title:a("global","bis"),field:"datum_bis",hozAlign:"center",formatter:e,width:140,sorter:"string",headerFilter:!0,headerFilterFunc:o},{title:a("ui","bezeichnung"),field:"bezeichnung",hozAlign:"left",headerFilter:"list",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}}];!1===t.readonlyMode&&i.push({title:"",field:"benutzerfunktion_id",formatter:r,hozAlign:"right",width:100,headerSort:!1,frozen:!0});let s={height:"100%",layout:"fitColumns",movableColumns:!0,reactiveData:!0,columns:i,data:P.value};function o(t,e,n,r){const i=new Date(e);i.setHours(0,0,0,0);let[a,s,o]=t.split(".");if(o<1e3)return!0;const l=new Date(+o,+s-1,+a);return!(d=l,d instanceof Date&&isFinite(d)&&l-i!=0);var d}v.value=new Tabulator(g.value,s),v.value.on("tableBuilt",()=>{})});const P=Vue.computed(()=>(c.value?Object.values(c.value):[]).filter(t=>!m.value||m.value&&t.aktiv)),$=t=>{let e=P.value.filter(e=>e.funktion_kurzbz==t);return e.length>0?e[0].bezeichnung:""};Vue.watch(P,(t,e)=>{v.value?.setData(P.value)},{deep:!0});const w=Vue.ref(),S=()=>{w.value.hide()},E=async t=>{F.value={...c.value[t]},d.value=!0;try{const t=await n.call(L.getCompanyByOrget(F.value.oe_kurzbz));"success"==t.meta.status?p.value=t.data[0].oe_kurzbz:console.log("company not found for orget!")}catch(t){r.handleSystemError(t)}finally{d.value=!1}w.value.show()},x=async t=>{if(F.value={...c.value[t]},!1!==await r.confirm({message:a("person","funktion")+" "+$(F.value?.funktion_kurzbz)+"  ("+z(F.value?.datum_von)+"-"+(null!=F.value.datum_bis?z(F.value.datum_bis):"?")+") "+a("person","wirklichLoeschen"),acceptLabel:"Löschen",acceptClass:"p-button-danger"}))try{"success"==(await n.call(T.deletePersonJobFunction(t))).meta.status&&(delete c.value[t],R(),u.value.updateHeader())}catch(t){r.handleSystemError(t)}finally{d.value=!1}},O=Vue.ref(),B=Vue.reactive({beginnBlurred:!1,orgetBlurred:!1,funktionBlurred:!1,wasValidated:!1}),V=t=>!!t&&""!=t.trim(),H=()=>(B.orgetBlurred=!0,B.funktionBlurred=!0,B.beginnBlurred=!0,V(F.value.datum_von)&&V(F.value.oe_kurzbz)&&V(F.value.funktion_kurzbz)),I=Vue.computed(()=>Object.keys(F.value).some(t=>F.value[t]!==k.value[t])),z=t=>null!=t&&""!=t?t.substring(8,10)+"."+t.substring(5,7)+"."+t.substring(0,4):"",M=()=>{r.alertSuccess(a("person","funktionGespeichert"))},R=()=>{r.alertSuccess(a("person","funktionGeloescht"))},j=async t=>{if(""===t)return;const e=(await n.call(L.getOrgetsForCompany(t))).data;e.unshift({value:"",label:a("ui","bitteWaehlen")}),h.value=await e},J=async(t,e)=>{const r=(await n.call(L.getAllFunctions())).data;r.unshift({value:"",label:a("ui","bitteWaehlen")}),f.value=r},N=`/${FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\/\/)(.*?\/)/g,"")+FHC_JS_DATA_STORAGE_OBJECT.ci_router}/extensions/FHC-Core-Personalverwaltung/Employees/`;return{jobfunctionList:c,orgUnitList:h,jobfunctionListArray:P,jobfunctionDefList:f,currentValue:F,readonly:i,frmState:B,dialogRef:l,jobFunctionFrm:O,modalRef:w,fullPath:N,route:y,aktivChecked:m,unternehmen:p,tabulator:v,table:g,toggleMode:async()=>{if(i.value)k.value={...F.value};else if(I.value){const t=await l.value.show();if(!t)return;console.log("ok=",t),F.value=k.value}i.value=!i.value},formatDate:z,notEmpty:V,showAddModal:()=>{F.value=C(),B.orgetBlurred=!1,B.funktionBlurred=!1,B.beginnBlurred=!1,w.value.show()},hideModal:S,okHandler:async()=>{if(H()){try{let t={...F.value};delete t.dienstverhaeltnis_id,delete t.dienstverhaeltnis_unternehmen,delete t.fachbereich_bezeichnung,delete t.funktion_oebezeichnung,delete t.aktiv,delete t.funktion_beschreibung;"success"==(await n.call(T.upsertPersonJobFunction(t))).meta.status&&(await _(),console.log("job function successfully saved"),u.value.updateHeader(),M())}catch(t){r.handleSystemError(t)}finally{d.value=!1}S()}else console.log("form invalid")},showEditModal:E,t:a,unternehmenSelectedHandler:t=>{p.value=t}}},template:'\n    <div class="row" v-if="readonlyMode === false">\n        \n    </div>\n    <div class="row pt-md-4">      \n         <div class="col">\n             <div class="card">\n                <div class="card-header">\n                    <div class="h5"><h5>{{ t(\'person\',\'funktionen\') }}</h5></div>        \n                </div>\n\n                <div class="card-body">\n                    <div class="d-grid d-md-flex justify-content-between pt-2 pb-3" v-if="readonlyMode === false">\n                        <button type="button" class="btn btn-sm btn-primary me-3" @click="showAddModal()">\n                            <i class="fa fa-plus"></i> {{ t(\'person\',\'funktion\') }}\n                        </button>\n                        <div class="form-check">\n                            <input class="form-check-input" type="checkbox" role="switch" id="aktivChecked" v-model="aktivChecked">\n                            <label class="form-check-label" for="aktivChecked">Nur aktive anzeigen</label>\n                        </div>\n                    </div>\n\n                    \x3c!-- TABULATOR --\x3e\n                    <div ref="table" class="fhc-tabulator"></div>\n                \n                </div>\n             </div>\n         </div>\n    </div>\n            \n\n    \x3c!-- detail modal --\x3e\n    <Modal :title="t(\'person\',\'funktion\')" ref="modalRef" v-if="readonlyMode === false">\n        <template #body>\n            <form class="row g-3" ref="jobFunctionFrm">\n                            \n                <div class="col-md-8">\n                    <label class="form-label">{{ t(\'core\',\'unternehmen\') }}</label><br>\n                    <org-chooser  @org-selected="unternehmenSelectedHandler" :oe="unternehmen" class="form-select form-select-sm"></org-chooser>\n                </div>\n                <div class="col-md-4">\n                </div>\n                \x3c!--  --\x3e\n                <div class="col-md-8">\n                    <label class="required form-label">{{ t(\'lehre\',\'organisationseinheit\') }}</label><br>\n                    <select id="oe_kurzbz" v-model="currentValue.oe_kurzbz" \n                        @blur="frmState.orgetBlurred = true"\n                        class="form-select form-select-sm" aria-label=".form-select-sm " \n                        :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly, \'is-invalid\': !notEmpty(currentValue.oe_kurzbz) && frmState.orgetBlurred}"\n                        >\n                        <option v-for="(item, index) in orgUnitList" :value="item.value">\n                            {{ item.label }}\n                        </option>                       \n                    </select>\n                </div>\n                <div class="col-md-4">\n                </div>\n                \x3c!--  --\x3e\n                <div class="col-md-8">\n                    <label for="funktion_kurzbz" class="required form-label">{{ t(\'person\',\'funktion\') }}</label><br>\n                    <select id="_kurzbz" v-model="currentValue.funktion_kurzbz" \n                        @blur="frmState.funktionBlurred = true"\n                        class="form-select form-select-sm" aria-label=".form-select-sm " \n                        :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly, \'is-invalid\': !notEmpty(currentValue.funktion_kurzbz) && frmState.funktionBlurred}"\n                        >\n                        <option v-for="(item, index) in jobfunctionDefList" :value="item.value">\n                            {{ item.label }}\n                        </option>                       \n                    </select>\n                </div>\n                <div class="col-md-4"></div>\n                \x3c!-- --\x3e\n                <div class="col-md-2">\n                    <label for="uid" class="form-label">{{ t(\'person\',\'wochenstunden\') }}</label>\n                    <input type="number"  :readonly="readonly" class="form-control-sm" :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly}" id="bank" v-model="currentValue.wochenstunden">\n                </div>\n                \x3c!--  --\x3e\n                <div class="col-md-3">\n                    <label for="beginn" class="required form-label">{{ t(\'ui\',\'from\') }}</label>\n                    <datepicker id="beginn"\n                        :teleport="true" \n                        @blur="frmState.beginnBlurred = true" \n                        :input-class-name="(!notEmpty(currentValue.datum_von) && frmState.beginnBlurred) ? \'dp-invalid-input\' : \'\'" \n                        v-model="currentValue.datum_von"\n                        v-bind:enable-time-picker="false"\n                        text-input \n                        locale="de"\n                        format="dd.MM.yyyy"\n                        auto-apply \n                        model-type="yyyy-MM-dd"></datepicker>\n                </div>\n                <div class="col-md-3">\n                    <label for="ende" class="form-label">{{ t(\'global\',\'bis\') }}</label>\n                    <datepicker id="ende"\n                        :teleport="true" \n                        v-model="currentValue.datum_bis"\n                        v-bind:enable-time-picker="false"\n                        text-input \n                        locale="de"\n                        format="dd.MM.yyyy"\n                        auto-apply \n                        model-type="yyyy-MM-dd"></datepicker>                   \n                </div>\n                <div class="col-md-3">\n                </div>\n                \x3c!-- --\x3e\n                <div class="col-md-8">\n                    <label for="bezeichnung" class="form-label">{{ t(\'ui\',\'bezeichnung\') }}</label>\n                    <input type="text"  :readonly="readonly" class="form-control-sm" :class="{ \'form-control-plaintext\': readonly, \'form-control\': !readonly}" id="bezeichnung" v-model="currentValue.bezeichnung">\n                </div>\n                <div class="col-md-4">\n                </div>\n                \n                \n                \x3c!-- changes --\x3e\n                <div class="col-8">\n                    <div class="modificationdate">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }} [id={{ currentValue.benutzerfunktion_id }}]</div>\n                </div>\n                \n            </form>\n        </template>\n        <template #footer>\n            <button type="button" class="btn btn-primary" @click="okHandler()" >\n                {{ t(\'ui\',\'speichern\') }}\n            </button>\n        </template>\n\n    </Modal>\n\n    <ModalDialog :title="t(\'global\',\'warnung\')" ref="dialogRef" v-if="readonlyMode === false">\n      <template #body>\n        {{ t(\'person\',\'funktionNochNichtGespeichert\') }}\n      </template>\n    </ModalDialog>\n\n    '};var j={getCurrentVBs:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentVBs/"+t}),getCurrentAndFutureVBs(t,e){var n="/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentAndFutureVBs/"+t;if(void 0!==e){n=n+"?"+new URLSearchParams(e).toString()}return{method:"get",url:n}},getAllVBs:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getAllVBs/"+t}),getVB:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getVB/"+t})},J={filterPerson:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/filterPerson",params:t}),createEmployee:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/createEmployee",params:t}),personAbteilung:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personAbteilung",params:{uid:t}}),personHeaderData:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/headerData",params:{person_id:t,uid:e}}),dvByPerson:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvByPerson",params:{uid:t}}),getCurrentDV:(t,e)=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentDV",params:{uid:t,d:e}}),deleteDV:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/deleteDV",params:{dv_id:t}}),uploadPersonEmployeeFoto:(t,e)=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/uploadPersonEmployeeFoto",params:{person_id:t,imagedata:e}}),deletePersonEmployeeFoto:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonEmployeeFoto",params:{person_id:t}}),getEmployeesWithoutContract:()=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getEmployeesWithoutContract"}),dvInfoByPerson:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvInfoByPerson",params:{uid:t}})};const N={name:"EmployeeStatus",props:{tags:{default:[],type:Array}},expose:["refresh"],setup(t){const{watch:e,ref:n,reactive:r,computed:i,onMounted:a,inject:s}=Vue,o=VueRouter.useRoute(),l=VueRouter.useRouter(),d=n(),u=n(),p=n([]),c=n([]),f=n(new Date),h=n(!1),m=s("vertragsarten"),g=s("karenztypen"),v=s("teilzeittypen"),b=s("$api"),y=t=>{let e=m.value.find(e=>e.value==t);return null!=e?e.label:t},A=t=>{let e=g.value.find(e=>e.value==t);return null!=e?e.label:t},_=t=>{let e=v.value.find(e=>e.value==t);return null!=e?e.label:t};let C=Vue.ref([]);const F=Vue.ref(t.tags),k=async t=>{if(null==t)return p.value=[],void(c.value=[]);h.value=!0;try{const e=await b.call(J.dvByPerson(t));p.value=e.data||[],h.value=!1,(()=>{let t=0,e=[];C.value=[],p.value.forEach(n=>{let r=new Date(n.von),i=null!=n.bis?new Date(n.bis):null;f.value>=r&&(null==i||i>=f.value)&&(t++,C.value.find(t=>t.text==y(n.vertragsart_kurzbz))||C.value.push({text:y(n.vertragsart_kurzbz),description:"",css:"bg-dv rounded-0"}),e.push(n.dienstverhaeltnis_id))}),t>1?C.value.unshift({text:"parallele DVs",description:"",css:"bg-dv rounded-0"}):0==t&&C.value.unshift({text:"derzeit kein aktives DV",description:"",css:"bg-dv rounded-0"}),console.log("dvIDs",e),Promise.all(e.map(t=>b.call(j.getCurrentVBs(t)))).then(t=>{t.map(t=>{t.data.map(t=>{switch(t.vertragsbestandteiltyp_kurzbz){case"freitext":"befristung"==t.freitexttyp_kurzbz?C.value.push({text:"Befristung",description:"",css:"bg-dv rounded-0"}):"allin"==t.freitexttyp_kurzbz?C.value.push({text:"All-In",description:"",css:"bg-allin rounded-0"}):"ersatzarbeitskraft"==t.freitexttyp_kurzbz&&C.value.push({text:"Ersatzarbeitskraft",description:"",css:"bg-dv rounded-0"});break;case"karenz":C.value.push({text:A(t.karenztyp_kurzbz),description:"",css:"bg-karenz rounded-0"});break;case"stunden":null!=t.teilzeittyp_kurzbz&&C.value.push({text:_(t.teilzeittyp_kurzbz),description:"",css:"bg-teilzeit rounded-0"})}})})})})()}catch(t){console.log(t),h.value=!1}};a(async()=>{await l.isReady(),console.log("route.path",o.path),d.value=o.params.id,u.value=o.params.uid,f.value=new Date,k(u.value)}),e(()=>o.params.uid,t=>{d.value=o.params.id,u.value=t,f.value=new Date,k(u.value)}),e(()=>t.tags,t=>{F.value=t},{deep:!0});return{statusList:C,statusTags:F,refresh:()=>{k(u.value)}}},template:'\n    <div class="d-flex align-items-start ms-sm-auto col-lg-12  gap-2 mt-auto" >\n        <template v-for="item in statusTags">\n            <span class="badge" :class="(item?.css != undefined) ? item.css : \'bg-secondary rounded-0\'" >{{ item.text }}</span>\n        </template>\n        <template v-for="item in statusList">\n            <span class="badge" :class="(item?.css != undefined) ? item.css : \'bg-secondary rounded-0\'" >{{ item.text }}</span>\n        </template>\n    </div>   \n   '};var U={byPerson:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/issue/byPerson",params:{person_id:t}}),countPersonOpenIssues:t=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/IssueChecker/countPersonOpenIssues/"+t}),checkPerson:t=>({method:"post",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/IssueChecker/checkPerson/"+t}),openIssuesPersons:()=>({method:"get",url:"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/issue/PersonenMitOffenenIssues"})};const G={name:"EmployeeHeader",components:{Modal:C,ModalDialog:E,"p-skeleton":primevue.skeleton,EmployeeStatus:N},props:{personID:Number,personUID:String,restricted:Boolean},expose:["refresh"],emits:["personSelected"],setup(t,{emit:e}){const{watch:n,ref:r,onMounted:i,inject:a}=Vue,s=Vue.computed(()=>t.personID),o=Vue.computed(()=>t.personUID),l=r(),d=r(),u=r(),p=r(),{t:c}=D(),f=r(!1),h=r(!1),m=r(!1),g=a("$api"),v=Vue.inject("$fhcAlert"),b=r(),y=async(t,e)=>{f.value=!0,h.value=!0;try{const n=await g.call(J.personHeaderData(t,e));l.value=n.data[0],h.value=!1;const r=await g.call(J.personAbteilung(l.value.uid));l.value={...l.value,abteilung:r.data}}catch(t){console.log(t)}finally{f.value=!1,h.value=!1}},A=async t=>{m.value=!0;try{const e=await g.call(U.countPersonOpenIssues(t));b.value=e.data.openissues}catch(t){console.log(t)}finally{m.value=!1}},_=async()=>{m.value=!0;try{const e=await g.call(U.checkPerson(t.personID));b.value=e.data.openissues}catch(t){console.log(t)}finally{m.value=!1}};Vue.watch([s,o],([t,e])=>{null!=s.value?(y(t,e),A(t)):(u.value=null,d.value.value=null)}),i(()=>{t.personID,t.personUID&&(y(t.personID,t.personUID),A(t.personID)),C.value&&C.value.$el.addEventListener("hidden.bs.modal",()=>{k()})});let C=r();const F=()=>{C.value.hide()},k=()=>{u.value=null,d.value.value=null};return{showModal:()=>{C.value.show()},hideModal:F,resetPreview:k,modalRef:C,showDeleteModal:async()=>{!1!==await v.confirm({message:"Foto wirklich löschen?",acceptLabel:"Löschen",acceptClass:"p-button-danger"})&&(async()=>{try{f.value=!0,await g.call(J.deletePersonEmployeeFoto(t.personID)),y(t.personID,t.personUID),v.alertSuccess(c("person","Foto gelöscht"))}catch(t){v.handleSystemError(t)}finally{f.value=!1}})()},pickFile:()=>{let t=d.value.files;if(t&&t[0]){let e=new FileReader;e.onload=t=>{u.value=t.target.result},e.readAsDataURL(t[0])}},okHandler:()=>{(async()=>{try{f.value=!0;const e=await g.call(J.uploadPersonEmployeeFoto(t.personID,u.value));"success"!=e?.meta?.status?v.alertError(c("person",e.data)):v.alertSuccess(c("person","Foto gespeichert.")),y(t.personID,t.personUID)}catch(t){v.handleSystemError(t)}finally{f.value=!1}})(),F()},statusRef:p,redirect:(t,n)=>{e("personSelected",{person_id:t,uid:n})},FHC_JS_CONFIG:FHC_JS_CONFIG,getStatusTags:()=>{const t=[];return l?.value?.unruly&&t.push({text:"Unruly",css:"bg-unruly rounded-0"}),t},employee:l,fileInput:d,previewImage:u,isFetching:f,isFetchingName:h,isFetchingIssues:m,currentPersonID:s,currentPersonUID:o,formatDate:t=>{if(null==t)return"";var e=new Date(t);return e?.toISOString().substring(0,10)},checkPerson:_,refresh:()=>{y(t.personID,t.personUID),_(t.personID),p.value.refresh()},openissuescount:b}},template:'\n\n        <div class="d-flex justify-content-between ms-sm-auto col-lg-12 p-md-2" >\n            <div class="d-flex align-items-top flex-fill" >\n\n                <div class="fotocontainer" v-if="!isFetchingName">\n                    <img v-if="employee?.foto" class="rounded" style="max-width:101px" :src="\'data:image/jpeg;charset=utf-8;base64,\' + employee?.foto" />\n                    <div v-if="employee?.foto && !restricted" class="fotobutton" >\n                        <div class="d-grid gap-2 d-md-flex ">\n                                <button type="button" class="btn btn-outline-dark btn-sm" @click="showDeleteModal">\n                                    <i class="fa fa-xmark"></i>\n                                </button>\n                                <button type="button" class="btn btn-outline-dark btn-sm" @click="showModal">\n                                    <i class="fa fa-pen"></i>\n                                </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div v-if="employee?.foto==undefined  || isFetchingName" style="position:relative">\n                    <svg  class="bd-placeholder-img rounded" width="100" height="131" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera: 200x200" preserveAspectRatio="xMidYMid slice" focusable="false"><title>A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em"></text></svg>\n                    <div class="fotobutton-visible" v-if="!restricted && !isFetchingName">\n                        <div class="d-grid gap-2 d-md-flex ">\n                            <button type="button" class="btn btn-outline-dark btn-sm" @click="showModal" >\n                                <i class="fa fa-pen"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="ms-3 flex-fill d-flex flex-column" >\n                    <div class="align-items-top">\n                        <h2 class="h4" v-if="!isFetchingName">{{ employee?.titelpre }} {{ employee?.vorname }} {{ employee?.nachname }}<span v-if="employee?.titelpost != null && employee?.titelpost != \'\'">, {{ employee?.titelpost }}</span></h2>\n                        <h2 class="h4" v-else><p-skeleton style="width:30%"></p-skeleton></h2>\n\n                        <div v-if="employee?.abteilung && !isFetching" class="mb-1">\n                            <template v-for="(item, index) in employee?.abteilung">\n                                <strong class="text-muted">{{ item?.organisationseinheittyp_kurzbz }}</strong> {{ item?.bezeichnung }} |\n                                <strong class="text-muted">Vorgesetzte*r </strong>\n                                <a href="#" @click.prevent="redirect(item?.supervisor?.person_id, item?.supervisor?.uid)" v-if="!restricted">{{ item?.supervisor?.titelpre }} {{ item?.supervisor?.vorname }} {{ item?.supervisor?.nachname }}</a>\n                                <span v-else>{{ item?.supervisor?.titelpre }} {{ item?.supervisor?.vorname }} {{ item?.supervisor?.nachname }}</span>\n                                <br v-if="index < employee?.abteilung?.length - 1" />\n                            </template>\n                            </div>\n                        <div v-else class="mb-1"><p-skeleton v-if="isFetching" style="width:45%"></p-skeleton></div>\n                        <div v-if="!isFetchingName" class="mb-1">\n                            <strong class="text-muted">Email</strong>&nbsp;\n                            <span v-if="!employee?.alias">\n                                <a :href="\'mailto:\'+employee?.uid+\'@\'+FHC_JS_CONFIG.domain">{{  employee?.uid }}@{{ FHC_JS_CONFIG.domain }}</a>\n                            </span>\n                            <span v-if="employee?.alias">\n                                <a :href="\'mailto:\'+employee?.alias+\'@\'+FHC_JS_CONFIG.domain">{{  employee?.alias }}@{{ FHC_JS_CONFIG.domain }}</a>\n                            </span>\n                            <span v-if="employee?.telefonklappe" class="mb-2"> | <strong class="text-muted">DW</strong> {{  employee?.telefonklappe }}</span>\n                        </div>\n                        <div v-else class="mb-1"><p-skeleton  style="width:35%"></p-skeleton></div>\n                    </div>\n                    <EmployeeStatus v-if="!restricted" ref="statusRef" :tags="getStatusTags()"></EmployeeStatus>\n                </div>\n\n            </div>\n\n            <div class="d-flex flex-column">\n                <div class="d-flex py-1">\n                    <div class="px-2" v-if="!restricted">\n                        <h4 class="mb-1">Issues<a class="refresh-issues" title="erneut prüfen" href="javascript:void(0);" @click="checkPerson"><i class="fas fa-sync"></i></a></h4>\n                        <h6 v-if="!isFetchingIssues" class="text-muted">{{ openissuescount }}</h6>\n                        <h6 v-else class="mb-2"><p-skeleton v-if="isFetchingIssues" style="width:45%"></p-skeleton></h6>\n                    </div>\n                    <div class="px-2">\n                        <h4 class="mb-1">PNr</h4>\n                        <h6 v-if="!isFetchingName" class="text-muted">{{ employee?.personalnummer }}</h6>\n                        <h6 v-else class="mb-2"><p-skeleton v-if="isFetching" style="width:45%"></p-skeleton></h6>\n                    </div>\n                    <div class="px-2" style="border-left: 1px solid #EEE">\n                        <h4 class="mb-1">UID</h4>\n                        <h6 v-if="!isFetchingName" class="text-muted">{{ employee?.uid }}</h6>\n                        <h6 v-else class="mb-2"><p-skeleton v-if="isFetching" style="width:45%"></p-skeleton></h6>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n\n        \x3c!-- FotoModal --\x3e\n        <Modal title="Foto" ref="modalRef">\n            <template #body>\n                <div class="mb-3">\n                    <label for="formFile" class="form-label">Foto upload</label>\n                    <input class="form-control" type="file" id="formFile" ref="fileInput" @input="pickFile" accept="image/*">\n                </div>\n                <div class="mb-3">\n                    <div class="imagePreviewWrapper" >\n                        <img class="preview" :src="previewImage" />\n                    </div>\n                </div>\n\n            </template>\n            <template #footer>\n                <button class="btn btn-secondary"  @click="hideModal()">Abbrechen</button>\n                <button class="btn btn-primary"  @click="okHandler()">OK</button>\n            </template>\n        </Modal>\n\n        '},q={name:"EmployeeContractInfo",components:{},props:{personID:Number,personUID:String},setup(t,{emit:e}){const{watch:n,ref:r,reactive:i,computed:a,inject:s}=Vue,o=r([]);r(null),r(null),i({funktion:{zuordnung:[],taetigkeit:[]},zeitaufzeichnung:[],kuendigungsfrist:[],stunden:[],allIn:[],befristung:[],urlaubsanspruch:[],zusatzvereinbarung:[],karenz:[]});const l=r(!1),d=new Intl.NumberFormat,u=Vue.inject("karenztypen"),p=s("vertragsarten"),c=Vue.inject("$api"),f=async t=>{if(null==t)return o.value=[],void(vertragList.value=[]);l.value=!0;try{const e=await c.call(J.dvInfoByPerson(t));o.value=e.data.dvList,l.value=!1}catch(t){console.log(t),l.value=!1}};f(t.personUID),n(()=>t.personUID,t=>{f(t)});return{dvList:o,isFetching:l,formatDate:t=>null!=t&&""!=t?t.substring(8,10)+"."+t.substring(5,7)+"."+t.substring(0,4):"",formatVertragsart:t=>{let e=p.value.find(e=>e.value==t);return null!=e?e.label:t},formatKarenztyp:t=>{let e=u.value.find(e=>e.value==t);return null!=e?e.label:t},getVBStunden:t=>{let e=t.find(t=>"stunden"==t.vertragsbestandteiltyp_kurzbz);return null!=e?e:null},formatNumber:t=>d.format(parseFloat(t)),getVBKarenz:t=>{let e=t.find(t=>"karenz"==t.vertragsbestandteiltyp_kurzbz);return null!=e?e:null}}},template:'\n        <div class="row pt-md-4" >      \n            <div class="col">\n                <div class="card">\n                   <div class="card-header">\n                       <div class="h5 mb-0"><h5>Dienstverhältnis</h5></div>\n                   </div>\n                   <div class="card-body">\n                       <template v-if="!isFetching">\n                            <div v-if="dvList.length > 0">\n                                 <table class="table">\n                                     <thead><tr><th>Typ</th><th>DV-Zeitraum</th><th>Wochenstunden</th><th>Karenz</th></tr></thead>\n                                     <tbody>\n                                        <tr v-for="item in dvList">\n                                            <td>{{ formatVertragsart(item.dv.vertragsart_kurzbz) }}</td>\n                                            <td>{{ formatDate(item.dv.von) }} -  {{ formatDate(item.dv.bis) }}</td>\n                                            <td><span v-if="getVBStunden(item.vb) != null">{{ formatNumber(getVBStunden(item.vb).wochenstunden) }} ( {{ formatDate(getVBStunden(item.vb).von) }} - {{ formatDate(getVBStunden(item.vb).bis) }})</span><span v-else>-</span></td>\n                                            <td><span v-if="getVBKarenz(item.vb) != null">{{ formatKarenztyp(getVBKarenz(item.vb).karenztyp_kurzbz) }} ( {{ formatDate(getVBKarenz(item.vb).von) }} - {{ formatDate(getVBKarenz(item.vb).bis) }})</span><span v-else>-</span></td></tr>\n                                     </tbody>\n                                 </table>\n                            </div>\n                            <div v-else>kein Dienstverhältnis zum aktuellen Datum vorhanden</div>\n                        </template>\n                   </div>\n                </div>\n            </div>\n        </div>        \n    '};var W={search(t,e){return this.$fhcApi.post("/api/frontend/v1/searchbar/search",t,e)},searchAdvanced(t,e){return this.$fhcApi.post("/api/frontend/v1/searchbar/searchAdvanced",t,e)},searchdummy(t){return this.$fhcApi.post("public/js/apps/api/dummyapi.php/Search",t)}},K={loadCategory(t){return this.$fhcApi.get("/api/frontend/v1/phrasen/loadModule/"+t)},setLanguage(t,e){const n={categories:t,language:e};return this.$fhcApi.post("/api/frontend/v1/phrasen/setLanguage",n)},getLanguage(){return this.$fhcApi.get("/api/frontend/v1/phrasen/getLanguage",{})},getActiveDbLanguages(){return this.$fhcApi.get("/api/frontend/v1/phrasen/getAllLanguages",{})}},Z={getHeader(t){return this.$fhcApi.get("/api/frontend/v1/navigation/header",{navigation_page:t})},getMenu:function(t){return this.$fhcApi.get("/api/frontend/v1/navigation/menu",{navigation_page:t})}},Y={saveCustomFilter(t){return this.$fhcApi.post("/api/frontend/v1/filter/saveCustomFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,customFilterName:t.customFilterName})},removeCustomFilter(t){return this.$fhcApi.post("/api/frontend/v1/filter/removeCustomFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId})},applyFilterFields(t){return this.$fhcApi.post("/api/frontend/v1/filter/applyFilterFields",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterFields:t.filterFields})},addFilterField(t){return this.$fhcApi.post("/api/frontend/v1/filter/addFilterField",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField})},removeFilterField(t){return this.$fhcApi.post("/api/frontend/v1/filter/removeFilterField",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterField:t.filterField})},getFilterById(t){return this.$fhcApi.get("/api/frontend/v1/filter/getFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType,filterId:t.filterId})},getFilter(t){return this.$fhcApi.get("/api/frontend/v1/filter/getFilter",{filterUniqueId:t.filterUniqueId,filterType:t.filterType})}},X={abmeldung:{getDetails(t,e){const n="/api/frontend/v1/studstatus/abmeldung/"+(void 0!==t?"getDetailsForAntrag/"+t:"getDetailsForNewAntrag/"+e);return this.$fhcApi.get(n)},create(t,e,n){return this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/createAntrag",{studiensemester:t,prestudent_id:e,grund:n},{errorHandling:"strict"})},cancel(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/cancelAntrag",{antrag_id:t.studierendenantrag_id},{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/abmeldung/cancelAntrag",{antrag_id:t})}},unterbrechung:{getDetails(t,e){const n="/api/frontend/v1/studstatus/unterbrechung/"+(void 0!==t?"getDetailsForAntrag/"+t:"getDetailsForNewAntrag/"+e);return this.$fhcApi.get(n)},create(t,e,n,r,i){return this.$fhcApi.post("/api/frontend/v1/studstatus/unterbrechung/createAntrag",{studiensemester:t,prestudent_id:e,grund:n,datum_wiedereinstieg:r,attachment:i},{errorHandling:"strict"})},cancel(t){return this.$fhcApi.post("/api/frontend/v1/studstatus/unterbrechung/cancelAntrag",{antrag_id:t},{errorHandling:"strict"})}},wiederholung:{getDetails(t){const e="/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/"+t;return this.$fhcApi.get(e)},getLvs(t){const e="/api/frontend/v1/studstatus/wiederholung/getLvs/"+t;return this.$fhcApi.get(e)},create(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/createAntrag",{prestudent_id:t,studiensemester:e},{errorHandling:"strict"})},cancel(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/cancelAntrag",{prestudent_id:t,studiensemester:e},{errorHandling:"strict"})},saveLvs(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/wiederholung/saveLvs",{forbiddenLvs:t,mandatoryLvs:e})}},leitung:{getStgs(){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getActiveStgs")},getAntraege(t,e,n){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getAntraege/"+t).then(t=>t.data)},getHistory(t){return this.$fhcApi.get("/api/frontend/v1/studstatus/leitung/getHistory/"+t)},getPrestudents(t,e){return this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/getPrestudents",{query:t},{signal:e,timeout:3e4})},approve(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveAntrag",t)},reject(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/rejectAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/rejectAntrag",t)},reopen(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/reopenAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/reopenAntrag",t)},pause(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/pauseAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/pauseAntrag",t)},unpause(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/unpauseAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/unpauseAntrag",t)},object(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/objectAntrag",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/objectAntrag",t)},approveObjection(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveObjection",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/approveObjection",t)},denyObjection(t){return Array.isArray(t)?Promise.allSettled(t.map(t=>this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/denyObjection",t,{errorHeader:"#"+t.studierendenantrag_id}))):this.$fhcApi.post("/api/frontend/v1/studstatus/leitung/denyObjection",t)}}},Q={getView:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/getView/${t}`,{})},fotoSperre:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/fotoSperre/${t}`,{})},isStudent:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/isStudent",{uid:t})},isMitarbeiter:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/isMitarbeiter/${t}`,{})},getZustellAdresse:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getZustellAdresse",{})},getZustellKontakt:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getZustellKontakt",{})},getGemeinden:function(t,e){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/Profil/getGemeinden/${t}/${e}`,{})},getAllNationen:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Profil/getAllNationen",{})}},tt={
//! API calls for profil update requests
getStatus:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/getStatus",{})},getTopic:function(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/getTopic",{})},acceptProfilRequest:function({profil_update_id:t,uid:e,status_message:n,topic:r,requested_change:i}){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/acceptProfilRequest",{profil_update_id:t,uid:e,status_message:n,topic:r,requested_change:i})},denyProfilRequest:function({profil_update_id:t,uid:e,topic:n,status_message:r}){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/denyProfilRequest",{profil_update_id:t,uid:e,topic:n,status_message:r})},insertFile:function(t,e=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/ProfilUpdate/insertFile/${e}`,t)},getProfilRequestFiles:function(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${t}`,{})},selectProfilRequest:function(t=null,e=null){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/selectProfilRequest",{...t?{uid:t}:{},...e?{id:e}:{}})},insertProfilRequest:function(t,e,n=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/insertProfilRequest",{topic:t,payload:e,...n?{fileID:n}:{}})},updateProfilRequest:function(t,e,n,r=null){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/updateProfilRequest",{topic:t,payload:e,ID:n,...r?{fileID:r}:{}})},deleteProfilRequest:function(t){return this.$fhcApi.post(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/ProfilUpdate/deleteProfilRequest",{requestID:t})}},et={getRoomInfo(t,e,n){return this.$fhcApi.post("/api/frontend/v1/LvPlan/getRoomplan",{ort_kurzbz:t,start_date:e,end_date:n})},getStunden(){return this.$fhcApi.get("/api/frontend/v1/LvPlan/Stunden",{})},getOrtReservierungen(t,e,n){return this.$fhcApi.post(`/api/frontend/v1/LvPlan/getReservierungen/${t}`,{start_date:e,end_date:n})},getLvPlanReservierungen(t,e){return this.$fhcApi.post("/api/frontend/v1/LvPlan/getReservierungen",{start_date:t,end_date:e})},getLehreinheitStudiensemester(t){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${t}`,{})},studiensemesterDateInterval(t){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${t}`,{})},LvPlanEvents(t,e,n){return this.$fhcApi.get("/api/frontend/v1/LvPlan/LvPlanEvents",{start_date:t,end_date:e,lv_id:n})}},nt={verband:{get(){return this.$fhcApi.get("api/frontend/v1/stv/verband")},favorites:{get(){return this.$fhcApi.get("api/frontend/v1/stv/favorites")},set(t){return this.$fhcApi.post("api/frontend/v1/stv/favorites/set",{favorites:t})}}},students:{uid(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/uid/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},prestudent(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/prestudent/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},person(t,e){let n="api/frontend/v1/stv/students/"+encodeURIComponent(e)+"/person/"+encodeURIComponent(t);return this.$fhcApi.getUri(n)},verband(t){return this.$fhcApi.getUri("api/frontend/v1/stv/students/"+t)}},filter:{getStg(){return this.$fhcApi.get("api/frontend/v1/stv/filter/getStg")},setStg(t){return this.$fhcApi.post("api/frontend/v1/stv/filter/setStg",{studiengang_kz:t})}},konto:{tabulatorConfig(t,e){return t.ajaxURL="api/frontend/v1/stv/konto/get",t.ajaxParams=()=>({person_id:e.modelValue.person_id||e.modelValue.map(t=>t.person_id),only_open:e.filter,studiengang_kz:e.studiengang_kz_intern?e.stg_kz:""}),t.ajaxRequestFunc=(t,e,n)=>this.$fhcApi.post(t,n,e),t.ajaxResponse=(t,e,n)=>n.data,t},checkDoubles(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/checkDoubles",e,{confirmErrorHandler:t=>!0})},insert(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/insert",e)},counter(t){return this.$fhcApi.post("api/frontend/v1/stv/konto/counter",t)},edit(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/konto/update",e)},delete(t){return this.$fhcApi.post("api/frontend/v1/stv/konto/delete",{buchungsnr:t})},getBuchungstypen(){return this.$fhcApi.get("api/frontend/v1/stv/konto/getBuchungstypen")}},group:{getGruppen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/Gruppen/getGruppen/"+n.id)},deleteGroup(t){return this.$fhcApi.post("api/frontend/v1/stv/Gruppen/deleteGruppe/",t)}},kontakt:{getAdressen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getAdressen/"+n.id)},addNewAddress(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewAddress/"+e,n)},loadAddress(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadAddress/",{address_id:t})},updateAddress(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateAddress/"+e,n)},deleteAddress(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteAddress/",{address_id:t})},getPlaces(t){return this.$fhcApi.get("api/frontend/v1/stv/address/getPlaces/"+t)},getFirmen(t){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getFirmen/"+t)},getNations(){return this.$fhcApi.get("api/frontend/v1/stv/address/getNations/")},getAdressentypen(){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getAdressentypen/")},getBankverbindung(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getBankverbindung/"+n.id)},addNewBankverbindung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewBankverbindung/"+e,n)},loadBankverbindung(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadBankverbindung/",{bankverbindung_id:t})},updateBankverbindung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateBankverbindung/"+e,n)},deleteBankverbindung(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteBankverbindung/",{bankverbindung_id:t})},getKontakte(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getKontakte/"+n.id)},addNewContact(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/addNewContact/"+e,n)},loadContact(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/loadContact/",{kontakt_id:t})},updateContact(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/kontakt/updateContact/"+e,n)},deleteContact(t){return this.$fhcApi.post("api/frontend/v1/stv/kontakt/deleteContact/",{kontakt_id:t})},getStandorteByFirma(t){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getStandorteByFirma/"+t)},getKontakttypen(){return this.$fhcApi.get("api/frontend/v1/stv/kontakt/getKontakttypen/")}},prestudent:{get(t,e){return this.$fhcApi.post("api/frontend/v1/stv/prestudent/get/"+encodeURIComponent(t)+"/"+encodeURIComponent(e))},updatePrestudent(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/prestudent/updatePrestudent/"+e,n)},getBezeichnungZGV(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungZGV/")},getBezeichnungMZgv(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungMZgv/")},getBezeichnungDZgv(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBezeichnungDZgv/")},getStgs(){return this.$fhcApi.get("api/frontend/v1/stv/lists/getStgs/")},getAusbildung(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getAusbildung/")},getAufmerksamdurch(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getAufmerksamdurch/")},getBerufstaetigkeit(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBerufstaetigkeit/")},getTypenStg(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getTypenStg/")},getBisstandort(){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getBisstandort/")},getHistoryPrestudent(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/status/getHistoryPrestudent/"+n.id)},getMaxSem(t){return this.$fhcApi.post("api/frontend/v1/stv/status/getMaxSemester/",{studiengang_kzs:t})},advanceStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:r}){return this.$fhcApi.post("api/frontend/v1/stv/status/advanceStatus/"+t+"/"+e+"/"+n+"/"+r)},confirmStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:r}){return this.$fhcApi.post("api/frontend/v1/stv/status/confirmStatus/"+t+"/"+e+"/"+n+"/"+r)},isLastStatus(t){return this.$fhcApi.get("api/frontend/v1/stv/status/isLastStatus/"+t)},deleteStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:r}){return this.$fhcApi.post("api/frontend/v1/stv/status/deleteStatus/"+t+"/"+e+"/"+n+"/"+r)},getLastBismeldestichtag(){return this.$fhcApi.get("api/frontend/v1/stv/status/getLastBismeldestichtag/")},getHistoryPrestudents(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getHistoryPrestudents/"+n.id)}},status:{insertStatus(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/status/insertStatus/"+e,n)},loadStatus({prestudent_id:t,status_kurzbz:e,studiensemester_kurzbz:n,ausbildungssemester:r}){return this.$fhcApi.post("api/frontend/v1/stv/status/loadStatus/"+t+"/"+e+"/"+n+"/"+r)},updateStatus(t,{prestudent_id:e,status_kurzbz:n,studiensemester_kurzbz:r,ausbildungssemester:i},a){return this.$fhcApi.post(t,"api/frontend/v1/stv/status/updateStatus/"+e+"/"+n+"/"+r+"/"+i,a)},getStudienplaene(t){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getStudienplaene/"+t)},getStudiengang(t){return this.$fhcApi.get("api/frontend/v1/stv/prestudent/getStudiengang/"+t)},getStatusgruende(){return this.$fhcApi.get("api/frontend/v1/stv/status/getStatusgruende/")},getStati(){return this.$fhcApi.get("api/frontend/v1/stv/lists/getStati/")},addStudent(t,e){return this.$fhcApi.post("api/frontend/v1/stv/status/addStudent/"+t,e,{errorHeader:t})},changeStatus(t,e){return this.$fhcApi.post("api/frontend/v1/stv/status/changeStatus/"+t,e,{errorHeader:t})},getStatusarray(){return this.$fhcApi.get("api/frontend/v1/stv/status/getStatusarray/")}},details:{get(t,e){let n="api/frontend/v1/stv/student/get/"+encodeURIComponent(t)+"/"+encodeURIComponent(e);return this.$fhcApi.post(n)},save(t,e,n,r){let i="api/frontend/v1/stv/student/save/"+encodeURIComponent(e)+"/"+encodeURIComponent(n);return this.$fhcApi.post(t,i,r)}},exam:{getPruefungen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getPruefungen/"+n.id)},loadPruefung(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/loadPruefung/"+t)},getTypenPruefungen(){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getTypenPruefungen")},getAllLehreinheiten(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/getAllLehreinheiten/",t)},getLvsByStudent(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsByStudent/"+t)},getLvsandLesByStudent(t,e){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsandLesByStudent/"+t+"/"+e)},getLvsAndMas(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getLvsAndMas/"+t)},getMitarbeiterLv(t){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getMitarbeiterLv/"+t)},getNoten(){return this.$fhcApi.get("api/frontend/v1/stv/pruefung/getNoten")},checkZeugnisnoteLv(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/",t)},addPruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/pruefung/insertPruefung/",e)},updatePruefung(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/stv/pruefung/updatePruefung/"+e,n)},deletePruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/pruefung/deletePruefung/"+t)}},abschlusspruefung:{getAbschlusspruefung(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/"+n.id)},addNewAbschlusspruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/",e)},loadAbschlusspruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/",{id:t})},updateAbschlusspruefung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/",e)},deleteAbschlusspruefung(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/",{id:t})},getTypenAbschlusspruefung(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/")},getTypenAntritte(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/")},getBeurteilungen(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/")},getAkadGrade(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/getAkadGrade/",{studiengang_kz:t})},getTypStudiengang(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/",{studiengang_kz:t})},getMitarbeiter(t){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/"+t)},getPruefer(t){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getPruefer/"+t)},getNoten(){return this.$fhcApi.get("api/frontend/v1/stv/abschlusspruefung/getNoten/")},checkForExistingExams(t){return this.$fhcApi.post("api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/",{uids:t})}},grades:{list(){return this.$fhcApi.get("api/frontend/v1/stv/grades/list")},getCertificate(t,e){let n="api/frontend/v1/stv/grades/getCertificate/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},getTeacherProposal(t,e){let n="api/frontend/v1/stv/grades/getTeacherProposal/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},getRepeaterGrades(t,e){let n="api/frontend/v1/stv/grades/getRepeaterGrades/"+encodeURIComponent(t);return e&&(n=n+"/"+encodeURIComponent(e)),this.$fhcApi.get(n)},updateCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,note:r,lehrveranstaltung_bezeichnung:i}){return this.$fhcApi.post("api/frontend/v1/stv/grades/updateCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,note:r},{errorHeader:i})},deleteCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,lehrveranstaltung_bezeichnung:r}){return this.$fhcApi.post("api/frontend/v1/stv/grades/deleteCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n},{errorHeader:r})},copyTeacherProposalToCertificate({lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n,lehrveranstaltung_bezeichnung:r}){return this.$fhcApi.post("api/frontend/v1/stv/grades/copyTeacherProposalToCertificate",{lehrveranstaltung_id:t,student_uid:e,studiensemester_kurzbz:n},{errorHeader:r})},copyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id:t,lv_bezeichnung:e}){return this.$fhcApi.post("api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate",{studierendenantrag_lehrveranstaltung_id:t},{errorHeader:e})},getGradeFromPoints(t,e,n,r){const i=r?{errorHandling:!1}:{};return this.$fhcApi.post("api/frontend/v1/stv/grades/getGradeFromPoints",{points:t,lehrveranstaltung_id:e,studiensemester_kurzbz:n},i)}},mobility:{getMobilitaeten(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getMobilitaeten/"+n.id)},getProgramsMobility(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getProgramsMobility/")},addNewMobility(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/mobility/insertMobility/",e)},loadMobility(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/loadMobility/"+t)},updateMobility(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/mobility/updateMobility/",e)},deleteMobility(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobility/"+t)},getLVList(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getLVList/"+t)},getAllLehreinheiten(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/getAllLehreinheiten/",t)},getLvsandLesByStudent(t){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getLvsandLesByStudent/"+t)},getPurposes(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getPurposes/"+n.id)},getSupports(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getSupports/"+n.id)},getListPurposes(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getListPurposes/")},getListSupports(){return this.$fhcApi.get("api/frontend/v1/stv/mobility/getListSupports/")},deleteMobilityPurpose(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobilityPurpose/"+t.bisio_id,t)},addMobilityPurpose(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/addMobilityPurpose/"+t.bisio_id,t)},deleteMobilitySupport(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/deleteMobilitySupport/"+t.bisio_id,t)},addMobilitySupport(t){return this.$fhcApi.post("api/frontend/v1/stv/mobility/addMobilitySupport/"+t.bisio_id,t)}},archiv:{tabulatorConfig(t,e){return t.ajaxURL="api/frontend/v1/stv/archiv/get",t.ajaxParams=()=>({person_id:e.modelValue.person_id||e.modelValue.map(t=>t.person_id)}),t.ajaxRequestFunc=(t,e,n)=>this.$fhcApi.post(t,n,e),t.ajaxResponse=(t,e,n)=>n.data,t},getArchivVorlagen(){return this.$fhcApi.post("api/frontend/v1/stv/archiv/getArchivVorlagen")},archive(t){return this.$fhcApi.post("api/frontend/v1/documents/archive",t)},archiveSigned(t){return this.$fhcApi.post("api/frontend/v1/documents/archiveSigned",t)},update(t){return this.$fhcApi.post("api/frontend/v1/stv/archiv/update",t)},delete({akte_id:t,studiengang_kz:e}){return this.$fhcApi.post("api/frontend/v1/stv/archiv/delete",{akte_id:t,studiengang_kz:e})}},documents:{getDocumentsUnaccepted(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/"+n.id+"/"+n.studiengang_kz)},getDocumentsAccepted(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDocumentsAccepted/"+n.id+"/"+n.studiengang_kz)},deleteZuordnung(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/deleteZuordnung/"+t.prestudent_id+"/"+t.dokument_kurzbz)},createZuordnung(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/createZuordnung/"+t.prestudent_id+"/"+t.dokument_kurzbz)},loadAkte(t){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/loadAkte/"+t)},getDoktypen(){return this.$fhcApi.get("api/frontend/v1/stv/dokumente/getDoktypen/")},updateFile(t,e){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/updateAkte/"+t,e)},deleteFile(t){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/deleteAkte/"+t)},uploadFile(t,e){return this.$fhcApi.post("api/frontend/v1/stv/dokumente/uploadDokument/"+t,e)}},exemptions:{getAnrechnungen(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getAnrechnungen/"+n.id)},getLehrveranstaltungen(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/"+t)},getBegruendungen(){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getBegruendungen/")},getLvsKompatibel(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLvsKompatibel/"+t)},getLektoren(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/getLektoren/"+t)},addNewAnrechnung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/anrechnungen/insertAnrechnung/",e)},loadAnrechnung(t){return this.$fhcApi.get("api/frontend/v1/stv/anrechnungen/loadAnrechnung/"+t)},editAnrechnung(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/anrechnungen/updateAnrechnung/",e)},deleteAnrechnung(t){return this.$fhcApi.post("api/frontend/v1/stv/anrechnungen/deleteAnrechnung/"+t)}},jointstudies:{getStudies(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudien/"+n.id)},getTypenMobility(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/")},getStudiensemester(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/")},getStudyprograms(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/")},getListPartner(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/")},getStatiPrestudent(){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/")},loadStudy(t){return this.$fhcApi.get("api/frontend/v1/stv/GemeinsameStudien/loadStudie/"+t)},insertStudy(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/GemeinsameStudien/insertStudie/",e)},updateStudy(t,e){return this.$fhcApi.post(t,"api/frontend/v1/stv/GemeinsameStudien/updateStudie/",e)},deleteStudy(t){return this.$fhcApi.post("api/frontend/v1/stv/GemeinsameStudien/deleteStudie/"+t)}},courselist:{getCourselist(t,e,n){return this.$fhcApi.get("api/frontend/v1/stv/LvTermine/getStundenplan/"+n.student_uid+"/"+n.start_date+"/"+n.end_date+"/"+n.group_consecutiveHours+"/"+n.dbStundenplanTable)},getStudiensemester(){return this.$fhcApi.get("api/frontend/v1/stv/LvTermine/getStudiensemester/")}},configStudent(){return this.$fhcApi.get("api/frontend/v1/stv/config/student")},configStudents(){return this.$fhcApi.get("api/frontend/v1/stv/config/students")}},rt={person:{getNotizen(t,e,n){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getNotizen/"+n.id+"/"+n.type)},getUid(){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getUid/")},addNewNotiz(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/notiz/notizPerson/addNewNotiz/"+e,n)},loadNotiz(t){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/loadNotiz/",{notiz_id:t})},loadDokumente(t){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/loadDokumente/",{notiz_id:t})},deleteNotiz(t,e,n){return this.$fhcApi.post("api/frontend/v1/notiz/notizPerson/deleteNotiz/",{notiz_id:t,type_id:e,id:n})},updateNotiz(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/notiz/notizPerson/updateNotiz/"+e,n)},getMitarbeiter(t){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/getMitarbeiter/"+t)},isBerechtigt(t,e){return this.$fhcApi.get("api/frontend/v1/notiz/notizPerson/isBerechtigt/")}}},it={person:{getAllBetriebsmittel(t,e,n){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/"+n.type+"/"+n.id)},addNewBetriebsmittel(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/"+e,n)},loadBetriebsmittel(t){return this.$fhcApi.post("api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/"+t)},updateBetriebsmittel(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/"+e,n)},deleteBetriebsmittel(t){return this.$fhcApi.post("api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/"+t)},getTypenBetriebsmittel(){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/")},loadInventarliste(t){return this.$fhcApi.get("api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/"+t)}}},at={getContentID(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/ContentID",{ort_kurzbz:t})},getRooms(t,e,n,r,i=0){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/getRooms",{datum:t,von:e,bis:n,typ:r,personenanzahl:i})},getRoomTypes(){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Ort/getTypes")}},st={content(t,e=null,n=null,r=null){return this.$fhcApi.get("/api/frontend/v1/Cms/content",{content_id:t,...e?{version:e}:{},...n?{sprache:n}:{},...r?{sichtbar:r}:{}})},getNews(t=1,e=10,n){return this.$fhcApi.get("/api/frontend/v1/Cms/getNews",{page:t,page_size:e,sprache:n})},news(t){return this.$fhcApi.get("/api/frontend/v1/Cms/news",{limit:t})},getNewsRowCount:function(){return this.$fhcApi.get("/api/frontend/v1/Cms/getNewsRowCount",{})},getNewsExtra:function(){return this.$fhcApi.get("/api/frontend/v1/Cms/getStudiengangInfoForNews",{})}},ot={getStudentenMail(t){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/api/frontend/v1/Lehre/lvStudentenMail",{lehreinheit_id:t})},getLvInfo(t,e){return this.$fhcApi.get(`/api/frontend/v1/Lehre/LV/${t}/${e}`,{})},getStudentPruefungen(t){return this.$fhcApi.get(`/api/frontend/v1/Lehre/Pruefungen/${t}`,{})},getStudentProjektarbeiten(t){return this.$fhcApi.get(`/api/frontend/v1/Lehre/getStudentProjektarbeiten/${t}`,{})},getStudentProjektabgaben(t){return this.$fhcApi.get("/api/frontend/v1/Lehre/getStudentProjektabgaben",{projektarbeit_id:t.projektarbeit_id,student_uid:t.student_uid})},postStudentProjektarbeitEndupload(t){return this.$fhcApi.post("/api/frontend/v1/Lehre/postStudentProjektarbeitEndupload",t,{Headers:{"Content-Type":"multipart/form-data"}})},postStudentProjektarbeitZwischenabgabe(t){return this.$fhcApi.post("/api/frontend/v1/Lehre/postStudentProjektarbeitZwischenabgabe",t,{Headers:{"Content-Type":"multipart/form-data"}})},getStudentProjektarbeitAbgabeFile(t,e){const n=`/Cis/Abgabetool/getStudentProjektarbeitAbgabeFile?paabgabe_id=${t}&student_uid=${e}`;window.location=FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+n},getMitarbeiterProjektarbeiten(t,e){return this.$fhcApi.get(`/api/frontend/v1/Lehre/getMitarbeiterProjektarbeiten?showall=${e}`,{})},postProjektarbeitAbgabe(t){const e={paabgabe_id:t.paabgabe_id,paabgabetyp_kurzbz:t.bezeichnung.paabgabetyp_kurzbz,datum:t.datum,fixtermin:t.fixtermin,insertvon:t.insertvon,kurzbz:t.kurzbz,projektarbeit_id:t.projektarbeit_id};return this.$fhcApi.post("/api/frontend/v1/Lehre/postProjektarbeitAbgabe",e,null)},deleteProjektarbeitAbgabe(t){const e={paabgabe_id:t};return this.$fhcApi.post("/api/frontend/v1/Lehre/deleteProjektarbeitAbgabe",e,null)},postSerientermin(t,e,n,r,i){const a={datum:t,paabgabetyp_kurzbz:e,bezeichnung:n,kurzbz:r,projektarbeit_ids:i};return this.$fhcApi.post("/api/frontend/v1/Lehre/postSerientermin",a,null)},fetchDeadlines(t){const e={person_id:t};return this.$fhcApi.post("/api/frontend/v1/Lehre/fetchDeadlines",e,null)}},lt={getLvMenu(t,e){return this.$fhcApi.get(FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+`/api/frontend/v1/LvMenu/getLvMenu/${t}/${e}`,{})}},dt={person:{getMessages(t,e,n){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMessages/"+n.id+"/"+n.type+"/"+n.size+"/"+n.page)},getVorlagen(){return this.$fhcApi.get("api/frontend/v1/messages/messages/getVorlagen/")},getMsgVarsLoggedInUser(){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/")},getMessageVarsPerson(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMessageVarsPerson/"+t.id+"/"+t.type_id)},getMsgVarsPrestudent(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getMsgVarsPrestudent/"+t.id+"/"+t.type_id)},getPersonId(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getPersonId/"+t.id+"/"+t.type_id)},getUid(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getUid/"+t.id+"/"+t.type_id)},getVorlagentext(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getVorlagentext/"+t)},getNameOfDefaultRecipient(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getNameOfDefaultRecipient/"+t.id+"/"+t.type_id)},getPreviewText(t,e){return this.$fhcApi.post("api/frontend/v1/messages/messages/getPreviewText/"+t.id+"/"+t.type_id,e)},getReplyData(t){return this.$fhcApi.get("api/frontend/v1/messages/messages/getReplyData/"+t)},sendMessageFromModalContext(t,e,n){return this.$fhcApi.post(t,"api/frontend/v1/messages/messages/sendMessage/"+e,n)},sendMessage(t,e){return this.$fhcApi.post("api/frontend/v1/messages/messages/sendMessage/"+t,e)},deleteMessage(t){return this.$fhcApi.post("api/frontend/v1/messages/messages/deleteMessage/"+t)}}},ut={getVorlagen(){return this.$fhcApi.get("api/frontend/v1/vorlagen/vorlagen/getVorlagen/")},getVorlagenByLoggedInUser(){return this.$fhcApi.get("api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/")}},pt={getStudiensemester:function(){return this.$fhcApi.get("/components/Cis/Mylv/Studiensemester",{})},getAllStudienSemester:function(t=void 0,e=void 0,n=void 0,r=void 0){return this.$fhcApi.get("/api/frontend/v1/Studium/getStudienAllSemester",{studiensemester:t,studiengang:e,semester:n,studienplan:r})},getStudiengaengeForStudienSemester:function(t){return this.$fhcApi.get(`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${t}`,{})},getStudienplaeneBySemester:function(t,e){return this.$fhcApi.get("/api/frontend/v1/Studium/getStudienplaeneBySemester",{studiengang:t,studiensemester:e})},getLvPlanForStudiensemester:function(t,e){return this.$fhcApi.get(`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${t}/${e}`,{})},getLvEvaluierungInfo:function(t,e){return this.$fhcApi.get(`/api/frontend/v1/Studium/getLvEvaluierungInfo/${t}/${e}`,{})}},ct={search:W,phrasen:K,navigation:Z,dashboard:{async getViewData(){return this.$fhcApi.get("/api/frontend/v1/Cis4FhcApi/getViewData",null,null)}},filter:Y,studstatus:X,profil:Q,profilUpdate:tt,lvPlan:et,bookmark:{getBookmarks:function(){return this.$fhcApi.get("/api/frontend/v1/Bookmark/getBookmarks",{})},delete:function(t){return this.$fhcApi.get(`/api/frontend/v1/Bookmark/delete/${t}`,{})},update:function({bookmark_id:t,url:e,title:n,tag:r=null}){return this.$fhcApi.post(`/api/frontend/v1/Bookmark/update/${t}`,{url:e,title:n})},insert:function({url:t,title:e,tag:n}){return this.$fhcApi.post("/api/frontend/v1/Bookmark/insert",{url:t,title:e,tag:n})}},stv:nt,notiz:rt,betriebsmittel:it,checkperson:i,ampeln:{open:function(){return this.$fhcApi.get("/api/frontend/v1/Ampeln/open",{})},all:function(){return this.$fhcApi.get("/api/frontend/v1/Ampeln/all",{})},confirm:function(t){return this.$fhcApi.get(`/api/frontend/v1/Ampeln/confirm/${t}`,{})}},ort:at,cms:st,lehre:ot,addons:lt,messages:dt,vorlagen:ut,addons:lt,studiengang:{studiengangInformation:function(){return this.$fhcApi.get("/api/frontend/v1/Studgang/getStudiengangInfo",{})},getStudiengangByKz:function(t){return this.$fhcApi.get("/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz",{studiengang_kz:t})}},menu:{getMenu:function(){return this.$fhcApi.get("/api/frontend/v1/CisMenu/getMenu",{})}},authinfo:{getAuthUID(){return this.$fhcApi.get("/api/frontend/v1/AuthInfo/getAuthUID",{})},getAuthInfo(){return this.$fhcApi.get("/api/frontend/v1/AuthInfo/getAuthInfo",{})}},studium:pt,language:{getAll(){return this.$fhcApi.get("/api/frontend/v1/language/get")}}},ft={install:(t,e)=>{if(t.config.globalProperties.$fhcApi)return void(e?.factory&&(console.warn("$fhcApi is DEPRECATED!"),t.config.globalProperties.$fhcApi.factory.addEndpoints(e.factory)));function n(t,e,n,r){if("string"==typeof t&&void 0===r)[e,n,r]=[t,e,n],t=void 0;else if(t){if("object"!=typeof t)throw new TypeError("Parameter 1 of _get_config must be an object or a string");void 0===e&&void 0===n&&void 0===r&&(r=t,t=void 0)}if(t){if(!t.clearValidation||!t.setFeedback)throw new TypeError("'form' is not a Form Component");t={clearValidation:t.clearValidation,setFeedback:t.setFeedback},r?r.form=t:r={form:t}}return[e,n,r]}function r(t){const e=t.data;return delete t.data,e.meta?e.meta.response=t:e.meta={response:t},e}FHC_JS_DATA_STORAGE_OBJECT.app_root,FHC_JS_DATA_STORAGE_OBJECT.ci_router;const i=axios.create({timeout:5e5,baseURL:FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"});i.interceptors.request.use(t=>{if("post"!=t.method||!t.data)return t;if(t.data instanceof FormData)return t;if(!Object.values(t.data).every(t=>!(t instanceof FileList)&&(!Array.isArray(t)||t.every(t=>!(t instanceof File))))){const e=Object.entries(t.data).reduce((t,[e,n])=>{if(n instanceof FileList)for(const r of n)t.FormData.append(e+(n.length>1?"[]":""),r);else Array.isArray(n)?n.every(t=>!(t instanceof File))?t.jsondata[e]=n:n.forEach(r=>t.FormData.append(e+(n.length>1?"[]":""),r)):t.jsondata[e]=n;return t},{FormData:new FormData,jsondata:{}});e.FormData.append("_jsondata",JSON.stringify(e.jsondata)),t.data=e.FormData}return t}),i.interceptors.response.use(e=>("off"==e.config?.errorHandling||!1===e.config?.errorHandling||"fail"==e.config?.errorHandling||e.data.errors&&(e.data.errors=e.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$fhcApi._defaultErrorHandlers[n.type])(n,e.config))),r(e)),e=>"ERR_CANCELED"==e.code?Promise.reject({handled:!0,...e}):"off"==e.config?.errorHandling||!1===e.config?.errorHandling||"success"==e.config?.errorHandling?Promise.reject(e):e.response?404==e.response.status?(t.config.globalProperties.$fhcAlert.alertDefault("error",e.message,e.request.responseURL,!0),Promise.reject({handled:!0,...e})):(e.response.data.errors=e.response.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$fhcApi._defaultErrorHandlers[n.type])(n,e.config)),e.response.data.errors.length?Promise.reject(e):Promise.reject({handled:!0,...e})):e.request?(t.config.globalProperties.$fhcAlert.alertDefault("error",e.message,e.request.responseURL),Promise.reject({handled:!0,...e})):(t.config.globalProperties.$fhcAlert.alertError(e.message),Promise.reject({handled:!0,...e}))),t.config.globalProperties.$fhcApi={getUri:t=>(console.warn("$fhcApi.getUri is DEPRECATED! Use $api.getUri instead."),i.getUri({url:t})),get:(t,e,r,a)=>(console.warn("$fhcApi.get is DEPRECATED! Use $api.get instead."),[e,r,a]=n(t,e,r,a),r&&(a?a.params=r:a={params:r}),i.get(e,a)),post:(t,e,r,a)=>(console.warn("$fhcApi.post is DEPRECATED! Use $api.post instead."),[e,r,a]=n(t,e,r,a),i.post(e,r,a)),_defaultErrorHandlers:{validation(e,n){const r=t.config.globalProperties.$fhcAlert;return n?.form?(n.form.clearValidation(),n.form.setFeedback(!1,e.messages),!1):Array.isArray(e.messages)?(e.messages.forEach(r.alertError),!1):"object"!=typeof e.messages||(n?.errorHeader?Object.values(e.messages).forEach(e=>r.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e,!0)):Object.entries(e.messages).forEach(([t,e])=>r.alertDefault("error",t,e,!0)),!1)},general(e,n){const r=t.config.globalProperties.$fhcAlert;n?.form?n.form.setFeedback(!1,e.message):n?.errorHeader?r.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e.message,!0):r.alertError(e.message)},php(e){const n=t.config.globalProperties.$fhcAlert;var r="";switch(r+="Message: "+e.message+"\n\n",r+="Filename: "+e.filename+"\n",r+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(r+="\nBacktrace: ",e.backtrace.forEach(t=>{r+="\n\tFile: "+t.file+"\n",r+="\tLine: "+t.line+"\n",r+="\tFunction: "+t.function+"\n"})),e.severity){case"Warning":case"Core Warning":case"Compile Warning":case"User Warning":n.alertDefault("warn","PHP "+e.severity,r,!0);break;case"Notice":case"User Notice":case"Runtime Notice":n.alertDefault("info","PHP "+e.severity,r,!0);break;default:r="Type: PHP "+e.severity+"\n\n"+r,n.alertSystemError(r)}},exception(e){const n=t.config.globalProperties.$fhcAlert;var r="";r+="Type: "+e.class+"\n\n",r+="Message: "+e.message+"\n\n",r+="Filename: "+e.filename+"\n",r+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(r+="\nBacktrace: ",e.backtrace.forEach(t=>{r+="\n\tFile: "+t.file+"\n",r+="\tLine: "+t.line+"\n",r+="\tFunction: "+t.function+"\n"})),n.alertSystemError(r)},db(e){const n=t.config.globalProperties.$fhcAlert;var r="";void 0!==e.heading&&(r+=e.heading+"\n\n"),void 0!==e.code&&(r+="Code: "+e.code+"\n\n"),void 0!==e.sql&&(r+="SQL: "+e.sql+"\n\n"),void 0!==e.message?r+="Message: "+e.message+"\n\n":void 0!==e.messages&&(r+="Messages: "+e.messages.join("\n\t")+"\n\n"),void 0!==e.filename&&(r+="Filename: "+e.filename+"\n"),void 0!==e.line&&(r+="Line Number: "+e.line+"\n"),n.alertSystemError(r)},auth(e,n){const r=t.config.globalProperties.$fhcAlert;var i="";i+="Controller name: "+e.controller+"\n",i+="Method name: "+e.method+"\n",i+="Required permissions: "+e.required_permissions,n?.errorHeader?r.alertDefault("error",Array.isArray(n.errorHeader)?t.config.globalProperties.$p.t.apply(null,n.errorHeader):n.errorHeader,e.message,!0):r.alertDefault("error",e.message,i)}}};class a{constructor(e,n){void 0===n?(this.$fhcApi={getUri:e=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.getUri(e)),get:(e,n,r,i)=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.get(e,n,r,i)),post:(e,n,r,i)=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.post(e,n,r,i))},Object.defineProperty(this.$fhcApi,"factory",{get:()=>(console.warn("$fhcApi.factory is DEPRECATED!"),t.config.globalProperties.$fhcApi.factory)}),t.config.globalProperties.$fhcApi.factory=this):Object.defineProperty(this,"$fhcApi",{get(){return(n||this).$fhcApi}}),this.addEndpoints(e,!0)}addEndpoints(t,e){Object.keys(t).forEach(e=>{Object.defineProperty(this,e,{get(){return"function"==typeof t[e]?t[e].bind(this):new a(t[e],this.$fhcApi.factory)}})}),e||console.warn("$fhcApi.factory.addEndpoints() is DEPRECATED!")}}const s=new a(ct);e?.factory&&(console.warn("$fhcApi is DEPRECATED!"),s.addEndpoints(e.factory)),t.config.globalProperties.$fhcApi.factory=s,t.provide("$fhcApi",t.config.globalProperties.$fhcApi)}};const ht="error",mt="retval",gt={get:function(t,e,n=null){return gt._axiosCall(t,e,"get",n)},post:function(t,e,n=null){return gt._axiosCall(t,e,"post",n)},isSuccess:function(t){return!("object"!=typeof t||!t.hasOwnProperty(ht)||!t.hasOwnProperty(mt)||0!=t.error)},isError:function(t){return!gt.isSuccess(t)},hasData:function(t){return!(!gt.isSuccess(t)||!("object"==typeof t[mt]&&Object.keys(t[mt]).length>0||"array"==typeof t[mt]&&t[mt].length>0||"string"==typeof t[mt]&&""!=t[mt].trim()||"number"==typeof t[mt]))},getData:function(t){return gt.hasData(t)?t[mt]:null},getError:function(t){return"object"==typeof t&&Object.keys(t).length>0&&t.hasOwnProperty(mt)?t[mt]:"Generic error"},getErrorCode:function(t){return"object"==typeof t&&t.hasOwnProperty(ht)?t[ht]:1},_generateRouterURI:function(t){var e=null;return"undefined"!=typeof FHC_JS_DATA_STORAGE_OBJECT&&(e=FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"+t),e},_printDebug:function(t,e,n){},_axiosCall:function(t,e,n,r){let i={method:n,url:gt._generateRouterURI(t),timeout:5e3};if("get"==n?i.params=e:i.data=e,"object"==typeof r)for(var a in r)i[a]=r[a];return axios(i)}},vt=document.createElement("div"),bt=Vue.createApp({name:"FhcAlertApp",components:{PvToast:e,PvConfirm:n},methods:{mailToUrl:t=>"mailto:"+FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto+"?subject=Meldung%20Systemfehler&body="+("\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausführlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewählt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method+"%0D%0A\n\t\t\t\tFehler Meldung: "+t.message.detail+"%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kümmern uns um eine rasche Behebung des Problems!"),openMessagecard(t){bootstrap.Collapse.getOrCreateInstance(t.target.getAttribute("href")).toggle()}},unmounted(){vt.parentElement.removeChild(vt)},computed:{showmaillink:function(){return""!==FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto}},template:'\n\t<pv-toast ref="toast" class="fhc-alert" :base-z-index="99999">\n\t\t<template #message="{ message }">\n\t\t\t\x3c!--span :class="slotProps.iconClass"></span--\x3e\n\t\t\t<div class="p-toast-message-text">\n\t\t\t\t<span class="p-toast-summary">{{ message.summary }}</span>\n\t\t\t\t<div v-if="message.detail && message.html" class="p-toast-detail" v-html="message.detail"></div>\n\t\t\t\t<div v-else-if="message.detail" class="p-toast-detail">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref="alert" class="fhc-alert" :base-z-index="99999" position="center">\n\t\t<template #message="slotProps">\n\t\t\t<i class="fa fa-circle-exclamation fa-2xl mt-3"></i>\n\t\t\t<div class="p-toast-message-text">\n\t\t\t\t<span class="p-toast-summary">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class="p-toast-detail my-3">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class="d-flex justify-content-between align-items-center">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass="align-bottom flex-fill me-2"\n\t\t\t\t\t\tdata-bs-toggle="collapse"\n\t\t\t\t\t\t:href="\'#fhcAlertCollapseMessageCard\' + slotProps.message.id"\n\t\t\t\t\t\trole="button"\n\t\t\t\t\t\taria-expanded="false"\n\t\t\t\t\t\t:aria-controls="\'fhcAlertCollapseMessageCard\' + slotProps.message.id"\n\t\t\t\t\t\t@click="openMessagecard"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if="showmaillink"\n\t\t\t\t\t\tclass="btn btn-primary flex-fill"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t:href="mailToUrl(slotProps)"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref="messageCard" :id="\'fhcAlertCollapseMessageCard\' + slotProps.message.id" class="collapse mt-3">\n\t\t\t\t\t<div class="card card-body text-body small alertCollapseText">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group="fhcAlertConfirm"></pv-confirm>'});bt.use(t),bt.use(r);const yt=bt.mount(vt);document.body.appendChild(vt);var At={install:(t,e)=>{t.config.globalProperties.$p||t.use(St);const n={alertSuccess(t){if(Array.isArray(t))return t.forEach(this.alertSuccess);yt.$refs.toast.add({severity:"success",summary:"Info",detail:t,life:1e3})},alertInfo(t){if(Array.isArray(t))return t.forEach(this.alertInfo);yt.$refs.toast.add({severity:"info",summary:"Info",detail:t,life:3e3})},alertWarning(t){if(Array.isArray(t))return t.forEach(this.alertWarning);yt.$refs.toast.add({severity:"warn",summary:"Achtung",detail:t})},alertError(t){if(Array.isArray(t))return t.forEach(this.alertError);yt.$refs.toast.add({severity:"error",summary:"Achtung",detail:t})},alertSystemError(e){if(Array.isArray(e))return e.forEach(this.alertSystemError);yt.$refs.alert.add({severity:"error",summary:Vue.computed(()=>t.config.globalProperties.$p.t("alert/systemerror")),detail:e})},confirmDelete:()=>new Promise((e,n)=>{yt.$confirm.require({group:"fhcAlertConfirm",header:Vue.computed(()=>t.config.globalProperties.$p.t("alert/attention")),message:Vue.computed(()=>t.config.globalProperties.$p.t("alert/confirm_delete")),acceptLabel:Vue.computed(()=>t.config.globalProperties.$p.t("ui/loeschen")),acceptClass:"p-button-danger",rejectLabel:Vue.computed(()=>t.config.globalProperties.$p.t("ui/abbrechen")),rejectClass:"p-button-secondary",accept(){e(!0)},reject(){e(!1)}})}),confirm:e=>new Promise((n,r)=>{yt.$confirm.require({group:e?.group??"fhcAlertConfirm",header:e?.header??Vue.computed(()=>t.config.globalProperties.$p.t("alert/attention")),message:e?.message??"",acceptLabel:e?.acceptLabel??"Ok",acceptClass:e?.acceptClass??"btn btn-primary",rejectLabel:e?.rejectLabel??Vue.computed(()=>t.config.globalProperties.$p.t("ui/abbrechen")),rejectClass:e?.rejectClass??"btn btn-outline-secondary",accept(){n(!0)},reject(){n(!1)}})}),alertDefault(t,e,n,r=!1,i=!1){let a={severity:t,summary:e,detail:n,html:i};r||(a.life=3e3),yt.$refs.toast.add(a)},alertMultiple(t,e="info",n="Info",r=!1,i=!1){return!!t.every(t=>"string"==typeof t)&&(t.forEach(t=>this.alertDefault(e,n,t,r,i)),!0)},handleSystemError(t){if(!t.hasOwnProperty("name")||t.name.toLowerCase()!=="AbortError".toLowerCase()){if("string"==typeof t)return n.alertSystemError(t);if(Array.isArray(t)&&t.every(t=>"string"==typeof t))return t.every(n.alertSystemError);if(!t.hasOwnProperty("handled")||!t.handled){if("object"==typeof t&&null!==t){let e="";return t.hasOwnProperty("response")&&t.response?.data?.retval?e+="Error Message: "+(t.response.data.retval.message||t.response.data.retval)+"\r\n":t.hasOwnProperty("message")&&(e+="Error Message: "+t.message.toUpperCase()+"\r\n"),t.hasOwnProperty("config")&&t.config.hasOwnProperty("url")&&(e+="Error ConfigURL: "+t.config.url+"\r\n"),t.hasOwnProperty("stack")&&(e+="Error Stack: "+t.stack+"\r\n"),""==e&&(e="Error Message: "+JSON.stringify(t)+"\r\n"),e+="Error Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method,n.alertSystemError(e)}n.alertSystemError("alertSystemError throws Generic Error\r\nError Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method)}}},handleSystemMessage(t){if("string"==typeof t)return n.alertWarning(t);if(Array.isArray(t)){if(t.every(t=>"string"==typeof t))return t.every(n.alertWarning);if(t.every(t=>"object"==typeof t)&&null!==msg)return t.every(t=>{t.hasOwnProperty("data")&&t.data.hasOwnProperty("retval")?n.alertWarning(JSON.stringify(t.data.retval)):n.alertSystemError(JSON.stringify(t))})}"object"!=typeof t||null===t?n.alertSystemError("alertSystemError throws Generic Error\r\nError Controller Path: "+FHC_JS_DATA_STORAGE_OBJECT.called_path+"/"+FHC_JS_DATA_STORAGE_OBJECT.called_method):t.hasOwnProperty("data")&&t.data.hasOwnProperty("retval")?n.alertWarning(JSON.stringify(t.data.retval)):n.alertSystemError(JSON.stringify(t))},resetFormValidation(t){const e=new Event("fhc-form-reset");t.querySelectorAll(["[data-fhc-form-validate],[data-fhc-form-error]"]).forEach(t=>t.dispatchEvent(e))},handleFormValidation(t,e){if(void 0===e){if(t&&t.nodeType===Node.ELEMENT_NODE)return e=>n.handleFormValidation(e,t)}else if(400==t?.response?.status){let r=gt.getError(t.response.data);"object"!=typeof r&&(r=t.response.data),n.resetFormValidation(e);const i=Object.entries(r).filter(([t,n])=>{const r=e.querySelector('[data-fhc-form-validate="'+t+'"]');return!r||(r.dispatchEvent(new CustomEvent("fhc-form-invalidate",{detail:n})),!1)}).map(t=>t[1]),a=e.querySelector("[data-fhc-form-error]");return void(a&&i.length?a.dispatchEvent(new CustomEvent("fhc-form-error",{detail:i})):i.forEach(n.alertError))}if(400==t?.response?.status){let e=gt.getError(t.response.data);n.alertError("object"==typeof e?Object.values(e):e)}else n.handleSystemError(t)}};t.config.globalProperties.$fhcAlert=n,t.provide("$fhcAlert",t.config.globalProperties.$fhcAlert)}},_t={install:(t,e)=>{if(t.config.globalProperties.$api)return;function n(t,e){Array.isArray(t)?t.forEach(e):Object.entries(t).forEach(([t,n])=>n.forEach(n=>e(n,t)))}t.config.globalProperties.$fhcAlert||t.use(At);let r={success:!0,fail:!0,combine:{form:["validation","general"],toast:["validation","general","not_found","site_failed"]},handler:{form(t,e){t.clearValidation(),e.forEach(e=>t.setFeedback(!1,e.messages||e.message))},async toast(e){const n=t.config.globalProperties.$p;if(!n)return Promise.reject("Phrasen plugin not loaded!");async function r(t){t=t.reduce((t,e)=>{switch(e.type){case"not_found":case"site_failed":e.message?t[e.message]=[e.url]:t._default=[e.url];break;case"general":t._default||(t._default=[]),t._default.push(e.message);break;case"validation":Object.entries(e.messages).forEach(([e,n])=>{t[e]||(t[e]=[]),Array.isArray(n)?t[e].push(...n):t[e].push(n)})}return t},{});let e=0;const r=await Promise.all(Object.entries(t).sort((t,e)=>["_default"].indexOf(e[0])-["_default"].indexOf(t[0])).map(async([t,r])=>{if("_default"==t){await n.loadCategory("dashboard");t='<dt class="d-none">'+n.t("dashboard/general")+"</dt>"}else t="<dt>"+t+"</dt>";return e+=r.length,t+"<dd>"+r.join("</dd><dd>")+"</dd>"}));return{counter:e,msgs:r}}let i,a;Array.isArray(e)?({counter:i,msgs:a}=await r(e)):({counter:i,msgs:a}=await Object.entries(e).reduce(async(t,[e,n])=>{const i=await t,{counter:a,msgs:s}=await r(n);return i.counter+=a,i.msgs.push("<dt>"+e+"</dt><dd><dl>"+s.join("")+"</dl></dd>"),i},Promise.resolve({counter:0,msgs:[]}))),await n.loadCategory("ui");const s=n.t("ui/n_errors",{n:i});t.config.globalProperties.$fhcAlert.alertDefault("error",s,"<dl>"+a.join("")+"</dl>",!0,!0)},php(e){n(e,(e,n)=>{var r="";switch(r+="Message: "+e.message+"\n\n",r+="Filename: "+e.filename+"\n",r+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(r+="\nBacktrace: ",e.backtrace.forEach(t=>{r+="\n\tFile: "+t.file+"\n",r+="\tLine: "+t.line+"\n",r+="\tFunction: "+t.function+"\n"})),e.severity){case"Warning":case"Core Warning":case"Compile Warning":case"User Warning":n?n+=": PHP "+e.severity:n="PHP "+e.severity,t.config.globalProperties.$fhcAlert.alertDefault("warn",n,r,!0);break;case"Notice":case"User Notice":case"Runtime Notice":n?n+=": PHP "+e.severity:n="PHP "+e.severity,t.config.globalProperties.$fhcAlert.alertDefault("info",n,r,!0);break;default:r="Type: PHP "+e.severity+"\n\n"+r,n&&(r=n+"\n\n"+r),t.config.globalProperties.$fhcAlert.alertSystemError(r)}})},exception(e){n(e,(e,n)=>{var r="";n&&(r+=n+"\n\n"),r+="Type: "+e.class+"\n\n",r+="Message: "+e.message+"\n\n",r+="Filename: "+e.filename+"\n",r+="Line Number: "+e.line+"\n",e.backtrace&&e.backtrace.length&&(r+="\nBacktrace: ",e.backtrace.forEach(t=>{r+="\n\tFile: "+t.file+"\n",r+="\tLine: "+t.line+"\n",r+="\tFunction: "+t.function+"\n"})),t.config.globalProperties.$fhcAlert.alertSystemError(r)})},db(e){n(e,(e,n)=>{var r="";n&&(r+=n+"\n\n"),void 0!==e.heading&&(r+=e.heading+"\n\n"),void 0!==e.code&&(r+="Code: "+e.code+"\n\n"),void 0!==e.sql&&(r+="SQL: "+e.sql+"\n\n"),void 0!==e.message?r+="Message: "+e.message+"\n\n":void 0!==e.messages&&(r+="Messages: "+e.messages.join("\n\t")+"\n\n"),void 0!==e.filename&&(r+="Filename: "+e.filename+"\n"),void 0!==e.line&&(r+="Line Number: "+e.line+"\n"),t.config.globalProperties.$fhcAlert.alertSystemError(r)})},auth(e){n(e,(e,n)=>{n?n+=": "+e.message:n=e.message;var r="";r+="Controller name: "+e.controller+"\n",r+="Method name: "+e.method+"\n",r+="Required permissions: "+e.required_permissions,t.config.globalProperties.$fhcAlert.alertDefault("error",n,r,!0)})}}};function i(t,e,n,r){if("string"==typeof t&&void 0===r)[e,n,r]=[t,e,n],t=void 0;else if(t){if("object"!=typeof t)throw new TypeError("Parameter 1 of _get_config must be an object or a string");void 0===e&&void 0===n&&void 0===r&&(r=t,t=void 0)}if(t){if(!t.clearValidation||!t.setFeedback)throw new TypeError("'form' is not a Form Component");t={clearValidation:t.clearValidation,setFeedback:t.setFeedback},r?r.form=t:r={form:t}}return[e,n,r]}function a(t){if("string"==typeof t.data||t.data instanceof String)return a({data:t});const e=t.data;return delete t.data,e?(e.meta?e.meta.response=t:e.meta={response:t},e):{meta:{response:t},data:null}}function s(t){if(!1===t||"off"===t)return{...r,success:!1,fail:!1};if(!t||!0===t)return{...r};if("success"===t)return{...r,fail:!1};if("fail"===t)return{...r,success:!1};const{success:e,fail:n,handler:i,combine:a}=t;return t={...r},Object.entries({fail:n,success:e}).forEach(([e,n])=>{void 0!==n&&(t[e]=n)}),Object.entries({handler:i,combine:a}).forEach(([e,n])=>{void 0!==n&&(t[e]={...t[e],...n})}),t}function o(t){const e=s(t?.errorHandling);if(t?.form){const n=e.handler.form;e.handler={...e.handler,form:e=>n(t.form,e)}}else e.combine={...e.combine,form:[]};return e}function l(t){return t.response?404==t.response.status?[{type:"not_found",message:t.message,url:t.request.responseURL}]:null==t.response.data.errors?[]:t.response.data.errors:t.request?[{type:"site_failed",message:t.message,url:t.request.responseURL}]:[{type:"script",message:t.message}]}function d(t,e){const n={},r=[];if(null==e)return{};for(;e.length;)r.push(e.pop());for(var i of r){let r=i.type,s=null;for(var a in t.combine){let e=t.combine[a].includes(r),n=t.handler[a];if(e&&n&&(s=a,"form"==s))break}s&&(r=s);t.handler[r]?(n[r]||(n[r]=[]),Array.isArray(i)?n[r].push(...i):n[r].push(i)):e.push(i)}return n}void 0!==e?.errorHandling&&(r=s(e.errorHandling));const u=axios.create({timeout:5e5,baseURL:FHC_JS_DATA_STORAGE_OBJECT.app_root+FHC_JS_DATA_STORAGE_OBJECT.ci_router+"/"});u.interceptors.request.use(t=>{if("post"!=t.method||!t.data)return t;if(t.data instanceof FormData)return t;if(!Object.values(t.data).every(t=>!(t instanceof FileList)&&(!Array.isArray(t)||t.every(t=>!(t instanceof File))))){const e=Object.entries(t.data).reduce((t,[e,n])=>{if(n instanceof FileList)for(const r of n)t.FormData.append(e+(n.length>1?"[]":""),r);else Array.isArray(n)?n.every(t=>!(t instanceof File))?t.jsondata[e]=n:n.forEach(r=>t.FormData.append(e+(n.length>1?"[]":""),r)):t.jsondata[e]=n;return t},{FormData:new FormData,jsondata:{}});e.FormData.append("_jsondata",JSON.stringify(e.jsondata)),t.data=e.FormData}return t}),u.interceptors.response.use(e=>("off"==e.config?.errorHandling||!1===e.config?.errorHandling||"fail"==e.config?.errorHandling||e.data.errors&&(e.data.errors=e.data.errors.filter(n=>(e.config[n.type+"ErrorHandler"]||t.config.globalProperties.$api._defaultErrorHandlers[n.type])(n,e.config))),a(e)),t=>{if("ERR_CANCELED"==t.code)return Promise.reject({handled:!0,...t});const e=o(t.config);if(!e.fail)return Promise.reject(t);const n=l(t),r=d(e,n);for(var i in r)e.handler[i](r[i]);return n.length?Promise.reject(t):Promise.reject({handled:!0,...t})}),t.config.globalProperties.$api={getUri:t=>u.getUri({url:t}),get:(t,e,n,r)=>([e,n,r]=i(t,e,n,r),n&&(r?r.params=n:r={params:n}),u.get(e,r)),post:(t,e,n,r)=>([e,n,r]=i(t,e,n,r),u.post(e,n,r)),call(e,n,r){if(Array.isArray(e)){const a=t.config.globalProperties.$api;return Promise.allSettled(e.map((t,e)=>(Array.isArray(t)||(t=["#"+e,t]),a.call(t[1],{errorHeader:t[0],errorHandling:!1})))).then(t=>{const[,,e]=i(r,void 0,void 0,n||{}),a=o(e);if(!a.success&&!a.fail)return t;const s={};for(var u of t){const[t,e]="fulfilled"===u.status?[a.success,u.value]:[a.fail,u.reason];if(!t)return;const n=d(a,l(e));for(var p in n)s[p]?s[p][e.config.errorHeader]=n[p]:s[p]={[e.config.errorHeader]:n[p]}}for(var c in s)a.handler[c](s[c]);return t})}let{method:a,url:s,params:u,config:p}=e;return void 0!==n&&(p=n),a||(a="get"),a.toLowerCase&&(a=a.toLowerCase()),"get"==a?this.get(r,s,u,p):"post"==a?this.post(r,s,u,p):void console.error("FhcApi: method not allowed:",a)}},t.provide("$api",t.config.globalProperties.$api)}},Ct={loadCategory:t=>({method:"get",url:"/api/frontend/v1/phrasen/loadModule/"+t}),setLanguage:(t,e)=>({method:"post",url:"/api/frontend/v1/phrasen/setLanguage",params:{categories:t,language:e}}),getLanguage:()=>({method:"get",url:"/api/frontend/v1/phrasen/getLanguage"}),getActiveDbLanguages:()=>({method:"get",url:"/api/frontend/v1/phrasen/getAllLanguages"})};const Ft=Vue.reactive({}),kt={};let Pt=Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language),$t=Vue.computed(()=>Pt.value?FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(t=>t.sprache==Pt.value).LC_Time:null);const wt={user_language:Pt,user_locale:$t,setLanguage(t){const e=Object.keys(Ft);return this.config.globalProperties.$api.call(Ct.setLanguage(e,t)).then(e=>(e.data.forEach(t=>{Ft[t.category][t.phrase]=t.text}),Pt.value=t,e))},loadCategory(t){return Array.isArray(t)?Promise.all(t.map(this.config.globalProperties.$p.loadCategory)):(kt[t]||(kt[t]=this.config.globalProperties.$api.call(Ct.loadCategory(t)).then(e=>e?.data?function(t,e){return t.filter(t=>t.category==e).reduce((t,e)=>(t[e.phrase]||(t[e.phrase]=e.text),t),{})}(e.data,t):{}).then(e=>{Ft[t]=e})),kt[t])},t_ref(t,e,n){return console.warn("deprecated"),Vue.computed(()=>this.t(t,e,n))},t(t,e,n){if(void 0===n&&(Array.isArray(t)&&2==t.length||t.split&&2==t.split("/").length)&&(n=e,[t,e]=t.split?t.split("/"):t),void 0===e)return console.error("invalid input",t,e,n),"";let r=Vue.computed(()=>Ft[t]?function(t,e,n){let r=Ft[t][e];return r?(n&&(r=r.replace(/\{([^}]*)\}/g,(t,e)=>void 0===n[e]?t:n[e])),r):"<< PHRASE "+e+">>"}(t,e,n):"");return Ft[t]||this.loadCategory(t),r.value}};var St={install(t,e){t.config.globalProperties.$fhcApi||t.use(ft),t.config.globalProperties.$api||t.use(_t),t.config.globalProperties.$p={t:wt.t,loadCategory:e=>wt.loadCategory.call(t,e),setLanguage:e=>wt.setLanguage.call(t,e),user_language:Pt,user_locale:$t,t_ref:wt.t_ref},t.provide("$p",t.config.globalProperties.$p)}},Dt=Object.freeze({__proto__:null,default:St,user_locale:$t});const Et=Vue.ref([]),Tt=Vue.ref([]),xt=Vue.ref([]),Ot=Vue.ref([]),Bt=Vue.ref([]),Vt=Vue.ref([]),Ht=Vue.ref([]),It=Vue.ref([]),zt=Vue.ref([]),Mt=Vue.ref([]),Lt=Vue.ref([]),Rt=Vue.ref([]),jt=Vue.ref([]),Jt=Vue.ref([]),Nt=Vue.ref([]),Ut=Vue.ref([]),Gt=Vue.ref([]),qt=Vue.createApp({name:"Handyverwaltung",data:function(){return{personid:null,personuid:"keine",betriebsmittelpersonapi:O}},components:{CoreNavigationCmpt:A,CoreFilterCmpt:b,CoreVerticalsplitCmpt:_,EmailTelData:x,Betriebsmittel:I,JobFunction:R,EmployeeHeader:G,EmployeeContractInfo:q},setup(){Vue.provide("sprache",Et),Vue.provide("nations",Tt),Vue.provide("standorte",xt),Vue.provide("orte",Ot),Vue.provide("ausbildung",Bt),Vue.provide("kontakttyp",Vt),Vue.provide("adressentyp",Ht),Vue.provide("sachaufwandtyp",It),Vue.provide("karenztypen",zt),Vue.provide("teilzeittypen",Mt),Vue.provide("vertragsarten",Lt),Vue.provide("vertragsbestandteiltypen",Rt),Vue.provide("gehaltstypen",Jt),Vue.provide("freitexttypen",jt),Vue.provide("hourlyratetypes",Nt),Vue.provide("unternehmen",Ut),Vue.provide("beendigungsgruende",Gt)},methods:{personselected:function(t,e){console.log("personselected",e),this.personid=e.getData().PersonId,this.personuid=e.getData().UID,!1!==this.$refs.vsplit.isCollapsed()&&this.$refs.vsplit.showBoth()}},computed:{employeesTabulatorEvents:function(){return[{event:"rowClick",handler:this.personselected},{event:"dataFiltered",handler:function(t,e){document.getElementById("search_count").innerHTML=e.length}},{event:"dataLoaded",handler:function(t){document.getElementById("total_count").innerHTML=t.length}}]},employeesTabulatorOptions:function(){return{height:"100%",layout:"fitColumns",persistenceID:"handyverwaltung_20240905_03",footerElement:'<div>&sum; <span id="search_count"></span> / <span id="total_count"></span></div>',columns:[{title:"UID",field:"UID",headerFilter:!0},{title:"Person ID",field:"PersonId",headerFilter:!0},{title:"Vorname",field:"Vorname",headerFilter:!0},{title:"Nachname",field:"Nachname",headerFilter:!0},{title:"EMail",field:"EMail",headerFilter:!0},{title:"Unternehmen",field:"Unternehmen",headerFilter:"list",headerFilterFunc:"=",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:"Vertragsart",field:"Vertragsart",headerFilter:!1},{title:"DV_von",field:"DV_von",headerFilter:!0},{title:"DV_bis",field:"DV_bis",headerFilter:!0},{title:"Wochenstunden",field:"Wochenstunden",headerFilter:!0},{title:"WS_von",field:"WS_von",headerFilter:!0},{title:"WS_bis",field:"WS_bis",headerFilter:!0},{title:"Standardkostenstelle",field:"Standardkostenstelle",headerFilter:"list",headerFilterFunc:"=",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:"Disziplinäre Zuordnung",field:"Disziplinäre Zuordnung",headerFilter:"list",headerFilterFunc:"=",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}},{title:"Dienstverhaeltnis ID",field:"DienstverhaeltnisId",headerFilter:!0},{title:"DV_status",field:"DV_status",headerFilter:"list",headerFilterFunc:"=",headerFilterParams:{valuesLookup:!0,autocomplete:!0,sort:"asc"}}]}}},template:'\n\t\t\x3c!-- Navigation component --\x3e\n\t\t<core-navigation-cmpt></core-navigation-cmpt>\n\n\t\t<div id="content">\n\t\t\t<core-verticalsplit-cmpt ref="vsplit">\n                            <template #top>\n                                <div class="d-flex flex-column" style="height: 100%;">\n                                    \x3c!-- Filter component --\x3e\n                                    <core-filter-cmpt\n                                        filter-type="Handyverwaltung"\n                                        :sideMenu="false"\n                                        :tabulator-options="employeesTabulatorOptions"\n                                        :tabulator-events="employeesTabulatorEvents"\n                                        :new-btn-show="false">\n                                    </core-filter-cmpt>\n                                </div>\n                            </template>\n    \n                            <template #bottom>\n\n                                <EmployeeHeader v-if="personid!=null" ref="employeeHeaderRef"  :personID="personid" :personUID="personuid" restricted ></EmployeeHeader> \n\n                                <EmployeeContractInfo v-if="personid!=null" ref="contractInfoRef"  :personID="personid" :personUID="personuid" />\n\n                                <div v-if="personid!=null">\n                                    <JobFunction :readonlyMode="true" :personID="personid" :personUID="personuid"></JobFunction>\n                                </div>\n\n                                <div class="row pt-md-4" v-if="personid!=null">      \n                                     <div class="col">\n                                         <div class="card">\n                                            <div class="card-header">\n                                                <div class="h5 mb-0"><h5>{{ $p.t(\'global\', \'kontakt\') }}</h5></div>\n                                            </div>\n                                            <div class="card-body">\n                                                <email-tel-data :personID="personid"></email-tel-data>\n                                            </div>\n                                         </div>\n                                     </div>\n                                </div>                                \n    \n                                <div class="row pt-md-4" v-if="personid!=null">      \n                                     <div class="col">\n                                         <div class="card">\n                                            <div class="card-header">\n                                                <div class="h5 mb-0"><h5>{{ $p.t(\'ui\', \'betriebsmittel\') }}</h5></div>        \n                                            </div>\n                                            <div class="card-body">\n                                                <Betriebsmittel :endpoint="betriebsmittelpersonapi" type-id="person_id" :id="personid" :uid="personuid" />\n                                            </div>\n                                         </div>\n                                     </div>\n                                </div>\n    \n                            </template>\n                        </core-verticalsplit-cmpt>\n\t\t</div>    \n'});qt.use(primevue.config.default),qt.use(St),qt.mount("#main"),qt.provide("cisRoot",CIS_ROOT),qt.config.globalProperties.$api.call(a.getSprache()).then(t=>{Et.value=t.data}),qt.config.globalProperties.$api.call(a.getNations()).then(t=>{Tt.value=t.data}),qt.config.globalProperties.$api.call(a.getAusbildung()).then(t=>{Bt.value=t.data}),qt.config.globalProperties.$api.call(a.getOrte()).then(t=>{Ot.value=t.data}),qt.config.globalProperties.$api.call(a.getStandorteIntern()).then(t=>{xt.value=t.data}),qt.config.globalProperties.$api.call(a.getKontakttyp()).then(t=>{Vt.value=t.data}),qt.config.globalProperties.$api.call(a.getAdressentyp()).then(t=>{Ht.value=t.data}),qt.config.globalProperties.$api.call(a.getSachaufwandTyp()).then(t=>{It.value=t.data}),qt.config.globalProperties.$api.call(a.getKarenztypen()).then(t=>{zt.value=t.data}),qt.config.globalProperties.$api.call(a.getTeilzeittypen()).then(t=>{Mt.value=t.data}),qt.config.globalProperties.$api.call(a.getVertragsarten()).then(t=>{Lt.value=t.data}),qt.config.globalProperties.$api.call(a.getGehaltstypen()).then(t=>{Jt.value=t.data}),qt.config.globalProperties.$api.call(a.getVertragsbestandteiltypen()).then(t=>{Rt.value=t.data}),qt.config.globalProperties.$api.call(a.getFreitexttypen()).then(t=>{jt.value=t.data}),qt.config.globalProperties.$api.call(a.getStundensatztypen()).then(t=>{Nt.value=t.data}),qt.config.globalProperties.$api.call(s.getUnternehmen()).then(t=>{Ut.value=t.data}),qt.config.globalProperties.$api.call(s.getDvEndeGruende()).then(t=>{Gt.value=t.data});var Wt={emits:["update:modelValue"],props:{modelValue:String},computed:{valueAsBase64DataString(){return this.modelValue&&"data:image"!=this.modelValue.substring(0,10)?"data:image/jpeg;charset=utf-8;base64,"+this.modelValue:this.modelValue}},methods:{openUploadDialog(){this.$refs.fileInput.click()},pickFile(){let t=this.$refs.fileInput.files;if(t&&t[0]){let e=new FileReader;e.onload=t=>{this.$emit("update:modelValue",t.target.result)},e.readAsDataURL(t[0])}},deleteImage(){this.$emit("update:modelValue","")}},template:'\n\t<div class="form-upload-image">\n\t\t<template v-if="modelValue">\n\t\t\t<img class="img-thumbnail" :src="valueAsBase64DataString" />\n\t\t\t<div class="fotobutton">\n\t\t\t\t<div class="d-grid gap-2 d-md-flex">\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="deleteImage">\n\t\t\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="openUploadDialog">\n\t\t\t\t\t\t<i class="fa fa-pen"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<slot>\n\t\t\t\t<svg class="bd-placeholder-img img-thumbnail" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera: 200x200" preserveAspectRatio="xMidYMid slice" focusable="false"><title>A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="50%" y="50%" fill="#dee2e6" dy=".3em"></text></svg>\n\t\t\t</slot>\n\t\t\t<div class="fotobutton-visible">\n\t\t\t\t<div class="d-grid gap-2 d-md-flex">\n\t\t\t\t\t<button type="button" class="btn btn-outline-dark btn-sm" @click="openUploadDialog">\n\t\t\t\t\t\t<i class="fa fa-pen"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<input :id="$attrs.id" class="d-none" type="file" ref="fileInput" @input="pickFile" accept="image/*">\n\t</div>'},Kt=Object.freeze({__proto__:null,default:Wt}),Zt={components:{DmsItem:{emits:["delete"],props:{modelValue:{type:[File,Object],required:!0}},data:()=>({preview:""}),watch:{modelValue(t){"application/x.fhc-dms+json"==t.type&&t.text().then(t=>{const e=JSON.parse(t);this.preview=e.preview||""})}},template:'\n\t<li class="form-upload-dms-item">\n\t\t<span class="col-auto"><i class="fa fa-file me-1"></i></span>\n\t\t<span class="col">{{ modelValue.name }}</span>\n\t\t<a v-if="preview" :href="preview" target="_blank" class="col-auto btn btn-outline-secondary btn-p-0 me-1">\n\t\t\t<i class="fa fa-download"></i>\n\t\t</a>\n\t\t<button class="col-auto btn btn-outline-secondary btn-p-0" @click="$emit(\'delete\')">\n\t\t\t<i class="fa fa-close"></i>\n\t\t</button>\n\t</li>'}},emits:["update:modelValue"],props:{modelValue:{type:[FileList,Array],required:!0},multiple:Boolean,id:String,name:String,inputClass:[String,Array,Object],noList:Boolean,accept:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{stringifyFile:t=>JSON.stringify({lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type}),addFiles(t){if(!this.multiple)return this.$emit("update:modelValue",t.target.files);const e=new DataTransfer,n=[];for(var r of this.modelValue)e.items.add(r),n.push(this.stringifyFile(r));for(var r of t.target.files)n.indexOf(this.stringifyFile(r))<0&&e.items.add(r);this.$emit("update:modelValue",e.files)},removeFile(t){const e=Array.from(this.modelValue)[t],n=new DataTransfer;for(var r of this.modelValue)r!==e&&n.items.add(r);this.$emit("update:modelValue",n.files)}},watch:{modelValue(t){if(!t)return;if(t instanceof FileList){if(!this.$refs.upload)return;return this.$refs.upload.files=t}const e=new DataTransfer;for(var n of t)if(n instanceof File)e.items.add(n);else{const t=new File([JSON.stringify(n)],n.name,{type:"application/x.fhc-dms+json"});e.items.add(t)}this.$emit("update:modelValue",e.files)}},template:'\n\t<div class="form-upload-dms">\n\t\t<input ref="upload" class="form-control" :disabled="disabled" :accept="accept" :aria-label="$p.t(\'profilUpdate\',\'documentUpload\')" :title="$p.t(\'profilUpdate\',\'documentUpload\')" :class="inputClass" :id="id" :name="name" :multiple="multiple" type="file" @change="addFiles">\n\t\t<ul v-if="modelValue.length && multiple && !noList" :accept="accept" class="list-unstyled m-0">\n\t\t\t<dms-item\n\t\t\t\tv-for="(file, index) in modelValue"\n\t\t\t\t:key="index"\n\t\t\t\tv-model="file"\n\t\t\t\tclass="d-flex mx-1 mt-1 align-items-start"\n\t\t\t\t@delete="removeFile(index)"\n\t\t\t\t>\n\t\t\t</dms-item>\n\t\t</ul>\n\t</div>'},Yt=Object.freeze({__proto__:null,default:Zt});
//# sourceMappingURL=Handyverwaltung.js.map
