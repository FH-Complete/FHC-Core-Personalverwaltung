{"version":3,"file":"Employee.js","sources":["../../../../../js/components/Fetch.js","../../../../../js/components/filter/Filter/Config.js","../../../../../js/components/filter/Filter/Columns.js","../../../../../js/components/filter/Table/Download.js","../../../../../js/directives/collapseAutoClose.js","../../../../../js/tabulator/layouts/fitDataStretchFrozen.js","../../../../../js/api/factory/filter.js","../../../../../js/components/filter/Filter.js","../../../../../js/api/factory/navigation.js","../../../../../js/components/navigation/Navigation.js","../../../../../js/components/verticalsplit/verticalsplit.js","../../../../../js/components/searchbar/result/template/action.js","../../../../../js/components/searchbar/result/template/frame.js","../../../../../js/components/searchbar/result/template/actions.js","../../../../../js/components/searchbar/result/person.js","../../../../../js/components/searchbar/result/room.js","../../../../../js/components/searchbar/result/employee.js","../../../../../js/components/searchbar/result/organisationunit.js","../../../../../js/components/searchbar/result/student.js","../../../../../js/components/searchbar/result/prestudent.js","../../../../../js/components/searchbar/result/dms.js","../../../../../js/components/searchbar/result/cms.js","../../../../../js/components/searchbar/result/mergedstudent.js","../../../../../js/components/searchbar/result/mergedperson.js","../../../../../js/components/searchbar/searchbar.js","../../../../../js/api/factory/searchbar.js","../../../../../js/mixins/Phrasen.js","../../../../../js/RESTClient.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/apps/common.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/ModalDialog.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/person.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/BaseData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/Modal.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/BankData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/common.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contact/AddressData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contact/EmailTelData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contact/ContactData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/MaterialExpensesData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/Toast.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/stundensatz.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/HourlyRateData.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/orgviewer.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/organisation/OrgChooser.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/funktion.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/JobFunction.js","../../../../../js/directives/accessibility.js","../../../../../js/components/Tabs.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeePerson.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/vertragsbestandteil.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/employee.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeStatus.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/issue.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeHeader.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeNav.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeEditor.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/create/SearchExistingDialog.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/helpers/validation/svnr.js","../../../../../js/api/factory/checkperson.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/create/CreateEmployeeFrm.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/create/stepper/Step.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/create/CreateWizard.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/create/stepper/Steps.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/EmployeeHome.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/debug_viewer.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vbsharedstate.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/mixins/vbform/presetable.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/mixins/vbform/configurable.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/gueltigkeit.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/errors.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/infos.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/gehaltsbestandteil.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/helpers/vbform/uuid.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/gehaltsbestandteilhelper.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/stunden.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_stunden.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_zeitaufzeichnung.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_funktion.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/karenz.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_karenz.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteillist.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_freitext.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_kuendigungsfrist.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vertragsbestandteil_urlaubsanspruch.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/dv.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/dienstverhaeltnis.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/dv.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/freitext.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/gehaltsbestandteil.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vbformhelper.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/tabs.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/tab.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vblistgroup.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/tabsspacer.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/vblistgroupspacer.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/presets_chooser.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/tmpstore.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/vbform/tmpstorehelper.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/helpers/vbform/vbgb2gui.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/helpers/vbform/savedpayloadchecker.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/helpers/vbform/vbconfig.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/vertrag.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/vbform/vbform_wrapper.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/vbform/enddvmodal.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/vbform/deletedvmodal.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/vbform/karenzmodal.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/DropDownButton.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/OffCanvasTimeline.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/valorisierungcheck.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/contract/EmployeeContract.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/DVCard.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/LehreCard.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/IssuesCard.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/zeit.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/OffTimeCard.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/api/factory/deadline.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/DeadlineIssueDialog.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/DeadlineIssueTable.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/summary/EmployeeSummary.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/time/OffTime.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/time/TimeRecording.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/time/EmployeeTime.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/lifecycle/EmployeeLifeCycle.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/employee/document/EmployeeDocument.js","../../../../../js/api/search.js","../../../../../js/api/phrasen.js","../../../../../js/api/navigation.js","../../../../../js/api/filter.js","../../../../../js/api/studstatus.js","../../../../../js/api/profil.js","../../../../../js/api/profilUpdate.js","../../../../../js/api/lvPlan.js","../../../../../js/api/stv.js","../../../../../js/api/stv/verband.js","../../../../../js/api/stv/students.js","../../../../../js/api/stv/filter.js","../../../../../js/api/stv/konto.js","../../../../../js/api/stv/group.js","../../../../../js/api/stv/kontakt.js","../../../../../js/api/stv/prestudent.js","../../../../../js/api/stv/status.js","../../../../../js/api/stv/details.js","../../../../../js/api/stv/exam.js","../../../../../js/api/stv/abschlusspruefung.js","../../../../../js/api/stv/grades.js","../../../../../js/api/stv/mobility.js","../../../../../js/api/stv/archiv.js","../../../../../js/api/stv/documents.js","../../../../../js/api/stv/exemptions.js","../../../../../js/api/stv/jointstudies.js","../../../../../js/api/stv/courselist.js","../../../../../js/api/notiz.js","../../../../../js/api/notiz/person.js","../../../../../js/api/betriebsmittel.js","../../../../../js/api/betriebsmittel/person.js","../../../../../js/api/checkperson.js","../../../../../js/api/ort.js","../../../../../js/api/cms.js","../../../../../js/api/lehre.js","../../../../../js/api/addons.js","../../../../../js/api/messages.js","../../../../../js/api/messages/person.js","../../../../../js/api/vorlagen.js","../../../../../js/api/studium.js","../../../../../js/api/fhcapifactory.js","../../../../../js/api/dashboard.js","../../../../../js/api/bookmark.js","../../../../../js/api/ampeln.js","../../../../../js/api/studiengang.js","../../../../../js/api/menu.js","../../../../../js/api/authinfo.js","../../../../../js/api/language.js","../../../../../js/plugin/OldFhcApi.js","../../../../../js/plugins/FhcAlert.js","../../../../../js/plugins/Api.js","../../../../../js/api/factory/phrasen.js","../../../../../js/plugins/Phrasen.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/bulk/valorisationformathelper.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/components/bulk/ValorisationCheck.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/apps/Employee.js"],"sourcesContent":["/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const CoreFetchCmpt = {\n\temits: ['dataFetched'], // this component can emit the event dataFetched that it is catched by this component itself\n\tprops: {\n\t\trefresh: { // to refresh this component\n\t\t\ttype: Boolean\n\t\t},\n\t\tapiFunction: { // the function to call, must return a Promise\n\t\t\trequired: true,\n\t\t\ttype: Function\n\t\t},\n\t\tapiFunctionParameters: {} // parameters for the apiFunction, type mixed, optional\n\t},\n\twatch: {\n\t\t/**\n\t\t * If the refresh property is changed then call fetchData\n\t\t */\n\t\trefresh: function (newValue, oldValue) {\n\t\t\tthis.fetchData();\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tloading: false, // if in loading or not\n\t\t\terror: false, // if an error occurred while loading data\n\t\t\terrorMessage: null // the error message\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.fetchData();\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchData: function() {\n\t\t\tthis.loading = true; // loader started\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = null;\n\n\t\t\t// Checks if the apifunction is a callable function\n\t\t\tif (typeof this.apiFunction == \"function\")\n\t\t\t{\n\t\t\t\t// Call the function stored in apiFunction\n\t        \t\tlet apiFunctionResult = this.apiFunction(this.apiFunctionParameters);\n\n\t\t\t\t// It is expected that the function returns a Promise\n\t\t\t\tif (apiFunctionResult instanceof Promise)\n\t\t\t\t{\n\t\t\t\t\tapiFunctionResult\n\t\t\t\t\t\t.then(this.successHandler) // on success\n\t\t\t\t\t\t.catch(this.errorHandler) // on error\n\t\t\t\t\t\t.finally(this.finallyHandler); // finally in any case\n\t\t\t\t}\n\t\t\t\telse // otherwise display an error\n\t\t\t\t{\n\t\t\t\t\tthis.setError(\"The called apiFunction does not return a Promise\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // otherwise display an error\n\t\t\t{\n\t\t\t\tthis.setError(\"Property apiFunction is not a function\");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsetError: function(errorMessage) {\n\t\t\tthis.loading = false; // loading ended\n\t\t\tthis.error = true; // error occurred\n\t\t\tthis.errorMessage = errorMessage; // save the error message\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsuccessHandler: function(response) {\n\t\t\tthis.$emit('dataFetched', response ? response.data : undefined); // trigger the event dataFetched\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\terrorHandler: function(error) {\n\t\t\tif (error.response?.data?.retval)\n\t\t\t\tthis.setError(error.response.data.retval);\n\t\t\telse if (error.data?.message)\n\t\t\t\tthis.setError(error.data.message);\n\t\t\telse\n\t\t\t\tthis.setError(error.message);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfinallyHandler: function() {\n\t\t\tthis.loading = false; // loading ended\n\t\t}\n\t},\n\ttemplate: `\n\t\t<slot v-if=\"loading\" name=\"loading\">\n\t\t\t<div class=\"fetch-loader\">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if=\"error\" name=\"error\" :error-message=\"errorMessage\">\n\t\t\t<div class=\"fetch-error\">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t`\n};\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfilters: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\temits: {\n\t\tswitchFilter: ['filterId'],\n\t\tapplyFilterConfig: ['filterFields'],\n\t\tsaveCustomFilter: ['customFilterName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tcurrentFields: []\n\t\t};\n\t},\n\tcomputed: {\n\t\ttypes() {\n\t\t\treturn this.columns.reduce((a,c) => {\n\t\t\t\tlet type = c.type.toLowerCase();\n\t\t\t\tif (type.indexOf('int') >= 0)\n\t\t\t\t\ta[c.name] = 'Numeric';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('varchar') >= 0 || \n\t\t\t\t\ttype.indexOf('text') >= 0 || \n\t\t\t\t\ttype.indexOf('bpchar') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Text';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('timestamp') >= 0 || \n\t\t\t\t\ttype.indexOf('date') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Date';\n\t\t\t\telse\n\t\t\t\t\ta[c.name] = '';\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t}\n\t},\n\twatch: {\n\t\tfields(n) {\n\t\t\tthis.currentFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchFilter(evt) {\n\t\t\tthis.$emit('switchFilter', evt.currentTarget.value);\n\t\t},\n\t\tapplyFilterConfig() {\n\t\t\tconst filteredFields = this.currentFields.filter(el => el.name != FILTER_COMPONENT_NEW_FILTER);\n\t\t\tif (filteredFields.filter(el => el.condition == \"\").length)\n\t\t\t\talert(\"Please fill all the filter options\");\n\t\t\telse\n\t\t\t\tthis.$emit('applyFilterConfig', filteredFields);\n\t\t},\n\t\taddField(evt) {\n\t\t\tthis.currentFields.push({\n\t\t\t\tname: FILTER_COMPONENT_NEW_FILTER\n\t\t\t});\n\t\t},\n\t\tremoveField(index) {\n\t\t\tthis.currentFields.splice(index, 1);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-config\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<div v-if=\"filters.length\" class=\"mb-4\">\n\t\t\t\t\t<select class=\"form-select\" @change=\"switchFilter\">\n\t\t\t\t\t\t<option value=\"\">Bitte auswählen...</option>\n\t\t\t\t\t\t<option v-for=\"filter in filters\" :value=\"filter.id\">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-outline-dark\" type=\"button\" @click=addField>\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filter-config-fields my-3\">\n\t\t\t\t\t<div v-for=\"(filterField, index) in currentFields\" class=\"filter-config-field row\">\n\n\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t<span class=\"input-group-text\">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\"form-select\"\n\t\t\t\t\t\t\t\t\tv-model=\"filterField.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Feld zum Filter hinzufügen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"col in columns\" :value=\"col.name\">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Numeric -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Numeric'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Text'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"contains\">Enthält</option>\n\t\t\t\t\t\t\t\t\t<option value=\"ncontains\">Enthält nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Timestamp and date -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Date'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"set\">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nset\">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.option\">\n\t\t\t\t\t\t\t\t\t<option value=\"minutes\">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value=\"hours\">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value=\"days\">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value=\"months\">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"col text-end\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"btn btn-outline-dark\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"removeField(index)\"\n\t\t\t\t\t\t\t\ttitle=\"Filter entfernen\"\n\t\t\t\t\t\t\t\taria-title=\"Filter entfernen\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa-solid fa-minus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Filter save options -->\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-7\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<input ref=\"filterName\" type=\"text\" class=\"form-control\" placeholder=\"Filternamen eingeben...\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"$emit('saveCustomFilter', $refs.filterName.value)\">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-dark\" @click=\"applyFilterConfig\">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfields: Array,\n\t\tselected: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tnames: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\temits: {\n\t\thide: ['fieldName'],\n\t\tshow: ['fieldName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tselectedFields: []\n\t\t};\n\t},\n\twatch: {\n\t\tselected(n) {\n\t\t\tthis.selectedFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle(field) {\n\t\t\tif (this.selectedFields.indexOf(field) != -1)\n\t\t\t{\n\t\t\t\tthis.selectedFields.splice(this.selectedFields.indexOf(field), 1);\n\t\t\t\tthis.$emit('hide', field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedFields.push(field);\n\t\t\t\tthis.$emit('show', field);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-columns\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"d-flex flex-wrap gap-2 p-3 justify-content-center\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"fieldToDisplay in fields\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:class=\"selectedFields.indexOf(fieldToDisplay) != -1 ? 'btn-dark' : 'btn-outline-dark' \"\n\t\t\t\t\t@click=\"toggle(fieldToDisplay)\"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_ICONS = {\n\tjsonLines: 'fa-file-lines',\n\txlsx: 'fa-file-excel',\n\tpdf: 'fa-file-pdf',\n\thtml: 'fa-file-code',\n\tjson: 'fa-file',\n\tcsv: 'fa-file-csv'\n};\nconst DEFAULT_LABELS = {\n\tjsonLines: 'Download as JSONLINES',\n\txlsx: 'Download as XLSX',\n\tpdf: 'Download as PDF',\n\thtml: 'Download as HTML',\n\tjson: 'Download as JSON',\n\tcsv: 'Download as CSV '\n};\n\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\ttabulator: Object,\n\t\tconfig: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\ticonClass: [String, Array, Object]\n\t},\n\tcomputed: {\n\t\tcurrentConfig() {\n\t\t\tif (!this.config)\n\t\t\t\treturn false;\n\n\t\t\tlet config = this.config;\n\n\t\t\tif (config instanceof Function)\n\t\t\t\treturn [config];\n\n\t\t\tif (config === null)\n\t\t\t\treturn [];\n\n\t\t\tif (this.config === true)\n\t\t\t\tconfig = ['csv'];\n\n\t\t\tif (Object.prototype.toString.call(config) === \"[object String]\")\n\t\t\t\tconfig = config.split(',');\n\n\t\t\tif (typeof config === 'object' && !Array.isArray(config)) {\n\t\t\t\tlet newConfig = [];\n\t\t\t\tfor (var k in config) {\n\t\t\t\t\tvar v = config[k], type;\n\t\t\t\t\t\n\t\t\t\t\tif (!v)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\n\t\t\t\t\tif (Object.prototype.toString.call(v) === \"[object String]\") {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(v);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: v === k ? DEFAULT_LABELS[type] : k,\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\t\tif(type !== null) {\n\t\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert('neither ' + k + ' nor ' + v + ' are supported download file types');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof v === 'object' && !Array.isArray(v)) {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tif (v.formatter === undefined)\n\t\t\t\t\t\t\t\tv.formatter = type;\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = DEFAULT_LABELS[type];\n\t\t\t\t\t\t\tif (v.icon === undefined)\n\t\t\t\t\t\t\t\tv.icon = DEFAULT_ICONS[type];\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = k;\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[type],\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(k + ' is not a supported download file type');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig = newConfig;\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t{\n\t\t\t\tconfig = config.map(el => {\n\t\t\t\t\tif (Object.prototype.toString.call(el) === \"[object String]\") {\n\t\t\t\t\t\tlet formatter = this.stringToFileFormatter(el);\n\t\t\t\t\t\tif (formatter === null)\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[formatter],\n\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[formatter],\n\t\t\t\t\t\t\tformatter\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el instanceof Function)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformatter: el\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (typeof el === 'object' && !Array.isArray(el) && el !== null) {\n\t\t\t\t\t\tif (el.formatter instanceof Function)\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\tif (this.validateFileFormatter(el.formatter))\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(el => el !== null);\n\n\t\t\t\tif (config.length < 2)\n\t\t\t\t\treturn config;\n\n\t\t\t\tif (config.filter(el => el.label || el.icon).length == config.length)\n\t\t\t\t\treturn config;\n\n\t\t\t\talert('Config not valid');\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\tmethods: {\n\t\tstringToFileFormatter(input) {\n\t\t\tlet lcInput = input.toLowerCase();\n\t\t\t\n\t\t\tif (lcInput == 'jsonlines')\n\t\t\t\treturn 'jsonLines';\n\t\t\t\n\t\t\tif (['xlsx', 'pdf', 'html', 'json', 'csv'].includes(lcInput))\n\t\t\t\treturn lcInput;\n\n\t\t\treturn null;\n\t\t},\n\t\tvalidateFileFormatter(input) {\n\t\t\tlet formatter = this.stringToFileFormatter(input);\n\t\t\tif (!formatter) {\n\t\t\t\talert(input + ' is not a supported file formatter');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (formatter == 'xlsx') {\n\t\t\t\tif (!window.XLSX) {\n\t\t\t\t\talert('XLSX Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formatter == 'pdf') {\n\t\t\t\tif (!window.jspdf) {\n\t\t\t\t\talert('jsPDF Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar doc = new jspdf.jsPDF({});\n\t\t\t\tif (!doc.autoTable) {\n\t\t\t\t\talert('jsPDF-AutoTable Plugin not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tdownload(config) {\n\t\t\tthis.tabulator.download(config.formatter, config.file, config.options)\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"currentConfig\">\n\t\t<template v-if=\"currentConfig.length == 1\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\t@click.prevent=\"download(currentConfig[0])\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class=\"dropdown d-inline\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\trole=\"button\"\n\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-end\">\n\t\t\t\t<li v-for=\"(conf, i) in currentConfig\" :key=\"i\">\n\t\t\t\t\t<a class=\"dropdown-item\" href=\"#\" @click.prevent=\"download(conf)\">\n\t\t\t\t\t\t<span v-if=\"conf.icon\" :class=\"conf.icon\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t`\n};\n\n","const elementDataMap = new WeakMap();\n\nexport default {\n\tmounted(el, binding) {\n\t\tlet open = false;\n\t\telementDataMap.set(el, evt => {\n\t\t\tif (!open)\n\t\t\t\treturn;\n\n\t\t\tif (el.contains(evt.target))\n\t\t\t\treturn;\n\n\t\t\tconst collapse = bootstrap.Collapse.getInstance(el)\n\t\t\tif (collapse)\n\t\t\t\tcollapse.hide();\n\t\t});\n\t\tel.addEventListener('shown.bs.collapse', () => {\n\t\t\topen = true;\n\t\t});\n\t\tel.addEventListener('hide.bs.collapse', () => {\n\t\t\topen = false;\n\t\t});\n\t\tdocument.addEventListener('click', elementDataMap.get(el), true);\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tdocument.removeEventListener('click', elementDataMap.get(el));\n\t\tdelete el.collapsibleAutoHideFunc;\n\t}\n}","/**\n * This may need changes if Tabulator gets updated!\n *\n * Current working Version: 5.5.2\n * \n * This is a copy of the fitDataStretch function. The only difference\n * is the check for frozen columns on line 22.\n */\n\nexport default window.Tabulator?.extendModule(\"layout\", \"modes\", {\n\tfitDataStretchFrozen(columns, forced) {\n\t\tvar colsWidth = 0,\n\t\ttableWidth = this.table.rowManager.element.clientWidth,\n\t\tgap = 0,\n\t\tlastCol = false;\n\n\t\tcolumns.forEach((column, i) => {\n\t\t\tif (!column.widthFixed) {\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible && !column.definition.frozen) {\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol){\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tlastCol.setWidth(0);\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n});\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/saveCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t};\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/applyFilterFields',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t};\n\t},\n\taddFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/addFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tgetFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport FilterConfig from './Filter/Config.js';\nimport FilterColumns from './Filter/Columns.js';\nimport TableDownload from './Table/Download.js';\nimport collapseAutoClose from '../../directives/collapseAutoClose.js';\n\nimport moduleLayoutFitDataStretchFrozen from '../../tabulator/layouts/fitDataStretchFrozen.js';\n\nimport ApiFilter from '../../api/factory/filter.js';\n\n//\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\nconst FILTER_COMPONENT_NEW_FILTER_TYPE = 'Filter Component New Filter Type';\n\nvar _uuid = 0;\n\n/**\n *\n */\nexport const CoreFilterCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt,\n\t\tFilterConfig,\n\t\tFilterColumns,\n\t\tTableDownload\n\t},\n\tdirectives: {\n\t\tcollapseAutoClose\n\t},\n\temits: [\n\t\t'nwNewEntry',\n\t\t'click:new',\n\t\t'tableBuilt',\n\t\t'uuidDefined'\n\t],\n\tprops: {\n\t\tonNwNewEntry: Function, // NOTE(chris): Hack to get the nwNewEntry listener into $props\n\t\ttitle: String,\n\t\tdescription: String,\n\t\tsideMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tfilterType: {\n\t\t\ttype: String\n\t\t},\n\t\ttabulatorOptions: Object,\n\t\ttabulatorEvents: Array,\n\t\ttableOnly: Boolean,\n\t\tnoColumnFilter:Boolean,\n\t\treload: Boolean,\n\t\treloadBtnInfotext: String,\n\t\tdownload: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\tnewBtnShow: Boolean,\n\t\tnewBtnClass: [String, Array, Object],\n\t\tnewBtnDisabled: Boolean,\n\t\tnewBtnLabel: String,\n\t\tuniqueId: String,\n\n\t\tidField: String,\n\t\tparentIdField: String,\n\t\tcountOnly: Boolean,\n\t\tuseSelectionSpan: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tuuid: 0,\n\t\t\t// FilterCmpt properties\n\t\t\tfilterName: null,\n\t\t\tfilterActive: false,\n\t\t\tfields: null,\n\t\t\tdataset: null,\n\t\t\tdatasetMetadata: null,\n\t\t\tselectedFields: null,\n\t\t\tfilterFields: null,\n\n\t\t\tavailableFilters: null,\n\t\t\tselectedFilter: null,\n\n\t\t\t// FetchCmpt binded properties\n\t\t\tfetchCmptRefresh: false,\n\t\t\tfetchCmptApiFunction: null,\n\t\t\tfetchCmptApiFunctionParams: null,\n\t\t\tfetchCmptDataFetched: null,\n\n\t\t\tfetchResult: null,\n\n\t\t\ttabulator: null,\n\t\t\ttableBuilt: false,\n\t\t\ttabulatorHasSelector: false,\n\t\t\tselectedData: [],\n\t\t\tpersistence: {\n\t\t\t\tsort: true,\n\t\t\t\tcolumns: true,\n\t\t\t\tfilter: false,\n\t\t\t\theaderFilter: false,\n\t\t\t\tgroup: false,\n\t\t\t\tpage: false,\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotSelectedFields() {\n\t\t\tif (!this.fields || !this.selectedFields)\n\t\t\t\treturn null;\n\t\t\treturn this.fields.filter(x => this.selectedFields.indexOf(x) === -1)\n\t\t},\n\t\tfilteredData() {\n\t\t\tif (!this.dataset)\n\t\t\t\treturn [];\n\t\t\treturn JSON.parse(JSON.stringify(this.dataset));\n\t\t},\n\t\tfilteredColumns() {\n\t\t\tlet fields = JSON.parse(JSON.stringify(this.fields)) || [];\n\t\t\tlet selectedFields = JSON.parse(JSON.stringify(this.selectedFields)) || [];\n\n\t\t\tlet columns = null;\n\n\t\t\t// If the tabulator options has been provided and it contains the property columns\n\t\t\tif (this.tabulatorOptions && this.tabulatorOptions.hasOwnProperty('columns'))\n\t\t\t\tcolumns = this.tabulatorOptions.columns;\n\n\t\t\t// If columns is not an array or it is an array with less elements then the array fields\n\t\t\tif (!Array.isArray(columns) || (Array.isArray(columns) && columns.length < fields.length))\n\t\t\t{\n\t\t\t\tcolumns = []; // set it as an empty array\n\n\t\t\t\t// Loop throught all the retrieved columns from database\n\t\t\t\tfor (let field of fields)\n\t\t\t\t{\n\t\t\t\t\t// Create a new column having the title equal to the field name\n\t\t\t\t\tlet column = {\n\t\t\t\t\t\ttitle: field,\n\t\t\t\t\t\tfield: field\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\tcolumn.visible = selectedFields.indexOf(field) >= 0;\n\n\t\t\t\t\t// Add the new column to the list of columns\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // the property columns has been provided in the tabulator options\n\t\t\t{\n\t\t\t\t// Loop throught the property columns of the tabulator options\n\t\t\t\tfor (let col of columns)\n\t\t\t\t{\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\t/* fields.indexOf(col.field) == -1; ensures displaying formatter colums\n\t\t\t\t\te.g. column with rowSelection checkboxes or with custom formatted action buttons */\n\t\t\t\t\tcol.visible = selectedFields.indexOf(col.field) >= 0 || fields.indexOf(col.field) == -1;\n\n\t\t\t\t\tif (col.hasOwnProperty('resizable'))\n\t\t\t\t\t\tcol.resizable = col.visible;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns;\n\t\t},\n\t\tfieldIdsForVisibilty() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn [];\n\t\t\treturn this.tabulator.getColumns().filter(col => {\n\t\t\t\tlet def = col.getDefinition();\n\t\t\t\treturn !def.frozen && def.title && def.formatter != \"responsiveCollapse\";\n\t\t\t}).map(col => col.getField());\n\t\t},\n\t\tfieldNames() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn {};\n\t\t\treturn this.tabulator.getColumns().reduce((res, col) => {\n\t\t\t\tres[col.getField()] = col.getDefinition().title;\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t\t},\n\t\tidExtra() {\n\t\t\tif (!this.uuid)\n\t\t\t\treturn '';\n\t\t\treturn '-' + this.uuid;\n\t\t},\n\t\tcolumnsForFilter() {\n\t\t\tif (!this.filteredColumns || !this.datasetMetadata)\n\t\t\t\treturn [];\n\t\t\tconst filterTitles = this.filteredColumns.reduce((a,c) => {\n\t\t\t\ta[c.field] = c.title;\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t\treturn this.datasetMetadata.map(el => ({...el, ...{title: filterTitles[el.name]}}));\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable() {\n\t\t\tif (this.tableOnly)\n\t\t\t\tthis.tabulator.setData();\n\t\t\telse\n\t\t\t\tthis.getFilter();\n\t\t},\n\t\tasync initTabulator() {\n\t\t\tlet placeholder = '< Phrasen Plugin not loaded! >';\n\t\t\tif (this.$p) {\n\t\t\t\tawait this.$p.loadCategory('ui');\n\t\t\t\tplaceholder = this.$p.t('ui/keineDatenVorhanden');\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\t// prefetch data to get fields & selectedFields for filteredColumns & filteredData\n\t\t\t\tawait new Promise(resolve => {\n\t\t\t\t\tconst filterId = window.location.hash ? window.location.hash.slice(1) : null;\n\n\t\t\t\t\tconst resolvePromiseFunc = data => {\n\t\t\t\t\t\tthis.setRenderData(data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\t// get the filter data\n\t\t\t\t\tif (filterId === null)\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t\t\t{ filterId },\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Define a default tabulator options in case it was not provided\n\t\t\tlet tabulatorOptions = {...{\n\t\t\t\t\tlayout: \"fitDataStretchFrozen\",\n\t\t\t\t\tmovableColumns: true,\n\t\t\t\t\tcolumnDefaults:{\n\t\t\t\t\t\ttooltip: true\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tpersistence: this.persistence,\n\t\t\t\t}, ...(this.tabulatorOptions || {})};\n\n\t\t\t// set default height if no height property is set\n\t\t\tif (tabulatorOptions.height === undefined &&\n\t\t\t\ttabulatorOptions.minHeight === undefined &&\n\t\t\t\ttabulatorOptions.maxHeight === undefined) {\n\t\t\t\ttabulatorOptions.height = 500;\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\ttabulatorOptions.data = this.filteredData;\n\t\t\t\ttabulatorOptions.columns = this.filteredColumns;\n\t\t\t} else {\n\t\t\t\ttabulatorOptions.columns.forEach(col => {\n\t\t\t\t\tif (col.visible === undefined)\n\t\t\t\t\t\tcol.visible = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tabulatorOptions.selectable || (tabulatorOptions.columns && tabulatorOptions.columns.filter(el => el.formatter == 'rowSelection').length))\n\t\t\t\tthis.tabulatorHasSelector = true;\n\n\t\t\tif (this.idField) {\n\t\t\t\t// enable nested tabulator if parent Id given\n\t\t\t\tif (this.parentIdField) tabulatorOptions.dataTree = true;\n\t\t\t\t// set tabulator index\n\t\t\t\ttabulatorOptions.index = this.idField;\n\t\t\t}\n\n\t\t\t// Start the tabulator with the build options\n\t\t\tthis.tabulator = new Tabulator(\n\t\t\t\tthis.$refs.table,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n\t\t\t// If event handlers have been provided\n\t\t\tif (Array.isArray(this.tabulatorEvents) && this.tabulatorEvents.length > 0)\n\t\t\t{\n\t\t\t\t// Attach all the provided event handlers to the started tabulator\n\t\t\t\tfor (let evt of this.tabulatorEvents)\n\t\t\t\t\tthis.tabulator.on(evt.event, evt.handler);\n\t\t\t}\n\t\t\tthis.tabulator.on('tableBuilt', () => {this.tableBuilt = true; this.$emit('tableBuilt');});\n\t\t\tthis.tabulator.on(\"rowSelectionChanged\", data => {\n\t\t\t\tthis.selectedData = data;\n\t\t\t});\n\n\t\t\t// if nested tabulator, restructure data\n\t\t\tif (this.parentIdField && this.idField) {\n\t\t\t\tthis.tabulator.on(\"dataLoading\", data => {\n\t\t\t\t\tlet toDelete = [];\n\n\t\t\t\t\t// loop through all data\n\t\t\t\t\tfor (let childIdx = 0; childIdx < data.length; childIdx++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet child = data[childIdx];\n\n\t\t\t\t\t\t// if it has parent id, it is a child\n\t\t\t\t\t\tif (child[this.parentIdField])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// append the child on the right place. If parent found, mark original sw child on 0 level for deleting\n\t\t\t\t\t\t\tif (this.appendChild(data, child)) toDelete.push(childIdx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete the marked children from 0 level\n\t\t\t\t\tfor (let counter = 0; counter < toDelete.length; counter++)\n\t\t\t\t\t{\n\t\t\t\t\t\t// decrease index by counter as index of data array changes after every deletion\n\t\t\t\t\t\tdata.splice(toDelete[counter] - counter, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.tableOnly) {\n\t\t\t\tthis.tabulator.on('tableBuilt', () => {\n\t\t\t\t\tconst cols = this.tabulator.getColumns();\n\t\t\t\t\tthis.fields = cols.map(col => col.getField());\n\t\t\t\t\tthis.selectedFields = cols.filter(col => col.isVisible()).map(col => col.getField());\n\t\t\t\t\tif (this.tabulator.options.persistence.headerFilter)\n\t\t\t\t\t\tthis._setHeaderFilter();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.tabulator.on(\"dataFiltered\", filters => {\n\t\t\t\tthis.filterActive = filters.length > 0;\n\t\t\t});\n\t\t},\n\t\tupdateTabulator() {\n\t\t\tif (this.tabulator) {\n\t\t\t\tif (this.tableBuilt)\n\t\t\t\t\tthis._updateTabulator();\n\t\t\t\telse\n\t\t\t\t\tthis.tabulator.on('tableBuilt', this._updateTabulator);\n\t\t\t}\n\t\t},\n\t\t_updateTabulator() {\n\t\t\tthis.tabulatorHasSelector = this.tabulatorOptions.selectable || this.filteredColumns.filter(el => el.formatter == 'rowSelection').length;\n\t\t\tthis.tabulator.setColumns(this.filteredColumns);\n\t\t\tthis.tabulator.setData(this.filteredData);\n\t\t\tthis._setHeaderFilter()\n\t\t},\n\t\tclearFilters()\n\t\t{\n\t\t\tlet existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, \"\");\n\t\t\t});\n\t\t\tthis.tabulator.clearFilter();\n\t\t\tthis.filterActive = false;\n\t\t},\n\t\t_setHeaderFilter()\n\t\t{\n\t\t\tconst existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, filter.value);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetFilter() {\n\t\t\tif (this.selectedFilter === null)\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterId: this.selectedFilter\n\t\t\t\t\t},\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t},\n\t\tsetRenderData(data) {\n\t\t\tthis.fetchResult = data;\n\t\t\tthis.filterName = data.filterName;\n\t\t\tthis.dataset = data.dataset;\n\t\t\tthis.datasetMetadata = data.datasetMetadata;\n\n\t\t\tthis.fields = data.fields;\n\t\t\tthis.selectedFields = data.selectedFields;\n\t\t\tthis.filterFields = [];\n\n\t\t\tfor (let i = 0; i < data.datasetMetadata.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < data.filters.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (data.datasetMetadata[i].name == data.filters[j].name)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet filter = data.filters[j];\n\t\t\t\t\t\tfilter.type = data.datasetMetadata[i].type;\n\n\t\t\t\t\t\tthis.filterFields.push(filter);\n\t\t\t\t\t\t//break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\trender(response) {\n\t\t\tlet data = response;\n\n\t\t\tthis.setRenderData(data);\n\n\t\t\t// If the side menu is active\n\t\t\tif (this.sideMenu === true)\n\t\t\t{\n\t\t\t\tthis.setSideMenu(data);\n\t\t\t}\n\t\t\telse // otherwise use the dropdown in the filter options\n\t\t\t{\n\t\t\t\tthis.setDropDownMenu(data);\n\t\t\t}\n\t\t\tthis.updateTabulator();\n\t\t},\n\t\t/**\n\t\t * Set the menu\n\t\t */\n\t\tsetSideMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc,\n\t\t\t\t\tsubscriptDescription: personalFilters[filtersCount].subscriptDescription,\n\t\t\t\t\tsubscriptLinkClass: personalFilters[filtersCount].subscriptLinkClass,\n\t\t\t\t\tsubscriptLinkValue: personalFilters[filtersCount].subscriptLinkValue,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById,\n\t\t\t\t\tonClickSubscriptCall: this.handlerRemoveCustomFilter\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\n\t\t\tthis.$emit(\n\t\t\t\t'nwNewEntry',\n\t\t\t\t{\n\t\t\t\t\tlink: \"#\",\n\t\t\t\t\tdescription: \"Filters\",\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\tchildren: filtersArray\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Set the drop down menu\n\t\t */\n\t\tsetDropDownMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\toption: filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\toption: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\t\t},\n\t\t/**\n\t\t * Used to start/refresh the FetchCmpt\n\t\t */\n\t\tstartFetchCmpt(apiFunction, apiFunctionParameters, dataFetchedCallback) {\n\t\t\t// Assign the function api of the FetchCmpt binded property\n\t\t\tthis.fetchCmptApiFunction = apiFunction;\n\n\t\t\t// In case a null value is provided set the parameters as an empty object\n\t\t\tif (apiFunctionParameters == null) apiFunctionParameters = {};\n\n\t\t\t// Always needed parameters\n\t\t\tapiFunctionParameters.filterUniqueId = FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t\tapiFunctionParameters.filterType = this.filterType;\n\n\t\t\tif (this.uniqueId)\n\t\t\t\tapiFunctionParameters.filterUniqueId += '_' + this.uniqueId;\n\n\t\t\t// Assign parameters to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptApiFunctionParams = apiFunctionParameters;\n\t\t\t// Assign data fetch callback to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptDataFetched = dataFetchedCallback;\n\t\t\t// Set the FetchCmpt binded property refresh to have the component to refresh\n\t\t\t// NOTE: this should be the last one to be called because it triggers the FetchCmpt to start to refresh\n\t\t\tthis.fetchCmptRefresh === true ? this.fetchCmptRefresh = false : this.fetchCmptRefresh = true;\n\t\t},\n\n\t\t// ------------------------------------------------------------------------------------------------------------------\n\t\t// Event handlers\n\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerSaveCustomFilter(customFilterName) {\n\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.saveCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tcustomFilterName\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerRemoveCustomFilter(event) {\n\t\t\tlet filterId = event.currentTarget.getAttribute(\"href\").substring(1);\n\t\t\tif (filterId === this.selectedFilter)\n\t\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.removeCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterId: filterId\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t/*\n\t\t *\n\t\t */\n\t\thandlerGetFilterById: function(event) {\n\n\t\t\tlet filterId = null;\n\n\t\t\t// Get the attribute href if side menu is rendered\n\t\t\tlet attr = event.currentTarget.getAttribute(\"href\");\n\n\t\t\t// Otherwise get the value of the drop down menu\n\t\t\tif (attr == null)\n\t\t\t{\n\t\t\t\tfilterId = event.currentTarget.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfilterId = attr.substring(1);\n\t\t\t}\n\n\t\t\tthis.switchFilter(filterId);\n\t\t},\n\t\tswitchFilter(filterId) {\n\t\t\tthis.selectedFilter = filterId;\n\t\t\tthis.getFilter();\n\t\t},\n\t\tapplyFilterConfig(filterFields) {\n\t\t\tthis.selectedFilter = null;\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.applyFilterFields(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterFields\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t// append child to it's parent\n\t\tappendChild(data, child) {\n\t\t\t// get parent id\n\t\t\tlet parentId = child[this.parentIdField];\n\n\t\t\t// loop thorugh all data\n\t\t\tfor (let parentIdx = 0; parentIdx < data.length; parentIdx++)\n\t\t\t{\n\t\t\t\tlet parent = data[parentIdx];\n\n\t\t\t\t// if it's the parent\n\t\t\t\tif (parent[this.idField] == parentId)\n\t\t\t\t{\n\t\t\t\t\t// create children array if not done yet\n\t\t\t\t\tif (!parent._children) parent._children = [];\n\n\t\t\t\t\t// if child is not included in children array, append the child\n\t\t\t\t\tif (!parent._children.includes(child)) parent._children.push(child);\n\n\t\t\t\t\t// parent found\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// search children for parents\n\t\t\t\telse if (parent._children) this.appendChild(parent._children, child);\n\t\t\t}\n\n\t\t\t// parent not found\n\t\t\treturn false;\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tif (!this.tableOnly == !this.filterType)\n\t\t\talert('You can not have a filter-type in table-only mode!');\n\t},\n\tcreated() {\n\t\tif (this.sideMenu && (!this.$props.onNwNewEntry || !(this.$props.onNwNewEntry instanceof Function)))\n\t\t\talert('\"nwNewEntry\" listener is mandatory when sideMenu is true');\n\t\tthis.uuid = _uuid++;\n\t\tthis.$emit('uuidDefined', this.uuid)\n\t},\n\tmounted() {\n\t\tthis.initTabulator().then(() => {\n\t\t\tif (!this.tableOnly) {\n\t\t\t\tthis.selectedFilter = window.location.hash ? window.location.hash.slice(1) : null;\n\t\t\t\tthis.render(this.fetchResult);\n\t\t\t}\n\t\t});\n\n\t},\n\ttemplate: `\n\t\t<!-- Load filter data -->\n\t\t<core-fetch-cmpt\n\t\t\tv-if=\"!tableOnly && fetchCmptApiFunction\"\n\t\t\tv-bind:api-function=\"fetchCmptApiFunction\"\n\t\t\tv-bind:api-function-parameters=\"fetchCmptApiFunctionParams\"\n\t\t\tv-bind:refresh=\"fetchCmptRefresh\"\n\t\t\t@data-fetched=\"fetchCmptDataFetched\">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class=\"row\" v-if=\"title != null && title != ''\">\n\t\t\t<div class=\"col-lg-12\">\n\t\t\t\t<h3 class=\"page-header mt-1 mb-4\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"'filterCollapsables' + idExtra\">\n\n\t\t\t<div class=\"d-flex flex-row justify-content-between flex-wrap\">\n\t\t\t\t<div v-if=\"newBtnShow || reload || $slots.search || $slots.actions\" class=\"d-flex gap-2 align-items-baseline flex-wrap\">\n\t\t\t\t\t<button v-if=\"newBtnShow\" class=\"btn btn-primary\" :class=\"newBtnClass\" :title=\"newBtnLabel ? undefined : 'New'\" :aria-label=\"newBtnLabel ? undefined : 'New'\" @click=\"$emit('click:new', $event)\" :disabled=\"newBtnDisabled\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if=\"reload\" class=\"btn btn-outline-secondary\" aria-label=\"Reload\" @click=\"reloadTable\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-rotate-right\" aria-hidden=\"true\"  :title=\"reloadBtnInfotext ? reloadBtnInfotext : 'Reload'\" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if=\"$slots.actions && tabulatorHasSelector && useSelectionSpan\">\n\t\t\t\t\t\t<span v-if=\"countOnly\">{{ selectedData.length }} ausgewählt</span>\n\t\t\t\t\t\t<span v-else id=\"selected-info-text\"> Mit {{ selectedData.length }} ausgewählten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"actions\" v-bind=\"{selected: tabulatorHasSelector ? selectedData : []}\"></slot>\n\t\t\t\t\t<slot name=\"search\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end\">\n\t\t\t\t\t<span v-if=\"!tableOnly\">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if=\"description\" v-html=\"description\"></span>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"!tableOnly || $slots.filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseFilters' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"filterActive\"  class=\"btn btn-link px-0 fhc-text\" :title=\"$p.t('ui','filterdelete')\" @click=\"clearFilters\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter-circle-xmark\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseColumns' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-table-columns\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class=\"btn btn-link px-0 fhc-text\" :tabulator=\"tabulator\" :config=\"download\"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id=\"'collapseColumns' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:fields=\"fieldIdsForVisibilty\"\n\t\t\t\t:selected=\"selectedFields\"\n\t\t\t\t:names=\"fieldNames\"\n\t\t\t\t@hide=\"tabulator.hideColumn($event)\"\n\t\t\t\t@show=\"tabulator.showColumn($event)\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if=\"!tableOnly\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:filters=\"!sideMenu ? (availableFilters || []) : []\"\n\t\t\t\t:columns=\"columnsForFilter\"\n\t\t\t\t:fields=\"filterFields || []\"\n\t\t\t\t@switch-filter=\"switchFilter\"\n\t\t\t\t@apply-filter-config=\"applyFilterConfig\"\n\t\t\t\t@save-custom-filter=\"handlerSaveCustomFilter\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$slots.filter\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name=\"filter\"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tabulator -->\n\t\t<div ref=\"table\" :id=\"'filterTableDataset' + idExtra\" class=\"filter-table-dataset\"></div>\n\t`\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/header',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t},\n\tgetMenu(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/menu',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport ApiNavigation from '../../api/factory/navigation.js';\n\n/**\n *\n */\nexport const CoreNavigationCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt\n\t},\n\tprops: {\n\t\taddHeaderMenuEntries: Object, // property used to add new header menu entries from another app/component\n\t\taddSideMenuEntries: Object, // property used to add new side menu entries from another app/component\n\t\thideTopMenu: Boolean,\n\t\tleftNavCssClasses: {\n\t\t\ttype: String,\n\t\t\tdefault: 'navbar navbar-left-side'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\theaderMenu: {}, // header menu entries\n\t\t\tsideMenu: {} // side menu entries\n\t\t};\n\t},\n\tcomputed: {\n\t\t/**\n\t\t *\n\t\t */\n\t\theaderMenuEntries() {\n\t\t\t//\n\t\t\tlet hm = this.headerMenu ? {...this.headerMenu} : {};\n\t\t\tif (this.headerMenu != null && this.addHeaderMenuEntries != null && Object.keys(this.addHeaderMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\thm[this.addHeaderMenuEntries.description] = this.addHeaderMenuEntries;\n\t\t\t}\n\t\t\treturn hm;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsideMenuEntries() {\n\t\t\t//\n\t\t\tlet sm = this.sideMenu ? {...this.sideMenu} : {};\n\t\t\tif (this.sideMenu != null && this.addSideMenuEntries != null && Object.keys(this.addSideMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\tsm[this.addSideMenuEntries.description] = this.addSideMenuEntries;\n\t\t\t}\n\t\t\treturn sm;\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetNavigationPage() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionHeader() {\n\t\t\treturn this.$api.call(ApiNavigation.getHeader(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionSideMenu() {\n\t\t\treturn this.$api.call(ApiNavigation.getMenu(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedHeader(data) {\n\t\t\tthis.headerMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedMenu(data) {\n\t\t\tthis.sideMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetDataBsToggle(header) {\n\t\t\treturn !header.children ? null : 'dropdown';\n\t\t}\n\t},\n\ttemplate: `\n\t\t<!-- Load head menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionHeader\" @data-fetched=\"fetchCmptDataFetchedHeader\"></core-fetch-cmpt>\n\t\t<!-- Load side menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionSideMenu\" @data-fetched=\"fetchCmptDataFetchedMenu\"></core-fetch-cmpt>\n\n\t\t<!-- Top menu -->\n\t\t<nav class=\"navbar navbar-expand-lg navbar-header\" v-if=\"!hideTopMenu\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"header in headerMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item dropdown\">\n\t\t\t\t\t\t<a class=\"nav-link header-menu-link-entry\"\n\t\t\t\t\t\t\tv-bind:data-bs-toggle=\"this.getDataBsToggle(header)\"\n\t\t\t\t\t\t\tv-bind:class=\"{ 'dropdown-toggle': header.children }\"\n\t\t\t\t\t\t\tv-bind:href=\"header.link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-fw header-menu-icon\" v-bind:class=\"'fa-' + header.icon\" v-if=\"header.icon\"></i> {{ header.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" v-if=\"header.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in header.children\">\n\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item\" v-bind:href=\"child.link\">{{ child.description }}</a></li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t\t<slot></slot>\n\t\t</nav>\n\n\t\t<!-- Left side menu -->\n\t\t<nav :class=\"leftNavCssClasses\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"menu in sideMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item\">\n\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"menu.link\" @click=menu.onClickCall>\n\t\t\t\t\t\t\t<i class=\"fa fa-fw\" v-bind:class=\"'fa-'+ menu.icon\"></i> {{ menu.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"nav-link left-side-menu-second-level\" v-if=\"menu.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in menu.children\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"child.link\" @click=child.onClickCall>\n\t\t\t\t\t\t\t\t\t\t&emsp;&emsp;{{ child.description }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"nav-link left-side-menu-link-entry\"\n\t\t\t\t\t\t\t\t\t\tv-bind:class=\"child.subscriptLinkClass\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"child.subscriptDescription\"\n\t\t\t\t\t\t\t\t\t\tv-bind:href=\"child.link\"\n\t\t\t\t\t\t\t\t\t\t@click=child.onClickSubscriptCall\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ child.subscriptDescription }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t</nav>\n\t`\n};\n\n","export default {\n    name: 'VerticalSplit',\n    data: function() {\n      return {          \n          availHeight: 0,\n          topheight: 0,\n          bottomheight: 0,\n          mousePosY: 0, \n          resize: false,\n          vsplitter: null,\n          vsplitterOffset: 0,\n          selfOffsetTop: 0\n      };  \n    },\n    template: `\n    <div ref=\"verticalsplit\">\n        <div ref=\"toppanel\" class=\"verticalsplitted\" \n             :style=\"{height: this.topheightcss}\">\n            <slot name=\"top\">\n                <p>Top Panel</p>\n            </slot>\n        </div>\n        <div ref=\"vsplitter\" class=\"verticalsplitter\" \n             :class=\"this.topOrBottomClass\" @mousedown=\"this.dragStart\">\n            <div class=\"splitactions\" :class=\"this.topOrBottomClass\">\n                <span @click=\"this.collapseTop\" class=\"splitaction\">\n                    <i class=\"fas fa-angle-up text-muted\"></i>\n                </span>\n                <span @dblclick=\"this.showBoth\" class=\"splitaction resize\">\n                    <i class=\"fas fa-grip-lines text-muted\"></i>\n                </span>\n                <span @click=\"this.collapseBottom\" class=\"splitaction\">\n                    <i class=\"fas fa-angle-down text-muted\"></i>\n                </span>\n            </div>\n        </div>\n        <div ref=\"bottompanel\" class=\"verticalsplitted\"\n             :style=\"{height: this.bottomheightcss}\">\n            <slot name=\"bottom\">\n                <p/>\n            </slot>\n        </div>\n    </div>\n    `,\n    mounted: function() {\n        this.calcHeights();\n        this.trackVerticalSplitterOffsetTop();\n        window.addEventListener('resize', this.calcHeights);\n    },\n    updated: function() {\n        this.trackVerticalSplitterOffsetTop();\n    },\n    methods: {\n        calcHeights: function() {\n            var windowheight = window.innerHeight;\n            var oldavailHeight = this.availHeight;\n            this.selfOffsetTop = this.$refs.verticalsplit.offsetTop;\n            this.availHeight = windowheight - this.selfOffsetTop - this.$refs.vsplitter.offsetHeight;\n            if( (this.topheight === 0 && this.bottomheight === 0) || oldavailHeight === 0 ) {\n                this.topheight = Math.floor(this.availHeight/2);\n            } else {\n                this.topheight = Math.floor( ((((this.topheight * 100) / oldavailHeight) / 100) * this.availHeight) );\n            }\n            this.bottomheight = this.availHeight - this.topheight;\n        },\n        collapseTop: function() {\n            this.calcHeights();\n            this.topheight = 0;\n            this.bottomheight = this.availHeight;\n        },\n        collapseBottom: function() {\n            this.calcHeights();\n            this.topheight = this.availHeight;\n            this.bottomheight = 0;\n        },\n        showBoth: function() {\n            this.topheight = Math.floor(this.availHeight/2);\n            this.bottomheight = Math.floor(this.availHeight/2);\n        },\n        isCollapsed: function() {\n            if( this.topheight === 0 ) {\n                return 'top';\n            } else if ( this.bottomheight === 0 ) {\n                return 'bottom';\n            } else {\n                return false;\n            }\n        },\n        dragStart: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.addEventListener('mouseup', this.dragEnd);\n            window.addEventListener('mousemove', this.drag);\n            this.resize = true;\n            this.mousePosY = e.clientY;\n        },\n        drag: function(e) {\n            if( !this.resize ) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            var offsetY = e.clientY - this.mousePosY;\n            this.topheight = this.topheight + offsetY;\n            if( this.topheight < 0 ) {\n                this.topheight = 0;\n            }\n            if( this.topheight > this.availHeight ) {\n                this.topheight = this.availHeight;\n            }\n            this.bottomheight = this.availHeight - this.topheight;\n            this.mousePosY = e.clientY;\n        },\n        dragEnd: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            window.removeEventListener('mousemove', this.drag);\n            window.removeEventListener('mouseup', this.dragEnd);\n            this.resize = false;\n            this.mousePosY = e.clientY;\n        },\n        trackVerticalSplitterOffsetTop: function() {\n            this.vsplitterOffset = this.$refs.vsplitter.offsetTop;\n        }\n    },\n    computed: {\n        topOrBottomClass: function() {\n            return ((this.vsplitterOffset - this.selfOffsetTop) <= Math.floor(this.availHeight/2))\n                        ? 'top'\n                        : 'bottom';\n        },\n        topheightcss: function() {\n            return this.topheight + 'px';\n        },\n        bottomheightcss: function() {\n            return this.bottomheight + 'px';\n        }\n    }\n};","export default {\n\tname: 'SearchbarResultTemplateAction',\n\temits: [ 'actionexecuted' ],\n\tprops: { \n\t\tres: Object,\n\t\taction: Object\n\t},\n\tcomputed: {\n\t\tactionHref() {\n\t\t\tif (this.action.type !== 'link')\n\t\t\t\treturn 'javascript:void(0);';\n\t\t\treturn typeof this.action.action === 'function'\n\t\t\t\t? this.action.action(this.res) \n\t\t\t\t: this.action.action;\n\t\t}\n\t},\n\tmethods: {\n\t\tactionFunc() {\n\t\t\tif (this.action.type === 'function')\n\t\t\t\tthis.action.action(this.res);\n\t\t\tthis.$emit('actionexecuted');\n\t\t},\n\t\trenderif: function() {\n\t\t\tif(this.action?.renderif === undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.action.renderif(this.res);\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"this.renderif()\">\n\t<a class=\"searchbar-result-template-action\" :href=\"actionHref\" @click=\"actionFunc\">\n\t\t<slot>{{ $p.t('search/action_default_label') }}</slot>\n\t</a>\n\t</template>\n\t<template v-else>\n\t<div class=\"searchbar-result-template-action\">\n\t\t<slot>{{ $p.t('search/action_default_label') }}</slot>\n\t</div>\n\t</template>`\n};","import ResultAction from \"./action.js\";\nimport ResultActions from \"./actions.js\";\n\nexport default {\n\tname: 'SearchbarResultTemplateFrame',\n\tcomponents: {\n\t\tResultAction,\n\t\tResultActions\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object,\n\t\ttitle: String,\n\t\timage: String,\n\t\timageFallback: String\n\t},\n\ttemplate: `\n\t<div class=\"searchbar-result-template-frame\">\n\t\t<div class=\"searchbar_grid\">\n\t\t\t<div class=\"searchbar_icon\">\n\t\t\t\t<result-action\n\t\t\t\t\t:res=\"res\"\n\t\t\t\t\t:action=\"actions.defaultaction\"\n\t\t\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t\t\tclass=\"searchbar-rounded-image\"\n\t\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-if=\"image\"\n\t\t\t\t\t\t:src=\"image\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<i :class=\"imageFallback\"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</result-action>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_data\">\n\t\t\t\t<result-action\n\t\t\t\t\t:res=\"res\"\n\t\t\t\t\t:action=\"actions.defaultaction\"\n\t\t\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t\t\tclass=\"mb-3\"\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"fw-bold\">{{ title }}</span>\n\t\t\t\t</result-action>\n\n\t\t\t\t<slot></slot>\n\n\t\t\t\t<result-actions\n\t\t\t\t\t:res=\"res\"\n\t\t\t\t\t:actions=\"actions.childactions\"\n\t\t\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t\t\t>\n\t\t\t\t</result-actions>\n\t\t\t</div>\n\t\t</div>\n\t</div>`\n};","import ResultAction from \"./action.js\";\n\nexport default {\n\tname: 'SearchbarResultTemplateActions',\n\tcomponents: {\n\t\tResultAction\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Array\n\t},\n\tmethods: {\n\t\trenderif: function(action) {\n\t\t\tif(action?.renderif === undefined) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn action.renderif(this.res);\n\t\t}\n\t},\n\ttemplate: `\n\t<div v-if=\"actions.length\" class=\"searchbar-result-template-actions\">\n\t\t<template v-for=\"(action, index) in actions\" :key=\"action.label\">\n\t\t<result-action\n\t\t\t v-if=\"this.renderif(action)\"\n\t\t\t:res=\"res\"\n\t\t\t:action=\"action\"\n\t\t\tclass=\"btn btn-primary btn-sm\"\n\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t>\n\t\t\t<i v-if=\"action.icon\" :class=\"action.icon\"></i>\n\t\t\t<span class=\"p-2\">{{ action.label }}</span>\n\t\t</result-action>\n\t\t</template>\n\t</div>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultPerson',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\temails() {\n\t\t\treturn new Set(this.res.email);\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-student\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.name\"\n\t\t:image=\"res.photo_url\"\n\t\timage-fallback=\"fas fa-user fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/person_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a v-for=\"email in emails\" :key=\"email\" :href=\"'mailto:' + email\" class=\"d-block\">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultRoom',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tmode: String,\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\tequipment() {\n\t\t\tif (!this.res.equipment)\n\t\t\t\treturn \"\";\n\t\t\treturn this.res.equipment.replace(new RegExp('<br />', 'ig'), '');\n\t\t},\n\t\taddress() {\n\t\t\tlet address = this.res.zip || '';\n\t\t\tif (this.res.city)\n\t\t\t\taddress += (address ? ' ' : '') + this.res.city;\n\t\t\tif (this.res.street)\n\t\t\t\taddress += (address ? ', ' : '') + this.res.street;\n\t\t\tif (this.res.floor)\n\t\t\t\taddress += (address ? ' / ' : '') + this.$p.t('search/result_address_floor', this.res);\n\n\t\t\treturn address || this.$p.t('search/result_address_none');\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-room\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.ort_kurzbz\"\n\t\timage-fallback=\"fas fa-door-open fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_room_address') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ address }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_workplaces') }}</div>\n\t\t\t\t<div v-if=\"mode == 'simple'\" class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.sitzplaetze }}\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<template v-if=\"res.max_person !== null && res.workplaces !== null\">\n\t\t\t\t\t\t{{ $p.t('search/result_workplaces_pc', res) }}\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t{{ $p.t('search/result_workplaces_none') }}\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_building') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.building }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_equipment') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<div v-if=\"mode == 'simple'\" class=\"no-margin-paragraphs\" v-html=\"res.austattung.replace('<br />','')\"></div>\n\t\t\t\t\t<div v-else class=\"no-margin-paragraphs\" v-html=\"equipment\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultEmployee',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-student\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.name\"\n\t\t:image=\"res.photo_url\"\n\t\timage-fallback=\"fas fa-user fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_stdkst') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<ul class=\"searchbar_inline_ul\" v-if=\"res.standardkostenstelle.length > 0\">\n\t\t\t\t\t\t<li v-for=\"(stdkst, idx) in res.standardkostenstelle\" :key=\"idx\">{{ stdkst }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else=\"\">{{ $p.t('search/result_stdkst_none') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('lehre/organisationseinheit') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<ul class=\"searchbar_inline_ul\" v-if=\"res.organisationunit_name.length > 0\">\n\t\t\t\t\t\t<li v-for=\"(oe, idx) in res.organisationunit_name\" :key=\"idx\">{{ oe }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else=\"\">{{ $p.t('search/result_oe_none') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a :href=\"'mailto:' + res.email\" class=\"d-block\">\n\t\t\t\t\t\t{{ res.email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/telefon') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a :href=\"'tel:' + res.phone\" class=\"d-block\">\n\t\t\t\t\t\t{{ res.phone }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultOrganistationunit',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-organisationunit\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.name\"\n\t\timage-fallback=\"fas fa-sitemap fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_parent_oe') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.parentoe_name }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_group_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a v-if=\"res.mailgroup\" :href=\"'mailto:' + res.mailgroup\">\n\t\t\t\t\t\t{{ res.mailgroup }}\n\t\t\t\t\t</a>\n\t\t\t\t\t<template v-else>-</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_leader') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<ul class=\"searchbar_inline_ul\" v-if=\"res.leaders.length > 0\">\n\t\t\t\t\t\t<li v-for=\"(leader, idx) in res.leaders\" :key=\"idx\">{{ leader.name }}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<span v-else=\"\">{{ $p.t('search/result_leader_none') }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_number_of_employees') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.number_of_people }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultStudent',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tmode: String,\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\tphoto_url() {\n\t\t\tif (this.mode != 'simple')\n\t\t\t\treturn this.res.photo_url;\n\t\t\tif (this.res.foto)\n\t\t\t\treturn 'data:image/jpeg;base64,' + this.res.foto;\n\t\t\treturn null;\n\t\t},\n\t\temails() {\n\t\t\tif (this.mode == 'simple')\n\t\t\t\treturn new Set([this.res.email]);\n\t\t\treturn new Set(this.res.email);\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-student\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.name\"\n\t\t:image=\"photo_url\"\n\t\timage-fallback=\"fas fa-user fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_student_uid') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.uid }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/person_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/matrikelnummer') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.matrikelnr }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a v-for=\"email in emails\" :key=\"email\" :href=\"'mailto:' + email\" class=\"d-block\">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultPrestudent',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tmode: String,\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\tif (this.mode == 'simple')\n\t\t\t\treturn this.res.name;\n\t\t\treturn this.res.name + ' (' + this.res.status + ' ' + this.res.stg_kuerzel + ')';\n\t\t},\n\t\tphoto_url() {\n\t\t\tif (this.mode != 'simple')\n\t\t\t\treturn this.res.photo_url;\n\t\t\tif (this.res.foto)\n\t\t\t\treturn 'data:image/jpeg;base64,' + this.res.foto;\n\t\t\treturn null;\n\t\t},\n\t\temails() {\n\t\t\tif (this.mode == 'simple')\n\t\t\t\treturn new Set([this.res.email]);\n\t\t\treturn new Set(this.res.email);\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-prestudent\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"title\"\n\t\t:image=\"photo_url\"\n\t\timage-fallback=\"fas fa-user fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/person_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a v-for=\"email in emails\" :key=\"email\" :href=\"'mailto:' + email\" class=\"d-block\">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"res.uid\" class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_student_uid') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.uid }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"res.matrikelnr\" class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/matrikelnummer') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.matrikelnr }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_prestudent_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.prestudent_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('lehre/studiengang') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.bezeichnung }} {{ res.orgform ? '(' + res.orgform + ')' : '' }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultDms',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\ticon() {\n\t\t\tswitch (this.res.mimetype) {\n\t\t\t\tcase 'application/pdf':\n\t\t\t\t\treturn 'file-pdf';\n\t\t\t\tcase 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\n\t\t\t\tcase 'application/msword':\n\t\t\t\t\treturn 'file-word';\n\t\t\t\tcase 'application/vnd.openxmlformats-officedocument.presentationml.presentation':\n\t\t\t\tcase 'application/mspowerpoint':\n\t\t\t\t\treturn 'file-powerpoint';\n\t\t\t\tcase 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n\t\t\t\tcase 'application/vnd.ms-excel':\n\t\t\t\t\treturn 'file-excel';\n\t\t\t\tcase 'application/x-zip':\n\t\t\t\tcase 'application/zip':\n\t\t\t\t\treturn 'file-zipper';\n\t\t\t\tcase 'image/jpeg':\n\t\t\t\tcase 'image/gif':\n\t\t\t\tcase 'image/png':\n\t\t\t\t\treturn 'file-image';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'file';\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-dms\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.name\"\n\t\t:image-fallback=\"'fas fa-' + icon + ' fa-4x'\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_dms_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.dms_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_version') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.version }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_keywords') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.keywords }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('global/beschreibung') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ res.description }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template-frame>`\n};","import TemplateFrame from \"./template/frame.js\";\n\nexport default {\n\tname: 'SearchbarResultCms',\n\tcomponents: {\n\t\tTemplateFrame\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tinject: [\n\t\t'query'\n\t],\n\tcomputed: {\n\t\tpreview() {\n\t\t\tif (this.res.template_kurzbz != 'redirect') {\n\t\t\t\tlet text = this.res.content.replace(/<!\\[CDATA\\[|\\]\\]>/ig, '').replace(/<[^>]+>/ig, '').replace(/^\\s+|\\s+$/g, '');\n\n\t\t\t\tif (text.length > 1000) {\n\t\t\t\t\t// NOTE(chris): focus on searched text!\n\t\t\t\t\tlet lower = text.toLowerCase();\n\t\t\t\t\tlet firstOccurence = Math.min(this.query.split(' ').reduce((a, c) => {\n\t\t\t\t\t\t// NOTE(chris): filter query for words that affects the content field and get the lowest index of them\n\t\t\t\t\t\tif (c == 'or')\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\tlet i = c.indexOf(':');\n\t\t\t\t\t\tif (i < 0 || (i > 0 && ['content', 'inhalt'].includes(c.split(':')[0]))) {\n\t\t\t\t\t\t\tlet posInText = lower.indexOf(c);\n\t\t\t\t\t\t\tif (posInText >= 0)\n\t\t\t\t\t\t\t\ta.push(posInText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn a;\n\t\t\t\t\t}, []));\n\n\t\t\t\t\tif (firstOccurence) {\n\t\t\t\t\t\tif (firstOccurence + 997 >= text.length) {\n\t\t\t\t\t\t\tfirstOccurence = text.length - 997;\n\t\t\t\t\t\t\tif (firstOccurence > 0)\n\t\t\t\t\t\t\t\treturn '...' + text.substr(firstOccurence, 997);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn '...' + text.substr(firstOccurence, 994) + '...';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\ttext = text.substr(0, 997) + '...';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn text;\n\t\t\t}\n\t\t\t\n\t\t\tlet url = this.res.content_url;\n\t\t\tif (url.substr(0, 16) == '../index.ci.php/')\n\t\t\t\turl = this.$fhcApi.getUri(url.substr(16));\n\t\t\telse if (url.substr(0, 3) == '../')\n\t\t\t\turl = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/\\/+$/, '') + url.substr(2);\n\t\t\treturn '<a href=\"' + url + '\">' + url + '</a>';\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-cms\"\n\t\t:res=\"res\"\n\t\t:actions=\"actions\"\n\t\t:title=\"res.title\"\n\t\timage-fallback=\"fas fa-newspaper fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div v-if=\"preview\" class=\"searchbar_table\" v-html=\"preview\"></div>\n\t\t<div v-else class=\"searchbar_table text-muted\">\n\t\t\t{{ $p.t('search/result_content_none') }}\n\t\t</div>\n\t</template-frame>`\n};","import ResultPrestudent from \"./prestudent.js\";\nimport ResultStudent from \"./student.js\";\n\nexport default {\nname: 'SearchbarResultMergedstudent',\n\t\tcomponents: {\n\t\tResultPrestudent,\n\t\tResultStudent\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tmode: String,\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\tprestudent() {\n\t\t\tconst prestudent = this.res.list.filter(item => item.type == 'prestudent');\n\t\t\treturn prestudent.pop();\n\t\t}\n\t},\n\ttemplate: `\n\t<result-prestudent\n\t\tv-if=\"prestudent\"\n\t\t:mode=\"mode\"\n\t\t:res=\"prestudent\"\n\t\t:actions=\"actions\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\tclass=\"searchbar-result-mergedstudent\"\n\t></result-prestudent>\n\t<result-student\n\t\tv-else\n\t\t:mode=\"mode\"\n\t\t:res=\"res.list[0]\"\n\t\t:actions=\"actions\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\tclass=\"searchbar-result-mergedstudent\"\n\t></result-student>`\n};","import TemplateFrame from \"./template/frame.js\";\nimport TemplateAction from \"./template/action.js\";\n\nexport default {\n\tname: 'SearchbarResultMergedperson',\n\tcomponents: {\n\t\tTemplateFrame,\n\t\tTemplateAction\n\t},\n\temits: [ 'actionexecuted' ],\n\tprops: {\n\t\tmode: String,\n\t\tres: Object,\n\t\tactions: Object\n\t},\n\tcomputed: {\n\t\tperson() {\n\t\t\t // Cummulate all emails\n\t\t\tconst email = this.res.list.reduce((a, c) => [...a, ...(Array.isArray(c.email) ? c.email : [c.email])], []);\n\n\t\t\t// Use person entry if available (with cummulated emails)\n\t\t\tconst person = this.res.list.find(item => item.type == 'person');\n\t\t\tif (person)\n\t\t\t\treturn {...person, email};\n\n\t\t\t // Those properties should be the same in all entries\n\t\t\tconst { person_id, name } = this.res.list[0];\n\t\t\t // Get first photo (prefer student photo if available)\n\t\t\tlet photo_url;\n\t\t\tif (this.mode == 'simple') {\n\t\t\t\tlet foto = (this.students ? this.students.find(el => el.foto) : null)?.foto;\n\t\t\t\tif (foto)\n\t\t\t\t\tfoto = 'data:image/jpeg;base64,' + foto;\n\t\t\t\tphoto_url = foto || this.employee?.photo_url;\n\t\t\t} else\n\t\t\t\tphoto_url = ((this.students ? this.students.find(el => el.photo_url) : null) || this.employee)?.photo_url;\n\n\t\t\treturn { person_id, name, photo_url, email };\n\t\t},\n\t\temployee() {\n\t\t\treturn this.res.list.find(item => [\n\t\t\t\t'employee',\n\t\t\t\t'unassigned_employee',\n\t\t\t\t'mitarbeiter',\n\t\t\t\t'mitarbeiter_ohne_zuordnung'\n\t\t\t].includes(item.type)) || null;\n\t\t},\n\t\tstudents() {\n\t\t\tconst students = this.res.list.filter(item => [\n\t\t\t\t\t'student',\n\t\t\t\t\t'prestudent',\n\t\t\t\t\t'studentcis',\n\t\t\t\t\t'studentStv'\n\t\t\t\t].includes(item.type))\n\t\t\t\t.filter((item, idx, arr) => {\n\t\t\t\t\tif (item.type === 'prestudent') {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet prestudentwithsameuidexists = arr.some(tmpitem => {\n\t\t\t\t\t\treturn tmpitem.uid === item.uid && tmpitem.type === 'prestudent';\n\t\t\t\t\t});\n\n\t\t\t\t\tif (prestudentwithsameuidexists) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}).sort((a, b) => (a.sort || 0) - (b.sort || 0));\n\t\t\treturn students.length ? students : null;\n\t\t},\n\t\temails() {\n\t\t\t// Remove duplicates\n\t\t\treturn new Set(this.person.email);\n\t\t},\n\t\ttelurl() {\n\t\t\treturn 'tel:' + this.employee?.phone;\n\t\t},\n\t\tinaktiv() {\n\t\t\treturn this.res.list.some(item => item?.aktiv === false);\n\t\t}\n\t},\n\ttemplate: `\n\t<template-frame\n\t\tclass=\"searchbar-result-mergedperson\"\n\t\t:class=\"(inaktiv) ? 'searchbar_inaktiv' : ''\"\n\t\t:res=\"person\"\n\t\t:actions=\"actions\"\n\t\t:title=\"person.name\"\n\t\t:image=\"person.photo_url\"\n\t\timage-fallback=\"fas fa-user fa-4x\"\n\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t>\n\t\t<div class=\"searchbar_table\">\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('person/person_id') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t{{ person.person_id }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_label\">{{ $p.t('search/result_emails') }}</div>\n\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t<a v-for=\"email in emails\" :key=\"email\" :href=\"'mailto:' + email\" class=\"d-block\">\n\t\t\t\t\t\t{{ email }}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<template v-if=\"employee\">\n\t\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t\t<div class=\"searchbar_tablecell\">\n\t\t\t\t\t\t<template-action\n\t\t\t\t\t\t\t:res=\"employee\"\n\t\t\t\t\t\t\t:action=\"actions.defaultactionemployee || actions.defaultaction\"\n\t\t\t\t\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $p.t('search/result_employee') }}\n\t\t\t\t\t\t</template-action>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('search/result_stdkst') }}</div>\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t<ul class=\"searchbar_inline_ul\" v-if=\"employee.standardkostenstelle.length > 0\">\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-for=\"(stdkst, idx) in employee.standardkostenstelle\"\n\t\t\t\t\t\t\t\t:key=\"idx\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ stdkst }}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<span v-else=\"\">{{ $p.t('search/result_stdkst_none') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('lehre/organisationseinheit') }}</div>\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t<ul class=\"searchbar_inline_ul\" v-if=\"employee.organisationunit_name.length > 0\">\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tv-for=\"(oe, idx) in employee.organisationunit_name\"\n\t\t\t\t\t\t\t\t:key=\"idx\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ oe }}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<span v-else=\"\">{{ $p.t('search/result_oe_none') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('person/telefon') }}</div>\n\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t<a :href=\"telurl\">\n\t\t\t\t\t\t\t{{ employee.phone }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"students\">\n\t\t\t\t<template v-for=\"student in students\">\n\t\t\t\t\t<div class=\"searchbar_tablerow\">\n\t\t\t\t\t\t<div class=\"searchbar_tablecell\">\n\t\t\t\t\t\t\t<template-action\n\t\t\t\t\t\t\t\tv-if=\"actions.defaultaction\"\n\t\t\t\t\t\t\t\t:res=\"student\"\n\t\t\t\t\t\t\t\t:action=\"actions.defaultactionstudent || actions.defaultaction\"\n\t\t\t\t\t\t\t\t@actionexecuted=\"$emit('actionexecuted')\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"mode == 'simple'\">\n\t\t\t\t\t\t\t\t\t{{ student.studiengang_kz }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else-if=\"student.status && student.stg_kuerzel\">\n\t\t\t\t\t\t\t\t\t{{ student.status }} ({{ student.stg_kuerzel }})\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ $p.t('person/student') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template-action>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"student.bezeichnung\" class=\"searchbar_tablerow\">\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('lehre/studiengang') }}</div>\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t\t{{ student.bezeichnung }} {{ student.orgform ? '(' + student.orgform + ')' : '' }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"student.prestudent_id\" class=\"searchbar_tablerow\">\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('search/result_prestudent_id') }}</div>\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t\t{{ student.prestudent_id }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"student.uid\" class=\"searchbar_tablerow\">\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('search/result_student_uid') }}</div>\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t\t{{ student.uid }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"student.matrikelnr\" class=\"searchbar_tablerow\">\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_label ps-3\">{{ $p.t('person/matrikelnummer') }}</div>\n\t\t\t\t\t\t<div class=\"searchbar_tablecell searchbar_value\">\n\t\t\t\t\t\t\t{{ student.matrikelnr }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</div>\n\t</template-frame>`\n};","import person from \"./result/person.js\";\nimport room from \"./result/room.js\";\nimport employee from \"./result/employee.js\";\nimport organisationunit from \"./result/organisationunit.js\";\nimport student from \"./result/student.js\";\nimport prestudent from \"./result/prestudent.js\";\nimport dms from \"./result/dms.js\";\nimport cms from \"./result/cms.js\";\nimport mergedStudent from \"./result/mergedstudent.js\";\nimport mergedPerson from \"./result/mergedperson.js\";\n\nexport default {\n\tname: \"FhcSearchbar\",\n\tcomponents: {\n\t\tperson,\n\t\troom,\n\t\temployee,\n\t\torganisationunit,\n\t\tstudent,\n\t\tprestudent,\n\t\tdms,\n\t\tcms,\n\t\tmergedStudent,\n\t\tmergedPerson\n\t},\n    props: [ \"searchoptions\", \"searchfunction\" ],\n    provide() {\n        return {\n            query: Vue.computed(() => this.lastQuery)\n        };\n    },\n    data: function() {\n      return {\n        searchtimer: null,\n        hidetimer: null,\n        searchsettings: {\n            searchstr: this.getSearchStr(),\n            types: this.getInitiallySelectedTypes(),\n        },\n        searchresult: [],\n        searchmode: '',\n        showresult: false,  \n        searching: false,\n        error: null,\n            abortController: null,\n\t\t\tsettingsDropdown: null,\n            lastQuery: ''\n      };\n    },\n\tcomputed: {\n\t\tsearchTypesPlaceholder() {\n\t\t\tif (!this.searchsettings.types.length) {\n\t\t\t\treturn Object.values(this.typeLabels).join(' / ');\n\t\t\t}\n\t\t\treturn this.searchsettings.types.map(type => this.typeLabels[type]).join(' / ');\n\t\t},\n\t\ttypes() {\n\t\t\tif (!this.searchoptions.types)\n\t\t\t\treturn [];\n\t\t\tif (Array.isArray(this.searchoptions.types))\n\t\t\t\treturn this.searchoptions.types;\n\t\t\treturn Object.keys(this.searchoptions.types);\n\t\t},\n\t\ttypeLabels() {\n\t\t\tif (!this.searchoptions.types)\n\t\t\t\treturn {};\n\t\t\tif (Array.isArray(this.searchoptions.types)) {\n\t\t\t\treturn this.searchoptions.types.reduce((res, type) => {\n\t\t\t\t\tres[type] = type;\n\t\t\t\t\treturn res\n\t\t\t\t}, {});\n\t\t\t}\n\t\t\treturn this.searchoptions.types;\n\t\t}\n\t},\n\ttemplate: /*html*/`\n\t\t<form\n\t\t\tref=\"searchform\"\n\t\t\tclass=\"d-flex me-3\"\n\t\t\t:class=\"searchoptions.cssclass\"\n\t\t\taction=\"javascript:void(0);\"\n\t\t\t@focusin=\"searchfocusin\"\n\t\t\t@focusout=\"searchfocusout\"\n\t\t>\n\t\t\t<div\n\t\t\t\tref=\"searchbox\"\n\t\t\t\tclass=\"h-100 input-group me-2 searchbar_searchbox\"\n\t\t\t\t:class=\"showresult ? 'open' : 'closed'\"\n\t\t\t>\n\t\t\t\t<span class=\"input-group-text\">\n\t\t\t\t\t<i class=\"fa-solid fa-magnifying-glass\"></i>\n\t\t\t\t</span>\n                <input\n                \tref=\"input\"\n                    @keyup=\"search\"\n                    @focus=\"showsearchresult\"\n                    v-model=\"searchsettings.searchstr\"\n                    class=\"form-control searchbar_input\"\n                    type=\"search\"\n                    :placeholder=\"$p.t('search/input_search_label', { types: searchTypesPlaceholder })\"\n                    :aria-label=\"$p.t('search/input_search_label', { types: searchTypesPlaceholder })\"\n                >\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"searchsettings.searchstr\"\n\t\t\t\t\tclass=\"searchbar_input_clear btn btn-outline-secondary\"\n\t\t\t\t\t@click=\"clearInput\"\n\t\t\t\t>\n\t\t\t\t\t<i class=\"fas fa-close\"></i>\n\t\t\t\t</button>\n                <button\n                    data-bs-toggle=\"collapse\"\n                    data-bs-target=\"#searchSettings\"\n                    aria-expanded=\"false\"\n                    aria-controls=\"searchSettings\"\n                    ref=\"settingsbutton\"\n                    class=\"searchbar_setting_btn btn btn-secondary\"\n                    type=\"button\"\n                    :title=\"$p.t('search/button_filter_label')\"\n                    :aria-label=\"$p.t('search/button_filter_label')\"\n                >\n                    <i class=\"fas fa-cog\"></i>\n                </button>\n            </div>\n\n            <div v-show=\"showresult\"\n                 class=\"searchbar_results\" tabindex=\"-1\">\n              <div class=\"searchbar_results_scroller\" ref=\"result\">\n                <div class=\"searchbar_results_wrapper\" ref=\"results\">\n                  <div v-if=\"searching\">\n                    <i class=\"fas fa-spinner fa-spin fa-2x\"></i>\n                  </div>\n                  <div v-else-if=\"this.error !== null\">{{ error }}</div>\n                  <div v-else-if=\"searchresult.length < 1\">{{  $p.t('search/error_no_results') }}</div>\n                  <template v-else v-for=\"res in searchresult\">\n                    <component\n                        v-if=\"isValidRenderer(res.renderer)\"\n                        :is=\"res.renderer\"\n                        :mode=\"searchmode\"\n                        :res=\"res\"\n                        :actions=\"getActions(res)\"\n                        @actionexecuted=\"hideresult\"\n                    ></component>\n                    <div v-else class=\"searchbar-result text-danger fw-bold\">{{ $p.t('search/error_unknown_type', res) }}</div>\n                  </template>\n                </div>\n              </div>\n            </div>\n\n\t\t\t<div\n\t\t\t\tid=\"searchSettings\"\n\t\t\t\tref=\"settings\"\n\t\t\t\t@[\\`shown.bs.collapse\\`]=\"handleShowSettings\"\n\t\t\t\t@[\\`hide.bs.collapse\\`]=\"handleHideSettings\"\n\t\t\t\tclass=\"top-100 end-0 searchbar_settings text-white collapse\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"types.length > 0\"\n\t\t\t\t\tclass=\"d-flex flex-column m-3\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"fw-light mb-2\">\n\t\t\t\t\t\t{{ $p.t('search/applyfilter_label') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-for=\"(label, value) in typeLabels\"\n\t\t\t\t\t\t:key=\"value\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"form-check form-switch\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"fhc-switches form-check-input\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\trole=\"switch\"\n\t\t\t\t\t\t\t\t:id=\"$.uid + 'search_type_' + value\"\n\t\t\t\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t\t\t\tv-model=\"searchsettings.types\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclass=\"ps-2 form-check-label non-selectable\"\n\t\t\t\t\t\t\t\t:for=\"$.uid + 'search_type_' + value\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ label }}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n            </div>\n\t\t</form>\n    `,\n    watch:{\n\t\t'searchsettings.searchstr': function (newSearchValue) {\n\t\t\tif(this.searchoptions.origin){\n\t\t\t\tsessionStorage.setItem(`${this.searchoptions.origin}_searchstr`,newSearchValue);\n\t\t\t}\n\t\t},\n\t\t'searchsettings.types'(newValue) {\n\t\t\tif (Array.isArray(newValue) && newValue.length === 0) {\n\t\t\t\tthis.searchsettings.types = [...this.types];\n\t\t\t}\n\t\t\t// stores the search types in the localstorage, only if the newValue is also an array\n\t\t\tif (Array.isArray(newValue) && this.searchoptions.origin) {\n\t\t\t\tlocalStorage.setItem(`${this.searchoptions.origin}_searchtypes`, JSON.stringify(newValue));\n\t\t\t}\n\t\t\tthis.search();\n\t\t}\n    },\n\tmounted(){\n\t\tthis.settingsDropdown = new bootstrap.Collapse(this.$refs.settings, {\n\t\t\ttoggle: false\n\t\t});\n\n\t\tif (!this.searchoptions.origin){\n\t\t\tconsole.warn(\"No origin defined in the searchoptions for the searchbar, please define the origin property in the searchbaroptions to allow reliable storage of searchstr and searchtypes accross applications.\");\n\t\t}\n\t},\n\tupdated() {\n\t\tif(this.showresult) {\n\t\t\tVue.nextTick(() => {\n\t\t\t\tthis.calcSearchResultHeight();\n\t\t\t});\n\t\t}\n\t},\n    methods: {\n    \tclearInput() {\n    \t\tthis.searchsettings.searchstr = \"\";\n    \t\tthis.hideresult();\n    \t\tthis.$refs.input.focus()\n    \t},\n\t\tgetInitiallySelectedTypes() {\n\t\t\tlet result = false;\n\t\t\tif (this.searchoptions.origin) {\n\t\t\t\tlet localStorageValue = localStorage.getItem(`${this.searchoptions.origin}_searchtypes`);\n\t\t\t\tif (localStorageValue) {\n\t\t\t\t\tresult = JSON.parse(localStorageValue);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (result)\n\t\t\t\treturn result;\n\t\t\tif (!this.searchoptions.types)\n\t\t\t\treturn [];\n\t\t\tif (Array.isArray(this.searchoptions.types))\n\t\t\t\treturn [...this.searchoptions.types];\n\t\t\treturn Object.keys(this.searchoptions.types);\n\t\t},\n\t\tgetSearchStr: function(){\n\t\t\tif (!this.searchoptions.origin)\n\t\t\t\treturn '';\n\t\t\treturn sessionStorage.getItem(`${this.searchoptions.origin}_searchstr`) ?? '';\n\t\t},\n\t\tcheckSettingsVisibility: function(event) {\n\t\t\t// hides the settings collapsible if the user clicks somewhere else\n\t\t\tif (!this.$refs.settings.contains(event.target))\n\t\t\t{\n\t\t\t\tthis.settingsDropdown.hide();\n\t\t\t}\n\t\t},\n\t\thandleShowSettings: function() {\n\t\t\t// adds the event listener checkSettingsVisibility only when the collapsible is shown\n\t\t\tdocument.addEventListener(\"click\", this.checkSettingsVisibility);\n\t\t},\n\t\thandleHideSettings: function () {\n\t\t\t// removes the event listener checkSettingsVisibility when the collapsible is hidden\n\t\t\tdocument.removeEventListener(\"click\", this.checkSettingsVisibility);\n\t\t},\n\t\tcalcSearchResultHeight: function() {\n\t\t\tconst rect = this.$refs.results.getBoundingClientRect();\n\t\t\tif( rect.height > 0 && rect.height < (window.innerHeight * 0.8) ) {\n\t\t\t\tthis.$refs.result.style.height = Math.ceil(rect.height + 16) + 'px';\n\t\t\t} else {\n\t\t\t\tthis.$refs.result.style.height = Math.floor(window.innerHeight * 0.8) + 'px';\n\t\t\t}\n\t\t},\n        calcSearchResultExtent: function() {\n\t\t\tif(!this.showresult) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.searchoptions?.calcheightonly === undefined \n\t\t\t\t|| this.searchoptions.calcheightonly === false) {\n\t\t\t\tvar rect = this.$refs.searchbox.getBoundingClientRect();\n\t\t\t\tthis.$refs.result.style.top = Math.floor(rect.bottom + 3) + 'px';\n\t\t\t\tthis.$refs.result.style.right = Math.floor(rect.right) + 'px';\n\t\t\t\tthis.$refs.result.style.width = Math.floor(rect.width) + 'px';\n\t\t\t}\n            this.calcSearchResultHeight();\n        },\n        search: function() {\n            if( this.searchtimer !== null ) {\n                clearTimeout(this.searchtimer);\n            }\n            if (this.abortController) {\n                this.abortController.abort();\n                this.abortController = null;\n            }\n            if( this.searchsettings.searchstr.length >= 2 ) {\n                this.calcSearchResultExtent();\n                this.searchtimer = setTimeout(\n                    this.callsearchapi,\n                    500\n                );\n            } else {                \n                this.showresult = false;\n            }\n        },\n        callsearchapi: function() {\n            this.error = null;\n            this.searchresult.splice(0, this.searchresult.length);\n            this.searching = true;\n            this.showsearchresult();\n            if(this.searchsettings.types.length === 0) {\n                this.error = this.$p.t('search/error_missing_type');\n                this.searching = false;\n                return;\n            }\n\n            if (this.abortController)\n                this.abortController.abort();\n            this.abortController = new AbortController();\n\n            this.searchfunction(this.searchsettings, { timeout: 50000, signal: this.abortController.signal })\n            .then(response=>{\n                if (!response.data) {\n                    this.error = this.$p.t('search/error_general');\n                } else {\n                    let res = response.data.map(el => el.data ? {...el, ...JSON.parse(el.data)} : el);\n                    this.lastQuery = response.meta.searchstring;\n                    if (this.searchoptions.mergeResults) {\n                        let counter = 0;\n                        let mergeTypes = [];\n                        let mergedType = 'merged-';\n                        let mergeKey = '';\n\n                        switch (this.searchoptions.mergeResults) {\n                        case 'student':\n                            mergeTypes = ['student', 'prestudent'];\n                            mergedType += this.searchoptions.mergeResults;\n                            mergeKey = 'uid';\n                            break;\n                        case 'person':\n                            mergeTypes = ['person', 'employee', 'student', 'prestudent'];\n                            mergedType += this.searchoptions.mergeResults;\n                            mergeKey = 'person_id';\n                            break;\n                        }\n\n                        if (mergeTypes.length) {\n                            res = Object.values(res.reduce((a, c) => {\n                                if (!mergeTypes.includes(c.renderer)) {\n                                    a['nomerge' + counter++] = c;\n                                } else if (c[mergeKey] === null) {\n                                    a['nomerge' + counter++] = c;\n                                } else if (a[c[mergeKey]] === undefined) {\n                                    a[c[mergeKey]] = {\n                                        rank: c.rank,\n                                        renderer: mergedType,\n                                        type: mergedType,\n                                        list: [c]\n                                    };\n                                } else {\n                                    a[c[mergeKey]].list.push(c);\n                                    if (c.rank > a[c[mergeKey]].rank)\n                                        a[c[mergeKey]].rank = c.rank;\n                                }\n                                return a;\n                            }, {})).sort((a, b) => b.rank - a.rank);\n                        }\n                    }\n                    this.searchresult = res;\n                    this.searchmode = response.meta.mode;\n                }\n                this.searching = false;\n                this.retry = 0;\n            })\n            .catch(error=> {\n                if (error.code == \"ERR_CANCELED\") {\n                    return this.retry = 0;\n                }\n                if (error.code == \"ECONNABORTED\" && this.retry) {\n                    this.retry--;\n                    return this.callsearchapi();\n                }\n\n                this.error = this.$p.t('search/error_general', error);\n                this.searching = false;\n                this.retry = 0;\n            });\n        },\n        refreshsearch: function() {\n          this.search();\n          this.togglesettings();\n        },\n        hideresult: function() {\n            this.showresult = false;\n            window.removeEventListener('resize', this.calcSearchResultExtent);\n        },\n        showsearchresult: function() {\n            if( this.searchsettings.searchstr.length >= 2 ) {\n                this.showresult = true;\n                window.addEventListener('resize', this.calcSearchResultExtent);\n\t\t\t\tthis.calcSearchResultExtent();\n            }\n        },\n        searchfocusin: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            if( this.hidetimer !== null ) {\n                clearTimeout(this.hidetimer);\n            }\n\t\t\tif (this.searchsettings.searchstr.length >= 2\n\t\t\t\t&& this.searchresult.length === 0) {\n\t\t\t\tthis.search();\n\t\t\t}\n        },\n        searchfocusout: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.hidetimer = setTimeout(\n                this.hideresult,\n                100\n            );\n        },\n        dash2camelCase(string) {\n            return string.replace(/-([a-z])/g, g => g[1].toUpperCase());\n        },\n        isValidRenderer(renderer) {\n            const camelCaseRenderer = this.dash2camelCase(renderer);\n            return Object.keys(this.$.components).includes(camelCaseRenderer);\n        },\n\t\tgetActions(res) {\n\t\t\tlet actions = this.searchoptions.actions[this.dash2camelCase(res.renderer)];\n\t\t\tif (actions) {\n\t\t\t\treturn actions;\n\t\t\t}\n\t\t\treturn this.searchoptions.actions[res.type];\n\t\t}\n    }\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsearch(params) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/searchbar/search',\n\t\t\tparams\n\t\t};\n\t},\n\tsearchCis(params) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/searchbar/searchCis',\n\t\t\tparams\n\t\t};\n\t},\n\tsearchStv(params) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/searchbar/searchStv',\n\t\t\tparams\n\t\t};\n\t}\n};","const categories = {};\nconst loadingModules = {};\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction reloadRefs(category) {\n\twhile (loadingModules[category].length) {\n\t\tvar v = loadingModules[category].pop();\n\t\tv[0].value = getValueForLoadedPhrase(category, v[1], v[2]);\n\t\tVue.triggerRef(v[0]);\n\t\t/*Vue.unref(v);*/\n\t}\n}\nfunction loadLazy(category, val, phrase, params) {\n\t// NOTE(chris): load module if it's not loaded yet\n\tif (loadingModules[category]) {\n\t\tloadingModules[category].push([val, phrase, params]);\n\t\tif (categories[category]) // NOTE(chris): this is for safety in case the loading finished the moment before the val was pushed into the array\n\t\t\treloadRefs(category);\n\t\treturn;\n\t}\n\tloadingModules[category] = [[val, phrase, params]];\n\n\taxios.get(FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + '/components/Phrasen/loadModule/' + category).then(res => {\n\t\tif (res.data.retval)\n\t\t\tcategories[category] = extractCategory(res.data.retval, category);\n\t\telse\n\t\t\tcategories[category] = {};\n\n\t\treloadRefs(category);\n\t}).catch(err => console.error(err));\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\n\nconst phrasen = {\n\tt_ref(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input');\n\t\t\treturn '';\n\t\t}\n\t\tif (!categories[category]) {\n\t\t\t\n\t\t\tvar initialval = '';\n  \t\t\tif (window.FHC_JS_PHRASES_STORAGE_OBJECT !== undefined) {\n  \t\t\t\tvar tmp_category = extractCategory(FHC_JS_PHRASES_STORAGE_OBJECT, category);\n\t\t\t\tif(tmp_category[phrase] !== undefined ) {\n\t\t\t\t\tinitialval = tmp_category[phrase];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!categories[category] || Object.keys(categories[category]).length === 0) {\n\t\t\t\tcategories[category] = undefined;\n\t\t\t\tlet val = Vue.ref(initialval);\n\t\t\t\tloadLazy(category, val, phrase, params);\n\t\t\t\treturn val;\n\t\t\t}\n\t\t}\n\t\tvar result = getValueForLoadedPhrase(category, phrase, params);\n\t\treturn Vue.ref(result);\n\t},\n\tt(category, phrase, params) {\n\t\treturn Vue.unref(this.t_ref(category, phrase, params));\n\t}\n};\n\nexport default {\n\tdata: () => {\n\t\treturn {\n\t\t\tp: phrasen\n\t\t}\n\t}\n}\n\n// Composable (wrapper for mixin)\nexport function usePhrasen() {\n\n\tfunction t(category, phrase, params) {\n\t\treturn phrasen.t(category, phrase, params);\n\t}\n\n\treturn {\t\t\n\t\tt,\n\t}\n\n}\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n//--------------------------------------------------------------------------------------------------------------------\n// Configs\n\n// To see debug messages into the browser console set this parameter as true\nconst CORE_REST_CLIENT_DEBUG = false;\n\n// Default timeout (milliseconds)\nconst CORE_REST_CLIENT_TIMEOUT = 5000;\n\n//--------------------------------------------------------------------------------------------------------------------\n// Constants\n\n// Success\nconst CORE_REST_CLIENT_SUCCESS = 0;\n\n// Properties present in a response\nconst CORE_REST_CLIENT_ERROR = \"error\";\nconst CORE_REST_CLIENT_RETVAL = \"retval\";\n\n// HTTP method parameters\nconst CRC_HTTP_GET_METHOD = \"get\";\nconst CRC_HTTP_POST_METHOD = \"post\";\n\n/**\n * Definition and initialization of the object CoreRESTClient\n */\nexport const CoreRESTClient = {\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Public methods\n\n\t/**\n\t * Performs a call using the HTTP GET method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tget: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_GET_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Performs a call using the HTTP POST method\n\t * wsParameters is an object\n\t * axiosParameters is an object\n\t */\n\tpost: function(wsURL, wsParameters, axiosParameters = null) {\n\t\treturn CoreRESTClient._axiosCall(wsURL, wsParameters, CRC_HTTP_POST_METHOD, axiosParameters);\n\t},\n\n\t/**\n\t * Checks if the response is a success\n\t */\n\tisSuccess: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR)\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL) && response.error == CORE_REST_CLIENT_SUCCESS)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Checks if the response is an error\n\t */\n\tisError: function(response) {\n\t\treturn !CoreRESTClient.isSuccess(response);\n\t},\n\n\t/**\n\t * Checks if the response has data\n\t */\n\thasData: function(response) {\n\n\t\tif (CoreRESTClient.isSuccess(response))\n\t\t{\n\t\t\tif ((typeof response[CORE_REST_CLIENT_RETVAL] === \"object\" && Object.keys(response[CORE_REST_CLIENT_RETVAL]).length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"array\" && response[CORE_REST_CLIENT_RETVAL].length > 0)\n\t\t\t\t|| (typeof response[CORE_REST_CLIENT_RETVAL] === \"string\" && response[CORE_REST_CLIENT_RETVAL].trim() != \"\")\n\t\t\t\t|| typeof response[CORE_REST_CLIENT_RETVAL] === \"number\")\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Retrives data from response object\n\t */\n\tgetData: function(response) {\n\n\t\tif (CoreRESTClient.hasData(response))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Retrives error message from response object\n\t */\n\tgetError: function(response) {\n\n\t\tif (typeof response === \"object\"\n\t\t\t&& Object.keys(response).length > 0\n\t\t\t&& response.hasOwnProperty(CORE_REST_CLIENT_RETVAL))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_RETVAL];\n\t\t}\n\n\t\treturn \"Generic error\";\n\t},\n\n\t/**\n\t * Retrives code from response object\n\t */\n\tgetErrorCode: function(response) {\n\n\t\tif (typeof response === \"object\" && response.hasOwnProperty(CORE_REST_CLIENT_ERROR))\n\t\t{\n\t\t\treturn response[CORE_REST_CLIENT_ERROR];\n\t\t}\n\n\t\treturn 1; // Generic error\n\t},\n\n\t//------------------------------------------------------------------------------------------------------------------\n\t// Private methods\n\n\t/**\n\t * Generate the router URI using the connection parameters\n\t */\n\t_generateRouterURI: function(wsURL) {\n\t\tvar uri = null;\n\n\t\t// Checks if global JS object FHC_JS_DATA_STORAGE_OBJECT exists\n\t\tif (typeof FHC_JS_DATA_STORAGE_OBJECT !== \"undefined\")\n\t\t{\n\t\t\turi = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\" + wsURL;\n\t\t}\n\n\t\treturn uri;\n\t},\n\n\t/**\n\t * Method to print debug info after a controller has been called\n\t */\n\t_printDebug: function(parameters, response, errorThrown) {\n\n\t\tif (CORE_REST_CLIENT_DEBUG === true) // If global const CORE_REST_CLIENT_DEBUG is true, but really true!\n\t\t{\n\t\t\t// Print info about called controller\n\t\t\tconsole.log(\"Called controller: \" + parameters.remoteController);\n\t\t\tconsole.log(\"Call parameters:\"); // parameters given to this call\n\t\t\tconsole.log(parameters);\n\n\t\t\tif (response != null) // if there is a response...\n\t\t\t{\n\t\t\t\tconsole.log(\"Controller Response:\");\n\t\t\t\tconsole.log(response); // ...print it\n\t\t\t}\n\t\t\tif (errorThrown != null) // if there is a jQuery error...\n\t\t\t{\n\t\t\t\tconsole.log(\"jQuery error:\");\n\t\t\t\tconsole.log(errorThrown); // ...print it\n\t\t\t}\n\t\t\tconsole.log(\"--------------------------------------------------------------------------------------------\");\n\t\t}\n\t},\n\n\t/**\n\t * Performs a call to the server were the CI PHP layer is running\n\t * - wsURL: alias of the core controller to call\n\t * - wsParameters: parameters to give to the called controller\n\t * - type: POST or GET HTTP method\n\t * - axiosParameters: an object to configure the axios call\n\t */\n\t_axiosCall: function(wsURL, wsParameters, type, axiosParameters) {\n\n\t\t// Axios config object\n\t\tlet axiosCallObj = {\n\t\t\tmethod: type,\n\t\t\turl: CoreRESTClient._generateRouterURI(wsURL),\n\t\t\ttimeout: CORE_REST_CLIENT_TIMEOUT // default time out\n\t\t};\n\n\t\t// The ajax call is HTTP GET\n\t\tif (type == CRC_HTTP_GET_METHOD)\n\t\t{\n\t\t\taxiosCallObj.params = wsParameters;\n\t\t}\n\t\t// The ajax call is HTTP POST\n\t\telse\n\t\t{\n\t\t\taxiosCallObj.data = wsParameters;\n\t\t}\n\n\t\t// Check if axiosParameters is an object\n\t\tif (typeof axiosParameters === \"object\")\n\t\t{\n\t\t\t// And then copies the its properties into axiosCallObj\n\t\t\tfor (var prop in axiosParameters) axiosCallObj[prop] = axiosParameters[prop];\n\t\t}\n\n\t\t// Perform the ajax call via axios\n\t\treturn axios(axiosCallObj);\n\t}\n};\n\n","import { CoreFilterAPIs } from '../../../../js/components/filter/API.js';\n\nlet protocol_host = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\t \n\nexport const searchbaroptions = {\n    cssclass: \"position-relative\",\n    origin: 'pv21',\n    types: [\n        \"person\",\n        \"raum\",\n        \"mitarbeiter\",\n        \"mitarbeiter_ohne_zuordnung\",\n/*\n        \"student\",\n        \"prestudent\",\n        \"document\",\n        \"cms\",\n*/\n        \"organisationunit\"\n    ],\n    actions: {\n        person: {\n            defaultaction: {\n                type: \"link\",\n                action: function(data) { \n                    return data.profil;\n                }\n            },\n            childactions: [\n                {\n                    label: \"testchildaction1\",\n                    icon: \"fas fa-check-circle\",\n                    type: \"function\",\n                    action: function(data) { \n                        alert('person testchildaction 01 ' + JSON.stringify(data)); \n                    }\n                },\n                {\n                    label: \"testchildaction2\",\n                    icon: \"fas fa-file-csv\",\n                    type: \"function\",\n                    action: function(data) { \n                        alert('person testchildaction 02 ' + JSON.stringify(data)); \n                    }\n                }\n            ]\n        },\n\t\traum: {\n\t\t\tdefaultaction: {\n\t\t\t\ttype: \"link\",\n\t\t\t\trenderif: function(data) {\n\t\t\t\t\tif(data.content_id === \"N/A\"){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\taction: function(data) { \n\t\t\t\t\tconst link= FHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\t\t\t\t'cms/content.php?content_id=' + data.content_id;\n\t\t\t\t\treturn link;\n\t\t\t\t}\n\t\t\t},\n\t\t\tchildactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"LV-Plan\",\n\t\t\t\t\ticon: \"fas fa-bookmark\",\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\taction: function(data) {\n\t\t\t\t\t\tconst link = FHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\t\t\t\t\t'cis/private/lvplan/stpl_week.php?type=ort&ort_kurzbz=' + data.ort_kurzbz;\n\t\t\t\t\t\treturn link;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Rauminformation\",\n\t\t\t\t\ticon: \"fas fa-info-circle\",\n\t\t\t\t\ttype: \"link\",\n\t\t\t\t\trenderif: function(data) {\n\t\t\t\t\t\tif(data.content_id === \"N/A\"){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t\taction: function(data) {\n\t\t\t\t\tconst link= FHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\t\t\t\t'cms/content.php?content_id=' + data.content_id;\n\t\t\t\t\t\treturn link;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t]\n\t\t},\n        employee: {\n            defaultaction: {\n                type: \"link\",\n                action: (data) => {\n                    return `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees/${data.person_id}/${data.uid}/summary`;\n                }\n            },\n            childactions: [\n                {\n                    label: \"Dienstverhältnis\",\n                    icon: \"fas fa-address-book\",\n                    type: \"link\",\n                    action: function(data) {\n                        return `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees/${data.person_id}/${data.uid}/contract`;\n                    }\n                },\n                {\n                    label: \"Stammdaten\",\n                    icon: \"fas fa-address-card\",\n                    type: \"link\",\n                    action: function(data) {\n                        return `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees/${data.person_id}/${data.uid}`;\n                    }\n                },\n                {\n                    label: \"Vertragshistorie\",\n                    icon: \"fas fa-address-book\",\n                    type: \"link\",\n                    action: function(data) {\n                        return `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees/${data.person_id}/${data.uid}/contract#dvhistory`;\n                    }\n                },\n/*\n                {\n                    label: \"testchildaction3\",\n                    icon: \"fas fa-bell\",\n                    type: \"function\",\n                    action: function(data) { \n                        alert('employee testchildaction 03 ' + JSON.stringify(data)); \n                    }\n                },\n                {\n                    label: \"testchildaction4\",\n                    icon: \"fas fa-calculator\",\n                    type: \"function\",\n                    action: function(data) { \n                        alert('employee testchildaction 04 ' + JSON.stringify(data)); \n                    }\n                }\n */\n            ]\n        },\n        organisationunit: {\n            defaultaction: {\n                type: \"function\",\n                action: function(data) { \n                    //alert('organisationunit defaultaction ' + JSON.stringify(data));\n                    const filterFields = {\n                        \"filterUniqueId\":\"extensions/FHC-Core-Personalverwaltung/Employees/index\",\n                        \"filterType\":\"EmployeeViewer\",\n                        \"filterFields\":[{\"name\":\"OE Key\",\"operation\":\"equal\",\"condition\":data.oe_kurzbz}]\n                    };\n\t\t\t\t\tlet protocol_host = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\t\t\t\t\taxios.post(protocol_host + '/api/frontend/v1/filter/applyFilterFields', filterFields).then(function() {\n                        // redirect\n                        window.location.href = `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees`;\n                    });\n                }\n            },\n            childactions: []\n        }\n    }\n};\n","import { usePhrasen } from '../../../../../public/js/mixins/Phrasen.js';\n\nexport const ModalDialog = {\n\tname: 'ModalDialog',\n    props: {\n        type: String,\n        title: String,\n    },\n    expose: ['show', 'hide'],\n    setup(props, { emit }) {\n       \n        let modalConfirmEle = Vue.ref(null);\n        let thisModalObj;\n        let _resolve;\n        let _reject;\n        const { t } = usePhrasen();\n\n        Vue.onMounted(() => {\n            thisModalObj = new bootstrap.Modal(modalConfirmEle.value);\n        });\n        \n        const show = async () => {\n            thisModalObj.show();\n            return new Promise(function (resolve, reject) {\n              _resolve = resolve;\n              _reject = reject;\n            });\n        }\n\n        function hide() {\n            thisModalObj.hide();\n        }\n\n        const ok = () => {\n            _resolve(true);\n          }\n          \n        const cancel = () =>  {\n            _resolve(false);\n        }        \n\n        return { modalConfirmEle, show, hide, ok, cancel, t };\n    },\n\n    template:`\n    <div class=\"modal fade \" id=\"customModalDialog\" tabindex=\"-1\" aria-labelledby=\"\"\n        aria-hidden=\"true\" ref=\"modalConfirmEle\">\n        <div class=\"modal-dialog modal-lg\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\" id=\"customModalDialogLabel\">{{ title }}</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                    <slot name=\"body\" />\n                </div>\n                <div class=\"modal-footer\">\n                    <slot name=\"footer\"></slot>\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"cancel\" data-bs-dismiss=\"modal\">\n                      {{ t('ui','abbrechen') }}\n                    </button>\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"ok\" data-bs-dismiss=\"modal\">\n                        {{ t('ui','ok') }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>`\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n    filterPerson(searchVal) {\n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/filterPerson',\n        params: { searchVal }\n      }\n    },    \n    personBaseData(person_id) {\n      return { \n        method: 'get',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personBaseData',\n        params: { person_id }\n      } \n    },\n    updatePersonBaseData(payload) {        \n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/updatePersonBaseData',\n          params: payload\n        }\n    },\n    personEmployeeData(person_id) {\n        return { \n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personEmployeeData',\n          params: { person_id }\n        }\n    },\n    updatePersonEmployeeData(payload) {\n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/updatePersonEmployeeData',\n          params: payload\n        }\n    },\n    personEmployeeKurzbzExists(uid, kurzbz) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personEmployeeKurzbzExists',\n          params: { uid, kurzbz }\n        }\n    },\n\n    deletePersonBankData(bankverbindung_id) {\n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonBankData',\n          params: { bankverbindung_id }\n        }\n    },\n    upsertPersonBankData(payload) {\n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonBankData',\n          params: payload\n        }\n    },\n    personBankData(person_id) {\n      return {\n        method: 'get',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personBankData',\n        params: { person_id }\n      }\n    },\n    personAddressData(person_id) {\n      return {\n        method: 'get',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personAddressData',\n        params: { person_id }\n      }\n    },\n    deletePersonAddressData(adresse_id) {\n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonAddressData',\n        params: { adresse_id }\n      }\n    },\n    upsertPersonAddressData(payload) {\n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonAddressData',\n          params: payload\n        }\n    },\n    personContactData(person_id) {\n      return {\n        method: 'get',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personContactData',\n        params: { person_id }\n      }\n    },\n    deletePersonContactData(kontakt_id) {\n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonContactData',\n        params: { kontakt_id }\n      }\n    },\n    upsertPersonContactData(payload) {\n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonContactData',\n        params: payload\n      }\n    },\n    uidByPerson(person_id, uid) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/uidByPerson',\n          params: { person_id: person_id, person_uid: uid}\n        }\n    },\n    personMaterialExpenses(person_id, uid) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personMaterialExpenses',\n          params: { person_id: person_id, person_uid: uid}\n        }\n    },\n    deletePersonMaterialExpenses(sachaufwand_id) {        \n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonMaterialExpenses',\n          params: { sachaufwand_id }\n        }\n      },\n    upsertPersonMaterialExpenses(payload) {\n        return {\n          method: 'post',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonMaterialExpenses',\n          params: payload\n        }\n    },\n    deletePersonJobFunction(benutzerfunktion_id) {\n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonJobFunction',\n        params: { benutzerfunktion_id }\n      }\n    },\n    upsertPersonJobFunction(payload) {   \n      return {\n        method: 'post',\n        url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/upsertPersonJobFunction',\n        params: payload\n      }\n    },\n    updatePersonUnruly(payload) {\n      return {\n        method: 'post',\n        url: '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus',\n        params: payload\n      }\n    }\n}","import { ModalDialog } from '../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport ApiPerson from '../../api/factory/person.js';\n\nexport const BaseData = {\n\tname: 'BaseData',\n    components: {\n        ModalDialog,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n        personID: { type: Number, required: false },\n        personUID: { type: String, required: false },\n        writePermission: { type: Boolean, required: false },\n    },\n    emits: ['updateHeader'],\n    setup(props, { emit }) {\n\n        const $api = Vue.inject('$api')\n        const $fhcAlert = Vue.inject('$fhcAlert');\n        const { t } = usePhrasen();\n        const readonly = Vue.ref(true);\n\n        const { personID } = Vue.toRefs(props);\n\n        const theModel = Vue.computed({\n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n        const url = Vue.ref(\"\");\n\n        const isFetching = Vue.ref(false);\n\n        const dialogRef = Vue.ref();\n\n        const sprache = Vue.inject('sprache');\n        const nations = Vue.inject('nations');\n\n        const GESCHLECHT = {\n            w: 'weiblich', \n            m: 'männlich', \n            x: 'divers', \n            u: 'unbekannt'};\n\n        const printNation = (code) => {\n            if (!code) return '';\n            let result = nations.value?.filter((item) => item.nation_code == code);\n            if (result?.length > 0)\n                return result[0].nation_text;\n            return '';\n        }\n\n        const printLanguage =  (code) => {\n            const userLanguageMap = ['German','English','Espanol','Magyar']\n            \n            if (!code) return ''\n            let languageIndex = userLanguageMap.findIndex((item) => item == FHC_JS_DATA_STORAGE_OBJECT.user_language)\n            let result = sprache.value?.filter((item) => item.sprache == code)\n            if (result?.length > 0) {\n                return result[0].bezeichnung[languageIndex]\n            }\n            return '?'\n        }\n\n        \n        const fetchData = async () => {\n            if (theModel.value.personID==null && props.personID==null) {                \n                return;\n            }\n            isFetching.value = true\n            try {\n              const res = await $api.call(ApiPerson.personBaseData(theModel.value.personID || personID.value));\n              currentValue.value = res.data[0];\n            } catch (error) {\n              $fhcAlert.handleSystemError(error)                   \n            } finally {\n                isFetching.value = false\n            }          \n        }\n\n        const createShape = () => {\n            return {\n                uid: \"\",\n                person_id: 0,\n                kurzbz: \"\",\n                aktiv: false,\n                telefonklappe: \"\",\n                alias: \"\",\n                anrede: \"\",\n                titelpre: \"\",\n                titelpost: \"\",\n                nachname: \"\",\n                vorname: \"\",\n                vornamen: \"\",\n                geschlecht: \"\",\n                staatsbuergerschaft: \"A\",\n                geburtsnation: \"A\",\n                sprache: \"\",\n                anmerkung: \"\",\n                homepage: \"\",\n            } \n        }\n\n        const currentValue = Vue.ref(createShape());\n        const preservedValue = Vue.ref(createShape());        \n\n        Vue.watch(personID, (currentVal, oldVal) => {  \n            fetchData();         \n        });\n\n        Vue.watch(theModel, (currentVal, oldVal) => {\n            console.log('BaseData: theModel changed: ', currentVal);\n        })\n\n        const toggleMode = async () => {\n            if (!readonly.value) {\n                // cancel changes?\n                if (hasChanged.value) {\n                  if (await $fhcAlert.confirm({\n                        message: t('person','stammdatenNochNichtGespeichert'),\n                        acceptLabel: 'OK',\n\t\t\t\t        acceptClass: 'p-button-danger'\n                    }) === false) {\n                    return;\n                  }     \n                  currentValue.value = preservedValue.value;     \n                }\n              } else {\n                // switch to edit mode and preserve data\n                preservedValue.value = {...currentValue.value};\n              }\n              readonly.value = !readonly.value;\n        }\n\n        Vue.onMounted(() => {\n            console.log('BaseData mounted', props.personID, theModel);\n            currentValue.value = createShape();\n            if (theModel.value?.personID || props.personID) {\n                fetchData();\n            }\n            \n        })\n\n        // -------------\n        // form handling\n        // -------------\n\n        const baseDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ nachnameBlured: false, geburtsdatumBlured: false, svnrBlured: false, wasValidated: false });\n\n        const validNachname = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validGeburtsdatum = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validSVNR = (svnr) => {\n            const weight = [3, 7, 9, 5, 8, 4, 2, 1, 6 ];\n            if (svnr == undefined || svnr == '') return true;\n\n            if (svnr.length != 10) return false;\n//            var date_regex = /^(((0[1-9]|[12]|[13]\\d|3[01])(0[13578]|1[02])(\\d{2}))|((0[1-9]|[12]|[13]\\d|30)(0[13456789]|1[012])(\\d{2}))|((0[1-9]|1\\d|2[0-8])02(\\d{2}))|(2902((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|(([1][26]|[2468][048]|[3579][26])00))))$/gm;\n            // extract date\n            var datum = svnr.substring(4);\n\n            var nummer = svnr.substring(0,3);\n\n            var pruefzahl = svnr.substring(3,4);\n            \n            let isValid = true;\n\n            if(isValid){   \n                // calc checksum\n                let sum = 0;\n                let svnr_raw = nummer + datum;\n\n                for (var i = 0; i < 9; i++) {\n                    let prod = parseInt(svnr_raw.charAt(i)) * weight[i];\n                    sum += prod;\n                }\n\n                let rest = sum % 11;\n\n                if (rest == pruefzahl) return true;\n            } else {\n                console.log('svnr datum invalid');\n            }\n            return false;\n        }\n\n        const save = async () => {\n\n            if (!baseDataFrm.value.checkValidity()) {\n\n                console.log(\"form invalid\");\n\n            } else if (!hasChanged.value) {\n\n                console.log(\"no changes detected. nothing to save.\");\n\n            } else {\n\n                // submit\n                try {\n                    const res = await $api.call(ApiPerson.updatePersonBaseData(currentValue.value));                  \n                    showToast();\n                    currentValue.value = res.data[0];\n                    preservedValue.value = currentValue.value;\n                    theModel.value.updateHeader();\n                    toggleMode();  \n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)             \n                } finally {\n                    isFetching.value = false\n                }\n               \n            }\n\n            frmState.wasValidated  = true;  \n        }\n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','stammdatenGespeichert'))\n        }\n\n        const readonlyBlocker = (e) => {\n            if (readonly.value) e.preventDefault();\n        }\n\n        return {\n            \n            currentValue,\n            readonly,\n            frmState,\n            dialogRef,\n            baseDataFrm,\n            sprache,\n            GESCHLECHT,\n            nations,  \n            theModel,\n            t,\n            readonlyBlocker,\n            save,\n            toggleMode,  \n            validNachname,    \n            validGeburtsdatum,  \n            validSVNR,    \n            printNation,\n            printLanguage,\n        }\n        \n    },\n    template: `\n    <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5 mb-0\"><h5>{{ t('global', 'stammdaten') }}</h5></div>        \n                </div>\n                <div class=\"card-body\">\n                <div class=\"d-grid gap-2 d-md-flex justify-content-end \" v-if=\"!theModel.restricted\">\n                    <button v-if=\"readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"toggleMode()\">\n                        <i class=\"fa fa-pen\"></i>\n                    </button>\n                    <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"save()\"><i class=\"fa fa-floppy-disk\"></i></button>\n                    <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"toggleMode()\"><i class=\"fa fa-xmark\"></i></button>\n               </div>\n               <form class=\"row g-3  col-lg-12\" ref=\"baseDataFrm\">\n                \n                <!-- Anrede -->\n                <div class=\"col-lg-2 col-md-4\">\n                    <label for=\"anrede\" class=\"form-label\">{{ t('person','anrede') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"anrede\" v-model=\"currentValue.anrede\">\n                </div>\n                <div class=\"col-lg-2 col-md-4\">\n                    <label for=\"titelPre\" class=\"form-label\">{{ t('person', 'titelpre') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"titelPre\" v-model=\"currentValue.titelpre\">\n                </div>\n                <div class=\"col-lg-2 col-md-4\">\n                    <label for=\"titelPost\" class=\"form-label\">{{ t('person', 'titelpost' )}}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"titelPost\" v-model=\"currentValue.titelpost\">\n                </div>\n                <div class=\"col-lg-4\"></div>\n                <!--Name -->\n                <div class=\"col-lg-3 col-md-4\">\n                    <label for=\"nachname\" class=\"required form-label\">{{ t('person','nachname') }}</label>\n                    <input type=\"text\" required  @blur=\"frmState.nachnameBlured = true\"  :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validNachname(currentValue.nachname) && frmState.nachnameBlured}\" id=\"nachname\" v-model=\"currentValue.nachname\">\n                    <div class=\"invalid-feedback\" v-if=\"frmState.nachnameBlured && validNachname(currentValue.nachname)\">\n                      Bitte geben Sie den Nachnamen an.\n                    </div>\n                </div>\n                <div class=\"col-lg-3 col-md-4\">\n                    <label for=\"vorname\" class=\"form-label\">{{ t('person','vorname') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"vorname\" v-model=\"currentValue.vorname\">\n                </div>\n                <div class=\"col-lg-2 col-md-4\">\n                    <label for=\"vornamen\" class=\"form-label\">{{ t('person','vornamen') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"vornamen\" v-model=\"currentValue.vornamen\">\n                </div>\n                <div class=\"col-lg-4\"></div>\n    \n                <!-- Staatsbürgerschaft, etc. -->\n                <div class=\"col-lg-2 col-md-3\">\n                    <label for=\"staatsbuergerschaft\" class=\"form-label\">{{ t('person','staatsbuergerschaft') }}</label>                \n                    <select v-if=\"!readonly\" id=\"staatsbuergerschaft\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentValue.staatsbuergerschaft\" >\n                        <option v-for=\"(item, index) in nations\" :value=\"item.nation_code\">\n                            {{ item.nation_text }}\n                        </option>\n                    </select>\n                    <input v-else type=\"text\"  :readonly=\"readonly\" class=\"form-control-sm form-control-plaintext\" id=\"staatsbuergerschaft\" :value=\"printNation(currentValue.staatsbuergerschaft)\">\n                </div>\n                <div class=\"col-lg-2 col-md-3\">\n                        <label for=\"geburtsnation\" class=\"form-label\">{{ t('person','geburtsnation') }}</label>\n                        <select v-if=\"!readonly\" id=\"geburtsnation\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentValue.geburtsnation\" >\n                            <option v-for=\"(item, index) in nations\" :value=\"item.nation_code\">\n                                {{ item.nation_text }}\n                            </option>\n                        </select>\n                        <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  id=\"geburtsnation\" :value=\"printNation(currentValue.geburtsnation)\" >\n                </div>\n                <div class=\"col-lg-2 col-md-3\">\n                    <label for=\"sprache\" class=\"form-label\">{{ t('person','sprache') }}</label><br>\n                    <select v-if=\"!readonly\" id=\"sprache\" :readonly=\"readonly\"  v-model=\"currentValue.sprache\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                        <option value=\"\">-- {{ t('fehlermonitoring', 'keineAuswahl') }} --</option>\n                        <option v-for=\"(item, index) in sprache\" :value=\"item.sprache\">\n                            {{ item.bezeichnung[0] }}\n                        </option>         \n                    </select>\n                    <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"sprache\" :value=\"printLanguage(currentValue.sprache)\">\n    \n                </div>\n                <div class=\"col-lg-6 col-md-3\"></div>\n                \n                <!-- Geschlecht -->\n                <div class=\"col-lg-2 col-md-3\">\n                    <label for=\"geschlecht\" class=\"form-label\">{{ t('person', 'geschlecht') }}</label><br>\n                    <select v-if=\"!readonly\" id=\"geschlecht\" v-model=\"currentValue.geschlecht\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                        <option value=\"w\">weiblich</option>\n                        <option value=\"m\">männlich</option>\n                        <option value=\"x\">divers</option>\n                        <option value=\"u\">unbekannt</option>\n                    </select>\n                    <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"geschlecht\" :value=\"GESCHLECHT[currentValue.geschlecht]\">\n                </div>\n    \n                <div class=\"col-lg-2 col-md-3\">\n                    <label for=\"geburtsdatum\" class=\"required form-label\">{{ t('person', 'geburtsdatum') }}</label>\n                    <template v-if=\"readonly\">\n                        <input type=\"date\" readonly class=\"form-control-sm form-control-plaintext\" v-model=\"currentValue.gebdatum\" id=\"geburtsdatum\" >\n                    </template>\n                    <template v-else>\n                        <datepicker id=\"geburtsdatum\"\n                            @blur=\"frmState.geburtsdatumBlured = true\" \n                            :input-class-name=\"(!validGeburtsdatum(currentValue.gebdatum) && frmState.geburtsdatumBlured) ? 'dp-invalid-input' : ''\" \n                            v-model=\"currentValue.gebdatum\"\n                            v-bind:enable-time-picker=\"false\"\n                            text-input \n                            locale=\"de\"\n                            format=\"dd.MM.yyyy\"\n                            auto-apply \n                            model-type=\"yyyy-MM-dd\"></datepicker>\n                    </template>\n                </div>\n    \n                <div class=\"col-lg-2 col-md-3\">\n                    <label for=\"svnr\" class=\"form-label\">{{ t('person', 'svnr') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" @blur=\"frmState.svnrBlured = true\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validSVNR(currentValue.svnr) && frmState.svnrBlured}\" id=\"svnr\" v-model=\"currentValue.svnr\">\n                </div>\n    \n                <div class=\"col-lg-2 col-md-3\">\n                        <label for=\"ersatzkennzeichen\" class=\"form-label\">{{ t('person', 'ersatzkennzeichen') }}</label>\n                        <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"ersatzkennzeichen\" v-model=\"currentValue.ersatzkennzeichen\">\n                </div>\n    \n                <div class=\"col-lg-4\">\n                    \n                </div>\n                \n                \n                \n                <!-- -->\n                <div class=\"col-lg-6\">\n                    <label for=\"inputAddress\" class=\"form-label\">{{ t('global', 'anmerkung') }}</label>\n                    <textarea type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"anmerkungen\" v-model=\"currentValue.anmerkung\">\n                    </textarea>\n                </div>\n    \n                \n                \n                <!-- changes -->\n                <div class=\"col-8\">\n                    <div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }}</div>\n                </div>\n                \n    \n            </form>\n            </div>\n             </div>\n        </div>   \n    </div>\n\n    `\n}\n\n\nexport default BaseData;\n","import { ModalDialog } from '../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport ApiPerson from '../../api/factory/person.js';\n\n\nexport const EmployeeData= {\n\tname: 'EmployeeData',\n    components: {\n        ModalDialog,\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n        personID: { type: Number, required: false },\n        personUID: { type: String, required: false },\n        writePermission: { type: Boolean, required: false },\n    },\n    emits: ['updateHeader'],\n    setup(props, { emit }) {\n\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');        \n        const readonly = Vue.ref(true);\n        const { t } = usePhrasen();\n\n        const { personID } = Vue.toRefs(props);\n\n        const theModel = Vue.computed({  // Use computed to wrap the object\n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n          });\n\n        const url = Vue.ref(\"\");\n\n        const isFetching = Vue.ref(false);\n\n        const dialogRef = Vue.ref();\n\n        const ausbildung = Vue.inject('ausbildung');\n        const standorte = Vue.inject('standorte');\n        const orte = Vue.inject('orte');\n        const validKurzbz = Vue.ref(true);\n\n        const fetchData = async () => {\n            if (theModel.value.personID==null && props.personID==null) {                \n                return;\n            }\n            isFetching.value = true;\n            try {\n              const res = await $api.call(ApiPerson.personEmployeeData(theModel.value.personID || personID.value));\n              currentValue.value = res.data[0];\n            } catch (error) {\n              $fhcAlert.handleSystemError(error)         \n            } finally {\n                isFetching.value = false\n            }   \n          }\n\n          const createShape = () => {\n            return {\n                mitarbeiter_uid: \"\",\n                personalnummer: 0,\n                telefonklappe: \"\",\n                kurzbz: \"\",\n                lektor: false,\n                fixangestellt: false,\n                stundensatz: \"0.00\",   // deprecated\n                ausbildungcode: null,\n                ort_kurzbz: \"\",\n                ext_id: 0,\n                anmerkung: null,\n                bismelden: true,\n                standort_id: null,\n                kleriker: false,\n                aktiv: false,\n                habilitation: false,\n                insertamum: \"\",\n                insertvon: \"\",\n                updatevon: \"\",\n                updateamum: \"\"\n                }\n            }\n\n        const currentValue = Vue.ref(createShape());\n        const preservedValue = Vue.ref(createShape());\n\n        Vue.watch(personID, (currentVal, oldVal) => { \n            fetchData();         \n        });\n\n        const toggleMode = async () => {\n            if (!readonly.value) {\n                // cancel changes?\n                if (hasChanged.value) {\n\n                  if (await $fhcAlert.confirm({\n                        message:`t('person','mitarbeiterdatenGeandert')`,\n                        acceptLabel: 'OK',\n\t\t\t\t        acceptClass: 'p-button-danger'\n                    }) === false) {\n                    return;\n                  }     \n                  currentValue.value = preservedValue.value;                  \n                }\n              } else {\n                // switch to edit mode and preserve data\n                preservedValue.value = {...currentValue.value};\n              }\n              readonly.value = !readonly.value;\n        }\n\n        Vue.onMounted(() => {\n            currentValue.value = createShape();\n            if (theModel.value?.personID || props.personID) {\n                fetchData();\n            }\n        })\n\n        const getAusbildungbez = (code) => {\n            if (!code) return '';\n            let result = ausbildung.value?.filter((item) => item.ausbildungcode == code);\n            if (result?.length > 0)\n                return result[0].ausbildungbez;\n            return '';\n        }\n\n        const getStandortbez = (standort_id) => {\n            if (!standort_id) return '';\n            let result = standorte.value?.filter((item) => item.standort_id == standort_id);\n            if (result?.length > 0)\n                return result[0].bezeichnung;\n            return '';\n        }\n\n    \n\n        // -------------\n        // form handling\n        // -------------\n\n        const employeeDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ nachnameBlured: false, kurzbzBlured: false, wasValidated: false });\n\n        const validNachname = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validateKurzbz = () => {\n\n                if (!!currentValue.value.kurzbz && currentValue.value.kurzbz.trim() != \"\") {\n\n                    console.log('validateKurzbz: ', currentValue.value.mitarbeiter_uid, currentValue.value.kurzbz)\n                    isFetching.value = true;\n\n                    try {\n                        $api.call(ApiPerson.personEmployeeKurzbzExists(currentValue.value.mitarbeiter_uid, currentValue.value.kurzbz)).then((res) => {\n                            if (res.error == 1) {\n                                console.error(\"error checking kurzbz\", res.msg)\n                            } else {                                \n                                validKurzbz.value = !res.data\n                            }\n                        })\n                        \n                    } catch (error) {\n                        $fhcAlert.handleSystemError(error)             \n                    } finally {\n                        isFetching.value = false\n                    }   \n                }\n                \n        }\n        \n\n        const readonlyBlocker = (e) => {\n            if (readonly.value) e.preventDefault();\n        }\n\n        const save = async () => {\n            console.log('haschanged: ', hasChanged);\n            console.log('frmState: ', frmState);\n\n            if (!employeeDataFrm.value.checkValidity()) {\n\n                console.log(\"form invalid\");\n\n            } else if (!hasChanged.value) {\n\n                    console.log(\"no changes detected. nothing to save.\");                \n\n            } else {\n\n                // submit\n                try {\n                    const response = await $api.call(ApiPerson.updatePersonEmployeeData(currentValue.value));\n                    showToast();\n                    currentValue.value = response.data[0];\n                    preservedValue.value = currentValue.value;\n                    theModel.value.updateHeader();\n                    toggleMode();  \n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)              \n                } finally {\n                    isFetching.value = false\n                }\n                \n            }\n\n            frmState.wasValidated  = true;  \n        }\n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n        \n        const showToast = () => {\n             $fhcAlert.alertSuccess(t('person','mitarbeiterdatenGespeichert'))\n        }\n\n        return {\n            \n            currentValue,\n            readonly,\n            frmState,\n            dialogRef,\n            employeeDataFrm,\n            ausbildung,\n            standorte,\n            orte,\n            validKurzbz,\n            theModel,\n\n            save,\n            toggleMode,  \n            validNachname, \n            validateKurzbz,   \n            getAusbildungbez,\n            getStandortbez,\n            readonlyBlocker,\n            t,\n        }\n\n    },\n    template: `\n   <div class=\"row pt-md-4\">      \n             <div class=\"col\">\n                 <div class=\"card\">\n                    <div class=\"card-header\">\n                        <div class=\"h5\"><h5>{{ t('person','mitarbeiterdaten') }}</h5></div>        \n                    </div>\n                    <div class=\"card-body\">\n                        <div class=\"d-grid gap-2 d-md-flex justify-content-end \" v-if=\"!theModel.restricted\">\n                                <button v-if=\"readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"toggleMode()\">\n                                    <i class=\"fa fa-pen\"></i>\n                                </button>\n                                <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"save()\"><i class=\"fa fa-floppy-disk\"></i></button>\n                                <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"toggleMode()\"><i class=\"fa fa-xmark\"></i></button>\n                        </div>\n                        <form class=\"row g-3\" ref=\"employeeDataFrm\">\n                            <div class=\"col-md-2\">\n                                <label for=\"personalnummer\" class=\"form-label\">{{ t('global','personalnummer') }}</label>\n                                <input type=\"text\" readonly class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"personalnummer\" v-model=\"currentValue.personalnummer\">\n                            </div>            \n                            <div class=\"col-md-2\">\n                                <label for=\"kurzbezeichnung\" class=\"form-label\">{{ t('gruppenmanagement','kurzbezeichnung') }}</label>\n                                <input type=\"text\" :readonly=\"readonly\" @blur=\"frmState.kurzbzBlured = true\" @input=\"validateKurzbz()\" class=\"form-control-sm\" maxlength=\"8\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validKurzbz && frmState.kurzbzBlured }\" id=\"kurzbezeichnung\" v-model=\"currentValue.kurzbz\">\n                                <div class=\"invalid-feedback\" v-if=\"!validKurzbz\">\n                                    Kurzbezeichnung existiert bereits. \n                                </div>\n                            </div>\n                            <div class=\"col-md-4\">\n                                <label for=\"alias\" class=\"form-label\">{{ t('person','alias') }}</label>\n                                <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"alias\" v-model=\"currentValue.alias\">\n                            </div>\n                            <div class=\"col-md-4\"></div>\n                            <!--  -->\n                            <div class=\"col-md-2\">\n                                <label for=\"office\" class=\"form-label\">{{ t('person','buero') }}</label>\n                                <select v-if=\"!readonly\" id=\"office\" :readonly=\"readonly\"  v-model=\"currentValue.ort_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                                    <option value=\"\">-- {{ t('fehlermonitoring', 'keineAuswahl') }} --</option>\n                                    <option v-for=\"(item, index) in orte\" :value=\"item.ort_kurzbz\">\n                                        {{ item.ort_kurzbz }}\n                                    </option>         \n                                </select>\n                            <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"office\" :value=\"currentValue.ort_kurzbz\">\n                            </div>\n                            <div class=\"col-md-2\">\n                                <label for=\"telefonklappe\" class=\"form-label\">{{ t('person','telefonklappe') }}</label>\n                                <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" maxlength=\"8\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"telefonklappe\" v-model=\"currentValue.telefonklappe\">\n                            </div>\n                            <div class=\"col-md-4\">\n                                <label for=\"ausbildung\" class=\"form-label\">{{ t('person','ausbildung') }}</label>\n                                <select v-if=\"!readonly\" id=\"ausbildung\" :readonly=\"readonly\"  v-model=\"currentValue.ausbildungcode\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                                    <option value=\"\">-- {{ t('fehlermonitoring', 'keineAuswahl') }} --</option>\n                                    <option v-for=\"(item, index) in ausbildung\" :value=\"item.ausbildungcode\">\n                                        {{ item.ausbildungbez }}\n                                    </option>         \n                                </select>\n                                <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"ausbildung\" :value=\"getAusbildungbez(currentValue.ausbildungcode) \">\n                            </div>\n                            <div class=\"col-md-4\"></div>\n                            <!--Location -->       \n                            \n                            <div class=\"col-md-4\">\n                                <div class=\"row gy-3\">    \n                                    <div class=\"col-12\">                 \n                                        <label for=\"standort\" class=\"form-label\">{{ t('person','standort') }}</label>\n                                        <select v-if=\"!readonly\" id=\"standort\" :readonly=\"readonly\"  v-model=\"currentValue.standort_id\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                                            <option value=\"0\">-- {{ t('fehlermonitoring', 'keineAuswahl') }} --</option>\n                                            <option v-for=\"(item, index) in standorte\" :value=\"item.standort_id\">\n                                                {{ item.bezeichnung }}\n                                            </option>         \n                                        </select>\n                                        <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"standort\" :value=\"getStandortbez(currentValue.standort_id) \">\n                                    </div>\n                                    <div class=\"col-12\">\n                                        <label for=\"anmerkung\" class=\"form-label\">{{ t('global', 'anmerkung') }}</label>\n                                        <textarea type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" v-model=\"currentValue.anmerkung\">\n                                        </textarea>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-md-8\">\n\n                                <label for=\"status\" class=\"form-label\">{{ t('global','status') }}</label>\n                                <div class=\"form-check\">\n                                    <label for=\"aktiv\" class=\"form-check-label\">{{ t('global','aktiv') }}</label>\n                                    <input class=\"form-check-input\" :readonly=\"readonly\" @click=\"readonlyBlocker\" type=\"checkbox\" id=\"aktiv\" v-model=\"currentValue.aktiv\">\n                                </div>\n                                <div class=\"form-check\">\n                                    <label for=\"lektor\" class=\"form-check-label\">{{ t('lehre','lektor') }}</label>\n                                    <input class=\"form-check-input\" :readonly=\"readonly\" @click=\"readonlyBlocker\" type=\"checkbox\" id=\"lektor\" v-model=\"currentValue.lektor\">\n                                </div>\n                                <div class=\"form-check\">\n                                    <label for=\"habilitation\" class=\"form-check-label\" >{{ t('person','habilitation') }}</label>\n                                    <input class=\"form-check-input\"  :readonly=\"readonly\"  @click=\"readonlyBlocker\" type=\"checkbox\" id=\"habilitation\" v-model=\"currentValue.habilitation\">\n                                </div>\n                                <div class=\"form-check\">\n                                    <label for=\"fixangestellt\" class=\"form-check-label\">{{ t('person','fixangestellt') }}</label>\n                                    <input class=\"form-check-input\"  :readonly=\"readonly\" @click=\"readonlyBlocker\" type=\"checkbox\" id=\"fixangestellt\" v-model=\"currentValue.fixangestellt\">\n                                </div>\n                                <div class=\"form-check\">\n                                    <label for=\"bismelden\" class=\"form-check-label\" >{{ t('person','bismelden') }}</label>\n                                    <input class=\"form-check-input\"  :readonly=\"readonly\"  @click=\"readonlyBlocker\" type=\"checkbox\" id=\"bismelden\" v-model=\"currentValue.bismelden\">\n                                </div>\n                                \n\n                            </div>\n                            <!-- -->\n                            \n                            <div class=\"col-4\">\n                                \n                            </div>\n                            <div class=\"col-4\"></div>\n                            <!-- changes -->\n                            <div class=\"col-8\">\n                                <div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }}</div>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `\n}\n\nexport default EmployeeData;","export const Modal = {\n\tname: 'Modal',\n    props: {\n        type: String,\n        title: String,\n        noscroll: Boolean\n    },\n    expose: ['show', 'hide'],\n    setup(props, { emit }) {\n       \n        let modalEle = Vue.ref(null);\n        let thisModalObj;\n\n        Vue.onMounted(() => {\n            thisModalObj = new bootstrap.Modal(modalEle.value);\n        });\n        const show = () => {\n            thisModalObj.show();\n        }\n        function hide() {\n            thisModalObj.hide();\n        }\n\n        return { modalEle, show, hide };\n    },\n\n    template:`\n    <div class=\"modal fade \" id=\"customModal\" tabindex=\"-1\" aria-labelledby=\"\"\n        aria-hidden=\"true\" ref=\"modalEle\">\n        <div class=\"modal-dialog modal-lg\" :class=\"(!noscroll) ? 'modal-dialog-scrollable' : ''\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\" id=\"customModalLabel\">{{ title }}</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div class=\"modal-body\">\n                    <slot name=\"body\" />\n                </div>\n                <div class=\"modal-footer\">\n                    <slot name=\"footer\"></slot>\n                    <!-- button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n                        OK\n                    </button-->\n                </div>\n            </div>\n        </div>\n    </div>`\n};\n","import { Modal } from '../Modal.js';\nimport { ModalDialog } from '../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';5\nimport ApiPerson from '../../api/factory/person.js';\n\n\nexport const BankData = {\n\tname: 'BankData',\n    components: {\n        Modal,\n        ModalDialog,\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n        personID: { type: [Number, null], required: false },\n        writePermission: { type: Boolean, required: false },\n    },\n    setup( props ) {\n\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n        const readonly = Vue.ref(false);\n        const { personID } = Vue.toRefs(props);\n        const { t } = usePhrasen();\n        const dialogRef = Vue.ref();\n        const isFetching = Vue.ref(false);\n        const bankdataList = Vue.ref([]);\n\n        const theModel = Vue.computed({  // Use computed to wrap the object\n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n        const fetchData = async () => {\n            if (theModel.value.personID==null && props.personID==null) {\n                bankdataList.value = [];            \n                return;\n            }\n            isFetching.value = true\n            try {\n              const res = await $api.call(ApiPerson.personBankData(theModel.value.personID || personID.value));                                    \n              bankdataList.value = res.data;\n            } catch (error) {\n              $fhcAlert.handleSystemError(error)                      \n            } finally {\n              isFetching.value = false\n            }\n        }\n\n        const createShape = (person_id) => {\n            return {\n                bankverbindung_id: 0,\n                anschrift: \"\",\n                person_id: person_id,\n                name: \"\",\n                iban: \"\",\n                bic: \"\",  \n                blz: \"\",\n                kontonr: \"\",        \n                typ: \"p\",\n                verrechnung: true      \n            } \n        }\n\n        const currentValue = Vue.ref(createShape(theModel.value.personID || personID.value));\n        const preservedValue = Vue.ref(createShape(theModel.value.personID || personID.value));\n\n        /* const toggleMode = async () => {\n            if (!readonly.value) {\n                // cancel changes?\n                if (hasChanged.value) {\n                  const ok = await dialogRef.value.show();\n                  if (ok) {\n                    console.log(\"ok=\", ok);\n                    currentValue.value = preservedValue.value;\n                  } else {\n                    return\n                  }\n                }\n              } else {\n                // switch to edit mode and preserve data\n                preservedValue.value = {...currentValue.value};\n              }\n              readonly.value = !readonly.value;\n        } */\n\n        Vue.onMounted(() => {\n            currentValue.value = createShape(theModel.value.personID || personID.value);\n            fetchData();\n            \n        })\n\n        const bankdataListArray = Vue.computed(() => (bankdataList.value ? Object.values(bankdataList.value) : []));\n\n        // Modal \n        const modalRef = Vue.ref();\n        const confirmDeleteRef = Vue.ref();\n\n        const showAddModal = () => {\n            currentValue.value = createShape(theModel.value.personID || personID.value);\n            // reset form state\n            frmState.ibanBlured=false;\n            frmState.bankBlured=false;\n            // call bootstrap show function\n            modalRef.value.show();\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n        \n        const showEditModal = (id) => {\n            currentValue.value = { ...bankdataList.value[id] };\n            modalRef.value.show();\n        }\n\n        const showDeleteModal = async (id) => {\n            currentValue.value = { ...bankdataList.value[id] };\n\n            if (await $fhcAlert.confirm({\n                    message: t('person','bankdaten') + ' ' + currentValue.value?.iban + ' ' + currentValue.value?.bic + ' ' + currentValue.value?.name + ' ' + t('person','wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }    \n            \n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiPerson.deletePersonBankData(id));                 \n                if (res.meta.status == \"success\") {\n                delete bankdataList.value[id];\n                showDeletedToast();\n                }\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)                    \n            } finally {\n                isFetching.value = false\n            }\n            \n        }\n\n\n        const okHandler = async () => {\n            // console.log('haschanged: ', hasChanged);\n            // console.log('frmState: ', frmState);\n\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                try {\n                    const r = await $api.call(ApiPerson.upsertPersonBankData(currentValue.value));                              \n                    if (r.meta.status == \"success\") {\n                        bankdataList.value[r.data[0].bankverbindung_id] = r.data[0];\n                        preservedValue.value = currentValue.value;\n                        showToast();\n                    }   \n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)            \n                } finally {\n                    isFetching.value = false\n                }\n                \n                hideModal();\n            }\n        }\n\n        // -------------\n        // form handling\n        // -------------\n\n        const bankDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ ibanBlured: false, wasValidated: false });\n\n        const validIban = (n) => {\n            return !!n && n.trim() != \"\" && isChecksumValid(n.replace(/\\s/g, ''));\n        }\n\n        // check iban\n        // copy from https://stackoverflow.com/questions/29275649/javascript-iban-validation-check-german-or-austrian-iban\n        const isChecksumValid = (x) => {\n            if (x.length < 5) return false;\n            if (!x.match(/[A-Z]{2}[0-9]{2}[A-Z0-9]+/)) return false;\n            var ASCII_0 = \"0\".charCodeAt(0);\n            var ASCII_A = \"A\".charCodeAt(0);\n            var acc = 0;\n            function add(n) {\n                if (acc > 1000000) acc %= 97;\n                acc = n < ASCII_A ? 10 * acc + n - ASCII_0 \n                    : 100 * acc + n - ASCII_A + 10;\n            }\n            for (var i=4; i<x.length; ++i) add(x.charCodeAt(i));\n            for (var i=0; i<4; ++i) add(x.charCodeAt(i));\n            acc %= 97;\n            return acc == 1;\n        }\n\n\n        const validate = () => {\n            frmState.ibanBlured = true;\n            if (validIban(currentValue.value.iban)) {\n                return true;\n            }\n            return false;\n        }\n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','bankdatenGespeichert'));\n        }\n\n        const showDeletedToast = () => {\n            $fhcAlert.alertSuccess(t('person','bankdatenGeloescht'));\n        }\n\n        return { \n            bankdataList, bankdataListArray,\n            currentValue,\n            readonly,\n            frmState,\n            dialogRef,\n            bankDataFrm,\n            modalRef, \n            \n          /*   toggleMode,   */\n            validIban, \n            showToast, showDeletedToast,\n            showAddModal, hideModal, okHandler, t,\n            showDeleteModal, showEditModal, confirmDeleteRef,\n         }\n    },\n    template: `\n    <div class=\"row\">\n    </div>\n\n   <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5\"><h5>{{ t('person','bankdaten') }}</h5></div>        \n                </div>\n        \n                <div class=\"card-body\">\n                    <div class=\"d-grid gap-2 d-md-flex justify-content-start py-2\">\n                        <button type=\"button\" class=\"btn btn-sm btn-primary\" @click=\"showAddModal()\">\n                            <i class=\"fa fa-plus\"></i> {{ t('person','bankdaten') }}\n                        </button>            \n                    </div>\n                    <div class=\"table-responsive\">\n                <table class=\"table table-hover table-sm\">\n                    <thead>                \n                    <tr>\n                        <th scope=\"col\">{{ t('person','bank') }}</th>\n                        <th scope=\"col\">{{ t('person','anschrift') }}</th>\n                        <th scope=\"col\">{{ t('person','bic') }}</th>\n                        <th scope=\"col\">{{ t('person','iban') }}</th>\n                        <th scope=\"col\">{{ t('person','kontonr') }}</th>\n                        <th scope=\"col\">{{ t('person','verrechnung') }}</th>\n                        <th scope=\"col\">{{ t('ui','aktion') }}</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for=\"bankdata in bankdataListArray\" :key=\"bankdata.bankverbindung_id\">\n                        <td class=\"align-middle\">{{ bankdata.name }}</td>\n                        <td class=\"align-middle\">{{ bankdata.anschrift }}</td>\n                        <td class=\"align-middle\">{{ bankdata.bic }}</td>\n                        <td class=\"align-middle\">{{ bankdata.iban }}</td>\n                        <td class=\"align-middle\">{{ bankdata.kontonr }}</td>\n                        <td class=\"align-middle\">{{ bankdata.verrechnung == true ? \"X\" : \"\" }}</td>\n                        <td class=\"align-middle\" width=\"5%\">\n                            <div class=\"d-grid gap-2 d-md-flex align-middle\">\n                                <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showEditModal(bankdata.bankverbindung_id)\">\n                                    <i class=\"fa fa-pen\"></i>\n                                </button>\n                                <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showDeleteModal(bankdata.bankverbindung_id)\">\n                                    <i class=\"fa fa-xmark\"></i>\n                                </button>\n                            </div>\n                        </td>\n                    </tr>\n        \n                    </tbody>\n                </table>            \n            </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- detail modal -->\n    <Modal :title=\"t('person','bankverbindung')\" ref=\"modalRef\">\n        <template #body>\n            <form class=\"row g-3\" ref=\"bankDataFrm\">\n                            \n                <div class=\"col-md-8\">\n                    <label for=\"receiver\" class=\"form-label\">{{ t('global','empfaenger') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"receiver\" v-model=\"currentValue.anschrift\" maxlength=\"128\">\n                </div>\n                <div class=\"col-md-4\"></div>\n                <!--  -->\n                <div class=\"col-md-4\">\n                    <label for=\"iban\" class=\"required form-label\" >{{ t('person','iban') }}</label>\n                    <input type=\"text\" required  @blur=\"frmState.ibanBlured = true\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validIban(currentValue.iban) && frmState.ibanBlured}\" id=\"iban\" v-model=\"currentValue.iban\"  maxlength=\"34\"  >\n                </div>\n                <div class=\"col-md-4\">\n                    <label for=\"bic\" class=\"form-label\">{{ t('person','bic') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"bic\" maxlength=\"11\" v-model=\"currentValue.bic\">\n                </div>\n                <div class=\"col-md-4\">\n                </div>\n                <!-- -->\n                <div class=\"col-md-8\">\n                    <label for=\"uid\" class=\"form-label\">{{ t('person','bank') }}</label>\n                    <input type=\"text\"  :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly}\" id=\"bank\" maxlength=\"64\"  v-model=\"currentValue.name\">\n                </div>\n                <div class=\"col-md-4\">\n                </div>\n                <!-- -->\n                <div class=\"col-md-2\">\n                    <label for=\"blz\" class=\"form-label\">{{ t('person','blz') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"blz\" maxlength=\"16\"  v-model=\"currentValue.blz\">\n                </div>\n                <div class=\"col-md-4\">\n                    <label for=\"kontonr\" class=\"form-label\">{{ t('person','kontonr') }}</label>\n                    <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"kontonr\" maxlength=\"16\"  v-model=\"currentValue.kontonr\">\n                </div>\n                <div class=\"col-md-2\">\n                    <label for=\"verrechnung\" class=\"form-label\">{{ t('person','verrechnung') }}</label>\n                    <div>\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"verrechnung\" v-model=\"currentValue.verrechnung\">\n                    </div>     \n                </div>\n\n                <!-- changes -->\n                <div class=\"col-8\">\n                    <div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }}</div>\n                </div>\n                \n            </form>\n        </template>\n        <template #footer>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n            {{ t('ui','speichern') }}\n            </button>\n        </template>\n\n    </Modal>\n\n    <ModalDialog :title=\"t('global','warnung')\" ref=\"dialogRef\">\n      <template #body>\n        {{ t('person','bankdatenGeaendert') }}\n      </template>\n    </ModalDialog>\n\n    <ModalDialog :title=\"t('global','warnung')\" ref=\"confirmDeleteRef\">\n        <template #body>\n            {{ t('person','bankdaten') }} '{{ currentValue?.iban }} {{ currentValue?.bic }}, {{ currentValue?.name }}' {{ t('person','wirklichLoeschen') }}?\n        </template>\n    </ModalDialog>\n    `\n}\n\nexport default BankData;","export default {\n    getGemeinden(plz) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getGemeinden',\n          params: { plz }\n        }\n    },\n    getOrtschaften(plz) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getOrtschaften',\n          params: { plz },\n        };\n    },\n    getContractExpire(year, month) {\n        return {\n          method: 'get',\n          url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getContractExpire',\n          params: { year: year, month: month}\n        };\n    },\n    getContractNew(year, month) {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getContractNew',\n        params: { year: year, month: month}\n      };\n    },\n    getBirthdays(date) {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getBirthdays',\n        params: { date },\n      };\n    },\n    getCovidState(person_id, date) {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getCovidState',\n        params: { person_id: person_id, d: date},\n      };\n    },\n    getAllCourseHours(uid) {\n      return {\n        method: 'get',\n        url: `extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAllCourseHours?uid=${uid}`,\n      };\n    },\n    getAllSupportHours(uid) {\n      return {\n        method: 'get',\n        url: `extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAllSupportHours?uid=${uid}`,\n      };\n    },\n    // migrated from loader.js\n    getNations() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getNations',\n      }\n    },\n    getSachaufwandTyp() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getSachaufwandtyp',\n      }\n    },\n    getKontakttyp() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getKontakttyp',\n      }\n    },\n    getAdressentyp() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAdressentyp',\n      }\n    },\n    getSprache() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getSprache',\n      }\n    },\n    getAusbildung() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getAusbildung',\n      }\n    },\n    getStandorteIntern() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getStandorteIntern',\n      }\n    },\n    getOrte() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getOrte',\n      }\n    },\n    getKarenztypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getKarenztypen',\n      }\n    },\n    getGehaltstypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getGehaltstypen',\n      }\n    },\n    getVertragsarten() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsarten',\n      }\n    },\n\n    getVertragsbestandteiltypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsbestandteiltypen',\n      }\n    },\n    getTeilzeittypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getTeilzeittypen',\n      }\n    },\n    getFreitexttypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getFreitexttypen',\n      }\n    },\n    getStundensatztypen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getStundensatztypen',\n      }\n    },\n/*     getUnternehmen() {\n      return {\n        method: 'get',\n        url: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getUnternehmen',\n      }\n    }, */\n}    \n","import { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiPerson from '../../../api/factory/person.js';\nimport ApiCommon from '../../../api/factory/common.js';\n\n\nexport const AddressData = {\n\tname: 'AddressData',\n    components: {\n        Modal,\n        ModalDialog,\n    },\n    props: {\n        personID: { type: Number, required: true },\n        writePermission: { type: Boolean, required: false },\n    },  \n    setup(props) {\n\n        const { personID } = Vue.toRefs(props);\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n\n        const { t } = usePhrasen();\n\n        const urlAddressData = Vue.ref(\"\");\n\n        const addressList = Vue.ref([]);\n\n        const isFetching = Vue.ref(false);\n\n        const isEditActive = Vue.ref(false);\n\n        const currentAddress = Vue.ref();\n\n        const nations = Vue.inject('nations');\n        const adressentyp = Vue.inject('adressentyp');\n\n        const gemeinden = Vue.ref([]);\n\n        const ortschaften = Vue.ref([]);\n\n        const readonly = Vue.ref(false);\n\n        Vue.watch(personID, (currentValue, oldValue) => {\n            console.log('AddressData watch',currentValue);            \n            fetchData();\n        });\n\n        const fetchData = async () => {\n            if (personID.value==null) {\n                addressList.value = [];\n                return;\n            }\n            isFetching.value = true\n            // submit\n            try {\n                const response = await $api.call(ApiPerson.personAddressData(personID.value)); \n                addressList.value = response.data;\n            } catch (error) {\n                console.log(error)              \n            } finally {\n                isFetching.value = false\n            }\n            \n        }\n\n\n        Vue.watchEffect(async () => {\n            if (currentAddress?.value?.nation == 'A' && currentAddress.value.plz != '') {\n                try  {\n                    isFetching.value = true\n                    const response = await $api.call(ApiCommon.getGemeinden(currentAddress.value.plz));     \n                    gemeinden.value = response.data;\n                } catch (error) {\n                    console.log(error)                    \n                } finally {\n                    isFetching.value = false\n                }\n            }            \n        })\n\n        Vue.watchEffect(async () => {\n            if (currentAddress?.value?.nation == 'A' && currentAddress.value.plz != '') {\n                try  {\n                    isFetching.value = true\n                    const response = await $api.call(ApiCommon.getOrtschaften(currentAddress.value.plz));     \n                    ortschaften.value = response.data;\n                } catch (error) {\n                    console.log(error)                    \n                } finally {\n                    isFetching.value = false\n                }\n            }            \n        })\n\n        Vue.onMounted(() => {            \n            fetchData();\n            \n        })\n\n\n        const addressListArray = Vue.computed(() => Object.values(addressList.value));\n\n        // Modal \n        let modalRef = Vue.ref();\n        \n        const showEditModal = (id) => {\n            currentAddress.value = { ...addressList.value[id] };\n            modalRef.value.show();\n        }\n\n        const showDeleteModal = async (id) => {\n            currentAddress.value = { ...addressList.value[id] };\n\n            if (await $fhcAlert.confirm({\n                    message:`${currentAddress.value?.plz} ${currentAddress.value?.ort}, ${currentAddress.value?.strasse} wirklich löschen?`,\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }     \n            \n            if (!currentAddress.value.heimatadresse) {   \n\n                try {\n                    const res = await $api.call(ApiPerson.deletePersonAddressData(id));   \n                    if (res?.meta?.status == 'success') {\n                        delete addressList.value[id];\n                        showDeletedToast();\n                    }\n                } catch (error) {\n                    console.log(error)              \n                } finally {\n                      isFetching.value = false\n                }                  \n                \n            } else {\n                $fhcAlert.alertInfo(t('person','heimatadresse') + ' ' + t('person','kannNichtGeloeschtWerden'));\n            }\n        }\n\n\n        const createAddressShape = (person_id) => {\n            return {\n                adresse_id: 0,\n                person_id: person_id,\n                name: \"\",\n                strasse: \"\",\n                plz: \"\",\n                ort: \"\",\n                gemeinde: \"\",\n                nation: \"A\",\n                typ: \"h\",\n                heimatadresse: false,\n                zustelladresse: true,\n                firma_id: null,\n                updateamum: \"\",\n                updatevon: \"\",\n                insertamum: \"\",\n                insertvon: \"\",\n                ext_id: null,\n                rechnungsadresse: \"\",\n                anmerkung: \"\",\n                co_name: \"\",\n            }\n        }\n\n        const showAddModal = () => {\n            currentAddress.value = createAddressShape(personID);\n            // reset form state\n            frmState.plzBlured=false;\n            frmState.ortBlured=false;\n            frmState.typBlured=false;\n            // call bootstrap show function\n            modalRef.value.show();\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n\n       \n\n        const okHandler = async () => {\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                // submit\n                try {\n                    const r = await $api.call(ApiPerson.upsertPersonAddressData(currentAddress.value))\n                    if (r?.meta?.status == 'success') {\n                        addressList.value[r.data[0].adresse_id] = r.data[0];\n                        console.log('address successfully saved');\n                        showToast();\n                    }\n                } catch (error) {\n                    console.log(error)              \n                } finally {\n                    isFetching.value = false\n                }\n                \n                hideModal();\n            }\n        }\n\n        // -------------\n        // form handling\n        // -------------\n\n        const addressDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ plzBlured: false, ortBlured: false, typBlured:false, wasValidated: false });\n\n        const validPLZ = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validOrt = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validTyp = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validate = () => {\n            frmState.plzBlured = true;\n            frmState.ortBlured = true;\n            frmState.typBlured = true;\n            if (validOrt(currentAddress.value.ort) && validPLZ(currentAddress.value.plz) && validTyp(currentAddress.value.typ)) {\n                return true;\n            }\n            return false;\n        }\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','adresseGespeichert'));\n        }\n\n        const showDeletedToast = () => {\n            $fhcAlert.alertSuccess(t('person','adresseGeloescht'));\n        }\n\n        return {\n            addressList, addressListArray, isEditActive, showAddModal, \n            showDeleteModal, showEditModal, currentAddress, \n            modalRef,hideModal, okHandler, nations,\n            gemeinden, ortschaften, adressentyp, t,\n            // form handling\n            validOrt, validPLZ, validTyp, frmState, addressDataFrm, readonly\n        }\n        \n    },\n    template: ` \n        <div class=\"row\">\n\n            <div class=\"d-flex bd-highlight\">\n                <div class=\"py-2 bd-highlight\">                   \n                    <button type=\"button\" class=\"btn btn-primary btn-sm\"  @click=\"showAddModal()\" style=\"margin-right:1.85rem;\">\n                        <i class=\"fa fa-plus\"></i> {{ t('person','adresse') }}\n                    </button>\n                </div>\n            </div>\n        </div>\n        <div class=\"table-responsive\">\n            <table class=\"table table-hover table-sm\">\n                <thead>                \n                <tr>\n                    <th scope=\"col\">{{ t('global','typ') }}</th>\n                    <th scope=\"col\">{{ t('person','strasse') }}</th>\n                    <th scope=\"col\">{{ t('person','plz') }}</th>\n                    <th scope=\"col\">{{ t('person','ort') }}</th>\n                    <th scope=\"col\">{{ t('person','gemeinde') }}</th>\n                    <th scope=\"col\">{{ t('person','nation') }}</th>\n                    <th scope=\"col\">{{ t('person','heimatadresse') }}</th>\n                    <th scope=\"col\">{{ t('person','zustelladresse') }}</th>\n                    <th scope=\"col\">{{ t('person','abweichenderEmpfaenger') }}</th>\n                    <th scope=\"col\">{{ t('ui','aktion') }}</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-for=\"address in addressListArray\" :key=\"address.adresse_id\">\n                    <td class=\"align-middle\">{{ address.typ }}</td>\n                    <td class=\"align-middle\">{{ address.strasse }}</td>\n                    <td class=\"align-middle\">{{ address.plz }}</td>\n                    <td class=\"align-middle\">{{ address.ort }}</td>\n                    <td class=\"align-middle\">{{ address.gemeinde }}</td>\n                    <td class=\"align-middle\">{{ address.nation }}</td>\n                    <td class=\"align-middle\">{{ address.heimatadresse == true ? \"X\" : \"\" }}</td>\n                    <td class=\"align-middle\">{{ address.zustelladresse == true ? \"X\" : \"\" }}</td>\n                    <td class=\"align-middle\">{{ address.co_name }}</td>\n                    <td class=\"align-middle\" width=\"5%\">\n                        <div class=\"d-grid gap-2 d-md-flex align-middle\">                \n                            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showEditModal(address.adresse_id)\">\n                                <i class=\"fa fa-pen\"></i>\n                            </button>\n                            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showDeleteModal(address.adresse_id)\">\n                                <i class=\"fa fa-xmark\"></i>\n                            </button>\n                        </div>\n                    </td>\n                </tr>\n\n                </tbody>\n            </table>            \n        </div>\n\n        <!-- Detail Modal -->\n        <Modal :title=\"t('person','adresse')\" ref=\"modalRef\">\n            <template #body>\n                <form class=\"row g-3\" v-if=\"currentAddress != null\"  ref=\"addressDataFrm\" >\n                               \n                    <div class=\"col-md-6\">\n                        <label for=\"strasse\" class=\"form-label\">{{ t('person','strasse') }}</label>\n                        <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"strasse\" v-model=\"currentAddress.strasse\" maxlength=\"256\">\n                    </div>\n                    <div class=\"col-md-6\">\n                        <label for=\"nation\" class=\"form-label\">Nation</label>\n                        <select  id=\"nation\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentAddress.nation\" >\n                            <option v-for=\"(item, index) in nations\" :value=\"item.nation_code\" :class=\"{ 'grayout': item.sperre}\"  :disabled=\"item.sperre\">\n                                {{ item.nation_text }}\n                            </option>\n                        </select>\n                        \n                    </div>\n                    <div class=\"col-md-2\">\n                        <label for=\"plz\" class=\"required form-label\" >{{ t('person','plz') }}</label>\n                        <input type=\"text\" required :readonly=\"readonly\" @blur=\"frmState.plzBlured = true\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validPLZ(currentAddress.plz) && frmState.plzBlured}\" id=\"plz\" maxlength=\"16\" v-model=\"currentAddress.plz\" >\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"ort\" class=\"required form-label\">{{ t('person','ort') }}</label>\n                        <input v-if=\"currentAddress.nation!='A'\" type=\"text\" required :readonly=\"readonly\" @blur=\"frmState.ortBlured = true\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validOrt(currentAddress.ort) && frmState.ortBlured}\" id=\"ort\" maxlength=\"256\" v-model=\"currentAddress.ort\" >\n                        <select  v-if=\"currentAddress.nation=='A'\" id=\"nation\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentAddress.ort\" >\n                            <option v-for=\"(item, index) in ortschaften\" :value=\"item.ortschaftsname\">\n                                {{ item.ortschaftsname }}\n                            </option>\n                        </select>\n                    </div>\n                    <!-- Gemeinde -->\n                    <div class=\"col-md-6\">\n                        <label for=\"gemeinde\" class=\"form-label\">{{ t('person','gemeinde') }}</label>\n                        <input v-if=\"currentAddress.nation!='A'\" type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"gemeinde\" maxlength=\"256\" v-model=\"currentAddress.gemeinde\">\n                        <select  v-if=\"currentAddress.nation=='A'\" id=\"gemeinde\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentAddress.gemeinde\" >\n                            <option v-for=\"(item, index) in gemeinden\" :value=\"item.name\">\n                                {{ item.name }}\n                            </option>\n                        </select>\n                    </div>\n\n                    <!-- c/o -->\n                    <div class=\"col-md-6\">\n                        <label for=\"co_name\" class=\"form-label\">{{ t('person','abweichenderEmpfaenger') }}</label>\n                        <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"co_name\" maxlength=\"256\" v-model=\"currentAddress.co_name\">\n                    </div>\n\n                    <!-- Adresstyp (Hauptwohnsitz, Nebenwohnsitz, etc.) -->\n                    <div class=\"col-md-3\">\n                        <label for=\"typ\" class=\"required form-label\">{{ t('global','typ') }}</label>\n                        <select  id=\"typ\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" @blur=\"frmState.typBlured = true\" v-model=\"currentAddress.typ\" :class=\"{'is-invalid': !validTyp(currentAddress.typ) && frmState.typBlured}\">\n                            <option v-for=\"(item, index) in adressentyp\" :value=\"item.adressentyp_kurzbz\">\n                                {{ item.bezeichnung }}\n                            </option>\n                        </select>\n                    </div>\n                    \n                    <div class=\"col-md-1\">                                             \n                        <label for=\"heimatadresse\" class=\"form-label\">{{ t('person','heimatadresse') }}</label>\n                        <div>\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"heimatadresse\" v-model=\"currentAddress.heimatadresse\">\n                        </div>\n                    </div>\n                    <div class=\"col-md-1\">\n                        <label for=\"zustelladresse\" class=\"form-label\">{{ t('person','zustelladresse') }}</label>\n                        <div>\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"zustelladresse\" v-model=\"currentAddress.zustelladresse\">\n                        </div>                        \n                    </div>\n                    \n                    \n                    <div class=\"col-8\" v-if=\"currentAddress.adresse_id != 0\">\n                        <div class=\"modificationdate\">{{ currentAddress.insertamum }}/{{ currentAddress.insertvon }}, {{ currentAddress.updateamum }}/{{ currentAddress.updatevon }}</div>\n                    </div>\n                </form>        \n\n            </template>\n            <template #footer>\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n                    {{ t('ui','speichern') }}\n                </button>\n            </template>\n        </Modal>\n\n        \n        `\n}","import { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiPerson from '../../../api/factory/person.js';\n\nexport const EmailTelData = {\n\tname: 'EmailTelData',\n    components: {\n        Modal,\n        ModalDialog,\n    },\n    props: {\n        personID: { type: Number, required: true },\n        writePermission: { type: Boolean, required: false },\n    },  \n    setup(props) {\n\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n        const { personID } = Vue.toRefs(props);\n\n        const { t } = usePhrasen();\n\n        const urlContactData = Vue.ref(\"\");\n\n        const contactList = Vue.ref([]);\n\n        const isFetching = Vue.ref(false);\n\n        const currentContact = Vue.ref();\n\n        const confirmDeleteRef = Vue.ref();\n\n        const kontakttyp = Vue.inject('kontakttyp');\n\n        const readonly = Vue.ref(false);\n\n        Vue.watch(personID, (currentValue, oldValue) => {\n            console.log('ContactData watch',currentValue);\n            fetchData();\n        });\n\n\n        const fetchData = async () => {\n            if (personID.value==null) {\n                contactList.value = [];\n                return;\n            }\n            // submit\n            try {\n                const response = await $api.call(ApiPerson.personContactData(personID.value));\n                contactList.value = response.data;\n            } catch (error) {\n                console.log(error)              \n            } finally {\n                isFetching.value = false\n            }\n            \n        }\n\n        Vue.onMounted(() => {\n            console.log('ContactData mounted', props.personID);                        \n            fetchData();\n            \n        })\n\n\n        const contactListArray = Vue.computed(() => Object.values(contactList.value));\n\n    \n        const createContactShape = (person_id) => {\n            return {\n                kontakt_id: 0,\n                person_id: person_id,  \n                kontakttyp: 'email', \n                anmerkung: '',  \n                kontakt: '',    \n                zustellung: true, \n                updateamum: '',\n                updatevon: '',  \n                insertamum: '', \n                insertvon: '',  \n                ext_id: null,     \n                standort_id: null,\n\n            }\n        }\n\n        // Modal \n        let modalRef = Vue.ref();\n        \n        const showEditModal = (id) => {\n            currentContact.value = { ...contactList.value[id] };\n            modalRef.value.show();\n        }\n\n        const showAddModal = () => {\n            currentContact.value = createContactShape(personID);\n            // reset form state\n            frmState.kontaktBlured=false;\n            // call bootstrap show function\n            modalRef.value.show();\n        }\n\n        const showDeleteModal = async (id) => {\n            currentContact.value = { ...contactList.value[id] };\n\n            if (await $fhcAlert.confirm({\n                    message:t('person','kontaktinformation') + ' ' + currentContact.value?.kontakt + ' ' + t('person','wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }    \n\n            try {\n                const res = await $api.call(ApiPerson.deletePersonContactData(id));\n                if (res?.meta?.status == 'success') {\n                    delete contactList.value[id];\n                    showDeleteToast();\n                }\n            } catch (error) {\n                console.log(error)              \n            } finally {\n                    isFetching.value = false\n            }   \n\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }        \n\n        const okHandler =  async() => {\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                // submit\n                try {\n                    const r = await $api.call(ApiPerson.upsertPersonContactData(currentContact.value)); \n                    if (r?.meta?.status == 'success') {\n                        contactList.value[r.data[0].kontakt_id] = r.data[0];\n                        showToast();\n                    }  \n                } catch (error) {\n                    console.log(error)              \n                } finally {\n                    isFetching.value = false\n                }\n               \n                \n                hideModal();\n            }\n        }\n\n        const getKontakttyp = (id) => {\n            return kontakttyp.value.find(item => item.kontakttyp == id)\n        }\n\n        // -------------\n        // form handling\n        // -------------\n\n        const contactDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ kontaktBlured: false, wasValidated: false });\n\n        const validKontakt = (n) => {\n            return !!n && n.trim() != \"\";\n        }     \n\n        const validate = () => {\n            frmState.kontaktBlured = true;\n            if (validKontakt(currentContact.value.kontakt)) {\n                return true;\n            }\n            return false;\n        }\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','kontaktdatenGespeichert'));\n        }\n\n        const showDeleteToast = () => {\n            $fhcAlert.alertSuccess(t('person','kontaktdatenGeloescht'));\n        }\n\n        return {\n            contactList, contactListArray, \n            currentContact, showEditModal, showAddModal, showDeleteModal, hideModal, modalRef,\n            kontakttyp, confirmDeleteRef, okHandler, t, getKontakttyp,\n            // form handling\n            validKontakt, frmState, contactDataFrm, readonly\n        }\n    },\n    template: `\n            <div class=\"row\">\n\n                <!--div class=\"d-flex bd-highlight\">\n                    <div class=\"flex-grow-1 bd-highlight\"></div>        \n                    <div class=\"p-2 bd-highlight\">                   \n                        <button type=\"button\" class=\"btn btn-outline-dark btn-sm\"  @click=\"showAddModal()\" style=\"margin-right:1.85rem;\">\n                            <i class=\"fa fa-plus\"></i>\n                        </button>\n                    </div>\n                </div-->\n            </div>\n         \n             \n        <button type=\"button\" class=\"btn btn-primary btn-sm my-2\"  @click=\"showAddModal()\">\n                <i class=\"fa fa-plus\"></i> {{ t('global','kontakt') }}\n        </button>\n        <div class=\"table-responsive\">\n            <table class=\"table table-hover table-sm\">\n                <thead>\n                <tr>\n                    <th scope=\"col\">{{ t('global','typ') }}</th>\n                    <th scope=\"col\">{{ t('global','kontakt') }}</th>\n                    <th scope=\"col\">{{ t('person', 'zustellung') }}</th>\n                    <th scope=\"col\">{{ t('global', 'anmerkung') }}</th>\n                    <th scope=\"col\">{{ t('ui','aktion') }}</th>\n                </tr>\n                </thead>\n                <tbody>               \n                    <tr v-for=\"contact in contactListArray\" :key=\"contact.kontakt_id\">\n                        <td class=\"align-middle\">{{ getKontakttyp(contact.kontakttyp).beschreibung }}</td>\n                        <td class=\"align-middle\" v-if=\"contact.kontakttyp == 'email'\"><a v-bind:href=\"[\\'mailto:\\' + contact.kontakt]\">{{ contact.kontakt }}</a></td>\n                        <td class=\"align-middle\" v-else-if=\"contact.kontakttyp == 'mobil' || contact.kontakttyp == 'telefon' || contact.kontakttyp == 'firmenhandy'\"><a v-bind:href=\"[\\'tel:\\' + contact.kontakt]\">{{ contact.kontakt }}</a></td>\n                        <td class=\"align-middle\" v-else >{{ contact.kontakt }}</td>\n                        <td class=\"align-middle\">{{ contact.zustellung == true ? \"X\" : \"\" }}</td>\n                        <td class=\"align-middle\">{{ contact.anmerkung }}</td>\n                        <td class=\"align-middle\" width=\"5%\">\n                            <div class=\"d-grid gap-2 d-md-flex align-middle\">           \n                                <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showEditModal(contact.kontakt_id)\">\n                                    <i class=\"fa fa-pen\"></i>\n                                </button>\n                                <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showDeleteModal(contact.kontakt_id)\">\n                                    <i class=\"fa fa-xmark\"></i>\n                                </button>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <!-- Detail Modal -->\n        <Modal :title=\"t('global','kontakt')\" ref=\"modalRef\">\n            <template #body>\n                <form class=\"row g-3\" v-if=\"currentContact != null\"  ref=\"contactDataFrm\" >\n                                \n                    <div class=\"col-md-4\">\n                        <label for=\"kontakttyp\" class=\"form-label\">{{ t('global','typ') }}</label>\n                        <select  id=\"kontakttyp\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentContact.kontakttyp\" >\n                            <option v-for=\"(item, index) in kontakttyp\" :value=\"item.kontakttyp\">\n                                {{ item.beschreibung }}\n                            </option>\n                        </select>\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"kontakt\" class=\"required form-label\">{{ t('global','kontakt') }}</label>\n                        <input type=\"text\" @blur=\"frmState.kontaktBlured = true\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validKontakt(currentContact.kontakt) && frmState.kontaktBlured}\" id=\"kontakt\" maxlength=\"128\" v-model=\"currentContact.kontakt\">\n                    </div>\n                    \n                    <div class=\"col-md-2\">                                             \n                        <label for=\"zustellung\" class=\"form-label\">{{ t('person','zustellung') }}</label>\n                        <div>\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"zustellung\" v-model=\"currentContact.zustellung\">\n                        </div>\n                    </div>      \n                    \n                    <div class=\"col-md-8\">\n                        <label for=\"anmerkung\" class=\"form-label\">{{ t('global','anmerkung') }}</label>\n                        <input type=\"text\" :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly }\" id=\"anmerkung\" maxlength=\"64\" v-model=\"currentContact.anmerkung\">\n                    </div>                                                            \n\n                </form>        \n\n            </template>\n            <template #footer>\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n                {{ t('ui','speichern') }}\n                </button>\n            </template>\n        </Modal>\n\n    `\n}","import { AddressData } from \"./AddressData.js\";\nimport { EmailTelData } from \"./EmailTelData.js\";\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\n\nexport const ContactData = {\n\tname: 'ContactData',\n    components: {\n        AddressData,\n\t\tEmailTelData,\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n        editMode: { type: Boolean, required: false },\n        personID: { type: Number, required: false },\n        personUID: { type: String, required: false },\n        writePermission: { type: Boolean, required: false },\n    },\n    setup( props ) {\n\n        const { t } = usePhrasen();\n\n        const theModel = Vue.computed({ \n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n        // tabs\n        const items = [\"address\", \"contact\"];\n        const activeItem = Vue.ref(\"address\");\n\n        const isActive = (menuItem) => {\n            return activeItem.value === menuItem;\n        };\n\n        const setActive = (menuItem) => {\n            activeItem.value = menuItem;\n            console.log(\"activeItem: \", menuItem);\n        };\n\n        return {\n            items,\n            isActive,\n            setActive,\n            t,\n            theModel,\n        }\n    },\n    template: `\n        <div class=\"row pt-md-4\">\n            <div class=\"col\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <div class=\"h5\"><h5>{{ t('person', 'kontaktdaten') }}</h5></div>        \n                    </div>\n                    <div class=\"card-body\">\n                        <div class=\"col-md-12 d-flex flex-column align-items-start pt-3 pb-2 mb-3\">\n                            <ul class=\"nav nav-tabs\" style=\"width: 100%\">\n                                <li class=\"nav-item\">\n                                    <a\n                                    class=\"nav-link\"\n                                    :class=\"{ active: isActive(items[0]) }\"\n                                    @click.prevent=\"setActive(items[0])\"\n                                    href=\"#\"\n                                    >{{ t('person','adressen') }}</a\n                                    >\n                                </li>\n                                <li class=\"nav-item\">\n                                    <a\n                                    class=\"nav-link\"\n                                    :class=\"{ active: isActive(items[1]) }\"\n                                    @click.prevent=\"setActive(items[1])\"\n                                    href=\"#\"\n                                    >{{ t('global','kontakt') }}</a\n                                    >\n                                </li>\n                            </ul>\n                \n                            <div class=\"tab-content py-3\" style=\"width: 100%\" id=\"nav-tabContent\">\n                            <div\n                                class=\"tab-pane fade\"\n                                :class=\"{ 'active show': isActive('address') }\"\n                                id=\"nav-address\"\n                                role=\"tabpanel\"\n                                aria-labelledby=\"nav-home-tab\"\n                            >\n                                <!-- -->\n                                <address-data :personID=\"theModel.personID\" ></address-data>\n                                <!-- -->\n                            </div>\n                            <div\n                                class=\"tab-pane fade\"\n                                :class=\"{ 'active show': isActive('contact') }\"\n                                id=\"nav-contact\"\n                                role=\"tabpanel\"\n                                aria-labelledby=\"nav-profile-tab\"\n                            >\n                                <!-- -->\n                                <email-tel-data :personID=\"theModel.personID\" ></email-tel-data>\n                                <!-- -->\n                            </div>\n                        </div>\n                        </div>\n                    </div> <!--.card-body-->\n                </div>\n            </div>\n        </div>\n\n\n`\n\n}\n\nexport default ContactData;","import { Modal } from '../Modal.js';\nimport { ModalDialog } from '../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport ApiPerson from '../../api/factory/person.js';\n\nexport const MaterialExpensesData = {\n\tname: 'MaterialExpensesData',\n    components: {\n        Modal,\n        ModalDialog,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},        \n        writePermission: { type: Boolean, required: false },\n    },\n    setup( props ) {\n\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n        const readonly = Vue.ref(false);\n\n        const { t } = usePhrasen();\n        const numberFormat = new Intl.NumberFormat('de-AT',{\n            minimumFractionDigits: 2\n          });\n\n        const theModel = Vue.computed({\n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n       // const { personID: currentPersonID , personUID: currentPersonUID  } = Vue.toRefs(props);\n\n        const uid = Vue.ref(\"\");\n\n        const dialogRef = Vue.ref();\n\n        const url = Vue.ref(\"\");\n\n        const isFetching = Vue.ref(false);\n\n        const materialdataList = Vue.ref([]);\n\n        const types = Vue.inject('sachaufwandtyp');\n\n        const full = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\n        const fetchData = async () => {\n            if (theModel.value.personID==null && props.personID==null) {    \n                materialdataList.value = [];            \n                return;\n            }\n            isFetching.value = true\n \n            // submit\n            try {\n                const response = await $api.call(ApiPerson.personMaterialExpenses(theModel.value.personID, theModel.value.personUID));\n                materialdataList.value = response.data;\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)            \n            } finally {\n                isFetching.value = false\n            }\n                       \n        }\n\n        const createShape = () => {\n            return {\n                sachaufwand_id: 0,\n                mitarbeiter_uid: theModel.value.personUID,\n                sachaufwandtyp_kurzbz: \"\",\n                beginn: \"\",\n                ende: \"\",  \n                anmerkung: \"\",     \n                betrag: \"\",\n            } \n        }\n\n        const currentValue = Vue.ref(createShape());\n        const preservedValue = Vue.ref(createShape());\n\n        Vue.watch([theModel], ([id,uid]) => {\n            fetchData();                     \n        });\n\n        const toggleMode = async () => {\n            if (!readonly.value) {\n                // cancel changes?\n                if (hasChanged.value) {\n                  const ok = await dialogRef.value.show();\n                  if (ok) {\n                    console.log(\"ok=\", ok);\n                    currentValue.value = preservedValue.value;\n                  } else {\n                    return\n                  }\n                }\n              } else {\n                // switch to edit mode and preserve data\n                preservedValue.value = {...currentValue.value};\n              }\n              readonly.value = !readonly.value;\n        }\n\n        Vue.onMounted(() => {\n            currentValue.value = createShape();\n            fetchData();\n        })\n\n        const materialdataListArray = Vue.computed(() => (materialdataList.value ? Object.values(materialdataList.value) : []));\n\n        // Modal \n        const modalRef = Vue.ref();\n        const confirmDeleteRef = Vue.ref();\n\n        const showAddModal = () => {\n            currentValue.value = createShape();\n            // reset form state\n            frmState.beginnBlurred=false;\n            frmState.betragBlurred=false;\n            // call bootstrap show function\n            modalRef.value.show();\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n        \n        const showEditModal = (id) => {\n            currentValue.value = { ...materialdataList.value[id] };\n            delete currentValue.value.bezeichnung;\n\t\t\tif(currentValue.value.betrag !== null) {\n\t\t\t\tcurrentValue.value.betrag = (String(currentValue.value.betrag)).replace('.', ',');\n\t\t\t}\n            modalRef.value.show();\n        }\n\n        const showDeleteModal = async (id) => {\n            currentValue.value = { ...materialdataList.value[id] };\n\t\t\tif(currentValue.value.betrag !== null) {\n\t\t\t\tcurrentValue.value.betrag = (String(currentValue.value.betrag)).replace('.', ',');\n\t\t\t}\n            if (await $fhcAlert.confirm({\n                    //message: t('person','sachaufwand') + ' ' + getType(currentValue.value?.sachaufwandtyp_kurzbz) + ' ' + currentValue.value?.beginn - currentValue.value?.ende + ' ' + t('person','wirklichLoeschen'),\n                    message: t('person','sachaufwand') + ' ' + getType(currentValue.value?.sachaufwandtyp_kurzbz) + ' ' + t('person','wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }    \n            \n            try {\n                const res = await $api.call(ApiPerson.deletePersonMaterialExpenses(id));\n                if (res.meta.status == \"success\") {\n                    delete materialdataList.value[id];\n                    showDeletedToast();\n                }\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)             \n            } finally {\n                    isFetching.value = false\n            }   \n        }\n\n\n        const okHandler = async () => {\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                // submit\n                try {\n\t\t\t\t\tif(currentValue.value.betrag !== null) {\n\t\t\t\t\t\tcurrentValue.value.betrag = (String(currentValue.value.betrag)).replace(',', '.');\n\t\t\t\t\t}\n                    const r = await $api.call(ApiPerson.upsertPersonMaterialExpenses(currentValue.value));\n                    if (r.meta.status == \"success\") {\n                        materialdataList.value[r.data[0].sachaufwand_id] = r.data[0];\n                        console.log('materialdata successfully saved');\n                        showToast();\n                    }  \n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)         \n                } finally {\n                    isFetching.value = false\n                }\n                \n                hideModal();\n            }\n        }\n\n        // -------------\n        // form handling\n        // -------------\n\n        const materialDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ beginnBlurred: false, wasValidated: false });\n\n        const validBeginn = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n\t\tconst validBetrag = (betrag) => {\n\t\t\tif( betrag === null || betrag === '' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif( betrag.match(/^[0-9]{1,7}(,[0-9]{0,2})?$/) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n            return false;\n        }\n\n        const validate = () => {\n\t\t\tlet retval = true;\n\n            frmState.beginnBlurred = true;\n            if (!validBeginn(currentValue.value.beginn)) {\n                retval = false;\n            }\n\n            frmState.betragBlurred = true;\n            if (!validBetrag(currentValue.value.betrag)) {\n                retval = false;\n            }\n\n            return retval;\n        }\n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n\n        const formatDate = (d) => {\n            if (d != null && d != '') {\n\t\t        return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n            } else {\n                return ''\n            }\n        }\n\n        const formatNumber = (num) => {\n            let n = parseFloat(num);\n            if (isNaN(n)) {\n                return '';\n            }\n            return numberFormat.format(parseFloat(num),);\n        }\n\n        const getType = (kurzbz) => {\n            let t = types.value.filter((item) => item.sachaufwandtyp_kurzbz == kurzbz);\n            return t.length > 0 ? t[0].bezeichnung : ''\n        }\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','sachaufwandGespeichert'));\n        }\n\n        const showDeletedToast = () => {\n            $fhcAlert.alertSuccess(t('person','sachaufwandGeloescht'));\n        }\n\n        return { \n            materialdataList, materialdataListArray,\n            currentValue,\n            readonly,\n            frmState,\n            dialogRef,\n            materialDataFrm,\n            modalRef,\n            types, \n            \n            toggleMode,  validBeginn, validBetrag, formatDate,\n            showToast, showDeletedToast,\n            showAddModal, hideModal, okHandler,\n            showDeleteModal, showEditModal, confirmDeleteRef, t,\n            getType, formatNumber\n         }\n    },\n    template: `\n    <div class=\"row\">        \n    </div>\n    <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5\"><h5>{{ t('person','sachaufwand') }}</h5></div>        \n                </div>\n\n                <div class=\"card-body\">\n                    <div class=\"d-grid d-md-flex justify-content-start py-2\">\n                        <button type=\"button\" class=\"btn btn-sm btn-primary\" @click=\"showAddModal()\">\n                        <i class=\"fa fa-plus\"></i> {{ t('person','sachaufwand') }}\n                        </button>            \n                    </div>\n                    <div class=\"table-responsive\">\n                        <table class=\"table table-hover table-sm\">\n                            <thead>                \n                            <tr>\n                                <th scope=\"col\">{{ t('global','typ') }}</th>\n                                <th scope=\"col\">{{ t('ui','from') }}</th>\n                                <th scope=\"col\">{{ t('global','bis') }}</th>\n                                <th scope=\"col\">{{ t('ui','betrag') }}</th>\n                                <th scope=\"col\">{{ t('global','anmerkung') }}</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr v-for=\"materialdata in materialdataListArray\" :key=\"materialdata.sachaufwand_id\">\n                                <td class=\"align-middle\">{{ getType(materialdata.sachaufwandtyp_kurzbz) }}</td>\n                                <td class=\"align-middle\">{{ formatDate(materialdata.beginn) }}</td>\n                                <td class=\"align-middle\">{{ formatDate(materialdata.ende) }}</td>\n                                <td class=\"align-middle\">{{ formatNumber(materialdata.betrag) }}</td>\n                                <td class=\"align-middle\">{{ materialdata.anmerkung }}</td>\n                                <td class=\"align-middle\" width=\"5%\">\n                                    <div class=\"d-grid gap-2 d-md-flex align-middle\">\n                                        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showEditModal(materialdata.sachaufwand_id)\">\n                                            <i class=\"fa fa-pen\"></i>\n                                        </button>\n                                        <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showDeleteModal(materialdata.sachaufwand_id)\">\n                                            <i class=\"fa fa-xmark\"></i>\n                                        </button>\n                                    </div>\n                                </td>\n                            </tr>\n                \n                            </tbody>\n                        </table>            \n                    </div>\n                </div>\n             </div>\n         </div>\n    </div>\n            \n\n    <!-- detail modal -->\n    <Modal :title=\"t('person','sachaufwand')\" ref=\"modalRef\">\n        <template #body>\n            <form class=\"row g-3\" ref=\"materialDataFrm\">\n                            \n                <div class=\"col-md-4\">\n                    <label for=\"sachaufwandtyp_kurzbz\" class=\"form-label\">{{ t('global','typ') }}</label><br>\n                    <select v-if=\"!readonly\" id=\"sachaufwandtyp_kurzbz\" v-model=\"currentValue.sachaufwandtyp_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n                        <option v-for=\"(item, index) in types\" :value=\"item.sachaufwandtyp_kurzbz\">\n                            {{ item.bezeichnung }}\n                        </option>                       \n                    </select>\n                    <input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"sachaufwandtyp_kurzbz\" :value=\"currentValue.sachaufwandtyp_kurzbz\">\n                </div>\n                <!--  -->\n                <div class=\"col-md-3\">\n                    <label for=\"beginn\" class=\"required form-label\">{{ t('ui','from') }}</label>\n                    <datepicker id=\"beginn\" \n                        :teleport=\"true\" \n                        @blur=\"frmState.beginnBlurred = true\" \n                        :input-class-name=\"(!validBeginn(currentValue.beginn) && frmState.beginnBlurred) ? 'dp-invalid-input' : ''\"  \n                        v-model=\"currentValue.beginn\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>\n                </div>\n                <div class=\"col-md-3\">\n                    <label for=\"ende\" class=\"form-label\">{{ t('global','bis') }}</label>\n                    <datepicker id=\"ende\" \n                        :teleport=\"true\" \n                        v-model=\"currentValue.ende\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>\n                </div>\n                <div class=\"col-md-2\">\n                </div>\n                <!-- -->\n                <div class=\"col-md-3\">\n                    <label for=\"betrag\" class=\"form-label\">{{ t('ui','betrag') }}</label>\n\t\t\t\t\t<input type=\"text\" :readonly=\"readonly\" @blur=\"frmState.betragBlurred = true\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'dp-invalid-input': (!validBetrag(currentValue.betrag) && frmState.betragBlurred)}\" id=\"betrag\" v-model=\"currentValue.betrag\">\n                </div>\n                <div class=\"col-md-7\">\n                    <label for=\"uid\" class=\"form-label\">{{ t('global','anmerkung') }}</label>\n                    <input type=\"text\"  :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly}\" id=\"bank\" v-model=\"currentValue.anmerkung\">\n                </div>\n                <div class=\"col-md-2\">\n                </div>\n                \n                <!-- changes -->\n                <div class=\"col-8\">\n                    <div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }}</div>\n                </div>\n                \n            </form>\n        </template>\n        <template #footer>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n                {{ t('ui','speichern') }}\n            </button>\n        </template>\n\n    </Modal>\n\n    <ModalDialog :title=\"t('global','warnung')\" ref=\"dialogRef\">\n      <template #body>\n        {{ t('person','sachaufwandNochNichtGespeichert') }}\n      </template>\n    </ModalDialog>\n\n    <ModalDialog :title=\"t('global','warnung')\" ref=\"confirmDeleteRef\">\n        <template #body>\n            {{ t('person','sachaufwand') }} '{{ getType(currentValue?.sachaufwandtyp_kurzbz) }} ({{ currentValue?.beginn }}-{{ currentValue?.ende }})' {{ t('person', 'wirklichLoeschen') }}?\n        </template>\n    </ModalDialog>\n    `\n}\n\nexport default MaterialExpensesData;","export const Toast = {\n\tname: 'Toast',\n    props: {\n        title: {\n            text: String,\n            default: \"<<Text goes here>>\",\n        },\n        type: {\n            text: String,\n            default: \"success\",\n        }\n    },\n    expose: ['show', 'hide'],\n    setup(props) {\n\n        let toastEle = Vue.ref(null);\n        let thisToastObj;\n\n        Vue.onMounted(() => {\n            thisToastObj = new bootstrap.Toast(toastEle.value);\n        });\n\n        const show = () => {\n            thisToastObj.show();\n        }\n\n        const hide = () => {\n            thisToastObj.hide();\n        }\n\n        const backgroundColor = Vue.computed(() => {\n            return props.type == \"success\" ? \"bg-primary\"  : \"bg-danger\"\n        })\n\n        return { show, hide, toastEle, backgroundColor };\n\n    },\n    template: `\n    <div class=\"toast align-items-center text-white border-0 \" :class=\"backgroundColor\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" ref=\"toastEle\">\n        <div class=\"d-flex\">\n            <div class=\"toast-body\">\n            <slot name=\"body\"></slot>\n            </div>\n            <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n        </div>\n    </div>`\n}\n","export default {\n\tgetStundensaetze(uid) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/getStundensaetze/' + uid,\n\t\t\tparams: uid\n\t\t}\n\t},\n\tdeleteStundensatz(stundensatz_id) {\t\t\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deleteStundensatz',\n\t\t\tparams: { stundensatz_id }\n\t\t}\n\t},\n\tupdateStundensatz(payload) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/updateStundensatz',\n\t\t\tparams: payload\n\t\t}\n\t},\n};\n","import { Modal } from '../Modal.js';\nimport { ModalDialog } from '../ModalDialog.js';\nimport { Toast } from '../Toast.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport ApiStundensatz from '../../api/factory/stundensatz.js';\n\nexport const HourlyRateData = {\n\tname: 'HourlyRateData',\n\tcomponents: {\n\t\tModal,\n\t\tModalDialog,\n\t\tToast,\n\t\t\"datepicker\": VueDatePicker,\n\n\t},\n\tprops: {\n\t\tmodelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n\t\twritePermission: { type: Boolean, required: false },\n\t},\n\tsetup (props) {\n\n        const $api = Vue.inject('$api');\n\t\tconst $fhcAlert = Vue.inject('$fhcAlert');\n\t\tconst { t } = usePhrasen();\n\n\t\tconst theModel = Vue.computed({ \n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n\t\tconst readonly = Vue.ref(false);\n\t\tconst isFetching = Vue.ref(false);\n\n\t\tconst hourlyRatedataList = Vue.ref([]);\n\t\tconst dialogRef = Vue.ref();\n\n\t\tconst types = Vue.inject('hourlyratetypes');\n\t\tconst unternehmen = Vue.inject('unternehmen');\n\n\t\tconst fetchData = async () => {\n\t\t\tif (theModel.value.personUID==null)\n\t\t\t{\n\t\t\t\thourlyRatedataList.value = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisFetching.value = true\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst response = await $api.call(ApiStundensatz.getStundensaetze(theModel.value.personUID));\n\t\t\t\thourlyRatedataList.value = response.data;\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\t$fhcAlert.handleSystemError(error)\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tisFetching.value = false;\n\t\t\t}\n\t\t}\n\n\t\tconst createShape = () => {\n\t\t\treturn {\n\t\t\t\tstundensatz_id: 0,\n\t\t\t\tuid: theModel.value.personUID,\n\t\t\t\tstundensatztyp: \"\",\n\t\t\t\tstundensatz: \"\",\n\t\t\t\toe_kurzbz: \"\",\n\t\t\t\tgueltig_von: \"\",\n\t\t\t\tgueltig_bis: \"\",\n\t\t\t}\n\t\t}\n\n\t\tconst currentValue = Vue.ref(createShape());\n\t\tconst preservedValue = Vue.ref(createShape());\n\n\t\tVue.watch(theModel, (currentVal, oldVal) => {\n\t\t\tfetchData();\n\t\t});\n\n\t\tVue.onMounted(() => {\n\t\t\tcurrentValue.value = createShape();\n\t\t\tfetchData();\n\t\t})\n\n\t\tconst houryratedataListArray = Vue.computed(() => (hourlyRatedataList.value ? Object.values(hourlyRatedataList.value) : []));\n\n\t\t// Modal\n\t\tconst modalRef = Vue.ref();\n\t\tconst confirmDeleteRef = Vue.ref();\n\n\t\tconst showAddModal = () => {\n\t\t\tcurrentValue.value = createShape();\n\t\t\t// reset form state\n\t\t\tfrmState.beginnBlurred=false;\n\t\t\tfrmState.bisBlurred=false;\n\t\t\tfrmState.typBlurred=false;\n\t\t\tfrmState.satzBlurred=false;\n\t\t\tfrmState.unternehmenBlurred=false;\n\t\t\t// call bootstrap show function\n\t\t\tmodalRef.value.show();\n\t\t}\n\n\t\tconst hideModal = () => {\n\t\t\tmodalRef.value.hide();\n\t\t}\n\n\t\tconst showEditModal = (id) => {\n\t\t\tcurrentValue.value = { ...hourlyRatedataList.value[id] };\n\t\t\tmodalRef.value.show();\n\t\t}\n\n\t\tconst showDeleteModal = async (id) => {\n\t\t\tcurrentValue.value = { ...hourlyRatedataList.value[id] };\n\n\t\t\tif (await $fhcAlert.confirm({\n                    message: t('person','stundensatzWirklichLoeschen') + ' ' + currentValue.value?.stundensatztyp + ' ' + t('person','wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }    \n\n\t\t\ttry {\n\t\t\t\tconst res = await $api.call(ApiStundensatz.deleteStundensatz(id));\n\n\t\t\t\tif (res.meta.status === \"success\")\n\t\t\t\t{\n\t\t\t\t\tdelete hourlyRatedataList.value[id];\n\t\t\t\t\tshowDeletedToast();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\t$fhcAlert.handleSystemError(error)\n\t\t\t} finally {\n\t\t\t\tisFetching.value = false\n\t\t\t}\n\t\t}\n\n\t\tconst okHandler = async () => {\n\t\t\tif (validate())\n\t\t\t{\n\t\t\t\ttry {\n\t\t\t\t\tconst r = await $api.call(ApiStundensatz.updateStundensatz(currentValue.value));\n\t\t\t\t\tif (r.meta.status === \"success\")\n\t\t\t\t\t{\n\t\t\t\t\t\thourlyRatedataList.value[r.data[0].stundensatz_id] = r.data[0];\n\t\t\t\t\t\tpreservedValue.value = currentValue.value;\n\t\t\t\t\t\tshowToast();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (error)\n\t\t\t\t{\n\t\t\t\t\t$fhcAlert.handleSystemError(error)\n\t\t\t\t}\n\t\t\t\tfinally\n\t\t\t\t{\n\t\t\t\t\tisFetching.value = false\n\t\t\t\t}\n\n\t\t\t\thideModal();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.log(\"form invalid\");\n\t\t\t}\n\t\t}\n\n\t\t// -------------\n\t\t// form handling\n\t\t// -------------\n\n\t\tconst houryrateDataFrm = Vue.ref();\n\n\t\tconst frmState = Vue.reactive({ beginnBlurred: false, typBlurred: false, bisBlurred: false, satzBlurred: false, unternehmenBlurred: false,  wasValidated: false });\n\n\t\tconst validBeginn = (n) => {\n\t\t\treturn !!n && n.trim() != \"\";\n\t\t}\n\n\t\tconst validInput = (input) => {\n\t\t\tif (input === undefined || input === '')\n\t\t\t\treturn false;\n\t\t\telse\n\t\t\t\treturn true;\n\t\t}\n\n\t\tconst checkDates = (beginn, ende) => {\n\n\t\t\tif (beginn !== '' && ende !== '' && ende !== null && beginn !== null)\n\t\t\t{\n\t\t\t\tbeginn = new Date(beginn);\n\t\t\t\tende = new Date(ende);\n\n\t\t\t\tif (ende >= beginn)\n\t\t\t\t{\n\t\t\t\t\tfrmState.bisBlurred = false;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfrmState.bisBlurred = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfrmState.bisBlurred = false;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\n\t\tconst validate = () => {\n\t\t\tfrmState.beginnBlurred = true;\n\t\t\tfrmState.typBlurred = true;\n\t\t\tfrmState.satzBlurred = true;\n\t\t\tfrmState.unternehmenBlurred = true;\n\t\t\tif (validBeginn(currentValue.value.gueltig_von) &&\n\t\t\t\tvalidInput(currentValue.value.stundensatz) &&\n\t\t\t\tvalidInput(currentValue.value.stundensatztyp) &&\n\t\t\t\tvalidInput(currentValue.value.oe_kurzbz) &&\n\t\t\t\tcheckDates(currentValue.value.gueltig_von, currentValue.value.gueltig_bis)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst formatDate = (d) => {\n\t\t\tif (d != null && d != '') {\n\t\t\t\treturn d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n\t\t\t} else {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t}\n\n\t\tconst showToast = () => {\n            $fhcAlert.alertSuccess(t('person','stundensatzGespeichert'));\n        }\n\n        const showDeletedToast = () => {\n            $fhcAlert.alertSuccess(t('person','stundensatzGeloescht'));\n        }\n\n\t\treturn {\n\t\t\thourlyRatedataList,\n\t\t\thouryratedataListArray,\n\t\t\tcurrentValue,\n\t\t\treadonly,\n\t\t\tfrmState,\n\t\t\tdialogRef,\n\t\t\thouryrateDataFrm,\n\t\t\tmodalRef,\n\t\t\ttypes,\n\t\t\tunternehmen,\n\n\t\t\tvalidBeginn, validInput, checkDates, formatDate,\n\t\t\tshowToast, showDeletedToast,\n\t\t\tshowAddModal, hideModal, okHandler,\n\t\t\tshowDeleteModal, showEditModal, confirmDeleteRef, t,\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"row\">\n\t</div>\n\t<div class=\"row pt-md-4\">\n\t\t <div class=\"col\">\n\t\t\t <div class=\"card\">\n\t\t\t\t<div class=\"card-header\">\n\t\t\t\t\t<div class=\"h5\"><h5>{{ t('person','stundensaetze') }}</h5></div>        \n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"card-body\">\n\t\t\t\t\t<div class=\"d-grid d-md-flex justify-content-start py-2\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary\" @click=\"showAddModal()\">\n\t\t\t\t\t\t<i class=\"fa fa-plus\"></i> {{ t('ui','stundensatz') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"table-responsive\">\n\t\t\t\t\t\t<table class=\"table table-hover table-sm\">\n\t\t\t\t\t\t\t<thead>                \n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{{ t('global','typ') }}</th>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{{ t('ui','from') }}</th>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{{ t('global','bis') }}</th>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{{ t('core','unternehmen') }}</th>\n\t\t\t\t\t\t\t\t<th scope=\"col\">{{ t('ui','stundensatz') }}</th>\n\t\t\t\t\t\t\t\t<th scope=\"col\"></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr v-for=\"hourlyratedata in houryratedataListArray\" :key=\"hourlyratedata.stundensatz_id\">\n\t\t\t\t\t\t\t\t<td class=\"align-middle\">{{ hourlyratedata.stundensatztyp }}</td>\n\t\t\t\t\t\t\t\t<td class=\"align-middle\">{{ formatDate(hourlyratedata.gueltig_von) }}</td>\n\t\t\t\t\t\t\t\t<td class=\"align-middle\">{{ formatDate(hourlyratedata.gueltig_bis) }}</td>\n\t\t\t\t\t\t\t\t<td class=\"align-middle\">{{ hourlyratedata.oe_kurzbz }}</td>\n\t\t\t\t\t\t\t\t<td class=\"align-middle\">{{ hourlyratedata.stundensatz }}</td>\n\t\t\t\t\t\t\t\t<td class=\"align-middle\" width=\"5%\">\n\t\t\t\t\t\t\t\t\t<div class=\"d-grid gap-2 d-md-flex align-middle\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showEditModal(hourlyratedata.stundensatz_id)\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-pen\"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click=\"showDeleteModal(hourlyratedata.stundensatz_id)\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-xmark\"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>            \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t </div>\n\t\t </div>\n\t</div>\n\n\t<!-- detail modal -->\n\t<Modal :title=\"t('ui','stundensatz')\" ref=\"modalRef\" class=\"stundensatzModal\">\n\t\t<template #body>\n\t\t\t<form class=\"row g-3\" ref=\"houryrateDataFrm\">\n\t\t\t\t\t\t\t\n\t\t\t\t<div class=\"col-md-4\">\n\t\t\t\t\t<label for=\"stundensatztyp\" class=\"required form-label\">{{ t('global','typ') }}</label><br>\n\t\t\t\t\t<select v-if=\"!readonly\" id=\"stundensatztyp\" @blur=\"frmState.typBlurred = true\"  :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validInput(currentValue.stundensatztyp) && frmState.typBlurred}\" v-model=\"currentValue.stundensatztyp\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n\t\t\t\t\t\t<option v-for=\"(item, index) in types\" :value=\"item.stundensatztyp\">\n\t\t\t\t\t\t\t{{ item.bezeichnung }}\n\t\t\t\t\t\t</option>                       \n\t\t\t\t\t</select>\n\t\t\t\t\t<input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"stundensatztyp\" :value=\"currentValue.stundensatztyp\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t<label for=\"beginn\" class=\"required form-label\">{{ t('ui','from') }}</label>\n\t\t\t\t\t<datepicker id=\"beginn\"\n\t\t\t\t\t\t@blur=\"frmState.beginnBlurred = true\"\n\t\t\t\t\t\tv-bind:enable-time-picker=\"false\"\n\t\t\t\t\t\t:input-class-name=\"(!validBeginn(currentValue.gueltig_von) && frmState.beginnBlurred) ? 'dp-invalid-input' : ''\"\t\t\t\t\t\t\n\t\t\t\t\t\tv-model=\"currentValue.gueltig_von\"\n\t\t\t\t\t\ttext-input \n\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\tauto-apply \n\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t></datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t<label for=\"ende\" class=\"form-label\">{{ t('global','bis') }}</label>\n\t\t\t\t\t<datepicker id=\"ende\"\n\t\t\t\t\t\t@blur=\"frmState.bisBlurred = true\"\n\t\t\t\t\t\tv-bind:enable-time-picker=\"false\"\n\t\t\t\t\t\tv-model=\"currentValue.gueltig_bis\"\n\t\t\t\t\t\ttext-input \n\t\t\t\t\t\tlocale=\"de\"\n\t\t\t\t\t\tformat=\"dd.MM.yyyy\"\n\t\t\t\t\t\tauto-apply \n\t\t\t\t\t\tmodel-type=\"yyyy-MM-dd\"\n\t\t\t\t\t></datepicker>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-2\">\n\t\t\t\t</div>\n\t\t\t\t<!-- -->\n\t\t\t   <div class=\"col-md-4\">\n\t\t\t\t\t<label for=\"stundensatz\" class=\"required form-label\">{{ t('ui','stundensatz') }}</label>\n\t\t\t\t\t<input type=\"number\" :readonly=\"readonly\" @blur=\"frmState.satzBlurred = true\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validInput(currentValue.stundensatz) && frmState.satzBlurred}\" id=\"stundensatz\" v-model=\"currentValue.stundensatz\">\n\t\t\t\t</div>\n\t\t\t  \n\t\t\t   <div class=\"col-md-4\">\n\t\t\t\t\t<label for=\"unternehmen\" class=\"required form-label\">{{ t('core','unternehmen') }}</label><br>\n\t\t\t\t\t<select v-if=\"!readonly\" id=\"unternehmen\" @blur=\"frmState.unternehmenBlurred = true\"  :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !validInput(currentValue.oe_kurzbz) && frmState.unternehmenBlurred}\" v-model=\"currentValue.oe_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" >\n\t\t\t\t\t\t<option v-for=\"(item, index) in unternehmen\" :value=\"item.value\">\n\t\t\t\t\t\t\t{{ item.label }}\n\t\t\t\t\t\t</option>                       \n\t\t\t\t\t</select>\n\t\t\t\t\t<input v-else type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"unternehmen\" :value=\"currentValue.oe_kurzbz\">\n\t\t\t\t</div>\n\t\t\t   \n\t\t\t\t\n\t\t\t\t<!-- changes -->\n\t\t\t\t<div class=\"col-8\">\n\t\t\t\t\t<div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }}</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</form>\n\t\t</template>\n\t\t<template #footer>\n\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n\t\t\t\t{{ t('ui','speichern') }}\n\t\t\t</button>\n\t\t</template>\n\n\t</Modal>\n\n\t<ModalDialog :title=\"t('global','warnung')\" ref=\"dialogRef\">\n\t  <template #body>\n\t  \t{{ t('person','stundensatzNochNichtGespeichert') }}\n\t  </template>\n\t</ModalDialog>\n\n\t`\n}\n\nexport default HourlyRateData;","export default {\n\tgetOrgStructure(oe) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgStructure?oe=${oe}`,      \n\t\t}\n\t},\n\tgetOrgPersonen(oe) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: `/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgPersonen?oe=${oe}`,      \n\t\t}\n\t},\n\tgetOrgHeads() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: 'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgHeads'\n\t\t}\n\t}\n};\n","// import {CoreRESTClient} from '../../../../../js/RESTClient.js';\nimport ApiOrgViewer from '../../api/factory/orgviewer.js';\n\nexport const OrgChooser = {\n\tname: 'OrgChooser',\n    props: {\n      placeholder: String,\n      customClass: String,\n      oe: String,\n    },\n    emits: [\"orgSelected\"],\n    setup(props, { emit }) {   \n\n      const orgList = Vue.ref([]);\n      const isFetching = Vue.ref(false);\n      const oeRef = Vue.toRefs(props).oe\n      const selected = Vue.ref();\n      const $api = Vue.inject('$api');\n\n      const fetchHead = async () => {\n        isFetching.value = true\n        try {\n          /* const res = await CoreRESTClient.get(\n            'extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgHeads');\n          orgList.value = CoreRESTClient.getData(res.data); */\n          const res = await $api.call(ApiOrgViewer.getOrgHeads());\n          orgList.value = res.data;\n          if (orgList.value.length > 0)  {\n            //orgList.value.reverse();\n            if (props.oe == undefined || (props.oe != null && props.oe == '')) {\n              selected.value = orgList.value[0].oe_kurzbz;\n            }\n            emit(\"orgSelected\", selected.value);\n          }\n          isFetching.value = false          \n        } catch (error) {\n          console.log(error)\n          isFetching.value = false\n        }\n      }\n\n      Vue.onMounted(() => {\n        fetchHead();\n      })\n\n      const orgSelected = (e) => {\n        emit(\"orgSelected\", e.target.value);\n      }\n\n      Vue.watch(\n        oeRef,\n        (val, old) => {\n          console.log('prop value changed', val);\n          selected.value = val;\n        }\n      )\n\n      return   {\n        orgList, selected,\n\n        orgSelected\n      }\n\n\n    },\n    template: `\n    <select  id=\"orgHeadChooser\" v-model=\"selected\" @change=\"orgSelected\" class=\"form-control-sm\" aria-label=\".form-select-sm \" >\n        <option v-for=\"(item, index) in orgList\" :value=\"item.oe_kurzbz\"  :key=\"item.oe_kurzbz\">\n            {{ item.bezeichnung }}\n        </option>         \n    </select>\n    `\n}    \n","export default {\n  getContractFunctions(filter) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getContractFunctions';\n    if( typeof filter !== 'undefined' && filter !== null ) {\n        url = url + '/' + filter;\n    }\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t};\n    \n  },\n  getOrgetsForCompany(unternehmen) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getOrgetsForCompany'\n            + '/' + unternehmen;\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t};\n  },\n  getCompanyByOrget(orget) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getCompanyByOrget'\n            + '/' + orget;\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl,\n\t\t};\n  },\n  getCurrentFunctions(mitarbeiter_uid, unternehmen) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getCurrentFunctions'\n            + '/' + mitarbeiter_uid + '/' + unternehmen;\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl, \n\t\t};\n  }  ,\n  getAllUserFunctions(mitarbeiter_uid) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getAllUserFunctions'\n            + '/' + mitarbeiter_uid;\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl, \n\t\t};\n  },\n  getAllFunctions() {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FunctionsAPI/getAllFunctions';\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl, \n\t\t};\n  }\n};\n","import { Modal } from '../Modal.js';\nimport { ModalDialog } from '../ModalDialog.js';\nimport {OrgChooser} from \"../../components/organisation/OrgChooser.js\";\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport ApiFunktion from '../../api/factory/funktion.js';\nimport ApiPerson from '../../api/factory/person.js';\n\nexport const JobFunction = {\n\tname: 'JobFunction',\n    components: {\n        Modal,\n        ModalDialog,\n        OrgChooser,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        modelValue: { type: Object, default: () => ({}), required: false},\n        config: { type: Object, default: () => ({}), required: false},\n        readonlyMode: { type: Boolean, required: false, default: false },\n        personID: { type: Number, required: false },\n        personUID: { type: String, required: false },\n        writePermission: { type: Boolean, required: false },\n    },\n    emits: ['updateHeader'],\n    setup( props, { emit } ) {\n\n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n\n        const readonly = Vue.ref(false);\n\n        const { t } = usePhrasen();\n\n        //const { personID: currentPersonID , personUID: currentPersonUID  } = Vue.toRefs(props);\n        const currentPersonID = Vue.computed(() => { return props.personID });\n        const currentPersonUID = Vue.computed(() => { return props.personUID });\n\n        const dialogRef = Vue.ref();\n\n        const isFetching = Vue.ref(false);\n\n        const theModel = Vue.computed({\n            get: () => props.modelValue,\n            set: (value) => emit('update:modelValue', value),\n        });\n\n        const unternehmen = Vue.ref();\n        const jobfunctionList = Vue.ref([]);\n        const jobfunctionDefList = Vue.ref([]);\n        const orgUnitList = Vue.ref([{value: '', label: '-'}]);\n\n        const aktivChecked = Vue.ref(true);\n\n        const table = Vue.ref(null); // reference to your table element\n        const tabulator = Vue.ref(null); // variable to hold your table\n        const tableData = Vue.reactive([]); // data for table to display\n\n\n        const full = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const route = ( props.readonlyMode !== true ) ? VueRouter.useRoute() : null;\n\n        const convertArrayToObject = (array, key) => {\n            const initialValue = {};\n            return array.reduce((obj, item) => {\n              return {\n                ...obj,\n                [item[key]]: item,\n              };\n            }, initialValue);\n          };\n\n        const fetchData = async () => {\n            if (currentPersonID.value==null && theModel.value.personID==null) {    \n                jobfunctionList.value = [];            \n                return;\n            }\n            isFetching.value = true\n \n            // fetch data and map them for easier access\n            try {\n                const response = await $api.call(ApiFunktion.getAllUserFunctions(theModel.value.personUID || currentPersonUID.value));\n                if(response.meta.status != \"success\") {\n                    let rawList = [];\n                    tableData.value = [];\n                    jobfunctionList.value = convertArrayToObject(rawList, 'benutzerfunktion_id');\n                } else {\n                    let rawList = response.data;\n                    tableData.value = response.data;\n                    jobfunctionList.value = convertArrayToObject(rawList, 'benutzerfunktion_id');\n                }\n            } catch (error) {\n                console.log(error)              \n            } finally {\n                isFetching.value = false\n            }\n            \n        }\n\n        const createShape = () => {\n            return {\n                benutzerfunktion_id: 0,\n                uid: theModel.value.personUID || currentPersonUID.value,\n                oe_kurzbz: \"\",\n                funktion_kurzbz: \"\",\n                datum_von: \"\",\n                datum_bis: \"\",  \n                bezeichnung: \"\",\n                wochenstunden: 0,     \n            } \n        }\n\n        const currentValue = Vue.ref(createShape());\n        const preservedValue = Vue.ref(createShape());\n\n        Vue.watch([currentPersonID, currentPersonUID], ([id,uid]) => {\n            fetchData();                     \n        });\n\n        Vue.watch(unternehmen, (unternehmen_kurzbz) => {\n            fetchOrgUnits(unternehmen_kurzbz);   \n            fetchFunctions();             \n        });\n\n        const toggleMode = async () => {\n            if (!readonly.value) {\n                // cancel changes?\n                if (hasChanged.value) {\n                  const ok = await dialogRef.value.show();\n                  if (ok) {\n                    console.log(\"ok=\", ok);\n                    currentValue.value = preservedValue.value;\n                  } else {\n                    return\n                  }\n                }\n              } else {\n                // switch to edit mode and preserve data\n                preservedValue.value = {...currentValue.value};\n              }\n              readonly.value = !readonly.value;\n        }\n\n        Vue.onMounted(async () => {\n            currentValue.value = createShape();\n            await fetchData();\n\n            const dateFormatter = (cell) => {\n                return cell.getValue()?.replace(/(.*)-(.*)-(.*)/, '$3.$2.$1');\n            }\n\n            const dvFormatter = (cell) => {\n                if( props.readonlyMode === true ) {\n                    return (cell.getValue() != null) ? cell.getValue() : '';\n                }\n                const url = fullPath + route.params.id + '/' + route.params.uid + '/contract/' + cell.getRow().getData().dienstverhaeltnis_id;\n                return cell.getValue() != null ? `<a href=\"${url}\">` + cell.getValue() + '</a>' : '';\n            }\n\n            // helper\n            const createDomButton = (classValue, clickHandler) => {\n                const nodeBtn = document.createElement(\"button\");\n                const classAttrBtn = document.createAttribute(\"class\");\n                classAttrBtn.value = \"btn btn-outline-secondary btn-sm\";\n                nodeBtn.setAttributeNode(classAttrBtn);\n                nodeBtn.addEventListener(\"click\", clickHandler);\n                const nodeI = document.createElement(\"i\");\n                const classAttrI = document.createAttribute(\"class\");\n                classAttrI.value = classValue;\n                nodeI.setAttributeNode(classAttrI);\n                nodeBtn.appendChild(nodeI);\n                return nodeBtn;\n            }\n\n            const btnFormatter = (cell) => {\n\n                const nodeDiv = document.createElement(\"div\");  \n                const classAttrDiv = document.createAttribute(\"class\");\n                classAttrDiv.value = \"d-grid gap-2 d-md-flex justify-content-end align-middle\";\n                nodeDiv.setAttributeNode(classAttrDiv);\n                // delete button\n                const nodeBtnDel = createDomButton(\"fa fa-xmark\",() => { showDeleteModal(cell.getValue()) })\n                // edit button\n                const nodeBtnEdit = createDomButton(\"fa fa-pen\",() => { showEditModal(cell.getValue()) })\n\n                if( cell.getRow().getData().dienstverhaeltnis_unternehmen === null ) {\n                    nodeDiv.appendChild(nodeBtnEdit);\n                    nodeDiv.appendChild(nodeBtnDel);\n                }\n                \n                return nodeDiv;\n            }\n            \n\n            const columnsDef = [\n                { title: t('person','dv_unternehmen'), field: \"dienstverhaeltnis_unternehmen\", formatter: dvFormatter, sorter:\"string\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('person','zuordnung_taetigkeit'), field: \"funktion_beschreibung\", hozAlign: \"left\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('lehre','organisationseinheit'), field: \"funktion_oebezeichnung\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('person','wochenstunden'), field: \"wochenstunden\", hozAlign: \"right\", width: 140, headerFilter:true },\n                { title: t('ui','from'), field: \"datum_von\", hozAlign: \"center\", formatter: dateFormatter, width: 140, sorter:\"string\", headerFilter:true, headerFilterFunc:customHeaderFilter },                \n                { title: t('global','bis'), field: \"datum_bis\", hozAlign: \"center\", formatter: dateFormatter, width: 140, sorter:\"string\", headerFilter:true, headerFilterFunc:customHeaderFilter },\n                { title: t('ui','bezeichnung'), field: \"bezeichnung\", hozAlign: \"left\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} }\n              ];\n\n            if( props.readonlyMode === false) {\n                columnsDef.push({ title: \"\", field: \"benutzerfunktion_id\", formatter: btnFormatter, hozAlign: \"right\", width: 100, headerSort: false, frozen: true });\n            }\n\n            let tabulatorOptions = {\n\t\t\t\theight: \"100%\",\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tmovableColumns: true,\n\t\t\t\treactiveData: true,\n                columns: columnsDef,\n                //data: tableData.value,\n                data: jobfunctionListArray.value,\n\t\t\t};\n\n            tabulator.value = new Tabulator(\n\t\t\t\ttable.value,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n            \n            function customHeaderFilter(headerValue, rowValue, rowData, filterParams){\n                //headerValue - the value of the header filter element\n                //rowValue - the value of the column in this row\n                //rowData - the data for the row being filtered\n                //filterParams - params object passed to the headerFilterFuncParams property\n            \n                const validDate = function(d){\n                    return d instanceof Date && isFinite(d);\n                }\n\n                const date1 = new Date(rowValue);\n                date1.setHours(0,0,0,0);\n                let [day, month, year] = headerValue.split('.')\n                if (year < 1000) return true;  // prevents dates like 17.5.2\n                const date2 = new Date(+year, +month - 1, +day);\n                \n                return  !(validDate(date2)) || ((date2 - date1) == 0); //must return a boolean, true if it passes the filter.\n            }\n\n            tabulator.value.on('tableBuilt', () => {\n                //tabulator.value.setData(tableData.value);\n                \n            })\n            \n        })\n\n        const jobfunctionListArray = Vue.computed(() => {\n            let temp = (jobfunctionList.value ? Object.values(jobfunctionList.value) : []);\n            let filtered = temp.filter((e) => ( !aktivChecked.value || (aktivChecked.value && e.aktiv) ));\n            return filtered;\n        });\n\n        const getJobFunction = (kurzbz) => {\n            let t = jobfunctionListArray.value.filter((item) => item.funktion_kurzbz == kurzbz);\n            return t.length > 0 ? t[0].bezeichnung : ''\n        }\n\n        // Workaround to update tabulator\n        Vue.watch(jobfunctionListArray, (newVal, oldVal) => {\n            tabulator.value?.setData(jobfunctionListArray.value);\n        }, {deep: true})\n\n        // Modal \n        const modalRef = Vue.ref();\n\n        const showAddModal = () => {\n            currentValue.value = createShape();\n            // reset form state\n            frmState.orgetBlurred=false;\n            frmState.funktionBlurred=false;            \n            frmState.beginnBlurred=false;\n            // call bootstrap show function\n            modalRef.value.show();\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n        \n        const showEditModal = async (id) => {\n            currentValue.value = { ...jobfunctionList.value[id] };\n            // fetch company\n            isFetching.value = true;\n            try {\n                const res = await $api.call(ApiFunktion.getCompanyByOrget(currentValue.value.oe_kurzbz));\n                if (res.meta.status == \"success\") {\n                    unternehmen.value = res.data[0].oe_kurzbz;\n                } else {\n                    console.log('company not found for orget!');\n                }\n\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)           \n            } finally {\n                  isFetching.value = false\n            }   \n            //delete currentValue.value.bezeichnung;\n            modalRef.value.show();\n        }\n\n        const showDeleteModal = async (id) => {\n            currentValue.value = { ...jobfunctionList.value[id] };\n            \n            if (await $fhcAlert.confirm({\n                    message: t('person','funktion') + ' ' + getJobFunction(currentValue.value?.funktion_kurzbz) + '  (' + formatDate(currentValue.value?.datum_von) + '-' + (currentValue.value.datum_bis != null ? formatDate(currentValue.value.datum_bis) : '?') + ') ' + t('person', 'wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }    \n\n            try {\n                const res = await $api.call(ApiPerson.deletePersonJobFunction(id));                \n                if (res.meta.status == \"success\") {\n                    delete jobfunctionList.value[id];\n                    showDeletedToast();\n                    theModel.value.updateHeader();\n                }\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)             \n            } finally {\n                    isFetching.value = false\n            }   \n                \n        }\n\n\n        const okHandler = async () => {\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                // submit\n                try {\n                    let payload = {...currentValue.value};\n                    delete payload.dienstverhaeltnis_id;\n                    delete payload.dienstverhaeltnis_unternehmen;\n                    delete payload.fachbereich_bezeichnung;\n                    delete payload.funktion_oebezeichnung;\n                    delete payload.aktiv;\n                    delete payload.funktion_beschreibung;\n                    const r = await $api.call(ApiPerson.upsertPersonJobFunction(payload));\n                    if (r.meta.status == \"success\") {\n                        // fetch all data because of all the references in the changed record\n                        await fetchData();\n                        console.log('job function successfully saved');\n                        theModel.value.updateHeader();\n                        showToast();\n                    }  \n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)            \n                } finally {\n                    isFetching.value = false\n                }\n                \n                hideModal();\n            }\n        }\n\n        // -------------\n        // form handling\n        // -------------\n\n        const jobFunctionFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ beginnBlurred: false, orgetBlurred: false, funktionBlurred: false, wasValidated: false });       \n\n        const notEmpty = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validate = () => {\n            frmState.orgetBlurred = true;\n            frmState.funktionBlurred = true;\n            frmState.beginnBlurred = true;\n            return notEmpty(currentValue.value.datum_von) && \n                notEmpty(currentValue.value.oe_kurzbz) && \n                notEmpty(currentValue.value.funktion_kurzbz);\n        }\n        \n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n\n        const formatDate = (d) => {\n            if (d != null && d != '') {\n\t\t        return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n            } else {\n                return ''\n            }\n        }\n        \n        const showToast = () => {\n            $fhcAlert.alertSuccess(t('person','funktionGespeichert'));\n        }\n\n        const showDeletedToast = () => {\n            $fhcAlert.alertSuccess(t('person','funktionGeloescht'));\n        }\n\n        const fetchOrgUnits = async (unternehmen_kurzbz) => {\n            if( unternehmen_kurzbz === '' ) {\n                return;\n            }\n            const response = await $api.call(ApiFunktion.getOrgetsForCompany(unternehmen_kurzbz));\n            const orgets = response.data;\n            orgets.unshift({\n              value: '',\n              label: t('ui','bitteWaehlen'),\n            });\n            orgUnitList.value = await  orgets;\n        }\n\n        const fetchFunctions = async (uid, unternehmen_kurzbz) => {\n            if(unternehmen_kurzbz === '' || uid === '' ) { \n              return;  \n            }\n            const response = await $api.call(ApiFunktion.getAllFunctions());\n            const benutzerfunktionen = response.data;\n            benutzerfunktionen.unshift({\n              value: '',\n              label: t('ui','bitteWaehlen'),\n            });\n            jobfunctionDefList.value = benutzerfunktionen;\n          }\n\n        const unternehmenSelectedHandler = (e) => {\n            unternehmen.value = e;\n        }\n \n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const fullPath = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/`;\n\n        return { \n            jobfunctionList, orgUnitList, jobfunctionListArray,\n            jobfunctionDefList,\n            currentValue,\n            readonly,\n            frmState,\n            dialogRef,\n            jobFunctionFrm,\n            modalRef,\n            fullPath,\n            route,\n            aktivChecked,\n            unternehmen,\n            tabulator,\n            table,\n            \n            toggleMode, formatDate, notEmpty,            \n            showAddModal, hideModal, okHandler,\n            showEditModal, t, unternehmenSelectedHandler,\n         }\n    },\n    template: `\n    <div class=\"row\" v-if=\"readonlyMode === false\">\n        \n    </div>\n    <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5\"><h5>{{ t('person','funktionen') }}</h5></div>        \n                </div>\n\n                <div class=\"card-body\">\n                    <div class=\"d-grid d-md-flex justify-content-between pt-2 pb-3\" v-if=\"readonlyMode === false\">\n                        <button type=\"button\" class=\"btn btn-sm btn-primary me-3\" @click=\"showAddModal()\">\n                            <i class=\"fa fa-plus\"></i> {{ t('person','funktion') }}\n                        </button>\n                        <div class=\"form-check\">\n                            <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"aktivChecked\" v-model=\"aktivChecked\">\n                            <label class=\"form-check-label\" for=\"aktivChecked\">Nur aktive anzeigen</label>\n                        </div>\n                    </div>\n\n                    <!-- TABULATOR -->\n                    <div ref=\"table\" class=\"fhc-tabulator\"></div>\n                \n                </div>\n             </div>\n         </div>\n    </div>\n            \n\n    <!-- detail modal -->\n    <Modal :title=\"t('person','funktion')\" ref=\"modalRef\" v-if=\"readonlyMode === false\">\n        <template #body>\n            <form class=\"row g-3\" ref=\"jobFunctionFrm\">\n                            \n                <div class=\"col-md-8\">\n                    <label class=\"form-label\">{{ t('core','unternehmen') }}</label><br>\n                    <org-chooser  @org-selected=\"unternehmenSelectedHandler\" :oe=\"unternehmen\" class=\"form-select form-select-sm\"></org-chooser>\n                </div>\n                <div class=\"col-md-4\">\n                </div>\n                <!--  -->\n                <div class=\"col-md-8\">\n                    <label class=\"required form-label\">{{ t('lehre','organisationseinheit') }}</label><br>\n                    <select id=\"oe_kurzbz\" v-model=\"currentValue.oe_kurzbz\" \n                        @blur=\"frmState.orgetBlurred = true\"\n                        class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" \n                        :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !notEmpty(currentValue.oe_kurzbz) && frmState.orgetBlurred}\"\n                        >\n                        <option v-for=\"(item, index) in orgUnitList\" :value=\"item.value\">\n                            {{ item.label }}\n                        </option>                       \n                    </select>\n                </div>\n                <div class=\"col-md-4\">\n                </div>\n                <!--  -->\n                <div class=\"col-md-8\">\n                    <label for=\"funktion_kurzbz\" class=\"required form-label\">{{ t('person','funktion') }}</label><br>\n                    <select id=\"_kurzbz\" v-model=\"currentValue.funktion_kurzbz\" \n                        @blur=\"frmState.funktionBlurred = true\"\n                        class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" \n                        :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly, 'is-invalid': !notEmpty(currentValue.funktion_kurzbz) && frmState.funktionBlurred}\"\n                        >\n                        <option v-for=\"(item, index) in jobfunctionDefList\" :value=\"item.value\">\n                            {{ item.label }}\n                        </option>                       \n                    </select>\n                </div>\n                <div class=\"col-md-4\"></div>\n                <!-- -->\n                <div class=\"col-md-2\">\n                    <label for=\"uid\" class=\"form-label\">{{ t('person','wochenstunden') }}</label>\n                    <input type=\"number\"  :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly}\" id=\"bank\" v-model=\"currentValue.wochenstunden\">\n                </div>\n                <!--  -->\n                <div class=\"col-md-3\">\n                    <label for=\"beginn\" class=\"required form-label\">{{ t('ui','from') }}</label>\n                    <datepicker id=\"beginn\"\n                        :teleport=\"true\" \n                        @blur=\"frmState.beginnBlurred = true\" \n                        :input-class-name=\"(!notEmpty(currentValue.datum_von) && frmState.beginnBlurred) ? 'dp-invalid-input' : ''\" \n                        v-model=\"currentValue.datum_von\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>\n                </div>\n                <div class=\"col-md-3\">\n                    <label for=\"ende\" class=\"form-label\">{{ t('global','bis') }}</label>\n                    <datepicker id=\"ende\"\n                        :teleport=\"true\" \n                        v-model=\"currentValue.datum_bis\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>                   \n                </div>\n                <div class=\"col-md-3\">\n                </div>\n                <!-- -->\n                <div class=\"col-md-8\">\n                    <label for=\"bezeichnung\" class=\"form-label\">{{ t('ui','bezeichnung') }}</label>\n                    <input type=\"text\"  :readonly=\"readonly\" class=\"form-control-sm\" :class=\"{ 'form-control-plaintext': readonly, 'form-control': !readonly}\" id=\"bezeichnung\" v-model=\"currentValue.bezeichnung\">\n                </div>\n                <div class=\"col-md-4\">\n                </div>\n                \n                \n                <!-- changes -->\n                <div class=\"col-8\">\n                    <div class=\"modificationdate\">{{ currentValue.insertamum }}/{{ currentValue.insertvon }}, {{ currentValue.updateamum }}/{{ currentValue.updatevon }} [id={{ currentValue.benutzerfunktion_id }}]</div>\n                </div>\n                \n            </form>\n        </template>\n        <template #footer>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n                {{ t('ui','speichern') }}\n            </button>\n        </template>\n\n    </Modal>\n\n    <ModalDialog :title=\"t('global','warnung')\" ref=\"dialogRef\" v-if=\"readonlyMode === false\">\n      <template #body>\n        {{ t('person','funktionNochNichtGespeichert') }}\n      </template>\n    </ModalDialog>\n\n    `\n}\n\nexport default JobFunction;","export default {\n\tcreated(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tel.style.cursor = 'pointer';\n\t\t\t\tconst [prev, next] = binding.modifiers.vertical ? ['ArrowUp', 'ArrowDown'] : ['ArrowLeft', 'ArrowRight'];\n\t\t\t\tel.addEventListener('click', () => {\n\t\t\t\t\tlet act = el.parentNode.querySelector('[tabindex=\"0\"]');\n\t\t\t\t\tif (act)\n\t\t\t\t\t\tact.tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t});\n\t\t\t\tel.addEventListener('focus', () => {\n\t\t\t\t\tel.ariaSelected = \"true\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('blur', () => {\n\t\t\t\t\tel.ariaSelected = \"false\";\n\t\t\t\t});\n\t\t\t\tel.addEventListener('keydown', e => {\n\t\t\t\t\tswitch (e.code) {\n\t\t\t\t\t\tcase prev:\n\t\t\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.previousSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase next:\n\t\t\t\t\t\t\tif (el.nextSibling?.tabIndex !== undefined) {\n\t\t\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t\t\t\t\tel.nextSibling.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\t\tel.click();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tmounted(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tlet activetab = -1;\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tnode.ariaPosInSet = index;\n\t\t\t\t\tif (node.tabIndex === 0)\n\t\t\t\t\t\tactivetab = index;\n\t\t\t\t});\n\t\t\t\tif (activetab == -1) {\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else if (el.classList.contains('active')) {\n\t\t\t\t\tel.parentNode.children[activetab].tabIndex = -1;\n\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t} else {\n\t\t\t\t\tel.tabIndex = -1;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tswitch (binding.arg) {\n\t\t\tcase 'tab':\n\t\t\t\tif (el.tabIndex === 0) {\n\t\t\t\t\tif (el.previousSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.previousSibling.tabIndex = 0;\n\t\t\t\t\telse if (el.nextSibling?.tabIndex !== undefined)\n\t\t\t\t\t\tel.nextSibling.tabIndex = 0;\n\t\t\t\t}\n\t\t\t\tconst pos = parseInt(el.ariaPosInSet);\n\t\t\t\tArray.from(el.parentNode.children).forEach((node, index) => {\n\t\t\t\t\tnode.ariaSetSize = el.parentNode.children.length;\n\t\t\t\t\tif (index > pos)\n\t\t\t\t\t\tnode.ariaPosInSet = index-1;\n\t\t\t\t});\n\t\t\tbreak;\n\t\t}\n\t}\n}","import accessibility from \"../directives/accessibility.js\";\n\nimport TabView from '../../../index.ci.php/public/js/components/primevue/tabview/tabview.esm.min.js';\nimport TabPanel from '../../../index.ci.php/public/js/components/primevue/tabpanel/tabpanel.esm.min.js';\n\nexport default {\n\tcomponents: {\n\t\ttabview: TabView,\n\t\ttabpanel: TabPanel\n\t},\n\tdirectives: {\n\t\taccessibility\n\t},\n\temits: [\n\t\t'update:modelValue',\n\t\t'change',\n\t\t'changed'\n\t],\n\tprops: {\n\t\tconfig: {\n\t\t\ttype: [String, Array, Object, Promise],\n\t\t\trequired: true\n\t\t},\n\t\tdefault: String,\n\t\tmodelValue: [String, Number, Boolean, Array, Object, Date, Function, Symbol],\n\t\tvertical: Boolean,\n\t\tborder: Boolean,\n\t\tuseprimevue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrent: null,\n\t\t\ttabs: {}\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentTab() {\n\t\t\tif (this.tabs[this.current])\n\t\t\t\treturn this.tabs[this.current];\n\n\t\t\treturn { component: 'div' };\n\t\t},\n\t\tvalue: {\n\t\t\tget() {\n\t\t\t\treturn this.modelValue;\n\t\t\t},\n\t\t\tset(v) {\n\t\t\t\tthis.$emit('update:modelValue', v);\n\t\t\t}\n\t\t},\n\t\tcalcActiveIndex: function() {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tlet index = keys.indexOf(this.default);\n\t\t\tif( index === -1 ) {\n\t\t\t\treturn 0;\n\t\t\t} else {\n\t\t\t\treturn index;\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tconfig(n) {\n\t\t\tthis.initConfig(n);\n\t\t}\n\t},\n\tmethods: {\n\t\thandleTabClick: function (e) {\n\t\t\tlet keys = Object.keys(this.tabs);\n\t\t\tthis.change(keys[e.index]);\n\t\t},\n\t\tchange(key) {\n\t\t\tthis.$emit(\"change\", key)\n\t\t\tthis.current = key;\n\t\t\tthis.$nextTick(() => this.$emit(\"changed\", key));\n\t\t},\n\t\tinitConfig(config) {\n\t\t\tif (!config)\n\t\t\t\treturn;\n\t\t\tif (config instanceof Promise)\n\t\t\t\treturn config\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\t\t\tif (typeof config === 'string' || config instanceof String)\n\t\t\t\treturn this.$api\n\t\t\t\t\t.get(config)\n\t\t\t\t\t.then(result => result.data)\n\t\t\t\t\t.then(this.initConfig)\n\t\t\t\t\t.catch(this.$fhcAlert.handleSystemError);\n\n\t\t\tconst tabs = {};\n\n\t\t\tfunction _addToTabs(key, item) {\n\t\t\t\tif (!item.component)\n\t\t\t\t\treturn console.error('Component missing for ' + key);\n\n\t\t\t\t//making it reactive for showing headerSuffix\n\t\t\t\tconst value = Vue.reactive({\n\t\t\t\t\tsuffix: '',\n\t\t\t\t\tshowSuffix: item.showSuffix || false\n\t\t\t\t});\n\n\t\t\t\ttabs[key] = {\n\t\t\t\t\tcomponent: Vue.markRaw(Vue.defineAsyncComponent(() => import(item.component))),\n\t\t\t\t\ttitle: Vue.computed(() => item.title || key),\n\t\t\t\t\tconfig: item.config,\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue,\n\t\t\t\t\tsuffixhelper: item.suffixhelper ?? null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t\tconfig.forEach((item, key) => _addToTabs(key, item));\n\t\t\telse\n\t\t\t\tObject.entries(config).forEach(([key, item]) => _addToTabs(key, item));\n\n\t\t\tif (this.current === null || !tabs[this.current]) {\n\t\t\t\tif (tabs[this.default])\n\t\t\t\t\tthis.current = this.default;\n\t\t\t\telse\n\t\t\t\t\tthis.current = Object.keys(tabs)[0];\n\t\t\t}\n\t\t\tthis.tabs = tabs;\n\t\t},\n\t\tupdateSuffix() {\n\t\t\tthis.getTabSuffix(this.currentTab);\n\t\t},\n\t\tasync getTabSuffix(tab) {\n\t\t\tif (!tab.value.showSuffix) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (tab.suffixhelper !== null) {\n\t\t\t\tconst suffixhelper = await import(tab.suffixhelper);\n\t\t\t\tconst suffix = await suffixhelper.getSuffix(this.$api, this.modelValue);\n\t\t\t\ttab.value.suffix = suffix;\n\t\t\t} else {\n\t\t\t\ttab.value.suffix = '';\n\t\t\t}\n\t\t},\n\t\tgetTabSuffixes() {\n\t\t\tObject.entries(this.tabs).forEach(([key, item]) => this.getTabSuffix(item));\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.initConfig(this.config);\n\t},\n\tmounted() {\n\t\tthis.getTabSuffixes();\n\t},\n\tupdated() {\n\t\tthis.getTabSuffixes();\n\t},\n\ttemplate: `\n\t<template v-if=\"useprimevue\">\n\n\t\t<tabview\n\t\t\tclass=\"d-flex flex-column\"\n\t\t\t:scrollable=\"true\"\n\t\t\t:lazy=\"true\"\n\t\t\t:activeIndex=\"calcActiveIndex\"\n\t\t\t:pt=\"{navContainer:{style: 'flex: 0 0 auto;'}, panelContainer:{class: 'overflow-y-scroll', style: 'flex: 1 1 auto;'}}\"\n\t\t\t@tab-click=\"handleTabClick\"\n\t\t>\n\t\t\t<tabpanel\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\t:header=\"tab.title + ((tab.value.showSuffix && tab.value.suffix !== '') ? ' ' + tab.value.suffix : '')\"\n\t\t\t>\n\t\t\t\t<keep-alive>\n\t\t\t\t\t<component\n\t\t\t\t\t\t:is=\"tab.component\"\n\t\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t\t:config=\"tab.config\"\n\t\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t\t></component>\n\t\t\t\t</keep-alive>\n\t\t\t</tabpanel>\n\t\t</tabview>\n\n\t</template>\n\t<template v-else=\"\">\n\n\t<div class=\"fhc-tabs d-flex\" :class=\"vertical ? 'align-items-stretch gap-3' : (border ? 'flex-column' : 'flex-column gap-3')\" v-if=\"Object.keys(tabs).length\">\n\t\t<div class=\"nav\" :class=\"vertical ? 'nav-pills flex-column' : 'nav-tabs'\">\n\n\t\t\t<div\n\t\t\t\tv-for=\"tab in tabs\"\n\t\t\t\t:key=\"tab.key\"\n\t\t\t\tclass=\"nav-item nav-link\"\n\t\t\t\t:class=\"{active: tab.key == current}\"\n\t\t\t\t@click=\"change(tab.key)\"\n\t\t\t\t:aria-current=\"tab.key == current ? 'page' : ''\"\n\t\t\t\tv-accessibility:tab.[vertical]\n\t\t\t\t>\n\t\t\t\t{{tab.title}} <span v-if=\"tab.value.showSuffix && tab.value.suffix\"> {{ tab.value.suffix }}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :style=\"vertical ? '' : 'flex: 1 1 0%; height: 0%'\" class=\"overflow-auto flex-grow-1\" :class=\"vertical || !border ? '' : 'p-3 border-bottom border-start border-end'\">\n\t\t\t<keep-alive>\n\t\t\t\t<component\n\t\t\t\t\tref=\"current\"\n\t\t\t\t\t:is=\"currentTab.component\"\n\t\t\t\t\tv-model=\"value\"\n\t\t\t\t\t:config=\"currentTab.config\"\n\t\t\t\t\t@update:suffix=\"updateSuffix($event)\"\n\t\t\t\t\t></component>\n\t\t\t</keep-alive>\n\t\t</div>\n\t</div>\n\n\t</template>`\n};\n\n","import { BaseData } from './BaseData.js';\nimport { EmployeeData } from './EmployeeData.js';\nimport { BankData } from './BankData.js';\nimport { ContactData } from './contact/ContactData.js';\nimport { MaterialExpensesData } from './MaterialExpensesData.js';\nimport { HourlyRateData } from './HourlyRateData.js';\nimport { JobFunction } from './JobFunction.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport FhcTabs from '../../../../../../public/js/components/Tabs.js';\n\nexport const EmployeePerson = {\n\tname: 'EmployeePerson',\n    components: {\n\t\tBaseData,\n\t\tEmployeeData,\n\t\tBankData,\n\t\tContactData,\n\t\tMaterialExpensesData,\n\t\tHourlyRateData,\n    JobFunction,\n    FhcTabs,\n\t},\n    props: {\n        id: Number,\n        uid: String,\n    },\n    emits: ['updateHeader'],\n    setup(props, { emit }) {\n\n        const { t } = usePhrasen();\n        const theModel = Vue.reactive({personID: null, personUID: null,editmode: true, updateHeader: () => emit('updateHeader')});\n        const path = Vue.ref(\"/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/TabsConfigAPI/Stammdaten\")\n\n        theModel.personID = props.id\n        theModel.personUID = props.uid\n        theModel.restricted = props.restricted\n\n        return { t, theModel, path }\n\n    },\n    template: `\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n      <div class=\"container-fluid\">\n    \n        <fhc-tabs \n            :config=\"path\" \n            style=\"flex: 1 1 0%; height: 0%\"\n            :vertical=\"true\"\n            v-model=\"theModel\">\n        </fhc-tabs>\n\n      </div>\n    </div>\n    `\n\n}\n\nexport default EmployeePerson;","export default {\n  getCurrentVBs(dvid) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentVBs/' \n            + dvid;\n    return {\n      method: 'get',\n      url,\n    }\n  },\n  getCurrentAndFutureVBs(dvid, options) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentAndFutureVBs/' \n            + dvid;\n      if( typeof options !== 'undefined' ) {\n        const params = new URLSearchParams(options);\n        url = url + '?' + params.toString();\n      }\n      return {\n        method: 'get',\n        url,\n      }\n  },\n  getAllVBs(dvid) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getAllVBs/' \n            + dvid;\n    return {\n      method: 'get',\n      url,\n    }\n  },\n  getVB(vbid) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getVB/' \n            + vbid;\n    return {\n      method: 'get',\n      url,\n    }\n  }\n};\n","export default {\n  filterPerson(searchVal) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/filterPerson',\n      params: searchVal\n    }\n  },\n  createEmployee(employeeData) {   \n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/createEmployee',\n      params: employeeData\n    }\n  },\n  personAbteilung(uid) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/personAbteilung',\n      params: { uid }\n    }\n  },\n  personHeaderData(personID, uid) { \n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/headerData',\n      params: { person_id: personID, uid: uid }\n    }\n  },\n  dvByPerson(uid) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvByPerson',\n      params: {  uid: uid }\n    }\n  },\n  getCurrentDV(uid, ts) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getCurrentDV',\n      params: { uid: uid, d: ts }\n    }\n  },\n  deleteDV(dv_id) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/deleteDV',\n      params: { dv_id: dv_id  }\n    }\n  },\n  uploadPersonEmployeeFoto(person_id, imagedata) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/uploadPersonEmployeeFoto',\n      params: {person_id: person_id,imagedata: imagedata}\n    }\n  },\n  deletePersonEmployeeFoto(person_id) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/deletePersonEmployeeFoto',\n      params: {person_id}\n    }\n  },\n  getEmployeesWithoutContract() {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getEmployeesWithoutContract',\n    }\n  },\n  dvInfoByPerson(uid) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvInfoByPerson',\n      params: {uid}\n    }\n  },\n};\n","import ApiVertragsbestandteil from '../../api/factory/vertragsbestandteil.js';\nimport ApiEmployee from '../../api/factory/employee.js';\n\nexport const EmployeeStatus = {\n\tname: 'EmployeeStatus',\n    props: {\n      tags: {\n          default: [],\n          type: Array\n      }\n    },\n    expose: ['refresh'],\n    setup( props ) {\n\n        const { watch, ref, reactive, computed, onMounted, inject } = Vue;\n        const route = VueRouter.useRoute();\n        const router = VueRouter.useRouter()\n        const currentPersonID = ref();\n        const currentPersonUID  = ref();\n        const dvList = ref([]);\n        const vertragList = ref([]);\n        const currentDate = ref(new Date());\n        const isFetching = ref(false);   \n        const vertragsarten = inject('vertragsarten');\n        const karenztypen = inject('karenztypen');\n        const teilzeittypen = inject('teilzeittypen');\n        const $api = inject('$api')   \n        \n        const formatVertragsart = (item) => {\n          let va = vertragsarten.value.find(kt => kt.value == item);\n          return va != undefined ? va.label : item;\n        }\n\n        const formatKarenztyp = (item) => {\n          let karenztyp = karenztypen.value.find(kt => kt.value == item);\n          return karenztyp != undefined ? karenztyp.label : item;\n        }\n\n        const formatTeilzeittyp = (item) => {\n          let teilzeittyp = teilzeittypen.value.find(kt => kt.value == item);\n          return teilzeittyp != undefined ? teilzeittyp.label : item;\n        }\n\n        let statusList = Vue.ref([]);    \n\n        const statusTags = Vue.ref(props.tags)\n\n        const generateStatusList = () => {\n          let anzDV = 0;\n          let dvIDs = [];\n          statusList.value = [];\n          dvList.value.forEach((dv) => {\n             let von = new Date(dv.von);\n             let bis = dv.bis != null ? new Date(dv.bis) : null;\n             if (currentDate.value >= von && (bis == null || bis >= currentDate.value)) {\n                 anzDV++;\n                 let vaExists = statusList.value.find((item) => item.text == formatVertragsart(dv.vertragsart_kurzbz))\n                 if (!vaExists) {\n                     statusList.value.push({text: formatVertragsart(dv.vertragsart_kurzbz), description: '', css: 'bg-dv rounded-0'})\n                 }\n                 dvIDs.push(dv.dienstverhaeltnis_id)\n             }\n          })\n          if (anzDV > 1) {\n            statusList.value.unshift({text: 'parallele DVs', description:'', css: 'bg-dv rounded-0'});\n          } else if (anzDV == 0) {\n            statusList.value.unshift({text: 'derzeit kein aktives DV', description:'', css: 'bg-dv rounded-0'});\n          }\n          console.log(\"dvIDs\", dvIDs)\n          Promise.all(dvIDs.map((dvID) => $api.call(ApiVertragsbestandteil.getCurrentVBs(dvID)))).then(\n            (allData) => {\n              allData.map((item) => {\n                item.data.map((vbs => {\n                  switch (vbs.vertragsbestandteiltyp_kurzbz) {\n                    case 'freitext':\n                      if (vbs.freitexttyp_kurzbz == 'befristung') {\n                        statusList.value.push({text: 'Befristung', description: '', css: 'bg-dv rounded-0'})\n                      } else if (vbs.freitexttyp_kurzbz == 'allin') {\n                        statusList.value.push({text: 'All-In', description: '', css: 'bg-allin rounded-0'})\n                      } else if (vbs.freitexttyp_kurzbz == 'ersatzarbeitskraft') {\n                        statusList.value.push({text: 'Ersatzarbeitskraft', description: '', css: 'bg-dv rounded-0'})\n                      }\n                      break;\n                    case 'karenz':\n                        statusList.value.push({text: formatKarenztyp(vbs.karenztyp_kurzbz), description: '', css: 'bg-karenz rounded-0'})\n                      break;\n                    case 'stunden':\n                      if (vbs.teilzeittyp_kurzbz != undefined) {\n                        statusList.value.push({text: formatTeilzeittyp(vbs.teilzeittyp_kurzbz), description: '', css: 'bg-teilzeit rounded-0'})\n                      }\n                      break;\n                    default:\n                      break;\n                  }                  \n                }))\n              })\n            }\n          );\n          \n        }  \n\n        const fetchData = async (uid) => {\n          if (uid == null) {\n              dvList.value = [];\n              vertragList.value = [];\n              return;\n          }\n          isFetching.value = true\n          try {\n              const res = await $api.call(ApiEmployee.dvByPerson(uid));\n              dvList.value = res.data || [];          \n              isFetching.value = false;\n              generateStatusList();           \n          } catch (error) {\n              console.log(error)\n              isFetching.value = false\n          }\n        }\n\n        onMounted(async () => {\n          await router.isReady()\n          console.log('route.path', route.path)\n          currentPersonID.value = route.params.id\n          currentPersonUID.value = route.params.uid         \n          currentDate.value = new Date()    \n          fetchData(currentPersonUID.value)\n        })\n      \n        watch(\n          () => route.params.uid,\n          (newVal) => {   \n              currentPersonID.value = route.params.id;\n              currentPersonUID.value = newVal;           \n              currentDate.value = new Date();     \n              fetchData(currentPersonUID.value);\n          }\n        )\n\n        watch(\n            () => props.tags,\n            (newVal) => {\n                statusTags.value = newVal\n            },\n            { deep: true }\n        )\n\n        const refresh = () => {\n          fetchData(currentPersonUID.value);\n        }\n\n        return {statusList, statusTags, refresh};\n    },\n    template: `\n    <div class=\"d-flex align-items-start ms-sm-auto col-lg-12  gap-2 mt-auto\" >\n        <template v-for=\"item in statusTags\">\n            <span class=\"badge\" :class=\"(item?.css != undefined) ? item.css : 'bg-secondary rounded-0'\" >{{ item.text }}</span>\n        </template>\n        <template v-for=\"item in statusList\">\n            <span class=\"badge\" :class=\"(item?.css != undefined) ? item.css : 'bg-secondary rounded-0'\" >{{ item.text }}</span>\n        </template>\n    </div>   \n   `\n}","export default {\n\n  byPerson(person_id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/issue/byPerson',  \n      params: { person_id }\n    }\n  },\n\n  countPersonOpenIssues(person_id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/IssueChecker/countPersonOpenIssues/'\n            + person_id,  \n    }\n  },\n\n  checkPerson(person_id) {\n    return {\n\t\t\tmethod: 'post',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/IssueChecker/checkPerson/'\n            + person_id,  \n\t\t}\n  },\n\n  openIssuesPersons() {\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/issue/PersonenMitOffenenIssues',  \n\t\t}\n  },\n  \n};\n","import { Modal } from '../Modal.js';\nimport { ModalDialog } from '../ModalDialog.js';\nimport { EmployeeStatus } from './EmployeeStatus.js';\nimport ApiEmployee from '../../api/factory/employee.js';\nimport ApiIssue from '../../api/factory/issue.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\n\nexport const EmployeeHeader = {\n\tname: 'EmployeeHeader',\n    components: {\n\t\tModal,\n        ModalDialog,\n        \"p-skeleton\": primevue.skeleton,\n        EmployeeStatus,\n\t},\n    props: {\n        personID: Number,\n        personUID: String,\n        restricted: Boolean,\n    },\n    expose: ['refresh'],\n    emits: ['personSelected'],\n    setup(props, { emit }) {\n\n        /* const route = VueRouter.useRoute();\n        const router = VueRouter.useRouter(); */\n        const { watch, ref, onMounted, inject } = Vue;\n        const currentPersonID = Vue.computed(() => { return props.personID });\n        const currentPersonUID = Vue.computed(() => { return props.personUID });\n\n        const employee = ref();\n        const fileInput = ref();\n        const previewImage = ref();\n        const statusRef = ref();\n        const { t } = usePhrasen();\n\n        const isFetching = ref(false);\n        const isFetchingName = ref(false);\n        const isFetchingIssues = ref(false);\n        const $api = inject('$api')     \n        const $fhcAlert = Vue.inject('$fhcAlert')   \n\n       //const currentDate = ref(null);\n\n        const openissuescount = ref();\n\n        const formatDate = (ds) => {\n            if (ds == null) return '';\n            var d = new Date(ds);\n            return d?.toISOString().substring(0,10);\n        }\n\n        const fetchHeaderData = async (personID, uid) => {\n            isFetching.value = true;\n            isFetchingName.value = true;\n            try {\n                // fetch header data\n                const res = await $api.call(ApiEmployee.personHeaderData(personID, uid));\n                employee.value = res.data[0];\n                isFetchingName.value = false;\n                // fetch abteilung (needs uid from previous fetch!)\n                const resAbteilung = await $api.call(ApiEmployee.personAbteilung(employee.value.uid));\n               // response = await resAbteilung.json();\n                employee.value = { ...employee.value, ...{ abteilung: resAbteilung.data } };\n            } catch (error) {\n                console.log(error);\n            } finally {\n                isFetching.value = false;\n                isFetchingName.value = false;\n            }\n        };\n\n        const fetchOpenIssuesCount = async(personID) => {\n            isFetchingIssues.value = true;\n            try {\n                const res = await $api.call(ApiIssue.countPersonOpenIssues(personID));\n                openissuescount.value = res.data.openissues;\n            } catch (error) {\n                console.log(error);\n            } finally {\n                isFetchingIssues.value = false;\n            }\n        };\n\n        const checkPerson = async() => {\n            isFetchingIssues.value = true;\n            try {\n                const res = await $api.call(ApiIssue.checkPerson(props.personID));\n                openissuescount.value = res.data.openissues;\n            } catch (error) {\n                console.log(error);\n            } finally {\n                isFetchingIssues.value = false;\n            }\n        };\n\n        Vue.watch([currentPersonID, currentPersonUID], ([id,uid]) => {\n            if (currentPersonID.value!=null) {\n                fetchHeaderData(id, uid);\n                fetchOpenIssuesCount(id);\n            } else {\n                previewImage.value = null;\n                fileInput.value.value = null;\n            }\n        });\n\n        onMounted(() => {\n            //currentDate.value = route.query.d || new Date();\n            if (props.personID, props.personUID) {\n                fetchHeaderData(props.personID, props.personUID);\n                fetchOpenIssuesCount(props.personID);\n            }\n\n            if (modalRef.value)\n            {\n                modalRef.value.$el.addEventListener(\"hidden.bs.modal\", () => {\n                    resetPreview();\n                });\n            }\n        })\n\n        const pickFile = () => {\n            let input = fileInput.value\n            let file = input.files\n            if (file && file[0]) {\n                let reader = new FileReader();\n                reader.onload = (e) => {\n                    previewImage.value = e.target.result\n                }\n                reader.readAsDataURL(file[0])\n            }\n        }\n\n        const postFile = async () => {\n            try  {\n                isFetching.value = true\n                const res = await $api.call(ApiEmployee.uploadPersonEmployeeFoto(props.personID,previewImage.value));\n                if (res?.meta?.status != 'success') \n                {\n                    $fhcAlert.alertError(t('person', res.data))\n                }\n                else\n                {                    \n                    $fhcAlert.alertSuccess(t('person', 'Foto gespeichert.'))\n                }\n                fetchHeaderData(props.personID, props.personUID);\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)  \n            } finally {\n                isFetching.value = false;\n            }\n        }\n\n\n        const postDeleteFile = async () => {\n            try  {\n                isFetching.value = true\n                const res = await $api.call(ApiEmployee.deletePersonEmployeeFoto(props.personID));\n                fetchHeaderData(props.personID, props.personUID);\n                $fhcAlert.alertSuccess(t('person','Foto gelöscht'))\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)  \n            } finally {\n                isFetching.value = false;\n            }\n        }\n\n        // Modal\n        let modalRef = ref();\n\n        const showModal = () => {\n            modalRef.value.show();\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n\n        const showDeleteModal = async () => {\n\n            if (await $fhcAlert.confirm({\n                    message:`Foto wirklich löschen?`,\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n                return;\n            }     \n\n            postDeleteFile();\n          }\n\n        const okHandler = () => {\n            // console.log(\"previewImage: \", previewImage.value);\n            postFile();\n            hideModal();\n        }\n\n        const resetPreview = () => {\n            previewImage.value = null;\n            fileInput.value.value = null;\n        }\n\n        const redirect = (person_id, uid) => {\n            emit('personSelected', { person_id, uid });\n            // window.location.href = `${protocol_host}/index.ci.php/extensions/FHC-Core-Personalverwaltung/Employees/summary?person_id=${person_id}`;\n          }\n\n        const refresh = () => {\n            fetchHeaderData(props.personID, props.personUID);\n            checkPerson(props.personID);\n            statusRef.value.refresh();\n        }\n\n        const getStatusTags = ()=> {\n            const statusArr = []\n\n            if(employee?.value?.unruly) {\n                statusArr.push({text: 'Unruly', css: 'bg-unruly rounded-0'})\n            }\n\n            return statusArr\n        }\n\n        return {\n            showModal,\n            hideModal,\n            resetPreview,\n            modalRef,\n            showDeleteModal,\n            pickFile,\n            okHandler,\n            statusRef,\n            redirect,\n            FHC_JS_CONFIG,\n            getStatusTags,\n            employee,\n            fileInput,\n            previewImage,\n            isFetching,\n            isFetchingName,\n            isFetchingIssues,\n            currentPersonID,\n            currentPersonUID,\n            // currentDate,\n            formatDate,\n            //setDateHandler,\n            checkPerson,\n            refresh,\n            openissuescount,\n        }\n    },\n    template: `\n\n        <div class=\"d-flex justify-content-between ms-sm-auto col-lg-12 p-md-2\" >\n            <div class=\"d-flex align-items-top flex-fill\" >\n\n                <div class=\"fotocontainer\" v-if=\"!isFetchingName\">\n                    <img v-if=\"employee?.foto\" class=\"rounded\" style=\"max-width:101px\" :src=\"'data:image/jpeg;charset=utf-8;base64,' + employee?.foto\" />\n                    <div v-if=\"employee?.foto && !restricted\" class=\"fotobutton\" >\n                        <div class=\"d-grid gap-2 d-md-flex \">\n                                <button type=\"button\" class=\"btn btn-outline-dark btn-sm\" @click=\"showDeleteModal\">\n                                    <i class=\"fa fa-xmark\"></i>\n                                </button>\n                                <button type=\"button\" class=\"btn btn-outline-dark btn-sm\" @click=\"showModal\">\n                                    <i class=\"fa fa-pen\"></i>\n                                </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div v-if=\"employee?.foto==undefined  || isFetchingName\" style=\"position:relative\">\n                    <svg  class=\"bd-placeholder-img rounded\" width=\"100\" height=\"131\" xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-label=\"A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera: 200x200\" preserveAspectRatio=\"xMidYMid slice\" focusable=\"false\"><title>A generic square placeholder image with a white border around it, making it resemble a photograph taken with an old instant camera</title><rect width=\"100%\" height=\"100%\" fill=\"#868e96\"></rect><text x=\"50%\" y=\"50%\" fill=\"#dee2e6\" dy=\".3em\"></text></svg>\n                    <div class=\"fotobutton-visible\" v-if=\"!restricted && !isFetchingName\">\n                        <div class=\"d-grid gap-2 d-md-flex \">\n                            <button type=\"button\" class=\"btn btn-outline-dark btn-sm\" @click=\"showModal\" >\n                                <i class=\"fa fa-pen\"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"ms-3 flex-fill d-flex flex-column\" >\n                    <div class=\"align-items-top\">\n                        <h2 class=\"h4\" v-if=\"!isFetchingName\">{{ employee?.titelpre }} {{ employee?.vorname }} {{ employee?.nachname }}<span v-if=\"employee?.titelpost != null && employee?.titelpost != ''\">, {{ employee?.titelpost }}</span></h2>\n                        <h2 class=\"h4\" v-else><p-skeleton style=\"width:30%\"></p-skeleton></h2>\n\n                        <div v-if=\"employee?.abteilung && !isFetching\" class=\"mb-1\">\n                            <template v-for=\"(item, index) in employee?.abteilung\">\n                                <strong class=\"text-muted\">{{ item?.organisationseinheittyp_kurzbz }}</strong> {{ item?.bezeichnung }} |\n                                <strong class=\"text-muted\">Vorgesetzte*r </strong>\n                                <a href=\"#\" @click.prevent=\"redirect(item?.supervisor?.person_id, item?.supervisor?.uid)\" v-if=\"!restricted\">{{ item?.supervisor?.titelpre }} {{ item?.supervisor?.vorname }} {{ item?.supervisor?.nachname }}</a>\n                                <span v-else>{{ item?.supervisor?.titelpre }} {{ item?.supervisor?.vorname }} {{ item?.supervisor?.nachname }}</span>\n                                <br v-if=\"index < employee?.abteilung?.length - 1\" />\n                            </template>\n                            </div>\n                        <div v-else class=\"mb-1\"><p-skeleton v-if=\"isFetching\" style=\"width:45%\"></p-skeleton></div>\n                        <div v-if=\"!isFetchingName\" class=\"mb-1\">\n                            <strong class=\"text-muted\">Email</strong>&nbsp;\n                            <span v-if=\"!employee?.alias\">\n                                <a :href=\"'mailto:'+employee?.uid+'@'+FHC_JS_CONFIG.domain\">{{  employee?.uid }}@{{ FHC_JS_CONFIG.domain }}</a>\n                            </span>\n                            <span v-if=\"employee?.alias\">\n                                <a :href=\"'mailto:'+employee?.alias+'@'+FHC_JS_CONFIG.domain\">{{  employee?.alias }}@{{ FHC_JS_CONFIG.domain }}</a>\n                            </span>\n                            <span v-if=\"employee?.telefonklappe\" class=\"mb-2\"> | <strong class=\"text-muted\">DW</strong> {{  employee?.telefonklappe }}</span>\n                        </div>\n                        <div v-else class=\"mb-1\"><p-skeleton  style=\"width:35%\"></p-skeleton></div>\n                    </div>\n                    <EmployeeStatus v-if=\"!restricted\" ref=\"statusRef\" :tags=\"getStatusTags()\"></EmployeeStatus>\n                </div>\n\n            </div>\n\n            <div class=\"d-flex flex-column\">\n                <div class=\"d-flex py-1\">\n                    <div class=\"px-2\" v-if=\"!restricted\">\n                        <h4 class=\"mb-1\">Issues<a class=\"refresh-issues\" title=\"erneut prüfen\" href=\"javascript:void(0);\" @click=\"checkPerson\"><i class=\"fas fa-sync\"></i></a></h4>\n                        <h6 v-if=\"!isFetchingIssues\" class=\"text-muted\">{{ openissuescount }}</h6>\n                        <h6 v-else class=\"mb-2\"><p-skeleton v-if=\"isFetchingIssues\" style=\"width:45%\"></p-skeleton></h6>\n                    </div>\n                    <div class=\"px-2\">\n                        <h4 class=\"mb-1\">PNr</h4>\n                        <h6 v-if=\"!isFetchingName\" class=\"text-muted\">{{ employee?.personalnummer }}</h6>\n                        <h6 v-else class=\"mb-2\"><p-skeleton v-if=\"isFetching\" style=\"width:45%\"></p-skeleton></h6>\n                    </div>\n                    <div class=\"px-2\" style=\"border-left: 1px solid #EEE\">\n                        <h4 class=\"mb-1\">UID</h4>\n                        <h6 v-if=\"!isFetchingName\" class=\"text-muted\">{{ employee?.uid }}</h6>\n                        <h6 v-else class=\"mb-2\"><p-skeleton v-if=\"isFetching\" style=\"width:45%\"></p-skeleton></h6>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n\n        <!-- FotoModal -->\n        <Modal title=\"Foto\" ref=\"modalRef\">\n            <template #body>\n                <div class=\"mb-3\">\n                    <label for=\"formFile\" class=\"form-label\">Foto upload</label>\n                    <input class=\"form-control\" type=\"file\" id=\"formFile\" ref=\"fileInput\" @input=\"pickFile\" accept=\"image/*\">\n                </div>\n                <div class=\"mb-3\">\n                    <div class=\"imagePreviewWrapper\" >\n                        <img class=\"preview\" :src=\"previewImage\" />\n                    </div>\n                </div>\n\n            </template>\n            <template #footer>\n                <button class=\"btn btn-secondary\"  @click=\"hideModal()\">Abbrechen</button>\n                <button class=\"btn btn-primary\"  @click=\"okHandler()\">OK</button>\n            </template>\n        </Modal>\n\n        `\n}\n","export const EmployeeNav = {\n\tname: 'EmployeeNav',\n    props: {\n        //date: Date,\n    },\n    setup(props, { emit }) {\n        const route = VueRouter.useRoute();\n        const currentDate = Vue.ref(null);\n        const close=() => {\n            console.log(\"close\", route.params.id)\n            emit(\"close-editor\", route.params.id)\n        }\n        Vue.onMounted(() => {\n            currentDate.value = route.query.d;\n        })\n        Vue.watch(\n\t\t\t() => route.query.d,\n\t\t\td => {\n\t\t\t\tcurrentDate.value = d;\n\t\t\t}\n\t\t)\n        const maybeAddDate = () => {\n            if (currentDate.value != null) {\n                return '?d=' + currentDate.value;\n            }\n            return '';\n        }\n\n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const fullPath = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/`;\n        return { close, route, fullPath, currentDate, maybeAddDate }\n    },\n    template: `    \n    <nav\n        class=\"nav nav-tabs nav-justified flex-column flex-sm-row ms-sm-auto mt-3 col-lg-12 subnav\"\n    >\n    \n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/summary' + maybeAddDate()\" \n            class=\"flex-sm-fill text-sm-center nav-link\"\n            :class=\"[{'router-link-active active': route?.name === 'summary'}]\" >\n            Überblick\n        </router-link>\n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + maybeAddDate()\" \n            class=\"flex-sm-fill text-sm-center nav-link\"\n            :class=\"[{'router-link-active active': route?.name === 'person'}]\" >\n            Person\n        </router-link>\n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/contract' + maybeAddDate()\" \n            class=\"flex-sm-fill text-sm-center nav-link\"\n            :class=\"[{'router-link-active active': route.path.indexOf('contract') > -1 }]\" >\n            Dienstverhältnis\n        </router-link>        \n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/time' + maybeAddDate()\" \n        class=\"flex-sm-fill text-sm-center nav-link\"\n        :class=\"[{'router-link-active active': route?.name === 'time'}]\"\n        >Zeiten</router-link\n        >\n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/lifecycle' + maybeAddDate()\" \n        class=\"flex-sm-fill text-sm-center nav-link\"\n        :class=\"[{'router-link-active active': route?.name === 'lifecycle'}]\"\n        >Life Cycle</router-link\n        >\n        <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/document' + maybeAddDate()\" \n        class=\"flex-sm-fill text-sm-center nav-link\"\n        :class=\"[{'router-link-active active': route?.name === 'document'}]\"\n        >Dokumente</router-link\n        >\n    </nav>\n    \n    `\n}","import { EmployeePerson } from './EmployeePerson.js';\nimport { EmployeeHeader } from './EmployeeHeader.js';\nimport { EmployeeNav } from './EmployeeNav.js';\n\nexport default {\n\tname: 'EmployeeEditor',\n\tcomponents: {\n\t\tEmployeePerson,\n\t\tEmployeeHeader,\n\t\tEmployeeNav,\n\t},\n\tprops: {\n\t\tpersonid: Number,\n\t\tpersonuid: String,\n\t\topen: Boolean,\n\t\tisNew:  Boolean,\n\t},\n\temits: ['personSelected'],\n\tsetup( props, {emit }) {\n\n\t\tconst router = VueRouter.useRouter();\n\t\tconst route = VueRouter.useRoute();\n\t\tconst currentPersonID = Vue.ref(null);\n\t\tconst currentPersonUID = Vue.ref(null);\n\t\tconst currentDate = Vue.ref(null);\n\t\tconst employeeHeaderRef = Vue.ref();\n\n\t\tconst redirect = (params) => {\n\t\t\temit('personSelected', params);\n\t\t}\n\n\t\tconst dateChanged = (params) => {\n\t\t\tconsole.log(\"-> date changed: \", params);\n\t\t\t//currentDate.value=params;\n\t\t}\n\n\t\tconst updateHeaderHandler = () => {\n\t\t\temployeeHeaderRef.value.refresh();\n\t\t}\n\n\t\tVue.onMounted(() => {\n\t\t\tconsole.log('EmployeeEditor mounted', route.path);\n\t\t\tcurrentDate.value = route.query.d;\n\t\t})\n\n\t\tVue.watch(\n\t\t\t() => route.params,\n\t\t\tparams => {\n\t\t\t\tcurrentPersonID.value = params.id;\n\t\t\t\tcurrentPersonUID.value = params.uid;\n\t\t\t}\n\t\t)\n\n\t\tVue.watch(\n\t\t\t() => route.query.d,\n\t\t\td => {\n\t\t\t\tconsole.log('watch route.query.d', d)\n\t\t\t\tcurrentDate.value = d;\n\t\t\t}\n\t\t)\n\n\t\treturn { redirect, dateChanged, currentPersonID, currentPersonUID, currentDate, employeeHeaderRef, updateHeaderHandler }\n\t},\n\ttemplate: `    \n        <EmployeeHeader ref=\"employeeHeaderRef\"  :personID=\"personid\" :personUID=\"personuid\" @person-selected=\"redirect\"   ></EmployeeHeader> \n        <EmployeeNav   :personID=\"currentPersonID\" :personUID=\"currentPersonUID\"  ></EmployeeNav> \n        <router-view @updateHeader=\"updateHeaderHandler\"></router-view>       \n    `\n}\n","import ApiEmployee from '../../../api/factory/employee.js';\n\n// path to CI-Router without host and port (requires https!)\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nexport const SearchExistingDialog = {\n\tname: 'SearchExistingDialog',\n    components: {\n        \"datepicker\": VueDatePicker,\n    },\n    props: {\n       \n    },\n    emits: [\"change\", \"select\", \"take\"],\n    setup( props, { emit } ) {\n\n        const router = VueRouter.useRouter();\n    \tconst route = VueRouter.useRoute();\n        const $api = Vue.inject('$api');\n        \n        const currentValue = Vue.reactive({\n            surname: \"\",\n            birthdate: \"\",\n        });\n\n        const personList = Vue.ref([]);\n\n        const isFetching = Vue.ref(false);\n\n        const surnameRef = Vue.ref(null);\n\n        const formatDate = (ds) => {\n            if (ds == null || ds == '') return '';\n            var d = new Date(ds);\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n\n\n        const filterPerson = async () => {\n            \n            emit('change', currentValue );\n\n            if (currentValue.surname.length<2 || currentValue.birthdate == null || currentValue.birthdate == '') {\n                personList.value = [];\n                return;\n            }\n\n            try {\n                isFetching.value = true;\n                const res = await $api.call(ApiEmployee.filterPerson(currentValue));        \n                isFetching.value = false;              \n\t\t\t    personList.value = res.data.retval;\n\n            } catch (error) {\n                console.log(error);\n                isFetching.value = false;           \n            }\t\n        };\n        \n\n        const personSelectedHandler = (id, uid, event) => {\n\t\t\tconsole.log('personSelected: ', id);\t\t\t\n\t\t\tlet url = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/${id}/${uid}/summary`;\n\t\t\trouter.push(url);\n            emit(event, uid );\n\t\t}\n        \n\n        // create new employee based on student\n        const take = async (person_id, uid, vorname, nachname) => {                        \n\n            try {\n                isFetching.value = true\n                const res = await $api.call(ApiEmployee.createEmployee({ action: \"take\", payload: { person_id, uid, vorname, nachname}})); \n                isFetching.value = false;    \n\n                if (res?.meta?.status == 'success') {        \n                    personSelectedHandler(person_id, res.data.uid, 'take');\n                    filterPerson();\n                } else {\n                    console.log(\"Fehler beim Anlegen: \", res);\n                    $fhcAlert.handleSystemError('Fehler beim Anlegen.')  \n                }\n\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)                \n            } finally {\n                isFetching.value = false\n            }\n            \n        }\n\n\n        const reset = () => {\n            currentValue.surname = null;\n            currentValue.birthdate = null;\n            personList.value = [];\n        }\n\n        Vue.onMounted(() => {\n            surnameRef.value.focus();            \n        })\n\n\n        return {  currentValue, filterPerson, personSelectedHandler, personList, surnameRef, take, reset, formatDate, isFetching  };\n    },\n    template: `\n    <form class=\"row g-3 pb-4\" ref=\"searchExistingFrm\" id=\"searchExistingFrm\" >\n\n        <div class=\"col-md-3\">\n            <label for=\"birthdate\" class=\"form-label required\">Geburtsdatum</label>\n            <datepicker id=\"birthdate\" \n                :teleport=\"true\"\n                v-model=\"currentValue.birthdate\"\n                v-bind:enable-time-picker=\"false\"\n                text-input \n                locale=\"de\"\n                format=\"d.M.yyyy\"\n                auto-apply \n                model-type=\"yyyy-MM-dd\" \n                @change=\"filterPerson\" ></datepicker>\n        </div>\n\n        <div class=\"col-md-3\">\n            <label for=\"surname\" class=\"required form-label\">Nachname</label>\n            <input id=\"surname\" \n                ref=\"surnameRef\"\n                v-model=\"currentValue.surname\" \n                @keyup=\"filterPerson\"\n                type=\"text\" \n                class=\"form-control form-control-sm\" \n                aria-label=\"nachname\"\n                autofocus >\n        </div>\n        \n        <div v-if=\"personList.length !== 0\" class=\"col-md-12 py-3\">\n            <span class=\"text-primary fw-semibold\"><i class=\"fa fa-circle-info text-primary\"></i>&nbsp;{{ personList.length }} Personen gefunden</span>\n            <table class=\"table table-sm table-striped table-hover mt-2\">\n                <thead>\n                    <tr><th>UID</th><th>Name</th><th>Geb.Dat.</th><th>SVNr</th><th>Email</th><th>Status</th><th>Unruly</th><th>Aktion</th></tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"person in personList\" >\n                        <td>{{ person.uid }}</td>\n                        <td>{{ person.nachname }}, {{ person.vorname }}</td>\n                        <td>{{ formatDate(person.gebdatum) }}</td>\n                        <td>{{ person.svnr }}</td>                        \n                        <td><span v-if=\"person.emails.length > 0\">{{ person.emails.join(\", \") }}</span></td>\n                        <td>{{ person.status }}</td>\n                        <td>\n                            <span v-if=\"person.unruly\" class=\"badge bg-unruly rounded-0\">Unruly</span>\n                            <span v-else>-</span>\n                        </td>\n                        <td @click.stop>\n                            <div class=\"d-grid gap-2 d-md-flex justify-content-start\">\n                                <button type=\"button\" class=\"btn btn-secondary btn-sm\" \n                                    @click=\"take(person.person_id, person.uid, person.vorname, person.nachname)\"\n                                    style=\"white-space: nowrap\"\n                                    :disabled=\"isFetching\"\n                                    v-if=\"!person.taken\">\n                                    Person als MA anlegen\n                                </button>\n                                <button type=\"button\" class=\"btn btn-secondary btn-sm\" \n                                    @click=\"personSelectedHandler(person.person_id, person.uid, 'select')\"\n                                    style=\"white-space: nowrap\"\n                                    :disabled=\"isFetching\"\n                                    v-if=\"person.taken\">\n                                    MA auswählen\n                                </button>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n    </form>\n    `\n}","export const validSVNR = (svnr) => {\n    const weight = [3, 7, 9, 5, 8, 4, 2, 1, 6 ];\n    if (svnr == undefined || svnr == '') return true;\n\n    if (svnr.length != 10) return false;\n//            var date_regex = /^(((0[1-9]|[12]|[13]\\d|3[01])(0[13578]|1[02])(\\d{2}))|((0[1-9]|[12]|[13]\\d|30)(0[13456789]|1[012])(\\d{2}))|((0[1-9]|1\\d|2[0-8])02(\\d{2}))|(2902((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|(([1][26]|[2468][048]|[3579][26])00))))$/gm;\n    // extract date\n    var datum = svnr.substring(4);\n    console.log('datum = ',datum);                   \n\n    var nummer = svnr.substring(0,3);\n    console.log('nummer:',nummer);\n\n    var pruefzahl = svnr.substring(3,4);\n    console.log('pruefzahl:', pruefzahl);\n    \n    let isValid = true; //date_regex.test(datum);\n\n    if(isValid){   \n        // calc checksum\n        let sum = 0;\n        let svnr_raw = nummer + datum;\n\n        for (var i = 0; i < 9; i++) {\n            let prod = parseInt(svnr_raw.charAt(i)) * weight[i];\n            sum += prod;\n        }\n\n        let rest = sum % 11;\n        console.log('rest:', rest);\n\n        if (rest == pruefzahl) return true;\n    } else {\n        console.log('svnr datum invalid');\n    }\n    return false;\n}","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tupdatePersonUnrulyStatus(person_id, unruly) {\n\t\tconst params = { person_id, unruly }\n\t\tconst url = '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t};\n\t},\n\tfilterPerson(params, base = '') {\n\t\t// TODO(chris): seems to be called from nowhere?\n\t\tconst url = base + '/api/frontend/v1/checkperson/CheckPerson/filterPerson';\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl,\n\t\t\tparams\n\t\t};\n\t}\n};","\nimport { validSVNR } from \"../../../helpers/validation/svnr.js\";\nimport ApiCheckPerson from '../../../../../../js/api/factory/checkperson.js';\nimport ApiEmployee from '../../../api/factory/employee.js';\n\n// path to CI-Router without host and port (requires https!)\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nexport const CreateEmployeeFrm = {\n\tname: 'CreateEmployeeFrm',\n    components: {\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        defaultval: { type: Object, required: false },\n    },\n    expose: [ 'save', 'reset'],\n    setup( props ) {\n\n        const router = VueRouter.useRouter();\n    \tconst route = VueRouter.useRoute();     \n        const $api = Vue.inject('$api');\n        const $fhcAlert = Vue.inject('$fhcAlert');\n        \n        const defaultvalRef = Vue.toRef(props, 'defaultval')\n\n        const sprache = Vue.inject('sprache');\n        const nations = Vue.inject('nations');\n\n        const GESCHLECHT = {\n            w: 'weiblich', \n            m: 'männlich', \n            x: 'divers', \n            u: 'unbekannt'};\n\n        const createShape = () => {\n            return {\n            vorname: \"\",\n            vornamen: \"\",\n            nachname: \"\",\n            gebdatum: \"\",\n            email: \"\",\n            svnr: \"\",\n            geschlecht: \"\",\n            staatsbuergerschaft: \"A\",\n            anmerkung: \"\",\n            }\n        }\n\n        const currentValue = Vue.ref(createShape());\n        const preservedValue = Vue.ref(createShape());\n\n        const printNation = (code) => {\n            if (!code) return '';\n            let result = nations.value?.filter((item) => item.nation_code == code);\n            if (result?.length > 0)\n                return result[0].nation_text;\n            return '';\n        }\n\n        Vue.watch(props, () => {\n\t\t\tcurrentValue.value.nachname = (props.defaultval.surname !== null)\n\t\t\t\t? props.defaultval.surname.charAt(0).toUpperCase() + props.defaultval.surname.slice(1)\n\t\t\t\t: '';\n            currentValue.value.gebdatum = props.defaultval.birthdate\n          })\n\n        // -------------\n        // form handling\n        // -------------\n\n        const createEmployeeFrm = Vue.ref();\n        const unrulyPersonList = Vue.ref([]);\n\n        const isFetching = Vue.ref(false);\n\n        const frmState = Vue.reactive({ nachnameBlured: false, vornameBlured: false, emailBlured: false, geburtsdatumBlured: false, geschlechtBlured: false, svnrBlured: false, wasValidated: false });\n\n        const filterPerson = async () => {\n\n            if (currentValue.value.nachname.length < 2 && currentValue.value.vorname.length < 2) {\n                return;\n            }\n\n            try {\n                isFetching.value = true;\n                const res = await $api.call(ApiCheckPerson.filterPerson(\n                    { ...currentValue.value, unruly: true},\n                    FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n                ));\n                isFetching.value = false;\n\n                if(!res.data.retval) return;\n                // fhc api controller in backend but no plugin in pv21\n                // if(!res.retval) return;\n                unrulyPersonList.value = res.data.retval;\n\n            } catch (error) {\n                console.log(error);\n                isFetching.value = false;\n            }\n        };\n\n        Vue.watch(() => currentValue.value.nachname, () => {\n            filterPerson(currentValue)\n        }, {deep: true})\n        Vue.watch(() => currentValue.value.vorname, () => {\n            filterPerson(currentValue)\n        })\n        Vue.watch(() => currentValue.value.gebdatum, () => {\n            filterPerson(currentValue)\n        })\n\n        const validNachname = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validVorname = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validGeschlecht = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validEmail = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validGeburtsdatum = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validate = () => {\n            // trigger constraint validation\n            Object.keys(frmState).forEach((item) => { frmState[item] = true })\n            if (!validNachname(currentValue.value.nachname)) {\n                return false;\n            }\n            if (!validVorname(currentValue.value.vorname)) {\n                return false;\n            }\n            if (!validEmail(currentValue.value.email)) {\n                return false;\n            }\n            if (!validGeburtsdatum(currentValue.value.gebdatum)) {\n                return false;\n            }\n            if (!validGeschlecht(currentValue.value.geschlecht)) {\n                return false;\n            }\n            if (!validSVNR(currentValue.value.svnr)) {\n                return false;\n            }\n            return true;\n        }\n\n        const save = async () => {\n            if (!frmState.geburtsdatumBlured) {\n                frmState.geburtsdatumBlured = true;\n            }\n\n            if (!createEmployeeFrm.value.checkValidity() || !validate()) {\n\n                console.log(\"form invalid\");\n                throw new Error(\"form invalid\");\n\n            } else {\n\n                // submit\n                isFetching.value = true\n                try {\n                    const response = await $api.call(ApiEmployee.createEmployee({ action: \"quick\", payload: {...currentValue.value}}));\n                    redirect2Employee(response.data.person_id, response.data.uid);\n                } catch (error) {\n                    $fhcAlert.handleSystemError(error)                    \n                } finally {\n                    isFetching.value = false;           \n                }\n                \n            }\n\n            frmState.wasValidated  = true;  \n        }\n\n        const take = async (person_id, uid, vorname, nachname) => {\n                                \n            try {\n                isFetching.value = true\n                const res = await $api.call(ApiEmployee.createEmployee({ action: \"take\", payload: { person_id, uid, vorname, nachname}}));          \n                isFetching.value = false;                \n                personSelectedHandler(person_id, res.data.uid);\n\n            } catch (error) {\n                $fhcAlert.handleSystemError(error)  \n                isFetching.value = false;           \n            }\t\n            \n        }\n\n\n        const reset = () => {\n            currentValue.value = createShape();\n            // reset constraint validation\n            Object.keys(frmState).forEach((item) => { frmState[item] = false })\n        }\n\n        const redirect2Employee = (id, uid) => {\n\t\t\tconsole.log('redirect: ', id, uid);\t\t\t\n\t\t\tlet url = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/${id}/${uid}/summary`;\n\t\t\trouter.push(url);            \n\t\t}\n\n\n        return {\n            createEmployeeFrm, \n            currentValue, \n            nations, \n            sprache, \n            isFetching,\n            filterPerson,\n            validNachname,    \n            validVorname,\n            validGeburtsdatum,\n            validEmail,\n            validGeschlecht,\n            validSVNR,            \n            frmState,\n            defaultvalRef,\n            unrulyPersonList,\n            reset,\n            save,\n         }\n\n    },\n    template: `\n    <form class=\"row g-3\" ref=\"createEmployeeFrm\" xmlns=\"http://www.w3.org/1999/html\">\n        <div class=\"col-md-8\">\n            <h6>Stammdaten Mindestanforderung</h6>\n            <div class=\"row\">\n                <div class=\"col-md-5\">\n                    <label for=\"surname\" class=\"required form-label\">Nachname</label>\n                    <input id=\"surname\" \n                        @blur=\"frmState.nachnameBlured = true\"\n                        v-model=\"currentValue.nachname\"\n                        type=\"text\" \n                        class=\"form-control form-control-sm\" \n                        :class=\"{ 'is-invalid': !validNachname(currentValue.nachname) && frmState.nachnameBlured}\"\n                        placeholder=\"Nachname\" aria-label=\"nachname\">\n                    <div class=\"invalid-feedback\" v-if=\"frmState.nachnameBlured && !validNachname(currentValue.nachname)\">\n                        Pflichtfeld\n                    </div>\n                </div>  \n                <div class=\"col-md-3\">\n                    <label for=\"firstname\" class=\"required form-label\">Vorname</label>\n                    <input id=\"firstname\" \n                        v-model=\"currentValue.vorname\" \n                        @blur=\"frmState.vornameBlured = true\"\n                        :class=\"{ 'is-invalid': !validNachname(currentValue.vorname) && frmState.vornameBlured}\"\n                        type=\"text\" \n                        class=\"form-control form-control-sm\" \n                        aria-label=\"vorname\">\n                    <div class=\"invalid-feedback\" v-if=\"frmState.vornameBlured && !validVorname(currentValue.vorname)\">\n                        Pflichtfeld\n                    </div>\n                </div>\n               \n                <div class=\"col-md-3\">\n                    <label for=\"firstnames\" class=\"form-label\">Vornamen</label>\n                    <input id=\"firstnames\" \n                        v-model=\"currentValue.vornamen\" \n                        type=\"text\" \n                        class=\"form-control form-control-sm\" \n                        aria-label=\"vornamen\">\n                </div>\n            </div>\n            \n            <div class=\"row\">\n                <!-- Geschlecht -->\n                <div class=\"col-md-5\">\n                    <label for=\"geschlecht\" class=\"required form-label\">Geschlecht</label><br>\n                    <select id=\"geschlecht\" v-model=\"currentValue.geschlecht\" \n                        class=\"form-select form-select-sm\" \n                        :class=\"{ 'is-invalid': !validGeschlecht(currentValue.geschlecht) && frmState.geschlechtBlured}\"\n                        @blur=\"frmState.geschlechtBlured = true\"\n                        aria-label=\".form-select-sm \" >\n                        <option value=\"w\">weiblich</option>\n                        <option value=\"m\">männlich</option>\n                        <option value=\"x\">divers</option>\n                        <option value=\"u\">unbekannt</option>\n                    </select>\n                    <div class=\"invalid-feedback\" v-if=\"frmState.geschlechtBlured && !validGeschlecht(currentValue.geschlecht)\">\n                    Pflichtfeld\n                    </div>\n                </div>\n                <div class=\"col-md-3\">\n                    <label for=\"birthdate\" class=\"required form-label\">Geburtsdatum</label>\n                    <datepicker id=\"birthdate\"\n                        :teleport=\"true\"\n                        :class=\"{ 'is-invalid': !validGeburtsdatum(currentValue.gebdatum) && frmState.geburtsdatumBlured}\"\n                        @blur=\"frmState.geburtsdatumBlured = true\"             \n                        v-model=\"currentValue.gebdatum\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>\n                        <div class=\"invalid-feedback\" v-if=\"frmState.geburtsdatumBlured && !validGeburtsdatum(currentValue.gebdatum)\">\n                        Pflichtfeld\n                        </div>\n                </div>\n                <div class=\"col-md-3\">\n                    <label for=\"svnr\" class=\"form-label\">SVNR</label>\n                    <input id=\"svnr\" \n                        v-model=\"currentValue.svnr\" \n                        @blur=\"frmState.svnrBlured = true\"\n                        type=\"text\" \n                        class=\"form-control form-control-sm\"\n                        :class=\"{ 'is-invalid': !validSVNR(currentValue.svnr) && frmState.svnrBlured}\" \n                        aria-label=\"svnr\">\n                </div>\n            </div>        \n                \n            <div class=\"row\">\n                <!-- Staatsbürgerschaft, etc. -->\n                <div class=\"col-md-6\">\n                    <label for=\"staatsbuergerschaft\" class=\"required form-label\">Staatsbürgerschaft</label>                \n                    <select id=\"staatsbuergerschaft\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"currentValue.staatsbuergerschaft\" >\n                        <option v-for=\"(item, index) in nations\" :value=\"item.nation_code\">\n                            {{ item.nation_text }}\n                        </option>\n                    </select>\n                </div>\n                <!-- Email -->\n                <div class=\"col-md-5\">\n                    <label for=\"email\" class=\"required form-label\">Email</label>\n                    <input id=\"email\" \n                        v-model=\"currentValue.email\" \n                        @blur=\"frmState.emailBlured = true\"\n                        type=\"text\" \n                        class=\"form-control form-control-sm\" \n                        :class=\"{ 'is-invalid': !validEmail(currentValue.email) && frmState.emailBlured}\"\n                        aria-label=\"email\">\n                    <div class=\"invalid-feedback\" v-if=\"frmState.emailBlured && !validEmail(currentValue.email)\">\n                        Pflichtfeld\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"row\">\n                <div class=\"col-md-11\">\n                    <label for=\"inputAddress\" class=\"form-label\">Anmerkung</label>\n                    <textarea type=\"text\" class=\"form-control form-control-sm\"  id=\"anmerkungen\" v-model=\"currentValue.anmerkung\"/>\n                </div>\n            </div>\n            \n        </div>\n        <div class=\"col-md-4\">\n        <template v-if=\"unrulyPersonList.length\">\n            <h6><span class=\"badge\" :class=\"'bg-unruly rounded-0'\" >Unruly</span> Personen mit ähnlichen Daten:</h6>\n            <p v-for=\"unruly in unrulyPersonList\">\n                {{unruly.vorname}} {{unruly.nachname}} PID: {{unruly.person_id}}\n            </p>\n        </template>\n        </div>\n    </form>\n    `    \n}","export default {\n\tname: 'Step',\n    props: {\n        title: {\n          type: String,\n          default: 'Step'\n        }\n      },\n    setup() {\n      const selectedTitle = Vue.inject(\"selectedTitle\")\n      return {\n        selectedTitle\n      }\n    },\n    template: `\n        <div class=\"step-content\" v-show=\"title == selectedTitle\">\n            <slot/>\n        </div>\n      `\n}","import { Modal } from '../../Modal.js';\nimport { SearchExistingDialog  } from \"./SearchExistingDialog.js\";\nimport { CreateEmployeeFrm } from './CreateEmployeeFrm.js';\nimport Step from './stepper/Step.js'\nimport Steps from './stepper/Steps.js';\n\nexport const CreateWizard = {\n\tname: 'CreateWizard',\n    components: {\n        Modal,\n        Steps,\n        Step,\n        SearchExistingDialog,\n        CreateEmployeeFrm,\n    },\n    props: {\n        \n    },\n    expose: ['showModal'],\n    setup( props ) {\n\n        // Modal \n        const { watch, ref } = Vue;\n        const modalRef = ref();\n        const stepsRef = ref();\n        const searchExistingRef = ref();\n        const schnellanlageRef = ref();\n        const currentValue = ref();\n        let _resolve;\n        let _reject;\n\n        \n\n        const showModal = () => {\n            // call bootstrap show function\n            modalRef.value.show();\n            return new Promise((resolve, reject) => {\n                _resolve = resolve;\n                _reject = reject;\n            })\n        }\n\n        const hideModal = () => {\n            modalRef.value.hide({type: 'CANCEL'});\n        }\n        \n\n        const okHandler = () => {\n            \n            schnellanlageRef.value.save().then(() => {\n                console.log(\"employee successfully created\")\n                stepsRef.value.reset()\n                currentValue.value = { surname: '', birthdate: null} \n                searchExistingRef.value.reset()  \n                schnellanlageRef.value.reset()             \n                hideModal()                            \n                _resolve({type: 'CREATED', payload: { uid: 'dummy' }})\n            })\n            .catch((error) => {\n                console.log(error.message);\n                _reject(false);\n            });\n\n            \n            \n        }\n        \n        const cancelHandler = () =>  {\n            hideModal();\n            _resolve({type: 'CANCELED', payload: { uid: 'dummy' }});\n        }\n\n        const takeHandler = () =>  {\n            hideModal();\n            _resolve({type: 'CREATED', payload: { uid: 'dummy' }});\n        }\n\n        const showCreateHandler = () => {\n            stepsRef.value.selectStep('Schnellanlage')\n        }\n\n        const getSelectedTitle = () => {\n            if (stepsRef.value != undefined)\n                return stepsRef.value.selectedTitle;\n            return '-';\n        }\n\n        const searchCriteriaHandler = (e) => {\n            currentValue.value = e;\n        }\n\n        return { modalRef, stepsRef, searchExistingRef, schnellanlageRef, showModal, hideModal, \n            okHandler,cancelHandler, currentValue, showCreateHandler, getSelectedTitle,\n            searchCriteriaHandler, takeHandler };\n    },\n    template: `\n        <Modal :title=\"'Mitarbeiter anlegen'\" ref=\"modalRef\" id=\"createWizardModal\">\n            <template #body>\n            \n                <Steps  ref=\"stepsRef\">\n                    <Step title=\"Suche\">\n                        <search-existing-dialog ref=\"searchExistingRef\" @change=\"searchCriteriaHandler\" @take=\"takeHandler\" @select=\"cancelHandler\" />\n                    </Step>\n                    <Step title=\"Schnellanlage\" >\n                        <create-employee-frm ref=\"schnellanlageRef\" :defaultval=\"currentValue\" />\n                    </Step>                    \n                </Steps>\n\n            </template>\n            <template #footer>\n                <div class=\"float-start\">\n                    <button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"stepsRef.selectStep('Suche')\" v-if=\"getSelectedTitle() != 'Suche'\" >\n                        <i class=\"fa fa-chevron-left\"></i> Zurück\n                    </button>\n                </div>\n                <div class=\"float-start\">\n                    <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" v-if=\"getSelectedTitle() != 'Suche'\" >\n                        Mitarbeiter anlegen\n                    </button>\n                    <button type=\"button\" class=\"btn btn-primary\"  :disabled=\"currentValue==null || currentValue.surname == '' || currentValue.birthdate==null || currentValue.birthdate==''\"  @click=\"showCreateHandler()\" v-if=\"getSelectedTitle() != 'Schnellanlage'\">\n                        Neue Person anlegen <i class=\"fa fa-chevron-right\"></i>\n                    </button>\n                </div>\n            </template>\n\n        </Modal>`\n}","export default {     \n\tname: 'Steps',\n     expose: ['selectedTitle', 'selectStep', 'reset'],\n     setup( props, { slots } ) {  \n        const stepTitles = Vue.ref(slots.default().map((step) => step.props.title))\n        const selectedTitle = Vue.ref(stepTitles.value[0])\n        const selectStep = (title) => { selectedTitle.value = title }\n        const reset = () => selectedTitle.value = stepTitles.value[0];\n        Vue.provide(\"selectedTitle\", selectedTitle)\n\n        return { selectedTitle, stepTitles, selectStep, reset }\n     },\n     template: `\n     <div class=\"steps\">\n        <slot></slot>\n     </div>\n     `\n}     ","import {CoreFilterCmpt} from '../../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\n\nimport verticalsplit from \"../../../../../js/components/verticalsplit/verticalsplit.js\";\nimport searchbar from \"../../../../../js/components/searchbar/searchbar.js\";\nimport ApiSearchbar from  '../../../../../js/api/factory/searchbar.js';\nimport { usePhrasen } from '../../../../../../public/js/mixins/Phrasen.js';\nimport {searchbaroptions} from \"../../apps/common.js\";\nimport EmployeeEditor from \"./EmployeeEditor.js\";\nimport { CreateWizard } from './create/CreateWizard.js';\n\n// path to CI-Router without host and port (requires https!)\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nexport default {\n\tname: 'EmployeeHome',\n    components: {\n\t\tSidebar,\n\t\tCoreNavigationCmpt,\n        CoreFilterCmpt,\n\t\tEmployeeEditor,\t\t\n\t\tverticalsplit,\n\t\tsearchbar,\n\t\tCreateWizard,\n\t},\n    setup() {\n\n\t\tconst { watch, ref, inject } = Vue;\n\t\tconst router = VueRouter.useRouter();\n\t\tconst route = VueRouter.useRoute();\n\t\tconst isEditorOpen = ref(false);\n\t\tconst currentPersonID = ref(null);\n\t\tconst currentPersonUID = ref(null);\n\t\tconst appSideMenuEntries = ref({});\n\t\tconst verticalsplitRef = ref(null);\n\t\tconst createWizardRef = ref();\n\t\tconst $api = inject(\"$api\");\n\t\tconst $fhcAlert = Vue.inject('$fhcAlert');\n\t\tconst { t } = usePhrasen();\n\n\t\twatch(\n\t\t\t() => route.params,\n\t\t\tparams => {\n\t\t\t\tcurrentPersonID.value = parseInt(params.id);\n\t\t\t\tcurrentPersonUID.value = params.uid;\t\n\t\t\t\tif (verticalsplitRef.value.isCollapsed() == 'bottom') {\n\t\t\t\t\tisEditorOpen.value = true; // TODO check notwendig? was macht isEditorOpen?\n\t\t\t\t\tverticalsplitRef.value.collapseTop();\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\n\t\tconst personSelectedHandler = (id, uid, date) => {\n\t\t\t// console.log('personSelected: ', id, uid, date);\n\n\t\t\tif (verticalsplitRef.value.isCollapsed() == 'bottom') {\n\t\t\t\tverticalsplitRef.value.showBoth();\n\t\t\t\t//isEditorOpen.value=true;\n\t\t\t}\n\n\t\t\t//let url = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/${id}/${uid}`;\n\t\t\tlet url = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/${id}/${uid}/summary` +(date!=null?`?d=${date}`:'');\n\n\t\t\trouter.push(url);\n\t\t}\n\n\t\tconst openCreateWizard = () => {\n\t\t\tcreateWizardRef.value.showModal().then((action) => {\n\n\t\t\t\tif (action !== false && action.type != \"CANCELED\") {\n\t\t\t\t\t$fhcAlert.alertSuccess('Mitarbeiter erstellt.');\n\t\t\t\t} else if (action === false) {\n\t\t\t\t\t$fhcAlert.alertError('Mitarbeiter anlegen fehlgeschlagen!');\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\t\n\t\tconst newSideMenuEntryHandler = (payload) => {\n\t\t\tappSideMenuEntries.value = payload;\n\t\t}\n\n\t\tconst selectRecordHandler = (e, row) => { // Tabulator handler for the rowClick event\n\t\t\tpersonSelectedHandler(row.getData().PersonId, row.getData().UID, null);\n\t\t}\n\n\t\tconst employeesTabulatorEvents = [\n\t\t\t{\n\t\t\t\tevent: \"rowClick\",\n\t\t\t\thandler: selectRecordHandler\n\t\t\t},\n                        {\n                                event: \"dataFiltered\",\n                                handler: function(filters, rows) {\n                                    var el = document.getElementById(\"search_count\");\n                                    el.innerHTML = rows.length;\n                                }\n                        },\n                        {\n                                event: \"dataLoaded\",\n                                handler: function(data) {\n                                    var el = document.getElementById(\"total_count\");\n                                    el.innerHTML = data.length;\n                                }\n                        }\n\t\t];\n\n\t\tconst sexformatter = function(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue();\n\t\t\tif( value === 'm') {\n\t\t\t\treturn 'männlich';\n\t\t\t} else if( value === 'w' ) {\n\t\t\t\treturn 'weiblich';\n\t\t\t} else if( value === 'x' ) {\n\t\t\t\treturn 'divers';\n\t\t\t} else if( value === 'u' ) {\n\t\t\t\treturn 'unbekannt';\n\t\t\t} else {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\n\t\tconst employeesTabulatorOptions = {\n\t\t\theight: \"100%\",\n\t\t\tlayout: 'fitColumns',\n            footerElement: '<div>&sum; <span id=\"search_count\"></span> / <span id=\"total_count\"></span></div>',\n\t\t\tcolumns: [\n\t\t\t\t{title: \"UID\", field: \"UID\", headerFilter: true},\n\t\t\t\t{title: \"Person ID\", field: \"PersonId\", headerFilter: true},\n\t\t\t\t{title: \"Personalnummer\", field: \"Personalnummer\", headerFilter: true},\n\t\t\t\t{title: \"Vorname\", field: \"Vorname\", headerFilter: true},\n\t\t\t\t{title: \"Nachname\", field: \"Nachname\", headerFilter: true},\n\t\t\t\t{title: \"TitelPre\", field: \"TitelPre\", headerFilter: true},\n\t\t\t\t{title: \"TitelPost\", field: \"TitelPost\", headerFilter: true},\n\t\t\t\t{title: \"Alias\", field: \"Alias\", headerFilter: true},\n\t\t\t\t{title: \"Geburtsdatum\", field: \"Geburtsdatum\", headerFilter: true},\n\t\t\t\t{title: \"Aktiv\", field: \"Aktiv\", hozAlign: \"center\", formatter:\"tickCross\", formatterParams: {\n\t\t\t\t\t\ttickElement: '<i class=\"fas fa-check text-success\"></i>',\n\t\t\t\t\t\tcrossElement: '<i class=\"fas fa-times text-danger\"></i>'\n\t\t\t\t\t},\n\t\t\t\t\theaderFilter:\"tickCross\", headerFilterParams: {\n\t\t\t\t\t\t\"tristate\":true,elementAttributes:{\"value\":\"true\"}\n\t\t\t\t\t}, headerFilterEmptyCheck:function(value){return value === null}},\n\t\t\t\t{title: \"Fixangestellt\", field: \"Fixangestellt\", headerFilter: true},\n\t\t\t\t{title: \"SVNR\", field: \"SVNR\", headerFilter: true},\n\t\t\t\t{title: \"Raum\", field: \"Raum\", headerFilter: \"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"}},\n\t\t\t\t{title: \"Geschlecht\", field: \"Geschlecht\", formatter:sexformatter, headerFilter: \"list\", headerFilterParams: {values:{'m':'männlich','w':'weiblich','x':'divers','u':'unbekannt'}, autocomplete: true, sort: \"asc\"}},\n\t\t\t\t{title: \"Durchwahl\", field: \"Durchwahl\", headerFilter: true},\n\t\t\t\t{title: \"Standardkostenstelle\", field: \"Standardkostenstelle\", headerFilter: \"list\", headerFilterFunc:\"=\", headerFilterParams: {valuesLookup:true, autocomplete: true, sort: \"asc\"}}, \n\t\t\t\t{title: \"Disziplinäre Zuordnung\", field: \"Disziplinäre Zuordnung\", headerFilter: \"list\", headerFilterFunc:\"=\", headerFilterParams: {valuesLookup:true, autocomplete: true, sort: \"asc\"}},\n\t\t\t\t{title: \"OE Key\", field: \"OE Key\", headerFilter: true},\n\t\t\t]\n\t\t};\n\t\t\n\t\tVue.onMounted(() => {\n\t\t\tlet person_id = route.params.id;\n\t\t\tlet person_uid = route.params.uid;\n\t\t\tconsole.log('EMPLOYEE APP CREATED; person_id=',person_id);\n\t\t\tif (person_id != null) {\n\t\t\t\tcurrentPersonID.value = parseInt(person_id);\n\t\t\t\tcurrentPersonUID.value = person_uid;\n\t\t\t\t//personSelectedHandler(parseInt(person_id));\n\t\t\t\tisEditorOpen.value = true;\n\t\t\t\tverticalsplitRef.value.collapseTop();\n\t\t\t} else {\n\t\t\t\tverticalsplitRef.value.collapseBottom();\n\t\t\t}\n\t\t})\n\t\t\n\t\tVueRouter.onBeforeRouteUpdate((to, from) => {\n\t\t\t/*console.log('onBeforeUpdate',to,from);\n\t\t\tconst answer = window.confirm(\n\t\t\t  'Do you really want to leave? you have unsaved changes! (' + to + ', ' + from + ')' \n\t\t\t)\n\t\t\t// cancel the navigation and stay on the same page\n\t\t\tif (!answer) return false*/\n\t\t  })\n\n                searchbaroptions.actions.employee.defaultaction = {\n                    type: \"function\",\n                    action: (data) => {\n                        return personSelectedHandler(data.person_id, data.uid);\n                    }\n                };\n\t\t\t\t\n\t\t\t\tconst searchfunction = (params) => $api.call(ApiSearchbar.search(params));\n\n\t\treturn {\n\t\t\tpersonSelectedHandler,\n\t\t\tnewSideMenuEntryHandler,\n\t\t\tsearchfunction,\n\t\t\tselectRecordHandler,\n\t\t\topenCreateWizard,\t\t\t\n\n\t\t\tcreateWizardRef,\n\t\t\tisEditorOpen,\t\t\t\n\t\t\tcurrentPersonID,\n\t\t\tcurrentPersonUID,\n\t\t\tappSideMenuEntries,\n\t\t\tsearchbaroptions,\n\t\t\temployeesTabulatorEvents,\n\t\t\temployeesTabulatorOptions,\n\t\t\tverticalsplitRef,\n\t\t\troute,\n\t\t}\n\n\t},\n    template: `\n\n        <header class=\"navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap p-0 border-bottom\">\n            <a class=\"navbar-brand col-md-3 col-lg-2 me-0 px-3\" href=\"${FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router}\">FHComplete [PV21]</a>\n            <button class=\"navbar-toggler position-absolute d-md-none collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#sidebarMenu\" aria-controls=\"sidebarMenu\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span class=\"navbar-toggler-icon\"></span>\n            </button>\n            <div id=\"chooser\" class=\"w-100\">\n            <searchbar :searchoptions=\"searchbaroptions\" :searchfunction=\"searchfunction\"></searchbar>\n            </div>\n            <div class=\"navbar-nav\">\n            <div class=\"nav-item dropdown\">\n                <a class=\"nav-link dropdown-toggle px-3\" data-bs-toggle=\"dropdown\" href=\"#\" id=\"navbarDropdownMenuLink\">Häufige Funktionen</a>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\n                    <li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n                    <li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n                    <li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n                </ul>\n            </div>\n            </div>\n        </header>\n\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                \n            <core-navigation-cmpt :add-side-menu-entries=\"appSideMenuEntries\" hide-top-menu  left-nav-css-classes=\"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse\"></core-navigation-cmpt>\n\n            <main class=\"col-md-9 ms-sm-auto col-lg-10 px-md-3\">\n                        \n                <verticalsplit id=\"macombined\" ref=\"verticalsplitRef\" >\n                    <template #top>\n                        <div class=\"d-flex  flex-column\" style=\"height:100%\"  >\n                        <div id=\"master\" class=\"flex-shrink-0 d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3\">\n                                    \n                            <div class=\"flex-fill align-self-center\">\n                            <h1 class=\"h2\" style=\"margin-bottom:0\" > Mitarbeiter </h1>\n                            </div>\t\t\t\t\t\t\t\n                        </div>\n                            <!-- Filter component -->\n                            <core-filter-cmpt\n                            filter-type=\"EmployeeViewer\"\n                            :sideMenu=\"false\"\n                            :tabulator-options=\"employeesTabulatorOptions\"\n                            :tabulator-events=\"employeesTabulatorEvents\"\n                            :new-btn-label=\"'Mitarbeiter'\"\n                            :new-btn-show=\"true\"\n                            @nw-new-entry=\"newSideMenuEntryHandler\"\n\t\t\t\t\t\t\t@click:new=\"openCreateWizard()\">\n                            </core-filter-cmpt>\n                        </div>\n                    </template>\n                    <template #bottom>\n                        <employee-editor  v-if=\"currentPersonID!=null\" :personid=\"currentPersonID\" :personuid=\"currentPersonUID\" :open=\"isEditorOpen\" @person-selected=\"(e) => personSelectedHandler(e.person_id, e.uid, e.date)\" ></employee-editor>\n                    </template>\n                </verticalsplit> \n                            \n            </main>\n            </div>\n        </div>      \t\t\n\t\t\n\t\t<CreateWizard id=\"createWizard\" ref=\"createWizardRef\" ></CreateWizard>\n    \n    `\n}\n","export default {\n  name: 'DebugViewer',\n  template: `\n  <div>\n    <pre style=\"background-color: #000; color: #0f0; padding: .5em; height: 90vh;\">\n{{text}}\n    </pre>\n  </div>\n  `,\n  props: [\n    \"text\"\n  ]\n}\n","export default Vue.reactive({\n  mode: '',\n  unternehmen: '',\n  mitarbeiter_uid: '',\n  tmpstoreid: null,\n  showmsgs: true, \n  gueltigkeit: {\n    gueltig_ab: '',\n    gueltig_bis: ''\n  },\n  dv: {\n\n  },\n  vbs: {\n\n  },\n  getDV: function() {\n    return this.dv;\n  },\n  setDV: function(dv) {\n    this.dv = JSON.parse(JSON.stringify(dv));\n  },\n  getDVPayload: function() {\n    return JSON.parse(JSON.stringify(this.dv));\n  },\n  addVB: function(uuid, vb) {\n    this.vbs[uuid] = vb;\n  },\n  removeVB: function(uuid) {\n    delete this.vbs[uuid];\n  },\n  getVB: function(uuid) {\n    if( typeof this.vbs[uuid] !== 'undefined' ) {\n      return this.vbs[uuid];\n    }  \n    return null;\n  },\n  getVBsPayload: function() {\n    return JSON.parse(JSON.stringify(this.vbs));\n  },\n  getMode: function() {\n    return this.mode;\n  },\n  setMode: function(mode) {\n    this.mode = mode;\n  },\n  getTmpStoreId: function() {\n      return this.tmpstoreid;\n  },\n  setTmpStoreId: function(tmpstoreid) {\n      this.tmpstoreid = tmpstoreid;\n  },\n  reset: function() {\n    this.gueltigkeit = {\n      gueltig_ab: '',\n      gueltig_bis: ''\n    };\n    this.dv = {\n        data: {\n            vertragsart_kurzbz: ''\n        }\n    };\n    this.vbs = {};\n  }\n});\n","import store from '../../components/vbform/vbsharedstate.js';\n\nexport default {\n  props: [\n    'preset'\n  ],\n  data: function() {\n    return {\n      children: [],\n      store: store\n    };\n  },\n  created: function() {\n    this.children = this.getSortedChildrenFromPreset();\n  },\n  watch: {\n    preset: function() {\n      this.children = [];\n      this.$nextTick(function() {\n        this.children = this.getSortedChildrenFromPreset();\n      });\n    }\n  },\n  methods: {\n    getSortedChildrenFromPreset: function() {\n        var tmpchildren = JSON.parse(JSON.stringify(this.preset.children));\n        var store = this.store;\n        \n        if( tmpchildren.length > 0 && typeof tmpchildren[0] === 'string' ) {            \n            tmpchildren = tmpchildren.filter(function(child) {\n                return (store.getVB(child) !== null);\n            });\n        }\n        \n        if( tmpchildren.length < 2 ) {\n            return tmpchildren;\n        }\n        \n        const compareVBorGBgueltigvon = function(a, b) {\n            const avon = (a?.data?.gueltigkeit?.data?.gueltig_ab !== undefined) \n                       ? a.data.gueltigkeit.data.gueltig_ab \n                       : null;\n\n            const bvon = (b?.data?.gueltigkeit?.data?.gueltig_ab !== undefined) \n                       ? b.data.gueltigkeit.data.gueltig_ab \n                       : null;\n\n            const avd = (avon !== null && avon.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/)) \n                ? (new Date(avon)).getTime() : Infinity;\n            const bvd = (bvon !== null && bvon.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/)) \n                ? (new Date(bvon)).getTime() : Infinity;\n\n            return avd - bvd;        \n        };\n        \n        if( (typeof tmpchildren[0] === 'object')\n                && tmpchildren[0]?.type === undefined ) {\n            console.log('Child Type undefined: ' + JSON.stringify(tmpchildren[0]));\n        }\n        \n        if( (typeof tmpchildren[0] === 'object')\n                && tmpchildren[0]?.type !== undefined \n                && (tmpchildren[0].type === 'gehaltsbestandteil') ) {\n            tmpchildren.sort((a,b) => {\n              return compareVBorGBgueltigvon(a, b);\n            });\n            tmpchildren.reverse();\n        } else if ( typeof tmpchildren[0] === 'string' ) {\n            tmpchildren.sort((a,b) => {\n                const vba = this.store.getVB(a);\n                const vbb = this.store.getVB(b);\n                return compareVBorGBgueltigvon(vba, vbb);\n            });\n            tmpchildren.reverse();\n        }\n        \n        return tmpchildren;\n    }  \n  }\n}\n","export default {\n  props: [\n    'config'\n  ],\n  methods: {\n    isinputdisabled: function(inputname) {\n      if( this.config?.guioptions?.disabled === undefined ) {\n        return false;\n      }\n      return this.config.guioptions.disabled.includes(inputname);\n    },\n    showinput: function(inputname) {\n      if( this.config?.guioptions?.hidden === undefined ) {\n        return true;\n      }\n      return !this.config.guioptions.hidden.includes(inputname);\n    },\n    markGBsEnded: function() {\n        if( this.$refs?.gbh !== undefined ) {\n          this.$refs.gbh.markGBsEnded();\n        }\n    },\n    toggledelete: function() {\n        this.db_delete = !this.db_delete;\n        if( this.$refs?.gbh !== undefined ) {\n          this.$refs.gbh.setGBsDelete(this.db_delete);\n        }\n    },\n    setDelete: function(hastobedeleted) {\n        this.db_delete = hastobedeleted;\n    }\n  },\n  computed: {\n    isendable: function() {\n      return (this.config?.guioptions?.endable === undefined)\n        ? false : this.config.guioptions.endable;\n    },      \n    isdeleteable: function() {\n      return (this.config?.guioptions?.deleteable === undefined)\n        ? false : this.config.guioptions.deleteable;\n    },\n    isremoveable: function() {\n      return (this.config?.guioptions?.removeable === undefined)\n        ? false : this.config.guioptions.removeable;\n    },\n    canhavegehaltsbestandteile: function() {\n      return (this.config?.guioptions?.canhavegehaltsbestandteile === undefined)\n        ? true : this.config.guioptions.canhavegehaltsbestandteile;\n    },\n    getgehaltsbestandteile: function() {\n      var gbs = (this.config?.gbs !== undefined) ? this.config.gbs : [];\n      return { children: gbs };\n    },\n    getgueltigkeit: function() {\n      if( this.config?.gueltigkeit !== undefined ) {\n        return this.config.gueltigkeit;\n      } else if ( this.config?.data?.gueltigkeit !== undefined ) {\n        return this.config.data.gueltigkeit;\n      } else {\n        return {};\n      }\n    },\n    vbcssclasses: function() {\n      var classes = [];\n      if( (this.config?.guioptions?.nobottomborder === undefined)\n        || ((this.config?.guioptions?.nobottomborder !== undefined)\n              && this.config.guioptions.nobottomborder === false) ) {\n        classes.push('border-bottom');\n      }\n      if( (this.config?.guioptions?.nobottommargin === undefined)\n        || ((this.config?.guioptions?.nobottommargin !== undefined)\n              && this.config.guioptions.nobottommargin === false) ) {\n        classes.push('mb-3');\n      }\n      return classes;\n    }\n  }\n}\n","import configurable from '../../mixins/vbform/configurable.js';\nimport store from './vbsharedstate.js';\n\nexport default {\n  name: 'Gueltigkeit',\n  template: `\n  <div class=\"col-4 vbform_gueltigkeit\">\n    <div class=\"input-group input-group-sm\">\n      <datepicker ref=\"dpvon\" v-model=\"gueltig_ab\" :disabled=\"isdisabled || isinputdisabled('gueltig_ab')\"\n        @update:model-value=\"gueltigkeitchanged\"\n        v-bind:enable-time-picker=\"false\"\n        v-bind:placeholder=\"'gültig ab'\"\n        v-bind:teleport=\"true\"\n        six-weeks\n        auto-apply \n        text-input \n        locale=\"de\"\n        format=\"dd.MM.yyyy\"\n        model-type=\"yyyy-MM-dd\"></datepicker>\n      <span class=\"input-group-text\">&dash;</span>\n      <datepicker ref=\"dpbis\" v-model=\"gueltig_bis\" :disabled=\"isdisabled || isinputdisabled('gueltig_bis')\"\n        @update:model-value=\"gueltigkeitchanged\"\n        v-bind:enable-time-picker=\"false\"\n        v-bind:placeholder=\"'gültig bis'\"\n        v-bind:min-date=\"minDateBis\"\n        v-bind:start-date=\"minDateBis\"\n        v-bind:teleport=\"true\"\n        six-weeks\n        auto-apply \n        text-input\n        locale=\"de\"\n        format=\"dd.MM.yyyy\"\n        model-type=\"yyyy-MM-dd\"></datepicker>\n      <span class=\"input-group-text\" v-if=\"(this.sharedstatemode === 'reflect')\">\n        <i @click=\"changesharedstatemode('custom')\" class=\"fas fa-link\"></i>\n      </span>\n      <span class=\"input-group-text\" v-else-if=\"(this.sharedstatemode === 'custom')\">\n        <i @click=\"changesharedstatemode('reflect')\" class=\"fas fa-unlink\"></i>\n      </span>\n      <span class=\"input-group-text\" v-else-if=\"(this.isendable)\">\n        <i @click=\"markended()\" class=\"fas fa-calendar-times\"></i>\n      </span>\n      <span class=\"input-group-text bg-white border-0 opacity-0\" v-else>\n        <i class=\"fas fa-square text-white\"></i>\n      </span>\n    </div>\n  </div>\n  `,\n  props: {\n    'initialsharedstatemode': {\n      type: String,\n      default: 'reflect',\n      validator: function(value) {\n        return ['reflect', 'set', 'custom', 'ignore'].includes(value);\n      }\n    }\n  },\n  data: function() {\n    return {\n      sharedstate: store,\n      sharedstatemode: '',\n      gueltig_ab: '',\n      gueltig_bis: ''\n    }\n  },\n  components: {\n    \"datepicker\": VueDatePicker\n  },\n  mixins: [\n    configurable\n  ],\n  emits: [\n    \"markended\",\n    \"gueltigkeitchanged\"\n  ],\n  created: function() {\n    this.sharedstatemode = this.initialsharedstatemode;\n    this.setDataFromSharedSate();\n    this.setGUIOptionsFromConfig();\n    this.setDataFromConfig();\n  },\n  mounted: function() {\n    this.gueltigkeitchanged();\n  },\n  watch: {\n    'sharedstate.gueltigkeit.gueltig_ab': function() {\n      if( this.sharedstatemode === 'reflect' ) {\n        this.gueltig_ab = this.sharedstate.gueltigkeit.gueltig_ab;\n      }\n    },\n    'sharedstate.gueltigkeit.gueltig_bis': function() {\n      if( this.sharedstatemode === 'reflect' ) {\n        this.gueltig_bis = this.sharedstate.gueltigkeit.gueltig_bis;\n      }\n    },\n    'config': function() {\n      this.setGUIOptionsFromConfig();\n      this.setDataFromConfig();        \n    }\n  },\n  methods: {\n    setDataFromConfig: function() {\n      if( this?.config?.data?.gueltig_ab !== undefined ) {\n        this.gueltig_ab = this.config.data.gueltig_ab;\n      }\n      if( this?.config?.data?.gueltig_bis !== undefined ) {\n        this.gueltig_bis = this.config.data.gueltig_bis;\n      }\n    },\n    setDataFromSharedSate: function() {\n      if( this.sharedstatemode === 'reflect' ) {\n        this.gueltig_ab = this.sharedstate.gueltigkeit.gueltig_ab;\n        this.gueltig_bis = this.sharedstate.gueltigkeit.gueltig_bis;\n      }\n    },\n    setGUIOptionsFromConfig: function() {\n      if( this?.config?.guioptions?.sharedstatemode !== undefined ) {\n        this.sharedstatemode = this.config.guioptions.sharedstatemode;\n      }\n    },\n    getPayload: function() {\n      var guioptions = (this?.config?.guioptions !== undefined)\n                     ? JSON.parse(JSON.stringify(this.config.guioptions))\n                     : {};\n      guioptions.sharedstatemode = this.sharedstatemode;\n      return {\n        guioptions: guioptions,\n        data: {\n          gueltig_ab: this.gueltig_ab,\n          gueltig_bis: this.gueltig_bis\n        }\n      };\n    },\n    gueltigkeitchanged: function() {\n      if( this.sharedstatemode === 'set' ) {\n        this.sharedstate.gueltigkeit.gueltig_ab = this.gueltig_ab;\n        this.sharedstate.gueltigkeit.gueltig_bis = this.gueltig_bis;\n      }\n      this.$emit('gueltigkeitchanged', {\n          'gueltig_ab': this.gueltig_ab,\n          'gueltig_bis': this.gueltig_bis\n      });\n    },\n    changesharedstatemode: function(mode) {\n      this.sharedstatemode = mode;\n      this.setDataFromSharedSate();\n    },\n    markended: function() {\n      if( this.sharedstate.gueltigkeit.gueltig_ab === '' ) {\n          alert('Bitte zuerst das Gültigkeitsdatum der Änderung festlegen.');\n          return;\n      }\n      var markended = false;\n      var tag_vor_aenderung_gueltig_ab = new Date(this.sharedstate.gueltigkeit.gueltig_ab);\n      tag_vor_aenderung_gueltig_ab.setDate(tag_vor_aenderung_gueltig_ab.getDate() - 1);\n      if( this.gueltig_bis === null || this.gueltig_bis === '' ) {\n        markended = true;        \n      } else {\n        const gueltig_bis = new Date(this.gueltig_bis);\n        if( gueltig_bis > tag_vor_aenderung_gueltig_ab ) {\n          markended = true;\n        }\n      }\n      if( markended ) {\n        this.gueltig_bis = tag_vor_aenderung_gueltig_ab.toISOString().split('T')[0];\n        this.$emit('markended');\n      }\n    }\n  },\n  computed: {\n    isdisabled: function() {\n      return (this.sharedstatemode === 'reflect');\n    },\n    minDateBis: function() {\n      return (this.gueltig_ab !== '') ? this.gueltig_ab : new Date(); \n    }\n  }\n}\n","export default {\n  name: 'Errors',\n  template: `\n  <div v-if=\"errors.length > 0\" class=\"row g-2\">\n    <div v-if=\"padleft\" class=\"col-1\">&nbsp;</div>    \n    <div :class=\"getColumnClass\">\n        <div class=\"alert py-1 alert-danger\" v-for=\"(error, idx) in errors\" :key=\"idx\">{{ error }}</div>\n    </div>\n    <div v-if=\"padright\" class=\"col-1\">&nbsp;</div>\n  </div>\n  `,\n  props: {\n    errors:{\n        type: Array,\n        default: []\n    },\n    padleft: {\n        type: Boolean,\n        default: false\n    },\n    padright: {\n        type: Boolean,\n        default: false\n    }\n  },\n  computed: {\n      getColumnClass: function() {\n          var colwidth = 12;\n          if( this.padleft ) {\n              colwidth--;\n          }\n          if( this.padright ) {\n              colwidth--;\n          }\n          return 'col-' + colwidth;\n      }\n  }\n}\n","export default {\n  name: 'Infos',\n  template: `\n  <div v-if=\"infos.length > 0\" class=\"row g-2\">\n    <div v-if=\"padleft\" class=\"col-1\">&nbsp;</div>\n    <div :class=\"getColumnClass\">\n        <div class=\"alert py-1 alert-info\" v-for=\"(error, idx) in infos\" :key=\"idx\">{{ error }}</div>\n    </div>\n    <div v-if=\"padright\" class=\"col-1\">&nbsp;</div>\n  </div>\n  `,\n  props: {\n    infos:{\n        type: Array,\n        default: []\n    },\n    padleft: {\n        type: Boolean,\n        default: false\n    },\n    padright: {\n        type: Boolean,\n        default: false\n    }\n  },\n  computed: {\n      getColumnClass: function() {\n          var colwidth = 12;\n          if( this.padleft ) {\n              colwidth--;\n          }\n          if( this.padright ) {\n              colwidth--;\n          }\n          return 'col-' + colwidth;\n      }\n  }\n}\n","import gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'Gehaltsbestandteil',\n  template: `\n  <div class=\"card card-body border-0 bg-primary my-2 px-0\" style=\"--bs-bg-opacity: .1;\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n    <div class=\"row g-2 mb-1\">\n      <div class=\"col-2 ps-3\">\n        <select v-model=\"gehaltstyp\" :disabled=\"isinputdisabled('gehaltstyp')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option\n            v-for=\"gt in gehaltstypen\"\n            :value=\"gt.value\"\n            :selected=\"isselected(gt.value, this.gehaltstyp)\"\n            :disabled=\"gt.disabled\">\n            {{ gt.label }}\n          </option>\n        </select>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"input-group input-group-sm\">\n          <input v-model=\"betrag\" :disabled=\"isinputdisabled('betrag')\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Betrag\" aria-label=\"betrag\">\n          <span class=\"input-group-text\">&euro;</span>\n        </div>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"input-group input-group-sm\">\n          <input v-model=\"betrag_valorisiert\" disabled=\"\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Betrag valorisiert\" aria-label=\"betrag\">\n          <span class=\"input-group-text\">&euro; (valorisiert)</span>\n        </div>\n      </div>\n      <div class=\"col-1\">&nbsp;</div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>        \n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeGB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n      </div>\n    </div>\n    <div class=\"row g-2 mb-3\">\n      <div class=\"col-2 ps-3\">\n        <select v-model=\"auszahlungen\" :disabled=\"isinputdisabled('auszahlungen')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option value=\"14\" selected>14 Auszahlungen</option>\n          <option value=\"12\">12 Auszahlungen</option>\n        </select>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"input-group input-group-sm\">\n            <datepicker v-model=\"valorisierungssperre\" :disabled=\"isinputdisabled('valorisierungssperre')\"\n              v-bind:enable-time-picker=\"false\"\n              v-bind:placeholder=\"'Valorisierungssperre bis'\"\n              v-bind:teleport=\"true\"\n              six-weeks\n              auto-apply \n              text-input \n              locale=\"de\"\n              format=\"dd.MM.yyyy\"\n              model-type=\"yyyy-MM-dd\"></datepicker>\n        </div>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"form-check form-control-sm\">\n          <input v-model=\"valorisierung\" :disabled=\"isinputdisabled('valorisierung')\" class=\"form-check-input\" type=\"checkbox\" value=\"\" :id=\"'valorisierung_' + config.guioptions.id\">\n          <label class=\"form-check-label\" :for=\"'valorisierung_' + config.guioptions.id\">\n            Valorisierung\n          </label>\n        </div>\n      </div>\n      <div class=\"col-6\">&nbsp;</div>\n    </div>\n  </div>\n  `,\n  data: function() {\n    return {\n      id: null,\n      gehaltstyp : '',\n      betrag: '',\n      betrag_valorisiert: '',\n      gueltig_ab: '',\n      gueltig_bis: '',\n      valorisierung: true,\n      valorisierungssperre: null,\n      auszahlungen: 14,\n      db_delete: false\n    };\n  },\n  inject: [\n      'gehaltstypen'\n  ],\n  components: {\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors,\n    \"datepicker\": VueDatePicker\n  },\n  mixins: [\n    configurable\n  ],\n  emits: [\n    'removeGB'\n  ],\n  created: function() {\n    this.setDataFromConfig();\n  },\n  methods: {\n    isselected: function(optvalue, selvalue) {\n      return (optvalue === selvalue);\n    },\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.gehaltstyp !== undefined ) {\n        this.gehaltstyp = this.config.data.gehaltstyp;\n      }\n      if( this.config?.data?.betrag !== undefined ) {\n        if(!isNaN(this.config.data.betrag)) {\n            this.config.data.betrag = this.config.data.betrag.toString();\n        }\n        this.betrag = this.config.data.betrag.replace('.', ',');\n      }\n      if( this.config?.data?.betrag_valorisiert !== undefined ) {\n        if(!isNaN(this.config.data.betrag_valorisiert)) {\n            this.config.data.betrag_valorisiert = this.config.data.betrag_valorisiert.toString();\n        }\n        this.betrag_valorisiert = this.config.data.betrag_valorisiert.replace('.', ',');\n      }\n      if( this.config?.data?.valorisierung !== undefined ) {\n        this.valorisierung = this.config.data.valorisierung;\n      }\n      if( this.config?.data?.valorisierungssperre !== undefined ) {\n        this.valorisierungssperre = this.config.data.valorisierungssperre;\n      }\n      if( this.config?.data?.auszahlungen !== undefined ) {\n        this.auszahlungen = this.config.data.auszahlungen;\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    removeGB: function() {\n      this.$emit('removeGB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: JSON.parse(JSON.stringify(this.config.guioptions)),\n        data: {\n          id: this.id,\n          gehaltstyp: this.gehaltstyp,\n          betrag: this.betrag.replace(',', '.'),\n          betrag_valorisiert: this.betrag.replace(',', '.'),\n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload(),\n          valorisierung: Boolean(this.valorisierung),\n          valorisierungssperre: this.valorisierungssperre, \n          auszahlungen: this.auszahlungen\n        }\n      };\n    },\n    markGBEnded: function() {\n        this.$refs['gueltigkeit'].markended();\n    }\n  }\n}\n","export default {\n  _uuidsbyname: {},\n  get_uuid: function() {\n    var uuidValue = \"\", k, randomValue;\n    for (k = 0; k < 32; k++) {\n      randomValue = Math.random() * 16 | 0;\n\n      if (k == 8 || k == 12 || k == 16 || k == 20) {\n        uuidValue += \"-\"\n      }\n      uuidValue += (k == 12 ? 4 : (k == 16 ? (randomValue & 3 | 8) : randomValue)).toString(16);\n    }\n    return uuidValue;\n  },\n  get_uuidbyname: function(name) {\n    if( this._uuidsbyname[name] === undefined ) {\n      this._uuidsbyname[name] = this.get_uuid();\n    }\n    return this._uuidsbyname[name];\n  }\n}\n","import gehaltsbestandteil from './gehaltsbestandteil.js';\nimport presetable from '../../mixins/vbform/presetable.js';\nimport uuid from '../../helpers/vbform/uuid.js';\n\nexport default {\n  name: 'GehaltsbestandteilHelper',\n  template: `\n  <div class=\"row pt-3 pb-1\">\n    <div class=\"col-12\">\n      <div class=\"position-relative\">\n        <a class=\"btn btn-sm btn-primary\" href=\"javascript:void(0);\" @click=\"addGB\">\n          <i class=\"fas fa-plus\"></i>&nbsp;Gehaltsbestandteil{{ childcount }}\n        </a>\n      </div>\n    </div>\n  </div>\n  <gehaltsbestandteil ref=\"parts\" v-for=\"config in children\"\n    v-bind:config=\"config\" :key=\"config.guioptions.id\" @removeGB=\"removeGB\"></gehaltsbestandteil>\n  `,\n  data: function() {\n    return {\n      payload: []\n    };\n  },\n  components: {\n    'gehaltsbestandteil': gehaltsbestandteil,\n  },\n  mixins: [\n    presetable\n  ],\n  methods: {\n    addGB: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      this.children.unshift({\n        type: 'gehaltsbestandteil',\n        guioptions: {\n          id: uuid.get_uuid(),\n          removeable: true\n        }\n      });\n    },\n    removeGB: function(payload) {\n      var children = this.children.filter(function(gb) {\n        return gb.guioptions.id !== payload.id;\n      });\n      this.children = children;\n    },\n    getPayload: function() {\n      var payload = [];\n\n      for( var i in this.$refs.parts ) {\n        payload.push(this.$refs.parts[i].getPayload());\n      }\n\n      return payload;\n    },\n    markGBsEnded: function() {\n      for( var i in this.$refs.parts ) {\n        this.$refs.parts[i].markGBEnded();\n      } \n    },\n    setGBsDelete: function(hastobedeleted) {\n      for( var i in this.$refs.parts ) {\n        this.$refs.parts[i].setDelete(hastobedeleted);\n      }\n    }\n  },\n  computed: {\n    childcount: function() {\n      return (this.children.length > 0) ? ' (' + this.children.length + ')' : '';\n    }\n  }\n}\n","export default {\n  getTeilzeittypen() {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getTeilzeittypen',\n    }\n  }  \n};\n","import gehaltsbestandteilhelper from './gehaltsbestandteilhelper.js';\nimport gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\nimport ApiStunden from  '../../../js/api/factory/stunden.js';\n\nexport default {\n  name: 'VertragsbestandteilStunden',\n  template: `\n  <div class=\"card card-body my-2\">\n    <div class=\"py-0\">\n      <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n      <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n      <div class=\"row g-2\">\n        <div class=\"col-3\">\n          <div class=\"input-group input-group-sm mb-3\">\n            <input v-model=\"stunden\" :disabled=\"isinputdisabled('stunden')\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Stunden\" aria-label=\"stunden\">\n            <span class=\"input-group-text\">Std/Woche</span>\n          </div>\n        </div>\n        <div class=\"col-3\">\n          <select v-model=\"teilzeittyp_kurzbz\" :disabled=\"isinputdisabled('teilzeittyp_kurzbz')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n            <option\n              v-for=\"f in lists.teilzeittypen\"\n              :value=\"f.value\"\n              :selected=\"isselected(f.value, this.teilzeittyp_kurzbz)\"\n              :disabled=\"f.disabled\">\n              {{ f.label }}\n            </option>\n          </select>\n        </div>\n        <div class=\"col-1\">&nbsp;</div>\n        <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\" @gueltigkeitchanged=\"gueltigkeitchanged\"></gueltigkeit>\n        <div class=\"col-1 pe-3\">\n          <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n          <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n          <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n        </div>\n      </div>\n    </div>\n    <gehaltsbestandteilhelper ref=\"gbh\" v-bind:preset=\"getgehaltsbestandteile\"></gehaltsbestandteilhelper>\n  </div>\n  `,\n  components: {\n    'gehaltsbestandteilhelper': gehaltsbestandteilhelper,\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      stunden: '',\n      teilzeittyp_kurzbz: '',\n      lists: {\n        teilzeittypen: []\n      },\n      db_delete: false\n    };\n  },\n  created: function() {\n    this.getTeilzeittypen();\n    this.setDataFromConfig();\n  },\n  inject: ['$api'],\n  methods: {\n    gueltigkeitchanged: function(payload) {\n      console.log(JSON.stringify(payload));  \n    },\n    isselected: function(optvalue, selvalue) {\n      return (optvalue === selvalue);\n    },\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.stunden !== undefined ) {\n        if(!isNaN(this.config.data.stunden)) {\n            this.config.data.stunden = this.config.data.stunden.toString();\n        }\n        this.stunden = this.config.data.stunden.replace('.', ',');\n      }\n      if( this.config?.data?.teilzeittyp_kurzbz !== undefined) {\n        this.teilzeittyp_kurzbz = this.config.data.teilzeittyp_kurzbz != null \n            ? this.config.data.teilzeittyp_kurzbz : '';\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    getTeilzeittypen: async function() {\n      const response = await this.$api.call(ApiStunden.getTeilzeittypen());\n      const teilzeittypen = response.data;\n      teilzeittypen.unshift({\n        value: '',\n        label: 'Teilzeittyp wählen',\n        disabled: false\n      });\n      this.lists.teilzeittypen = teilzeittypen;\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          stunden: this.stunden.replace(',', '.'),\n          teilzeittyp_kurzbz: this.teilzeittyp_kurzbz, \n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload()\n        },\n        gbs: this.$refs.gbh.getPayload()\n      };\n    }\n  }\n}\n","import gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'VertragsbestandteilZeitaufzeichnung',\n  template: `\n  <div class=\"py-0 my-2\">\n   <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n    <div class=\"row g-2\" style=\"padding-right: 1rem;\">\n      <div class=\"col-2\">\n        <div class=\"form-check form-control-sm\">\n            <input v-model=\"zeitaufzeichnung\" :disabled=\"isinputdisabled('zeitaufzeichnung')\" class=\"form-check-input\" type=\"checkbox\" value=\"\" :id=\"'zeitaufzeichnung_' + config.guioptions.id\">\n            <label class=\"form-check-label\" :for=\"'zeitaufzeichnung_' + config.guioptions.id\">\n              Zeitaufzeichnung\n            </label>\n        </div>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"form-check form-control-sm\">\n            <input v-model=\"azgrelevant\" :disabled=\"isinputdisabled('azgrelevant')\" class=\"form-check-input\" type=\"checkbox\" value=\"\" :id=\"'azgrelevant_' + config.guioptions.id\">\n            <label class=\"form-check-label\" :for=\"'azgrelevant_' + config.guioptions.id\">\n              AZG-relevant\n            </label>\n        </div>\n      </div>\n      <div class=\"col-2\">\n        <div class=\"form-check form-control-sm\">\n            <input v-model=\"homeoffice\" :disabled=\"isinputdisabled('homeoffice')\" class=\"form-check-input\" type=\"checkbox\" value=\"\" :id=\"'homeoffice_' + config.guioptions.id\">\n            <label class=\"form-check-label\" :for=\"'homeoffice_' + config.guioptions.id\">\n              Home-Office\n            </label>\n        </div>\n      </div>\n      <div class=\"col-1 form-check form-control-sm\">&nbsp;</div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n      </div>\n    </div>\n   </div>\n  </div>\n  `,\n  components: {\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      zeitaufzeichnung: true,\n      azgrelevant: true,\n      homeoffice: true,\n      db_delete: false\n    };\n  },\n  created: function() {\n    this.setDataFromConfig();\n  },\n  methods: {\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.zeitaufzeichnung !== undefined ) {\n        this.zeitaufzeichnung = this.config.data.zeitaufzeichnung;\n      }\n      if( this.config?.data?.azgrelevant !== undefined ) {\n        this.azgrelevant = this.config.data.azgrelevant;\n      }\n      if( this.config?.data?.homeoffice !== undefined ) {\n        this.homeoffice = this.config.data.homeoffice\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          zeitaufzeichnung: Boolean(this.zeitaufzeichnung),\n          azgrelevant: Boolean(this.azgrelevant),\n          homeoffice: Boolean(this.homeoffice),\n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload()\n        }\n      };\n    }\n  }\n}\n","import gehaltsbestandteilhelper from './gehaltsbestandteilhelper.js'\nimport gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\nimport store from './vbsharedstate.js';\nimport ApiFunktion from  '../../../js/api/factory/funktion.js';\n\nexport default {\n  name: 'VertragsbestandteilFunktion',\n  template: `\n  <div class=\"card card-body my-2\" :class=\"canhavegehaltsbestandteile ? '' : 'border-white py-0'\">\n    <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config.guioptions.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config.guioptions.errors : []\"></errors>\n    <div class=\"row g-2 py-2\">\n      <div class=\"col-5\">\n        <div class=\"form-check form-check-inline\">\n          <input v-model=\"mode\" :disabled=\"isinputdisabled('mode')\" class=\"form-check-input form-check-input-sm\" type=\"radio\"\n            @change=\"resetDropdowns\"\n            :name=\"'vbfunktionmode_' + config.guioptions.id\" :id=\"'vbfunktionmode1_' + config.guioptions.id\" value=\"neu\">\n          <label class=\"form-check-label\" :for=\"'vbfunktionmode1_' + config.guioptions.id\">Neue Funktion</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n          <input v-model=\"mode\" class=\"form-check-input form-check-input-sm\" type=\"radio\"\n            @change=\"resetDropdowns\"\n            :name=\"'vbfunktionmode_' + config.guioptions.id\" :id=\"'vbfunktionmode2_' + config.guioptions.id\" value=\"bestehende\">\n          <label class=\"form-check-label\" :for=\"'vbfunktionmode2_' + config.guioptions.id\">Bestehende Funktion</label>\n        </div>\n      </div>\n      <div class=\"col-7\">&nbsp;</div>\n    </div>\n    <div class=\"row g-2\">\n    <template v-if=\"mode === 'neu'\">\n      <div class=\"col-3\">\n        <div class=\"fhc_autocomplete_wrapper\">\n            <p-autocomplete \n                v-model=\"autocomplete.selectedfunktion\" \n                dropdown\n                dropdownMode=\"current\" \n                :suggestions=\"autocomplete.funktionen\" \n                @complete=\"searchFunktionen\"\n                optionLabel=\"label\"\n                optionDisabled=\"disabled\"\n                forceSelection\n                :disabled=\"isinputdisabled('funktion')\"\n                :placeholder=\"getFunktionDropdownPlaceholder\"\n            ></p-autocomplete>\n        </div>\n<!--        \n        <select v-model=\"funktion\" :disabled=\"isinputdisabled('funktion')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option\n            v-for=\"f in lists.funktionen\"\n            :value=\"f.value\"\n            :selected=\"isselected(f.value, this.funktion)\"\n            :disabled=\"f.disabled\">\n            {{ f.label }}\n          </option>\n        </select>\n-->\n      </div>\n      <div class=\"col-3\">\n        <div class=\"fhc_autocomplete_wrapper\">\n            <p-autocomplete \n                v-model=\"autocomplete.selectedorget\" \n                dropdown \n                dropdownMode=\"current\" \n                :suggestions=\"autocomplete.orgets\" \n                @complete=\"searchOrgets\"\n                optionLabel=\"label\"\n                optionDisabled=\"disabled\"\n                forceSelection\n                :disabled=\"isinputdisabled('orget')\"\n                :placeholder=\"getOrgetDropdownPlaceholder\"\n            ></p-autocomplete>\n        </div>\n<!--\n        <select v-model=\"orget\" :disabled=\"isinputdisabled('orget')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option\n            v-for=\"oe in lists.orgets\"\n            :value=\"oe.value\"\n            :selected=\"isselected(oe.value, this.orget)\"\n            :disabled=\"oe.disabled\">\n            {{ oe.label }}\n          </option>\n        </select>        \n-->\n      </div>\n      <div class=\"col-1\">&nbsp;</div>\n    </template>\n    <template v-else-if=\"mode === 'bestehende'\">\n      <div class=\"col-6\">\n        <select v-model=\"benutzerfunktionid\" :disabled=\"isinputdisabled('benutzerfunktionid')\" class=\"form-select form-select-sm\">\n          <option\n            v-for=\"bf in lists.benutzerfunktionen\"\n            :value=\"bf.value\"\n            :selected=\"isselected(bf.value, this.benutzerfunktionid)\"\n            :disabled=\"bf.disabled\">\n            {{ bf.label }}\n          </option>\n        </select>\n      </div>\n      <div class=\"col-1\">&nbsp;</div>\n    </template>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>        \n      </div>\n    </div>\n    </div>\n    <gehaltsbestandteilhelper v-if=\"canhavegehaltsbestandteile\" ref=\"gbh\" v-bind:preset=\"getgehaltsbestandteile\"></gehaltsbestandteilhelper>\n  </div>\n  `,\n  inject: ['$api','$fhcAlert'],\n  components: {\n    'gehaltsbestandteilhelper': gehaltsbestandteilhelper,\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors,\n    'p-autocomplete': primevue.autocomplete\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      funktion: '',\n      orget: '',\n      benutzerfunktionid: '',\n      db_delete: false,\n      mode: 'neu',\n      lists: {\n        funktionen: [],\n        orgets: [{\n            value: '',\n            label: 'Bitte zuerst ein Unternehmen auswählen',\n            disabled: true\n        }],\n        benutzerfunktionen: [{\n            value: '',\n            label: 'Bitte zuerst ein Unternehmen auswählen',\n            disabled: true\n        }]\n      },\n      autocomplete: {\n        funktionen: [],\n        orgets: [],\n        selectedfunktion: '',\n        selectedorget: ''\n      },\n      store: store\n    };\n  },\n  created: function() {\n    this.getFunktionen();\n    this.getOrgetsForCompany();\n    this.getCurrentFunctions();\n    this.setDataFromConfig();\n  },\n  watch: {\n      'store.unternehmen': function() {\n        this.getOrgetsForCompany();\n        this.getCurrentFunctions();\n      },\n      'store.mitarbeiter_uid': function() {\n          this.getCurrentFunctions();\n      },\n      'autocomplete.selectedfunktion': function() {\n        if(this.autocomplete.selectedfunktion?.value !== undefined) {\n          this.funktion = this.autocomplete.selectedfunktion.value;\n        } else {\n          this.funktion = '';\n        }\n      },\n      'autocomplete.selectedorget': function() {\n        if(this.autocomplete.selectedorget?.value !== undefined) {\n          this.orget = this.autocomplete.selectedorget.value;\n        } else {\n          this.orget = '';\n        }\n      }\n  },\n  methods: {\n    isselected: function(optvalue, selvalue) {\n      return (optvalue === selvalue);\n    },\n    resetDropdowns: function() {\n      if(!this.isinputdisabled('funktion')) {\n        this.autocomplete.selectedfunktion = '';\n      }\n      if(!this.isinputdisabled('orget')) {\n        this.autocomplete.selectedorget = '';\n      }\n      this.benutzerfunktionid = '';\n    },\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.funktion !== undefined ) {\n        this.funktion = this.config.data.funktion;        \n      }\n      if( this.config?.data?.orget !== undefined ) {\n        this.orget = this.config.data.orget;        \n      }\n      if( this.config?.data?.benutzerfunktionid !== undefined ) {\n        this.benutzerfunktionid = this.config.data.benutzerfunktionid;\n      }\n      if( this.config?.data?.mode !== undefined ) {\n        this.mode = this.config.data.mode;\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    getFunktionen: async function() {\n      const filter = (this.config.guioptions?.filter) ? this.config.guioptions?.filter : 'all';\n      const response = await this.$api.call(ApiFunktion.getContractFunctions(filter));\n      const funktionen = response.data;\n      funktionen.unshift({\n        value: '',\n        label: 'Funktion wählen',\n        disabled: true\n      });\n      this.lists.funktionen = funktionen;\n      this.autocomplete.funktionen = [...this.lists.funktionen];\n      this.setAutocompleteFunktion();\n    },\n    getOrgetsForCompany: async function() {\n      if( this.store.unternehmen === '' ) {\n          return;\n      }\n      const response = await this.$api.call(ApiFunktion.getOrgetsForCompany(this.store.unternehmen));\n      const orgets = response.data;\n      orgets.unshift({\n        value: '',\n        label: 'OrgEinheit wählen',\n        disabled: true\n      });\n      this.lists.orgets = orgets;\n      this.autocomplete.orgets = [...this.lists.orgets];\n      this.setAutocompleteOrget();\n    },\n    getCurrentFunctions: async function() {\n      if(this.store.unternehmen === '' || this.store.mitarbeiter_uid === '' ) {\n        return;  \n      }\n      const response = await this.$api.call(ApiFunktion.getCurrentFunctions(this.store.mitarbeiter_uid, this.store.unternehmen));\n      const benutzerfunktionen = (response.error === 1) ? [] : response.data;\n      benutzerfunktionen.unshift({\n        value: '',\n        label: 'Benutzerfunktion wählen',\n        disabled: true\n      });\n      this.lists.benutzerfunktionen = benutzerfunktionen;\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getGehaltsbestandteilePayload: function() {\n      return (this.$refs?.gbh !== undefined) ? this.$refs.gbh.getPayload() : [];\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          funktion: this.funktion,\n          orget: this.orget,\n          benutzerfunktionid: this.benutzerfunktionid,\n          mitarbeiter_uid: this.store.mitarbeiter_uid,\n          mode: this.mode,\n          db_delete: this.db_delete,          \n          gueltigkeit: this.$refs.gueltigkeit.getPayload()\n        },\n        gbs: this.getGehaltsbestandteilePayload()\n      };\n    },\n    searchFunktionen: function(event) {\n        var that = this;\n        \n        setTimeout(function() {\n            if (!event.query.trim().length) {\n                that.autocomplete.funktionen = [...that.lists.funktionen];\n            } else {\n                that.autocomplete.funktionen = that.lists.funktionen.filter((item) => {\n                    return item.label.toLowerCase().includes(event.query.toLowerCase());\n                });\n            }\n        }, 250);\n    },\n    searchOrgets: function(event) {\n        var that = this;\n        \n        setTimeout(function() {\n            if (!event.query.trim().length) {\n                that.autocomplete.orgets = [...that.lists.orgets];\n            } else {\n                that.autocomplete.orgets = that.lists.orgets.filter((item) => {\n                    return item.label.toLowerCase().includes(event.query.toLowerCase());\n                });\n            }\n        }, 250);\n    },\n    setAutocompleteFunktion: function() {\n        if( this.funktion.length > 0 && this.autocomplete.funktionen.length > 0 ) {\n          var that = this;\n          this.autocomplete.selectedfunktion = this.autocomplete.funktionen.find((item) => {\n              return that.funktion === item.value;\n          });\n        }\n    },\n    setAutocompleteOrget: function() {\n        if( this.orget.length > 0 && this.autocomplete.orgets.length > 0 ) {\n          var that = this;\n          this.autocomplete.selectedorget = this.autocomplete.orgets.find((item) => {\n              return that.orget === item.value;\n          });\n        }\n    }\n  },\n  computed: {\n      getFunktionDropdownPlaceholder: function() {\n          if( this.store.unternehmen === '' ) {\n            return 'Bitte zuerst ein Unternehmen auswählen';\n          }\n          return 'Funktion wählen';\n      },\n      getOrgetDropdownPlaceholder: function() {\n          if( this.store.unternehmen === '' ) {\n            return 'Bitte zuerst ein Unternehmen auswählen';\n          }\n          return 'OrgEinheit wählen';\n      }\n  }\n}\n","export default {\n  getKarenztypen() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getKarenztypen',\n    }\n  },\n  saveKarenz(payload) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/KarenzAPI/saveKarenz',\n      params: payload\n    }\n  }  \n};\n","import gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\nimport store from './vbsharedstate.js';\nimport ApiKarenz from  '../../../js/api/factory/karenz.js';\n\nexport default {\n  name: 'VertragsbestandteilKarenz',\n  template: `\n  <div class=\"py-0 my-2\">\n   <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config.guioptions.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config.guioptions.errors : []\"></errors>\n    <div class=\"row g-2 py-2\">\n      <div class=\"col-4\">\n        <select v-model=\"karenztyp_kurzbz\" :disabled=\"isinputdisabled('karenztyp_kurzbz')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option\n            v-for=\"f in lists.karenztypen\"\n            :value=\"f.value\"\n            :selected=\"isselected(f.value, this.karenztyp_kurzbz)\"\n            :disabled=\"f.disabled\">\n            {{ f.label }}\n          </option>\n        </select>\n      </div>\n      <div class=\"col-3\">\n        &nbsp;\n      </div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>        \n      </div>\n    </div>\n    <div class=\"row g-2 py2\">\n      <div class=\"col-3\">\n        <div class=\"input-group input-group-sm\">\n            <datepicker v-model=\"geplanter_geburtstermin\" \n              :disabled=\"isinputdisabled('geplanter_geburtstermin') || karenztyp_kurzbz !== 'elternkarenz'\"\n              v-bind:enable-time-picker=\"false\"\n              v-bind:placeholder=\"'geplanter Geburtstermin'\"\n              v-bind:teleport=\"true\"\n              six-weeks\n              auto-apply \n              text-input \n              locale=\"de\"\n              format=\"dd.MM.yyyy\"\n              model-type=\"yyyy-MM-dd\"\n              class=\"me-2\"></datepicker>\n        </div>\n      </div>\n      <div class=\"col-3\">\n          <div class=\"input-group input-group-sm\">\n            <datepicker v-model=\"tatsaechlicher_geburtstermin\" \n              :disabled=\"isinputdisabled('tatsaechlicher_geburtstermin') || karenztyp_kurzbz !== 'elternkarenz'\"\n              v-bind:enable-time-picker=\"false\"\n              v-bind:placeholder=\"'tatsaechlicher Geburtstermin'\"\n              v-bind:teleport=\"true\"\n              six-weeks\n              auto-apply \n              text-input \n              locale=\"de\"\n              format=\"dd.MM.yyyy\"\n              model-type=\"yyyy-MM-dd\"></datepicker>\n          </div>\n      </div>\n      <div class=\"col-6\">\n        &nbsp;\n      </div>\n    </div>\n   </div>\n  </div>\n  `,\n  components: {\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors,\n    'datepicker': VueDatePicker,\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      karenztyp_kurzbz: '',\n      geplanter_geburtstermin: '',\n      tatsaechlicher_geburtstermin: '',\n      db_delete: false,\n      lists: {\n        karenztypen: []\n      },\n      store: store\n    };\n  },\n  created: function() {\n    this.getKarenztypen();\n    this.setDataFromConfig();\n  },\n  inject: ['$api'],\n  methods: {\n    isselected: function(optvalue, selvalue) {\n      return (optvalue === selvalue);\n    },\n    resetDropdowns: function() {\n      if(!this.isinputdisabled('karenztyp')) {\n        this.karenztyp = '';\n      }\n    },\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.karenztyp_kurzbz !== undefined ) {\n        this.karenztyp_kurzbz = this.config.data.karenztyp_kurzbz;\n      }\n      if( this.config?.data?.geplanter_geburtstermin !== undefined ) {\n        this.geplanter_geburtstermin = this.config.data.geplanter_geburtstermin;\n      }\n      if( this.config?.data?.tatsaechlicher_geburtstermin !== undefined ) {\n        this.tatsaechlicher_geburtstermin = this.config.data.tatsaechlicher_geburtstermin;\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    getKarenztypen: async function() {\n      const response = await this.$api.call(ApiKarenz.getKarenztypen());\n      const karenztypen = response.data;\n      karenztypen.unshift({\n        value: '',\n        label: 'Karenztyp wählen',\n        disabled: true\n      });\n      this.lists.karenztypen = karenztypen;\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          karenztyp_kurzbz: this.karenztyp_kurzbz,\n          geplanter_geburtstermin: this.geplanter_geburtstermin,\n          tatsaechlicher_geburtstermin: this.tatsaechlicher_geburtstermin,\n          db_delete: this.db_delete,          \n          gueltigkeit: this.$refs.gueltigkeit.getPayload()\n        },\n        gbs: []\n      };\n    }\n  }\n}\n","import vertragsbestandteilstunden from './vertragsbestandteil_stunden.js';\nimport vertragsbestandteilzeitaufzeichnung from './vertragsbestandteil_zeitaufzeichnung.js';\nimport vertragsbestandteilfunktion from './vertragsbestandteil_funktion.js';\nimport vertragsbestandteilfreitext from './vertragsbestandteil_freitext.js';\nimport vertragsbestandteilkuendigungsfrist from './vertragsbestandteil_kuendigungsfrist.js';\nimport vertragsbestandteilurlaubsanspruch from './vertragsbestandteil_urlaubsanspruch.js';\nimport vertragsbestandteilkarenz from './vertragsbestandteil_karenz.js';\nimport presetable from '../../mixins/vbform/presetable.js';\nimport uuid from '../../helpers/vbform/uuid.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'VertragsbestandteilList',\n  template: `\n      <div class=\"card card-body mb-3\">\n        <div class=\"row g-2 py-1\">\n          <div class=\"col\">\n            <div class=\"position-relative\">\n              <a class=\"btn btn-sm btn-primary mb-1\" href=\"javascript:void(0);\" @click=\"addVB\"><i class=\"fas fa-plus\"></i>\n                &nbsp;\n                {{ title }}{{ childcount }}\n                &nbsp;\n              </a>\n            </div>\n          </div>\n        </div>\n        <infos :infos=\"(preset?.guioptions?.infos !== undefined) ? preset?.guioptions?.infos : []\"></infos>\n        <errors :errors=\"(preset?.guioptions?.errors !== undefined) ? preset?.guioptions?.errors : []\"></errors>\n        <component ref=\"parts\" v-bind:is=\"config.type\" v-for=\"config in getChildren()\"\n          v-bind:config=\"config\" :key=\"config.guioptions.id\" @removeVB=\"removeVB\"></component>\n      </div>\n  `,\n  props: [\n    'data'\n  ],\n  data: function() {\n    return {\n      title: '',\n      vertragsbestandteiltyp: '',\n      payload: {\n        type: 'vertragsbestandteillist',\n        guioptions: {\n          title: '',\n          vertragsbestandteiltyp: '',\n        },\n        children: []\n      }\n    };\n  },\n  components: {\n    'vertragsbestandteilstunden': vertragsbestandteilstunden,\n    'vertragsbestandteilzeitaufzeichnung': vertragsbestandteilzeitaufzeichnung,\n    'vertragsbestandteilfunktion': vertragsbestandteilfunktion,\n    'vertragsbestandteilfreitext': vertragsbestandteilfreitext,\n    'vertragsbestandteilkuendigungsfrist': vertragsbestandteilkuendigungsfrist,\n    'vertragsbestandteilurlaubsanspruch': vertragsbestandteilurlaubsanspruch,\n    'vertragsbestandteilkarenz': vertragsbestandteilkarenz,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    presetable\n  ],\n  created: function() {\n    this.title = this.preset.guioptions.title;\n    this.vertragsbestandteiltyp = this.preset.guioptions.vertragsbestandteiltyp\n  },\n  methods: {\n    addVB: function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if( this.vertragsbestandteiltyp === '') {\n        return;\n      }\n\n      var vbid = uuid.get_uuid();\n      var guioptions = (this.preset.guioptions?.childdefaults?.guioptions !== undefined)\n                     ? JSON.parse(JSON.stringify(this.preset.guioptions.childdefaults.guioptions))\n                     : {};\n      if( this.preset.guioptions?.filter !== undefined ) {\n          guioptions.filter = this.preset.guioptions.filter;\n      }\n      guioptions.id = vbid;\n      guioptions.removeable = true;\n      var data = (this.preset.guioptions?.childdefaults?.data !== undefined)\n                     ? JSON.parse(JSON.stringify(this.preset.guioptions.childdefaults.data))\n                     : {};\n      this.store.addVB(vbid, {\n        type: this.vertragsbestandteiltyp,\n        guioptions: guioptions,\n        data: data\n      });\n      this.children.unshift(vbid);\n    },\n    removeVB: function(payload) {\n      this.store.removeVB(payload.id);\n      var children = this.children.filter(function(vbid) {\n        return vbid !== payload.id;\n      });\n      this.children = children;\n    },\n    getPayload: function() {\n      this.payload = {\n        type: 'vertragsbestandteillist',\n        guioptions: JSON.parse(JSON.stringify(this.preset.guioptions)),\n        children: JSON.parse(JSON.stringify(this.children))\n      };\n      this.updateVBsInStore();\n      return this.payload;\n    },\n    updateVBsInStore: function() {\n      for( var id in this.$refs.parts) {\n        var payload = this.$refs.parts[id].getPayload();\n        this.store.addVB(this.$refs.parts[id].config.guioptions.id, payload);\n      }\n    },\n    getChildren: function() {\n      var vbs = [];\n      var that = this;\n\n      for( var i in this.children ) {\n        var uuid = this.children[i];\n        var vb = that.store.getVB(uuid);\n        if( vb !== null ) {\n          vbs.push(vb);\n        } else {\n          delete this.children[i];\n        }\n      }\n\n      return vbs;\n    }\n  },\n  computed: {\n    childcount: function() {\n      return (this.children.length > 0) ? ' (' + this.children.length + ')' : '';\n    }\n  }\n}\n","import gehaltsbestandteilhelper from './gehaltsbestandteilhelper.js';\nimport gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'VertragsbestandteilFreitext',\n  template: `\n  <div class=\"my-2\" :class=\"canhavegehaltsbestandteile ? 'card card-body' : 'py-0'\">\n    <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n    <div class=\"row g-2 py-2\">\n      <div class=\"col-6\">\n        <select v-model=\"freitexttyp\" :disabled=\"isinputdisabled('freitexttyp')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n          <option value=\"\" selected>Freitexttyp wählen</option>\n          <option value=\"allin\">AllIn</option>\n          <option value=\"ersatzarbeitskraft\">Ersatzarbeitskraft</option>\n          <option value=\"zusatzvereinbarung\">Zusatzvereinbarung</option>\n          <option value=\"befristung\">Befristung</option>\n          <option value=\"sonstiges\">Sonstiges</option>\n        </select>\n      </div>\n      <div class=\"col-1\">&nbsp;</div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>        \n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n      </div>\n    </div>\n    <div class=\"row g-2 py-2\" v-show=\"showinput('titel')\">\n      <div class=\"col-6\">\n        <input v-model=\"titel\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Titel\" aria-label=\"Titel\">\n      </div>\n      <div class=\"col-5\">&nbsp;</div>\n      <div class=\"col-1\">&nbsp;</div>\n    </div>\n    <div class=\"row g-2 py-2\" v-show=\"showinput('freitext')\">\n      <div class=\"col-6\">\n        <textarea v-model=\"freitext\" rows=\"5\" class=\"form-control form-control-sm\" placeholder=\"Freitext\" aria-label=\"Freitext\"></textarea>\n      </div>\n      <div class=\"col-5\">&nbsp;</div>\n      <div class=\"col-1\">&nbsp;</div>\n    </div>\n    </div>\n    <gehaltsbestandteilhelper ref=\"gbh\" v-if=\"canhavegehaltsbestandteile\" v-bind:preset=\"getgehaltsbestandteile\"></gehaltsbestandteilhelper>\n  </div>\n  `,\n  components: {\n    'gehaltsbestandteilhelper': gehaltsbestandteilhelper,\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function() {\n    return {\n      id: null,\n      freitexttyp: '',\n      titel: '',\n      freitext: '',\n      kuendigungsrelevant: '',\n      db_delete: false\n    }\n  },\n  created: function() {\n    this.setDataFromConfig();\n  },\n  methods: {\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.freitexttyp !== undefined ) {\n        this.freitexttyp = this.config.data.freitexttyp;\n      }\n      if( this.config?.data?.titel !== undefined ) {\n        this.titel = this.config.data.titel;\n      }\n      if( typeof this.config?.data?.freitexttyp !== undefined ) {\n        this.freitext = this.config.data.freitext\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getGehaltsbestandteilePayload: function() {\n      return (this.$refs?.gbh !== undefined) ? this.$refs.gbh.getPayload() : [];\n    },\n    getPayload: function() {\n      return {\n        type: 'vertragsbestandteilfreitext',\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          freitexttyp: this.freitexttyp,\n          titel: this.titel,\n          freitext: this.freitext,\n          kuendigungsrelevant: this.kuendigungsrelevant,\n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload()\n        },\n        gbs: this.getGehaltsbestandteilePayload()\n      };\n    }\n  }\n}\n","import gehaltsbestandteilhelper from './gehaltsbestandteilhelper.js';\nimport gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'VertragsbestandteilKuendigungsfrist',\n  template: `\n  <div class=\"py-0 my-2\">\n   <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n    <div class=\"row g-2\">\n      <div class=\"col-3\">\n        <div class=\"input-group input-group-sm mb-3\">\n          <input v-model=\"arbeitgeber_frist\" :disabled=\"isinputdisabled('arbeitgeber_frist')\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Arbeitgeber Frist\" aria-label=\"arbeitgeber_frist\">\n          <span class=\"input-group-text\">Wochen</span>\n        </div>\n      </div>\n      <div class=\"col-3\">\n        <div class=\"input-group input-group-sm mb-3\">\n          <input v-model=\"arbeitnehmer_frist\" :disabled=\"isinputdisabled('arbeitnehmer_frist')\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Arbeitnehmer Frist\" aria-label=\"arbeitnehmer_frist\">\n          <span class=\"input-group-text\">Wochen</span>\n        </div>\n      </div>\n      <div class=\"col-1\">&nbsp;</div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n      </div>\n    </div>\n   </div>\n  </div>\n  `,\n  components: {\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      arbeitgeber_frist: '',\n      arbeitnehmer_frist: '',\n      db_delete: false\n    }\n  },\n  created: function() {\n    this.setDataFromConfig();\n  },\n  methods: {\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.arbeitgeber_frist !== undefined ) {\n        this.arbeitgeber_frist = this.config.data.arbeitgeber_frist;\n      }\n      if( this.config?.data?.arbeitnehmer_frist !== undefined ) {\n        this.arbeitnehmer_frist = this.config.data.arbeitnehmer_frist;\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          arbeitgeber_frist: this.arbeitgeber_frist,\n          arbeitnehmer_frist: this.arbeitnehmer_frist,\n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload(),\n        }\n      };\n    }\n  }\n}\n","import gehaltsbestandteilhelper from './gehaltsbestandteilhelper.js';\nimport gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\n\nexport default {\n  name: 'VertragsbestandteilUrlaubsanspruch',\n  template: `\n  <div class=\"py-0 my-2\">\n   <div class=\"py-0\">\n    <infos :infos=\"(config?.guioptions?.infos !== undefined) ? config?.guioptions?.infos : []\"></infos>\n    <errors :errors=\"(config?.guioptions?.errors !== undefined) ? config?.guioptions?.errors : []\"></errors>\n    <div class=\"row g-2\">\n      <div class=\"col-3\">\n        <div class=\"input-group input-group-sm mb-3\">\n          <input v-model=\"tage\" :disabled=\"isinputdisabled('tage')\" type=\"text\" class=\"form-control form-control-sm\" placeholder=\"Tage\" aria-label=\"tage\">\n          <span class=\"input-group-text\">Urlaubstage</span>\n        </div>\n      </div>\n      <div class=\"col-4\">&nbsp;</div>\n      <gueltigkeit ref=\"gueltigkeit\" :config=\"getgueltigkeit\" @markended=\"markGBsEnded\"></gueltigkeit>\n      <div class=\"col-1 pe-3\">\n        <span v-if=\"db_delete\" class=\"badge bg-danger\">wird gelöscht</span>\n        <button v-if=\"isremoveable\" type=\"button\" class=\"btn-close btn-sm p-2 float-end\" @click=\"removeVB\" aria-label=\"Close\"></button>\n        <button v-if=\"isdeleteable\" type=\"button\" class=\"btn btn-sm p-2 float-end\" @click=\"toggledelete\" aria-label=\"Delete\"><i v-if=\"db_delete\" class=\"fas fa-trash-restore\"></i><i v-else=\"\" class=\"fas fa-trash\"></i></button>\n      </div>\n    </div>\n   </div>\n  </div>\n  `,\n  components: {\n    'gueltigkeit': gueltigkeit,\n    'infos': infos,\n    'errors': errors\n  },\n  mixins: [\n    configurable\n  ],\n  emits: {\n    removeVB: null\n  },\n  data: function () {\n    return {\n      id: null,\n      tage: '',\n      db_delete: false\n    };\n  },\n  created: function() {\n    this.setDataFromConfig();\n  },\n  methods: {\n    setDataFromConfig: function() {\n      if( this.config?.data?.id !== undefined ) {\n        this.id = this.config.data.id;\n      }\n      if( this.config?.data?.tage !== undefined ) {\n        this.tage = this.config.data.tage;\n      }\n      if( this.config?.data?.db_delete !== undefined ) {\n        this.db_delete = this.config.data.db_delete;\n      }\n    },\n    removeVB: function() {\n      this.$emit('removeVB', {id: this.config.guioptions.id});\n    },\n    getPayload: function() {\n      return {\n        type: this.config.type,\n        guioptions: this.config.guioptions,\n        data: {\n          id: this.id,\n          tage: this.tage,\n          db_delete: this.db_delete,\n          gueltigkeit: this.$refs.gueltigkeit.getPayload(),\n        }\n      };\n    }\n  }\n}\n","export default {\n  getUnternehmen() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/OrgAPI/getUnternehmen',\n    }\n  },\n  getVertragsarten() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getVertragsarten',\n    }\n  },\n  getDVByID(dvid) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/dvByID/' + dvid,\n    }\n  },\n  endDV(payload) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/endDV',\n      params: payload\n    }\n  },\n  deactivateDV(payload) {    \n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/deactivateDV',\n      params: payload\n    }\n  },\n  getDvEndeGruende() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getDvEndeGruende',\n    }\n  }\n};\n","import gueltigkeit from './gueltigkeit.js';\nimport configurable from '../../mixins/vbform/configurable.js';\nimport store from './vbsharedstate.js';\nimport ApiDV from  '../../../js/api/factory/dv.js';\n\nexport default {\n  name: 'Dienstverhaeltnis',\n  template: `\n  <div class=\"col-3\">\n    <select v-model=\"store.unternehmen\" :disabled=\"isaenderung && isconfigured('unternehmen')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n      <option\n        v-for=\"u in lists.unternehmen\"\n        :value=\"u.value\"\n        :selected=\"isselected(u.value, this.store.unternehmen)\"\n        :disabled=\"u.disabled\">\n        {{ u.label }}\n      </option>\n    </select>\n  </div>\n  <div class=\"col-3\">\n    <select v-model=\"vertragsart_kurzbz\" :disabled=\"isaenderung || isconfigured('vertragsart_kurzbz')\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n      <option\n        v-for=\"v in lists.vertragsarten\"\n        :value=\"v.value\"\n        :selected=\"isselected(v.value, this.vertragsart_kurzbz)\"\n        :disabled=\"v.disabled\">\n        {{ v.label}}\n      </option>\n    </select>\n  </div>\n  <div class=\"col-1\">&nbsp;</div>\n  <gueltigkeit ref=\"gueltigkeit\" :initialsharedstatemode=\"'set'\" :config=\"getgueltigkeit\"></gueltigkeit>\n  <div class=\"col-1\">\n    <div v-if=\"this.store.mode === 'korrektur' && showdvcheckoverlap === true\" class=\"form-check\">\n      <input v-model=\"checkoverlap\" class=\"form-check-input\" type=\"checkbox\" id=\"dvcheckoverlap\">\n      <label class=\"form-check-label\" for=\"dvcheckoverlap\">\n        parallele DVs prüfen\n      </label>\n    </div>\n    <span v-else>&nbsp;</span>\n  </div>\n  \n  <template v-if=\"this.store.mode === 'korrektur'\">\n  <div class=\"col-3\">\n    <select v-model=\"dvendegrund_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm example\">\n      <option\n        v-for=\"v in lists.dvendegruende\"\n        :value=\"v.value\"\n        :selected=\"isselected(v.value, this.dvendegrund_kurzbz)\"\n        :disabled=\"v.disabled\">\n        {{ v.label}}\n      </option>\n    </select>\n  </div>\n  <div class=\"col-3\">\n    <textarea v-model=\"dvendegrund_anmerkung\" \n        class=\"form-control form-control-sm w-100\"\n        placeholder=\"Anmerkung zum Beendigungsgrund...\"\n    ></textarea>\n  </div>\n  <div class=\"col-6\">&nbsp;</div>\n  </template>\n  `,\n  props: {\n    showdvcheckoverlap: {\n        type: Boolean,\n        default: true,\n        required: false\n    }\n  },\n  inject: ['$api','$fhcAlert'],\n  data: function() {\n    return {\n      'vertragsart_kurzbz': '',\n      'checkoverlap': true,\n      'dvendegrund_kurzbz': '',\n      'dvendegrund_anmerkung': '',\n      'lists': {\n          'unternehmen': [],\n          'vertragsarten': [],\n          'dvendegruende': []\n      },\n      'store': store\n    }\n  },\n  components: {\n    'gueltigkeit': gueltigkeit\n  },\n  mixins: [\n    configurable\n  ],\n  watch: {\n    config: function() {\n      this.setDataFromConfig();\n    }\n  },\n  created: function() {\n    this.getUnternehmen();\n    this.getVertragsarten();\n    this.getDvEndeGruende();\n    this.setDataFromConfig();\n  },\n  methods: {\n    isselected: function(optvalue, selvalue) {\n      return (optvalue === selvalue);\n    },\n    getUnternehmen: async function() {\n      const response = await this.$api.call(ApiDV.getUnternehmen());\n      const unternehmen = response.data;\n      unternehmen.unshift({\n        value: '',\n        label: 'Unternehmen wählen',\n        disabled: true\n      });\n      this.lists.unternehmen = unternehmen;\n    },\n    getVertragsarten: async function() {\n      const response = await this.$api.call(ApiDV.getVertragsarten());\n      const vertragsarten = response.data;\n      vertragsarten.unshift({\n        value: '',\n        label: 'Vertragsart wählen',\n        disabled: true\n      });\n      return this.lists.vertragsarten = vertragsarten;\n    },\n    getDvEndeGruende: async function() {\n      const response = await this.$api.call(ApiDV.getDvEndeGruende());\n      const dvendegruende = response.data;\n      dvendegruende.unshift({\n        value: '',\n        label: 'Beendigungsgrund wählen',\n        disabled: false\n      });\n      return this.lists.dvendegruende = dvendegruende;\n    },\n    isconfigured: function(field) {\n      if( this.config === null ) {\n          return false;\n      }\n      if( typeof this.config[field] !== 'undefined' ) {\n        return this.config[field] !== '';\n      }\n      return false;\n    },\n    setDataFromConfig: function() {\n      if( this.config?.unternehmen !== undefined ) {\n        this.store.unternehmen = this.config.unternehmen;\n      }\n      if( this.config?.vertragsart_kurzbz !== undefined ) {\n        this.vertragsart_kurzbz = this.config.vertragsart_kurzbz;\n      }\n      if( this.config?.dvendegrund_kurzbz !== undefined ) {\n        this.dvendegrund_kurzbz = (this.config.dvendegrund_kurzbz === null) \n            ? '' : this.config.dvendegrund_kurzbz;\n      }\n      if( this.config?.dvendegrund_anmerkung !== undefined ) {\n        this.dvendegrund_anmerkung = (this.config.dvendegrund_anmerkung === null) \n            ? '' : this.config.dvendegrund_anmerkung;\n      }\n      if( this.config?.checkoverlap !== undefined ) {\n        this.checkoverlap = this.config.checkoverlap;\n      }\n    },\n    getPayload: function() {\n      return {\n        dienstverhaeltnisid: this.config.dienstverhaeltnisid,\n        unternehmen: this.store.unternehmen,\n        vertragsart_kurzbz: this.vertragsart_kurzbz,\n        dvendegrund_kurzbz: (this.dvendegrund_kurzbz === '') ? null : this.dvendegrund_kurzbz,\n        dvendegrund_anmerkung: (this.dvendegrund_anmerkung === '') ? null : this.dvendegrund_anmerkung,\n        gueltigkeit: this.$refs.gueltigkeit.getPayload(),\n        checkoverlap: this.checkoverlap\n      }\n    }\n  },\n  computed: {\n    isaenderung: function() {\n      var ret = ((this.config?.dienstverhaeltnisid !== undefined)\n        && !isNaN(parseInt(this.config.dienstverhaeltnisid))\n        && parseInt(this.config.dienstverhaeltnisid) > 0);\n      return ret;\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport dienstverhaeltnis from './dienstverhaeltnis.js';\nimport store from './vbsharedstate.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\nimport gueltigkeit from './gueltigkeit.js';\n\nexport default {\n  name: 'Dv',\n  template:`\n    <div class=\"py-0\">\n      <div class=\"py-0\">\n        <infos :infos=\"(dv?.guioptions?.infos !== undefined) ? dv?.guioptions?.infos : []\"></infos>\n        <errors :errors=\"(dv?.guioptions?.errors !== undefined) ? dv?.guioptions?.errors : []\"></errors>\n        <div v-if=\"store.mode == 'aenderung'\" class=\"row g-2 mt-2 flex-shrink-0 flex-grow-0\">\n          <div class=\"col-2 text-primary\"><strong>ÄNDERUNGSMODUS</strong></div>\n          <div class=\"col-4 text-end\"><strong>Änderungen gelten</strong></div>\n          <div class=\"col-1\">&nbsp;</div>\n          <gueltigkeit ref=\"gueltigkeitaenderung\" :initialsharedstatemode=\"'set'\" :config=\"getGueltigkeitsAenderung\"></gueltigkeit>\n        </div>\n        <div v-if=\"store.mode == 'korrektur'\" class=\"row g-2 mt-2 flex-shrink-0 flex-grow-0\">\n          <div class=\"col-12 text-danger\"><strong>KORREKTURMODUS</strong></div>\n        </div>\n        <div class=\"row g-2 py-1 mb-1 flex-shrink-0 flex-grow-0 mt-2\">\n          <dienstverhaeltnis ref=\"formheader\" :config=\"dv.data\"></dienstverhaeltnis>\n        </div>\n      </div>\n    </div>\n  `,\n  components: {\n    'dienstverhaeltnis': dienstverhaeltnis,\n    'infos': infos,\n    'errors': errors,\n    'gueltigkeit': gueltigkeit\n  },\n  mixins: [\n    presetable\n  ],\n  data: function() {\n    return {\n      store: store,\n      dv: {}\n    };\n  },\n  created: function() {\n    this.dv = this.store.getDV();\n  },\n  methods: {\n    getPayload: function() {\n      if( this.$refs['gueltigkeitaenderung'] ) {\n          this.dv.guioptions.gueltigkeitaenderung = this.$refs['gueltigkeitaenderung'].getPayload();\n      }\n      var payload = {\n        type: 'dienstverhaeltnis',\n        data: this.$refs.formheader.getPayload(),\n        guioptions: JSON.parse(JSON.stringify(this.dv.guioptions))\n      };\n      this.store.setDV(payload);\n      return JSON.parse(JSON.stringify(this.preset));\n    }\n  },\n  computed: {\n      getGueltigkeitsAenderung: function() {\n          var config = {};\n          if( this.dv?.guioptions?.gueltigkeitaenderung !== undefined ) {\n              config = this.dv.guioptions.gueltigkeitaenderung;\n          }\n          return config;\n      }\n  }\n}\n","export default {\n  getFreitexttypen() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getFreitexttypen'\n    }\n  }\n};\n","export default {\n    gbtByDV(dv_id, unixdate) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/gbtByDV',\n            params: { dv_id: dv_id, d: unixdate}\n          }\n    },\n    gbtChartDataByDV(dv_id, unixdate) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/gbtChartDataByDV',\n            params: { dv_id}\n          }\n    },\n    getGB(gbid) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getGB/' + gbid,\n        }\n    },\n    getGehaltstypen() {\n        return {\n            method: 'post',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/CommonsAPI/getGehaltstypen',\n        }\n    }\n};","import presetable from '../../mixins/vbform/presetable.js';\nimport tabs from './tabs.js';\nimport vblistgroup from './vblistgroup.js';\nimport vertragsbestandteillist from './vertragsbestandteillist.js';\nimport dv from './dv.js';\nimport store from './vbsharedstate.js';\nimport errors from './errors.js';\nimport infos from './infos.js';\nimport tabsspacer from './tabsspacer.js';\nimport vblistgroupspacer from './vblistgroupspacer.js';\nimport ApiFreitext from  '../../../js/api/factory/freitext.js';\nimport ApiGehaltsbestandteil from  '../../../js/api/factory/gehaltsbestandteil.js';\n\nexport default {\n  name: 'VbFormHelper',\n  template: `\n    <div class=\"vbformhelper flex-shrink-1 flex-grow-1 d-flex flex-column overflow-hidden\">\n      <div class=\"py-1 mb-1\">\n        <infos v-show=\"store.showmsgs\" :infos=\"(preset?.guioptions?.infos !== undefined) ? preset?.guioptions?.infos : []\" :padright=\"false\"></infos>\n        <errors v-show=\"store.showmsgs\" :errors=\"(preset?.guioptions?.errors !== undefined) ? preset?.guioptions?.errors : []\" :padright=\"false\"></errors>\n      </div>\n      <component ref=\"parts\" v-for=\"(child, idx) in children\" :key=\"idx\" :is=\"child.type\" :preset=\"child\"></component>\n    </div>\n  `,\n  components: {\n    \"tabs\": tabs,\n    \"vblistgroup\": vblistgroup, \n    \"dv\": dv,\n    \"vertragsbestandteillist\": vertragsbestandteillist,\n    \"infos\": infos,\n    \"errors\": errors,\n    \"tabsspacer\": tabsspacer,\n    \"vblistgroupspacer\": vblistgroupspacer\n  },\n  mixins: [\n    presetable\n  ],\n  inject: ['$api','$fhcAlert'],\n  data: function() {\n    return {\n      store: store,\n      lists: {\n          freitexttypen: [],\n          gehaltstypen: []\n      }\n    };\n  },\n  provide: function() {\n    return {\n        'freitexttypen': Vue.computed(() => this.lists.freitexttypen),\n        'gehaltstypen': Vue.computed(() => this.lists.gehaltstypen)\n    }  \n  },\n  emits: [\n    \"vbhjsonready\"\n  ],\n  created: function() {\n    this.getFreitexttypen();\n    this.getGehaltstypen();\n    this.setScrollBarWidthCSSVar();\n  },\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for ( var i in this.$refs.parts) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var payload = {\n        \"type\": \"formdata\",\n        \"guioptions\": JSON.parse(JSON.stringify(this.preset.guioptions)),\n        \"children\": children,\n        \"dv\": this.store.getDVPayload(),\n        \"vbs\": this.store.getVBsPayload()\n      };\n      return payload;\n    },\n    getJSON: function() {\n      var payload = this.getPayload();\n      this.$emit('vbhjsonready', JSON.stringify(payload, null, 2));\n    },\n    getFreitexttypen: async function() {\n      const response = await this.$api.call(ApiFreitext.getFreitexttypen());\n      const freitexttypen = response.data;\n      freitexttypen.unshift({\n        value: '',\n        label: 'Freitexttyp wählen',\n        disabled: true\n      });\n      this.lists.freitexttypen = freitexttypen;\n    },\n    getGehaltstypen: async function() {\n      const response = await this.$api.call(ApiGehaltsbestandteil.getGehaltstypen());\n      const gehaltstypen = response.data;\n      gehaltstypen.unshift({\n        value: '',\n        label: 'Gehaltstyp wählen',\n        disabled: true\n      });\n      this.lists.gehaltstypen = gehaltstypen;\n    },\n    setScrollBarWidthCSSVar: function() {\n        const scrollDiv = document.createElement('div');\n        scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';\n        document.body.appendChild(scrollDiv);\n        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        document.body.removeChild(scrollDiv);\n        document.body.style.setProperty('--scrollbar-width', `${scrollbarWidth}px`);\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport tab from './tab.js';\nimport dv from './dv.js';\nimport store from './vbsharedstate.js';\n\nexport default {\n  name: 'Tabs',\n  template: `\n    <div class=\"row h-100 overflow-hidden\">\n      <div class=\"col-2 h-100\">  \n        <ul class=\"nav w-100 position-relative flex-column subsubnav col-2\" id=\"v-menubar\" role=\"menubar\" aria-orientation=\"vertical\">\n          <li class=\"nav-item position-relative\" v-for=\"(child, idx) in children\" :key=\"idx\">    \n              <a\n                v-if=\"child.type === 'tab'\"\n                class=\"nav-link\"\n                :class=\"(this.activetab === child.guioptions.id) ? 'active' : ''\"\n                :id=\"'v-menuitem-' + child.guioptions.id + 'tab'\"\n                :href=\"'#v-menuitem-' + child.guioptions.id\"\n                role=\"menuitem\"\n                :aria-controls=\"'v-menuitem-' + child.guioptions.id\"\n                :aria-selected=\"(this.activetab === child.guioptions.id) ? 'true' : 'false'\"\n                @click=\"activetab = child.guioptions.id\">\n                {{ child.guioptions.title }}\n                <span\n                    v-if=\"(getErrorsCount(child) > 0)\" \n                    class=\"position-absolute top-50 end-0 translate-middle badge rounded-pill bg-danger\">\n                  {{ getErrorsCount(child) }}\n                </span>\n              </a>\n          </li>\n        </ul>\n      </div>\n      <div class=\"col-10 h-100\">\n        <div class=\"tab-content w-100 h-100 d-flex flex-column position-relative\" id=\"v-menuitem-tabContent\">\n          <template v-for=\"(child, idx) in children\">\n            <component ref=\"parts\" v-if=\"child.type === 'tab'\" :is=\"child.type\" :key=\"'tab_' + idx\" :preset=\"child\" :activetab=\"activetab\"></component>\n            <div v-else=\"\" class=\"px-3\">\n              <component ref=\"parts\" :is=\"child.type\" :key=\"'notab_' + idx\" :preset=\"child\"></component>\n            </div>\n          </template>\n        </div>\n      </div>\n    </div>\n  `,\n  components: {\n    \"dv\": dv,\n    \"tab\": tab\n  },\n  mixins: [\n    presetable\n  ],\n  created: function() {\n    if( this.preset?.guioptions?.activetab !== undefined ) {\n      this.activetab = this.preset.guioptions.activetab;\n    } else if( this.children.length > 0 ) {\n      for( const child of this.children ) {\n        if( child.type === 'tab' ) {\n          this.activetab = child.guioptions.id;\n          break;\n        }\n      }        \n    } else {\n        this.activetab = '';\n        this.errorcounts = {};\n    }\n  },\n  data: function() {\n    return {\n      activetab: '',\n      errorcounts: {},\n      store: store\n    }\n  },\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for( var i in this.$refs.parts ) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var guioptions = JSON.parse(JSON.stringify(this.preset.guioptions));\n      guioptions.activetab = this.activetab;\n      var payload = {\n        \"type\": \"tabs\",\n        \"guioptions\": guioptions,\n        \"children\": children\n      }\n      return payload;\n    },\n    getErrorsCount: function(child) {\n        if( typeof this.errorcounts[child.guioptions.id] === 'undefined' ) {\n          //this.errorcounts[child.guioptions.id] = Math.floor(Math.random() * 10);\n          this.errorcounts[child.guioptions.id] = this.calcErrorCount(child);\n        }        \n        return this.errorcounts[child.guioptions.id];\n    },\n    calcErrorCount: function(child) {\n        var errorcount = 0;\n        if( child?.guioptions?.errors !== undefined ) {\n            errorcount += child.guioptions.errors.length;\n        }\n        if( child.type === 'vertragsbestandteillist' ) {\n            for( var childuuid of child.children ) {\n                var sibling = this.store.getVB(childuuid);\n                if(sibling !== null) {\n                    errorcount += this.calcErrorCount(sibling);\n                }\n            }\n        } else if ( child.type.match(/^vertragsbestandteil.*$/) ) {\n            if( child?.gbs !== undefined) {\n                for( var gb of child.gbs ) {\n                    errorcount += this.calcErrorCount(gb);\n                }\n            }\n        } else if ( child?.children !== undefined ) {\n            for( var sibling of child.children ) {\n                errorcount += this.calcErrorCount(sibling);\n            }\n        }\n        return errorcount;\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport vertragsbestandteillist from '../../components/vbform/vertragsbestandteillist.js';\nimport dv from './dv.js';\n\nexport default {\n  name: 'Tab',\n  template: `\n  <div class=\"tab-pane h-100 overflow-hidden position-relative fade mt-2\" :class=\"(activetab === preset.guioptions.id) ? 'active show' : ''\"\n       :id=\"'v-pills-' + preset.guioptions.id\"\n       role=\"tabpanel\"\n       :aria-labelledby=\"'v-pills-' + preset.guioptions.id + '-tab'\"\n       tabindex=\"0\">\n    <div class=\"container-fluid p-0 overflow-auto scrollbar-gutter-stable pe-3\">\n      <component ref=\"parts\" v-for=\"(child, idx) in children\" :is=\"child.type\" :key=\"idx\" :preset=\"child\"></component>\n    </div>\n  </div>\n  `,\n  props: [\n    'activetab'\n  ],\n  data: function() {\n    return {\n      payload: {\n        type: 'tab',\n        guioptions: {\n          title: '',\n          id: ''\n        },\n        children: []\n      }\n    };\n  },\n  components: {\n    \"dv\": dv,\n    \"vertragsbestandteillist\": vertragsbestandteillist\n  },\n  mixins: [\n    presetable\n  ],\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for( var i in this.$refs.parts ) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var payload = {\n        type: 'tab',\n        guioptions: JSON.parse(JSON.stringify(this.preset.guioptions)),\n        children: children\n      };\n      return payload;\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport vertragsbestandteillist from '../../components/vbform/vertragsbestandteillist.js';\n\nexport default {\n  name: 'VbListGroup',\n  template: `\n  <div class=\"row h-100 overflow-hidden\">\n    <div class=\"col-12 h-100\">\n      <div class=\"container-fluid p-0 pe-3 h-100 overflow-auto scrollbar-gutter-stable pt-2\" :id=\"preset.guioptions.id\">\n        <component ref=\"parts\" v-for=\"(child, idx) in children\" :is=\"child.type\" :key=\"idx\" :preset=\"child\"></component>\n      </div>\n    </div>\n  </div>\n  `,\n  data: function() {\n    return {\n      payload: {\n        type: 'vblistgroup',\n        guioptions: {\n          title: '',\n          id: ''\n        },\n        children: []\n      }\n    };\n  },\n  components: {\n    \"vertragsbestandteillist\": vertragsbestandteillist\n  },\n  mixins: [\n    presetable\n  ],\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for( var i in this.$refs.parts ) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var payload = {\n        type: 'vblistgroup',\n        guioptions: JSON.parse(JSON.stringify(this.preset.guioptions)),\n        children: children\n      };\n      return payload;\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport dv from './dv.js';\n\nexport default {\n  name: 'TabsSpacer',\n  template: `\n  <div class=\"row mb-2\">\n    <div class=\"col-2\">\n        &nbsp;\n    </div>\n\n    <div class=\"col-10\">\n      <div class=\"pe-3\" style=\"margin-right: var(--scrollbar-width);\">\n        <div class=\"card card-body border-white py-0\">\n          <template v-for=\"(child, idx) in children\" :key=\"idx\">\n            <component ref=\"parts\" :is=\"child.type\" :preset=\"child\"></component>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n  `,\n  components: {\n    \"dv\": dv\n  },\n  mixins: [\n    presetable\n  ],\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for( var i in this.$refs.parts ) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var guioptions = JSON.parse(JSON.stringify(this.preset.guioptions));\n      var payload = {\n        \"type\": \"tabsspacer\",\n        \"guioptions\": guioptions,\n        \"children\": children\n      };\n      return payload;\n    }\n  }\n}\n","import presetable from '../../mixins/vbform/presetable.js';\nimport dv from './dv.js';\n\nexport default {\n  name: 'VbListGroupSpacer',\n  template: `\n    <div class=\"row mb-2\">\n      <div class=\"col-12\">\n        <div class=\"container-fluid p-0 pe-3\" style=\"margin-right: var(--scrollbar-width);\">\n          <div class=\"card card-body py-0\">\n            <template v-for=\"(child, idx) in children\" :key=\"idx\">\n              <component ref=\"parts\" :is=\"child.type\" :preset=\"child\"></component>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  components: {\n    \"dv\": dv\n  },\n  mixins: [\n    presetable\n  ],\n  methods: {\n    getPayload: function() {\n      var children = [];\n      for( var i in this.$refs.parts ) {\n        children.push(this.$refs.parts[i].getPayload());\n      }\n      var guioptions = JSON.parse(JSON.stringify(this.preset.guioptions));\n      var payload = {\n        \"type\": \"vblistgroupspacer\",\n        \"guioptions\": guioptions,\n        \"children\": children\n      };\n      return payload;\n    }\n  }\n}\n","import store from './vbsharedstate.js';\n\nexport default {\n  name: 'PresetsChooser',\n  template: `\n  <div class=\"row g-2 py-2\">\n    <div class=\"col-12\">\n\n      <select v-model=\"store.mode\" @change=\"selectmode\" v-if=\"showselectmode\" class=\"form-select form-select-sm\">\n        <option value=\"neuanlage\" selected>Neuanlage</option>\n        <option value=\"aenderung\">Änderung</option>\n        <option value=\"korrektur\">Korrektur</option>\n      </select>\n\n      <select v-model=\"selectedpresetidx\" @change=\"selectpreset\" class=\"form-select form-select-sm\">\n        <option value=\"-1\" disabled>Vorlage wählen</option>\n        <option v-for=\"(preset, idx) in usedpresets\" :key=\"idx\"\n                :value=\"idx\">\n                  {{ preset.guioptions.label }}\n                </option>\n      </select>\n\n    </div>\n  </div>\n  `,\n  props:[\n    'presets',\n    'showselectmode'\n  ],\n  data: function() {\n    return {\n      store: store,\n      selectedpresetidx: -1,\n      usedpresets: []\n    };\n  },\n  emits: [\n    \"presetselected\"\n  ],\n  mounted: function() {\n    this.selectmode();\n  },\n  watch: {\n    'store.mode': function() {\n      this.$nextTick(() => {\n          this.selectmode();\n      });\n    }\n  },\n  methods: {\n    resetSelectedPreset: function() {\n      this.selectedpresetidx = -1;\n    },\n    selectmode: function() {\n      this.resetSelectedPreset();\n      if( this.store.mode === 'aenderung' || this.store.mode === 'korrektur' ) {\n        this.usedpresets = [];\n        const vertragsart_kurzbz = this.store.getDV().data.vertragsart_kurzbz;\n        for(const preset of this.presets[this.store.mode]) {\n            if( preset.guioptions.for_vertragsart_kurzbz.length === 0 \n             || preset.guioptions.for_vertragsart_kurzbz.indexOf(vertragsart_kurzbz) > -1  ) {\n                this.usedpresets.push(preset);\n                if( preset.guioptions?.default_for_vertragsart_kurzbz !== undefined \n                        && preset.guioptions.default_for_vertragsart_kurzbz.indexOf(vertragsart_kurzbz) > -1 ) {\n                    this.selectedpresetidx = (this.usedpresets.length - 1);\n                }\n            }\n        }\n      } else {\n        this.usedpresets = ( typeof this.presets[this.store.mode] !== 'undefined')\n                        ? this.presets[this.store.mode]\n                        : [];\n      }\n      this.selectpreset();\n    },\n    selectpreset: function() {\n      var preset = ( typeof this.usedpresets[this.selectedpresetidx] !== 'undefined' )\n                 ? this.usedpresets[this.selectedpresetidx]\n                 : {\n                   type: 'preset',\n                   guioptions: {\n\n                   },\n                   children: [],\n                   dv: {\n                     data: {\n                       dienstverhaeltnisid: null,\n                       gueltigkeit: {\n                           guioptions: {},\n                           data: {}\n                       }\n                     }\n                   },\n                   vbs: {}\n                 };\n      this.store.reset();\n      this.$emit(\"presetselected\", preset);\n    }\n  }\n}\n","export default {\n  storeToTmpStore(payload) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/storeToTmpStore';\n    if( ((payload?.tmpStoreId !== undefined)\n        && !isNaN(parseInt(payload.tmpStoreId))\n        && parseInt(payload.tmpStoreId) > 0) ) {\n      url = url + '/' + payload.tmpStoreId;\n    }\n    return {\n      method: 'post',\n      url,   \n      params: payload,\n    }  \n  },\n  listTmpStoreForMA(mauid) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/listTmpStoreForMA/' \n          + mauid,   \n    }      \n  },\n  getTmpStoreById(id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/getTmpStoreById/' \n            + id,   \n    }\n  },\n  deleteFromTmpStore(id) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/deleteFromTmpStore/' \n            + id,   \n    }\n  }\n  \n};\n","import store from './vbsharedstate.js';\nimport ApiTmpstore from  '../../../js/api/factory/tmpstore.js';\n\nexport default {\n  name: 'TmpStoreHelper',\n  template: `\n  <div class=\"row g-2 py-2\">\n    <div class=\"col-7\">\n        \n      <select v-model=\"selectedtmpstoreidx\" class=\"form-select form-select-sm\">\n        <option value=\"-1\" disabled>Zwischenspeicherung wählen</option>\n        <option v-for=\"(tmpstore, idx) in getTmpStoresForModeAndDV\" :key=\"tmpstore.tmp_store_id\"\n                :value=\"idx\">\n                <!-- TODO: statt uid von insertvon/updatevon bitte Nachnamen anzeigen (HR Wunsch) -->\n                  {{ getTmpStoreLabel(tmpstore) }}\n                </option>\n      </select>\n\n    </div>\n    <div class=\"col-5\">\n        <div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"TmpStore Toolbar\">\n            <div class=\"btn-group me-2\" role=\"group\" aria-label=\"First group\">\n                <button class=\"btn btn-outline-secondary btn-sm float-end\" @click=\"selecttmpstore\">Laden</button>\n            </div>\n            <div class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                <button class=\"btn btn-outline-secondary btn-sm float-end\" @click=\"saveToTmpStore\">Zwischenspeichern</button>\n            </div>\n            <div class=\"btn-group\" role=\"group\" aria-label=\"Third group\">\n                <button class=\"btn btn-outline-secondary btn-sm float-end\" @click=\"deleteFromTmpStore\">Löschen</button>\n            </div>\n        </div>        \n    </div>\n  </div>\n  `,\n  data: function() {\n    return {\n      store: store,\n      selectedtmpstoreidx: -1,\n      tmpstores: {}\n    };\n  },\n  emits: [\n    \"loadedfromtmpstore\",\n    \"savetotmpstore\"\n  ],\n  created: function() {\n      this.fetchTmpStoreList();\n  },\n  watch: {\n    'store.mode': function() {\n        this.fetchTmpStoreList();\n    },\n    'store.mitarbeiter_uid': function() {\n        this.fetchTmpStoreList();\n    }\n  },\n  inject: ['$api'],\n  methods: {\n    fetchTmpStoreList: function(resetselected) {\n      if( typeof resetselected === 'undefined' ) {\n          var resetselected = true;\n      }  \n      this.$api.call(ApiTmpstore.listTmpStoreForMA(this.store.mitarbeiter_uid))\n      .then((response) => {\n        this.tmpstores = response.data;\n        if(resetselected === true) {\n          this.selectedtmpstoreidx = -1;\n        } else {\n          this.selectedtmpstoreidx = this.store.tmpstoreid;\n        }\n      });\n    },\n    deleteFromTmpStorePromise: function() {\n        if( typeof this.tmpstores[this.store.mode][this.selectedtmpstoreidx] !== 'undefined' ) {\n            const tmpstoreid = this.tmpstores[this.store.mode][this.selectedtmpstoreidx]['tmp_store_id'];\n            \n            return this.$api.call(ApiTmpstore.deleteFromTmpStore(tmpstoreid));\n        }\n        return Promise.resolve('noTmpStoreUsed');\n    },\n    deleteFromTmpStore: function() {\n        if( typeof this.tmpstores[this.store.mode][this.selectedtmpstoreidx] !== 'undefined' ) {\n            const tmpstoreid = this.tmpstores[this.store.mode][this.selectedtmpstoreidx]['tmp_store_id'];\n            \n            this.$api.call(ApiTmpstore.deleteFromTmpStore(tmpstoreid))\n            .then((response) => {\n              this.selectedtmpstoreidx = -1;\n              this.store.setTmpStoreId(null);\n              this.fetchTmpStoreList();\n              console.log('deleteFromTmpStore executed.');\n            });\n        }\n    },\n    saveToTmpStore: function() {\n        this.$emit('savetotmpstore');\n    },\n    selecttmpstore: function() {\n        if( typeof this.tmpstores[this.store.mode][this.selectedtmpstoreidx] !== 'undefined' ) {\n            const tmpstoreid = this.tmpstores[this.store.mode][this.selectedtmpstoreidx]['tmp_store_id'];\n            \n            this.$api.call(ApiTmpstore.getTmpStoreById(tmpstoreid))\n            .then((response) => {\n              console.log('loadFromTmpStore executed.');\n              this.store.setTmpStoreId(response.data.tmp_store_id);\n              this.$emit('loadedfromtmpstore', response.data.formdata);\n            });\n        }\n        \n    },\n    getTmpStoreLabel: function(tmpstore) {\n        var label = tmpstore.insertamum + ' - ' + tmpstore.ivorname + ' ' \n                + tmpstore.inachname + ' (' + tmpstore.insertvon + ')';\n        if( tmpstore.updatevon !== null ) {\n          label += ' ' + tmpstore.updateamum + ' - ' + tmpstore.uvorname + ' ' \n                  + tmpstore.unachname + ' (' + tmpstore.updatevon + ')';\n        }\n        return label;\n    }\n  },\n  computed: {\n      getTmpStoresForModeAndDV: function() {\n          var tmpstores = {};\n          if( this.store.mode !== 'neuanlage' ) {\n              for(  var idx in this.tmpstores[this.store.mode] ) {\n                var tmpstore = this.tmpstores[this.store.mode][idx];\n                if( this.store.dv.data.dienstverhaeltnisid === parseInt(tmpstore.dienstverhaeltnisid) ) {\n                    tmpstores[idx] = tmpstore;\n                }\n              };\n          } else {\n              tmpstores = this.tmpstores[this.store.mode];\n          }\n          return tmpstores;\n      }\n  }\n}\n","import uuid from './uuid.js';\nimport store from '../../components/vbform/vbsharedstate.js';\n\nexport default {\n  today: null,\n  store: store,\n  vbout: {},\n  vb2gui: function(vb, mode, child) {\n      this.vbout = {\n          type: '',\n          guioptions: {\n              id: uuid.get_uuid(),\n              infos: [],\n              errors: [],\n              deleteable: this.isDeleteable(vb)\n          },\n          data: {\n              \n          },\n          gbs: []\n      };\n      switch(vb.vertragsbestandteiltyp_kurzbz) {\n          case 'freitext':\n              this.freitext2gui(vb, mode);\n              break;\n          case 'funktion':\n              this.funktion2gui(vb, mode);\n              break;\n          case 'karenz':\n              this.karenz2gui(vb, mode);\n              break;\n          case 'kuendigungsfrist':\n              this.kuendigungsfrist2gui(vb, mode);\n              break;\n          case 'stunden':\n              this.stunden2gui(vb, mode);\n              break;\n          case 'urlaubsanspruch':\n              this.urlaubsanspruch2gui(vb, mode);\n              break;\n          case 'zeitaufzeichnung':\n              this.zeitaufzeichnung2gui(vb, mode);\n              break;\n          default:\n              console.log('unknown Vertragsbestandteil ' \n                      + vb.vertragsbestandteiltyp_kurzbz);\n              break;\n      }\n      for( const gb of vb.gehaltsbestandteile ) {\n          this.vbout.gbs.push(this.gehaltsbestandteil2gui(gb, mode));\n      }\n      if( child?.guioptions?.childdefaults?.guioptions?.canhavegehaltsbestandteile !== undefined ) {\n        this.vbout.guioptions.canhavegehaltsbestandteile = child.guioptions.childdefaults.guioptions.canhavegehaltsbestandteile;\n      }\n      return this.vbout;\n  },\n  getToday: function() {\n    if( this.today === null ) {\n      this.today = new Date();\n      this.today.setHours(23, 59, 59, 999);\n    }\n    return this.today;\n  },\n  isFuture: function(bt) {\n    var von = new Date(bt.von);\n    von.setHours(0, 0, 0, 0);\n    if( von > this.getToday() ) {\n      return true;\n    }\n    return false;\n  },\n  isEndable: function(bt) {    \n    if ( this.store.mode === 'aenderung' ) {\n      if( bt.von === null || bt.von === ''  ) {\n        return false;\n      }\n/*\n      var von = new Date(bt.von);\n      von.setHours(0, 0, 0, 0);\n      if( von > this.getToday() ) {\n        return false;\n      }\n*/\n      return true;\n    }\n    return false;\n  },  \n  isDeleteable: function(bt) {    \n    if( this.store.mode === 'korrektur' ) {\n        return true;\n    }\n    if ( this.store.mode === 'aenderung' ) {\n      if( bt.von === null || bt.von === ''  ) {\n        return false;  \n      }\n      if( this.isFuture(bt) ) {\n        return true;\n      }\n    }\n    return false;\n  },\n  gueltigkeit2gui: function(bt, mode) {\n      var disabled = [];\n      var endable = (bt.vertragsbestandteiltyp_kurzbz !== 'karenz') \n                  ? this.isEndable(bt) \n                  : false;\n      if( endable && !(mode === 'aenderung' && this.isFuture(bt)) ) {\n          disabled = [\n            'gueltig_ab'\n          ];\n      }\n      var gueltigkeit = {\n          guioptions: {\n              sharedstatemode: 'ignore',\n              disabled: disabled,\n              endable: endable\n          },\n          data: {\n              gueltig_ab: bt.von,\n              gueltig_bis: bt.bis\n          }\n      };\n      return gueltigkeit;\n  },\n  freitext2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilfreitext';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          freitexttyp: vb.freitexttyp_kurzbz,\n          titel: vb.titel,\n          freitext: vb.freitext,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'freitexttyp',\n            'titel',\n            'freitext'\n        ];\n      }\n      if( ['allin', 'befristung'].indexOf(vb.freitexttyp_kurzbz) > -1 ) {\n        this.vbout.guioptions.hidden = [\n          'titel',\n          'freitext'\n        ];\n        if( this.vbout.guioptions?.disabled === undefined ) {\n          this.vbout.guioptions.disabled = [\n            'freitexttyp'\n          ];\n        } else if ( this.vbout.guioptions.disabled.indexOf('freitexttyp') === -1 ) {\n            this.vbout.guioptions.disabled.push('freitexttyp');\n        }\n      }\n  },\n  funktion2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilfunktion';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          funktion: vb.benutzerfunktiondata.funktion_kurzbz,\n          orget: vb.benutzerfunktiondata.oe_kurzbz,\n          benutzerfunktionid: vb.benutzerfunktion_id,\n          mitarbeiter_uid: this.store.mitarbeiter_uid,\n          mode: 'bestehende',\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'funktion',\n            'orget',\n            'benutzerfunktionid',\n            'mode'\n        ];\n      }\n      if( vb.benutzerfunktiondata.funktion_kurzbz.match('zuordnung') ) {\n          this.vbout.guioptions.canhavegehaltsbestandteile = false;\n          this.vbout.guioptions.filter = 'zuordnung';\n      } else {\n          this.vbout.guioptions.filter = 'funktion';\n      }\n  },\n  karenz2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilkarenz';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          karenztyp_kurzbz: vb.karenztyp_kurzbz,\n          geplanter_geburtstermin: vb.geplanter_geburtstermin,\n          tatsaechlicher_geburtstermin: vb.tatsaechlicher_geburtstermin,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'karenztyp_kurzbz'\n        ];\n      }\n  },\n  kuendigungsfrist2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilkuendigungsfrist';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          arbeitgeber_frist: vb.arbeitgeber_frist,\n          arbeitnehmer_frist: vb.arbeitnehmer_frist,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'arbeitgeber_frist',\n            'arbeitnehmer_frist'\n        ];\n      }\n  },\n  stunden2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilstunden';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          stunden: vb.wochenstunden,\n          teilzeittyp_kurzbz: vb.teilzeittyp_kurzbz,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'stunden',\n            'teilzeittyp_kurzbz'\n        ];\n      }\n  },\n  urlaubsanspruch2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilurlaubsanspruch';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          tage: vb.tage,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'tage'\n        ];\n      }\n  },\n  zeitaufzeichnung2gui: function(vb, mode) {\n      this.vbout.type = 'vertragsbestandteilzeitaufzeichnung';\n      this.vbout.data = {\n          id: vb.vertragsbestandteil_id,\n          zeitaufzeichnung: vb.zeitaufzeichnung,\n          azgrelevant: vb.azgrelevant,\n          homeoffice: vb.homeoffice,\n          gueltigkeit: this.gueltigkeit2gui(vb, mode)\n      };\n      if( this.isEndable(vb) && !this.isFuture(vb) ) {\n        this.vbout.guioptions.disabled = [\n            'zeitaufzeichnung',\n            'azgrelevant',\n            'homeoffice'\n        ];\n      }\n  },\n  gehaltsbestandteil2gui: function(gb, mode) {\n      var disabled = [];\n      if( this.isEndable(gb) && !this.isFuture(gb) ) {\n          disabled = [\n            'gehaltstyp',\n            'anmerkung',\n            'betrag',\n            'valorisierung',\n            'valorisierungssperre',\n            'auszahlungen'\n          ];\n      }\n      var gb = {\n          type: 'gehaltsbestandteil',\n          guioptions: {\n              id: uuid.get_uuid(),\n              infos: [],\n              errors: [],\n              disabled: disabled,              \n              deleteable: this.isDeleteable(gb)\n          },\n          data: {\n              id: gb.gehaltsbestandteil_id,\n              gehaltstyp: gb.gehaltstyp_kurzbz,\n              anmerkung: gb.anmerkung,\n              betrag: gb.grundbetrag,\n              betrag_valorisiert: gb.betrag_valorisiert,\n              valorisierung: gb.valorisierung,\n              valorisierungssperre: gb.valorisierungssperre,\n              auszahlungen: gb.auszahlungen,\n              gueltigkeit: this.gueltigkeit2gui(gb, mode)\n          }\n      };\n      return gb;\n  }\n  \n}","import store from '../../components/vbform/vbsharedstate.js';\nimport vbconfig from './vbconfig.js';\n\nexport default {\n  today: null,\n  store: store,\n  vbconfig: vbconfig,\n  checkpayload: function(payload) {\n    for( const vb in payload.vbs ) {\n        this.checkvb(payload.vbs[vb]);\n    }  \n  },\n  checkvb: function(vb) {\n      if( vb.data?.id === undefined || vb.data.id === null || vb.data.id < 1 ) {\n          return;\n      }\n      this.checkRemoveable(vb);\n      this.checkDeleteable(vb);\n      this.checkEndable(vb);\n      this.checkDisabled(vb);\n      if( vb?.gbs !== undefined ) {\n        for( const gb of vb.gbs ) {\n            this.checkRemoveable(gb);\n            this.checkDeleteable(gb);\n            this.checkEndable(gb);\n            this.checkDisabled(gb);\n        }\n      }\n      console.log(JSON.stringify(vb));\n  },\n  checkDisabled: function(bt) {\n      if( bt.data.gueltigkeit.guioptions?.endable !== undefined \n              && bt.data.gueltigkeit.guioptions.endable === true ) {          \n          if( !(this.store.mode === 'aenderung' \n                  && this.isFuture(bt.data.gueltigkeit)) ) {\n            bt.guioptions.disabled = this.vbconfig.getFieldsForBt(bt.type);\n            bt.data.gueltigkeit.guioptions.disabled = [\n              'gueltig_ab'\n            ]; \n          }\n      }\n  },\n  checkEndable: function(bt) {\n    var endable = this.isEndable(bt);\n    if( bt.data.gueltigkeit.guioptions?.endable === undefined\n            || bt.data.gueltigkeit.guioptions.endable !== endable ) {\n        bt.data.gueltigkeit.guioptions.endable = endable;\n        bt.data.gueltigkeit.guioptions.sharedstatemode = 'ignore';\n    }\n  },\n  checkRemoveable: function(bt) {\n    if( bt.guioptions?.removeable !== undefined \n            && bt.guioptions.removeable === true ) {\n        bt.guioptions.removeable = false;\n    }\n  },\n  checkDeleteable: function(bt) {\n    var deleteable = this.isDeleteable(bt);\n    if( bt.guioptions?.deleteable === undefined \n            || bt.guioptions.deleteable !== deleteable ) {\n        bt.guioptions.deleteable = deleteable;\n    }\n  },\n  getToday: function() {\n    if( this.today === null ) {\n      this.today = new Date();\n      this.today.setHours(23, 59, 59, 999);\n    }\n    return this.today;\n  },\n  isFuture: function(gueltigkeit) {\n    var gueltig_ab = (gueltigkeit.data?.gueltig_ab !== undefined) \n                  ? gueltigkeit.data.gueltig_ab \n                  : null;\n    var von = new Date(gueltig_ab);\n    von.setHours(0, 0, 0, 0);\n    if( von > this.getToday() ) {\n      return true;\n    }\n    return false;\n  },  \n  isDeleteable: function(bt) {    \n    if( this.store.mode === 'korrektur' ) {\n        return true;\n    }\n    if ( this.store.mode === 'aenderung' ) {\n      if( bt.data.gueltigkeit.data.gueltig_ab === '' ) {\n        return false;  \n      }\n      if( this.isFuture(bt.data.gueltigkeit) ) {\n        return true;\n      }\n    }\n    return false;\n  },\n  isEndable: function(bt) {\n    if ( this.store.mode === 'aenderung' ) {\n      if( bt.data.gueltigkeit.data.gueltig_ab === '' ) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }\n}","export default {\n   btfields: {\n       'vertragsbestandteilfreitext': [\n            'freitexttyp',\n            'titel',\n            'freitext'\n        ],\n       'vertragsbestandteilfunktion': [\n            'funktion',\n            'orget',\n            'benutzerfunktionid',\n            'mode'\n        ],\n       'vertragsbestandteilkarenz': [\n            'karenztyp_kurzbz'\n        ],\n       'vertragsbestandteilkuendigungsfrist': [\n            'arbeitgeber_frist',\n            'arbeitnehmer_frist'\n        ],\n       'vertragsbestandteilstunden': [\n            'stunden',\n            'teilzeittyp_kurzbz'\n        ],\n       'vertragsbestandteilurlaubsanspruch': [\n            'tage'\n        ],\n       'vertragsbestandteilzeitaufzeichnung': [\n            'zeitaufzeichnung',\n            'azgrelevant',\n            'homeoffice'\n        ],\n        'gehaltsbestandteil': [\n            'gehaltstyp',\n            'anmerkung',\n            'betrag',\n            'valorisierung',\n            'valorisierungssperre',\n            'auszahlungen'\n        ]\n   },\n   getFieldsForBt: function(vb) {\n       var fields = [];\n       if( typeof this.btfields[vb] !== 'undefined' ) {\n           fields = this.btfields[vb];\n       }\n       return fields;\n   }\n}","export default {\n  saveForm(mitarbeiter_uid, formdata, dryrun) {\n    var url = '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/saveVertrag'\n            + '/' + mitarbeiter_uid;\n    if( typeof dryrun !== 'undefined' ) {\n        url = url + '/' + dryrun;\n    }   \n    return {\n\t\t\tmethod: 'post',\n\t\t\turl,  \n      params: formdata  \n\t\t}\n  },\n  vertragByDV(dv_id, unixdate) {\n    return {\n\t\t\tmethod: 'get',\n\t\t\turl: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/DVAPI/vertragByDV',  \n      params: { dv_id: dv_id, d: unixdate }    \n\t\t}\n  },\n};\n","import presets from '../../../../apps/vbform/presets/presets.js.php';\nimport debug_viewer from '../../../vbform/debug_viewer.js';\nimport vbformhelper from '../../../vbform/vbformhelper.js';\nimport store from '../../../vbform/vbsharedstate.js';\nimport presets_chooser from '../../../vbform/presets_chooser.js';\nimport {Modal} from '../../../Modal.js';\nimport tmpstorehelper from '../../../vbform/tmpstorehelper.js';\nimport vbgb2gui from '../../../../helpers/vbform/vbgb2gui.js';\nimport Phrasen from '../../../../../../../js/mixins/Phrasen.js';\nimport savedpayloadchecker from '../../../../helpers/vbform/savedpayloadchecker.js';\nimport ApiVertrag from '../../../../api/factory/vertrag.js';\nimport ApiVertragsbestandteil from '../../../../api/factory/vertragsbestandteil.js';\nimport ApiTmpStore from '../../../../api/factory/tmpstore.js';\n\nexport default {\n  name: 'VbFormWrapper',\n  template: `\n    <Modal :title=\"getTitle\" ref=\"modalRef\" \n           :class=\"'vbformModal'\" id=\"vbformModal\" :noscroll=\"true\">\n        <template #body>\n    \n        <div class=\"vbformutilities flex-shrink-0 flex-grow-0\">\n            <div class=\"row p-2 bg-light\">\n              <div class=\"col-3\">\n                <presets_chooser ref=\"presetchooserRef\" :presets=\"presets\" @presetselected=\"handlePresetSelected\" :showselectmode=\"false\"></presets_chooser>\n              </div>\n              <div class=\"col-1 text-center py-3\">\n                <em>{{p.t('vbform', 'oder')}}</em>\n              </div>\n              <div class=\"col-8\">\n                <tmpstorehelper ref=\"tmpstorehelper\" @loadedfromtmpstore=\"handleLoadedFromTmpStore\" @savetotmpstore=\"saveToTmpStore\"></tmpstorehelper>\n              </div>\n            </div>\n        </div>\n        \n        <vbformhelper ref=\"vbformhelperRef\" :preset=\"preset\"></vbformhelper>\n\n        <div v-if=\"debug\" class=\"row\">\n          <div class=\"col-12\">\n            <debug_viewer v-bind:text=\"vbhjson\"></debug_viewer>\n          </div>\n        </div>\n        \n    </template>\n        <template #footer>\n         <div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"TmpStore Toolbar\">\n              <div v-if=\"mode === 'aenderung' || mode === 'korrektur'\" class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                  <button class=\"btn btn-outline-secondary btn-sm float-end\" @click=\"reload\">Zurücksetzen</button>\n              </div>\n              <div class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                  <button class=\"btn btn-secondary btn-sm float-end\" @click=\"validate\">\n                    <span v-show=\"spinners.validating\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                    Eingaben prüfen\n                  </button>\n              </div>\n               <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\n                  <button class=\"btn btn-primary btn-sm float-end\" @click=\"save\">\n                    <span v-show=\"spinners.saving\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                    {{ getSaveButtonLabel }}\n                  </button>\n              </div>\n          </div>\n        </template>\n  </Modal>\n  `,\n  props: [\n      'mode',\n      'title',\n      'mitarbeiter_uid',\n      'curdv',\n      'debug'\n  ],\n  data: function() {\n    return {\n      vbhjson: presets,\n      presets: presets,\n      preset: null,\n      store: store,\n      spinners: {\n        saving: false,\n        validating: false\n      }\n    };\n  },\n  inject: ['$api', '$fhcAlert'],\n  emits: [\n    \"dvsaved\"\n  ],\n  mixins: [\n    Phrasen\n  ],\n  components: {\n    'presets_chooser': presets_chooser,\n    'debug_viewer': debug_viewer,\n    'vbformhelper': vbformhelper,\n    'Modal': Modal,\n    \"tmpstorehelper\": tmpstorehelper\n  },\n  created: function() {\n    this.resetStoreDV();\n    this.store.setMode(this.mode);\n    this.resetpreset();\n    this.store.mitarbeiter_uid = this.mitarbeiter_uid;\n  },\n  watch: {\n    changedModeOrCurDV: function(newval, oldval) {\n      this.resetTmpStoreHelper();\n      this.resetStoreDV();\n      if( oldval[0] === newval[0] ) {\n        this.$nextTick(() => {\n          this.$refs['presetchooserRef'].selectmode();\n        });\n      } else {\n        this.store.setMode(this.mode);\n      }\n    }\n  },\n  methods: {\n    resetStoreDV: function() {\n      if( this.mode === 'aenderung' || this.mode === 'korrektur' ) {\n        // TODO cleanup and remove again\n        this.store.dv.data = {};\n        this.store.dv.data.dienstverhaeltnisid = this.curdv.dienstverhaeltnis_id;\n        this.store.dv.data.vertragsart_kurzbz = this.curdv.vertragsart_kurzbz;\n      }  \n    },\n    resetpreset: function() {\n        var preset = {\n        type: 'preset',\n        guioptions: {\n\n        },\n        children: [],\n        dv: {\n          data: {\n            dienstverhaeltnisid: null,\n            gueltigkeit: {\n                data: {},\n                guioptions: {}\n            }\n          }\n        },\n        vbs: {}\n      };\n      this.presetselected(preset);\n    },\n    presetselected: function(preset) {\n      if( this.mode === 'aenderung' || this.mode === 'korrektur' ) {\n        preset.dv.data.dienstverhaeltnisid = preset.dv.data.dienstverhaeltnisid ?? this.curdv.dienstverhaeltnis_id;\n        preset.dv.data.unternehmen = (preset.dv.data.unternehmen !== '') ? preset.dv.data.unternehmen : this.curdv.oe_kurzbz;\n        preset.dv.data.vertragsart_kurzbz = preset.dv.data.vertragsart_kurzbz ?? this.curdv.vertragsart_kurzbz;\n        preset.dv.data.dvendegrund_kurzbz = (preset.dv.data?.dvendegrund_kurzbz === undefined) ? this.curdv.dvendegrund_kurzbz : preset.dv.data.dvendegrund_kurzbz;\n        preset.dv.data.dvendegrund_anmerkung = (preset.dv.data?.dvendegrund_anmerkung === undefined) ? this.curdv.dvendegrund_anmerkung : preset.dv.data.dvendegrund_anmerkung;\n        preset.dv.data.gueltigkeit.data = {\n            gueltig_ab: (preset.dv.data.gueltigkeit?.data?.gueltig_ab !== undefined) ? preset.dv.data.gueltigkeit.data.gueltig_ab : this.curdv.von,\n            gueltig_bis: (preset.dv.data.gueltigkeit?.data?.gueltig_bis !== undefined) ? preset.dv.data.gueltigkeit.data.gueltig_bis : this.curdv.bis\n        };\n        preset.dv.data.gueltigkeit.guioptions.sharedstatemode = 'ignore';\n        if( this.mode === 'aenderung' ) {\n          var disabled = [\n            'gueltig_ab',\n            'gueltig_bis'\n          ];\n          if( vbgb2gui.isFuture(this.curdv) )\n          {\n            disabled = [];  \n          }\n          preset.dv.data.gueltigkeit.guioptions.disabled = disabled;\n        }\n      }\n      this.preset = preset;\n      this.presettostore();\n    },\n    presettostore: function() {\n      this.store.reset();\n      var vbs = JSON.parse(JSON.stringify(this.preset.vbs));\n      for( var key in vbs ) {\n        this.store.addVB(key, vbs[key]);\n      }\n      var dv = JSON.parse(JSON.stringify(this.preset.dv));\n      this.store.setDV(dv);\n    },\n    searchforvbs: function(data, child, preset) {\n        for(const vb of data) {            \n            if( child.guioptions.vertragsbestandteiltyp === 'vertragsbestandteil' + vb.vertragsbestandteiltyp_kurzbz ) {\n                // TODO handle different funktionstypen bzw. freitexttypen\n                if(vb.vertragsbestandteiltyp_kurzbz === 'freitext') {\n                    if( child?.guioptions?.filter !== undefined \n                            && child.guioptions.filter.freitexttyp.indexOf(vb.freitexttyp_kurzbz) === -1 ) {\n                      continue;\n                    }                    \n                } else if( vb.vertragsbestandteiltyp_kurzbz === 'funktion' ) {\n                    if( child?.guioptions?.filter !== undefined \n                            && vb.benutzerfunktiondata.funktion_kurzbz.match(/zuordnung/) \n                            && child.guioptions.filter !== 'zuordnung') {\n                        continue;\n                    } \n                    if( child?.guioptions?.filter !== undefined \n                            && !vb.benutzerfunktiondata.funktion_kurzbz.match(/zuordnung/) \n                            && child.guioptions.filter !== 'funktion') {\n                        continue;\n                    }\n                }\n                var vbgui = vbgb2gui.vb2gui(vb, this.store.mode, child);\n                preset.vbs[vbgui.guioptions.id] = vbgui;\n                child.children.push(vbgui.guioptions.id);\n            }\n        }\n    },\n    iterateChilds: function(childs, data, preset) {\n        for(const child of childs) {            \n            if( child.type === 'vertragsbestandteillist' ) {\n               this.searchforvbs(data, child, preset); \n            }\n            \n            if( child?.children !== undefined ) {\n                this.iterateChilds(child.children, data, preset);\n            }\n        }\n    },\n    save: function() {\n      this.spinners.saving = true;\n      this.store.showmsgs = false;\n      const payload = this.$refs['vbformhelperRef'].getPayload();\n      \n      const that = this;\n      this.$api.call(ApiVertrag.saveForm(this.store.mitarbeiter_uid, payload))\n      .then((response) => {\n        that.handleSaved(response.data);\n      })\n      .finally(() => {\n          that.spinners.saving = false;\n          that.store.showmsgs = true;\n      });\n    },\n    validate: function() {\n      this.spinners.validating = true;\n      this.store.showmsgs = false;\n      const payload = this.$refs['vbformhelperRef'].getPayload();\n      \n      const that = this;\n      this.$api.call(ApiVertrag.saveForm(this.store.mitarbeiter_uid, payload, 'dryrun'))\n      .then((response) => {\n        that.handleValidated(response.data);\n      })\n      .finally(() => {\n          that.spinners.validating = false;\n          that.store.showmsgs = true;\n      });\n    },        \n    handlePresetSelected: function(preset) {\n      if( this.mode === 'aenderung' ) {\n        var preset = JSON.parse(JSON.stringify(preset));\n        this.$api.call(ApiVertragsbestandteil.getCurrentAndFutureVBs(this.curdv.dienstverhaeltnis_id))\n        .then((response) => {          \n          this.iterateChilds(preset.children, response.data, preset);          \n          this.presetselected(preset);\n          this.resetTmpStoreHelper();\n        });\n      } else if( this.mode === 'korrektur' ) {\n        var preset = JSON.parse(JSON.stringify(preset));\n        this.$api.call(ApiVertragsbestandteil.getAllVBs(this.curdv.dienstverhaeltnis_id))\n        .then((response) => {          \n          this.iterateChilds(preset.children, response.data, preset);          \n          this.presetselected(preset);\n          this.resetTmpStoreHelper();\n        });\n      } else {\n        this.presetselected(preset);\n        this.resetTmpStoreHelper();\n      }\n    },\n    handleValidated: function(payload) {\n        this.presetselected(payload);      \n    },\n    handleSaved: function(payload) {\n      this.$refs['tmpstorehelper'].deleteFromTmpStorePromise()\n        .then(() => {\n        this.$refs['tmpstorehelper'].fetchTmpStoreList();\n        savedpayloadchecker.checkpayload(payload);\n        this.presetselected(payload);\n        const dvid = payload.dv.data.dienstverhaeltnisid;\n        this.$emit('dvsaved', dvid);\n      });\n    },\n    handleLoadedFromTmpStore: function(payload) {\n      this.presetselected(payload);\n      this.$refs['presetchooserRef'].resetSelectedPreset();\n    },\n    showModal: function() {\n        this.store.setMode(this.mode);\n        this.$refs['modalRef'].show();\n    },\n    resetTmpStoreHelper: function() {\n        this.$refs['tmpstorehelper'].fetchTmpStoreList(true);\n        this.store.setTmpStoreId(null);\n    },\n    saveToTmpStore: function() {\n      const formdata = this.$refs['vbformhelperRef'].getPayload();\n      const payload = {\n        tmpStoreId: this.store.getTmpStoreId(),\n        typ: this.store.getMode(),  \n        mitarbeiter_uid: this.store.mitarbeiter_uid,  \n        formdata: formdata\n      };\n      this.$api.call(ApiTmpStore.storeToTmpStore(payload))\n      .then((response) => {\n        this.store.setTmpStoreId(response.meta.tmpstoreid);\n        this.$refs['tmpstorehelper'].fetchTmpStoreList(false);\n        this.$refs['presetchooserRef'].resetSelectedPreset();\n        console.log('storeToTmpStore executed.');\n      });\n    },\n    reload: function() {\n        this.$refs['presetchooserRef'].selectpreset();\n    }\n  },\n  expose: ['showModal'],\n  computed: {\n    getTitle: function() {\n        var suffix = '';\n        switch (this.mode) {\n            case 'korrektur':\n                suffix = 'korrigieren';\n                break;\n            case 'aenderung':\n                suffix = 'bearbeiten';\n                break;\n            case 'neuanlage':\n            default:\n                suffix = 'anlegen';\n                break;\n        }\n\n        return this.title + ' ' + suffix;\n    },\n    getSaveButtonLabel: function() {\n        if( this.store.mode === 'aenderung' ) {\n            return 'Änderung speichern';\n        } else if ( this.store.mode === 'korrektur' ) {\n            return 'Korrektur speichern';\n        } else {\n            return 'Dienstverhältnis anlegen';\n        }\n    },\n    changedModeOrCurDV: function() {\n        return [\n            this.mode,\n            this.curdv\n        ];\n    }\n  }\n};\n","import {Modal} from '../../../Modal.js';\nimport dienstverhaeltnis from '../../../vbform/dienstverhaeltnis.js';\nimport store from '../../../vbform/vbsharedstate.js';\nimport errors from '../../../vbform/errors.js';\nimport infos from '../../../vbform/infos.js';\nimport ApiPerson from '../../../../api/factory/person.js';\nimport ApiDV from '../../../../api/factory/dv.js';\n\nexport default {\n  name: 'EndDvModal',\n  template: `\n    <Modal :title=\"'Dienstverhältnis beenden'\" :noscroll=\"true\" ref=\"modalRef\" \n           :class=\"'vbformModal'\" id=\"endDvModal\">\n        <template #body>\n            <infos v-show=\"store.showmsgs\" :infos=\"(infos !== undefined) ? infos : []\"></infos>\n            <errors v-show=\"store.showmsgs\" :errors=\"(errors !== undefined) ? errors : []\"></errors>\n            <div class=\"row g-2 py-2 border-bottom mb-3\">\n                <dienstverhaeltnis ref=\"dienstverhaeltnisRef\" :config=\"curdv\" :showdvcheckoverlap=\"false\"></dienstverhaeltnis>\n            </div>\n\n            <input type=\"checkbox\" v-model=\"unrulyInternal\" id=\"unruly\" :disabled=\"spinners.saving\" ref=\"unrulyCheckbox\">\n\t\t\t<label for=\"unruly\" style=\"margin-left: 12px;\" >{{ $p.t('studierendenantrag', 'mark_person_as_unruly') }}</label>\n\n            \n        </template>\n        <template #footer>\n         <div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"TmpStore Toolbar\">\n              <div class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                  <button class=\"btn btn-secondary btn-sm float-end\" @click=\"cancel\">Abbrechen</button>\n              </div>\n               <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\n                <button class=\"btn btn-primary btn-sm float-end\" @click=\"enddv\">\n                  <span v-show=\"spinners.saving\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                  Dienstverhältnis beenden\n                </button>\n              </div>\n          </div>\n        </template>\n  </Modal>\n  `,\n  props: [\n      'curdv'\n  ],\n  data: function() {\n    return {\n      store: store, \n      infos: [],\n      errors: [],\n      spinners: {\n        saving: false\n      },\n      unrulyInternal: false\n    };\n  },\n  emits: [\n    \"dvended\", \"updateunruly\"\n  ],\n  inject: ['$api', '$fhcAlert'],\n  components: {\n    'Modal': Modal,\n    'dienstverhaeltnis': dienstverhaeltnis,\n    'infos': infos,\n    'errors': errors\n  },\n  methods: {\n    enddv: function() {\n      this.spinners.saving = true;\n      this.store.showmsgs = false;\n      const payload = this.$refs['dienstverhaeltnisRef'].getPayload();\n      \n      this.$api.call(ApiDV.endDV(payload))\n      .then((response) => {\n        this.handleDVEnded(response);\n      }).then(() => {\n        if(!this.unrulyInternal) return\n\n        // TODO maybe add updateUnruly into pv21 api for concurrency reasons\n        this.$api.call(ApiPerson.updatePersonUnruly({\n          person_id: this.curdv.person_id,\n          unruly: this.unrulyInternal\n        })).then((response) => {\n          this.$emit('updateunruly', this.unrulyInternal);\n        })\n\n      })\n      .finally(() => {\n          this.spinners.saving = false;\n          this.store.showmsgs = true;\n      });\n    },\n    cancel: function() {\n      this.$refs['modalRef'].hide();  \n    },\n    handleDVEnded: function(resp) {\n      if( resp.error > 0 ) {\n        this.errors = [resp.retval];\n        this.infos = [];\n      } else {\n        this.infos = [resp.retval];\n        this.errors = [];\n      }\n      this.$emit('dvended', this.curdv);  \n    },\n    showModal: function() {\n        this.store.mode = 'korrektur';\n        this.$refs['modalRef'].show();\n    },\n    saveUnrulyPerson: function () {\n        this.spinners.saving = true;\n        this.store.showmsgs = false;\n\n        this.$api.call(ApiPerson.updatePersonUnruly({\n          person_id: this.curdv.person_id,\n          unruly: this.unrulyInternal\n        })).then((response) => {\n          this.$emit('updateunruly', this.unrulyInternal);\n        }).finally(() => {\n          this.spinners.saving = false;\n          this.store.showmsgs = true;\n        });\n    }\n  },\n  watch: {\n    curdv(newVal) {\n      this.unrulyInternal = newVal.unruly\n    }\n  },\n  expose: ['showModal']\n};","import {Modal} from '../../../Modal.js';\nimport ApiEmployee from '../../../../api/factory/employee.js';\n\nexport default {\n  name: 'DeleteDvModal',\n  template: `\n    <Modal :title=\"'Dienstverhältnis löschen'\" :noscroll=\"true\" ref=\"modalRef\" \n           id=\"deleteDvModal\">\n        <template #body>\n            <div class=\"row g-2 py-2 border-bottom mb-3\">\n                <em>{{ dvlabel }} - Wirklich löschen?</em>\n            </div>\n        </template>\n        <template #footer>\n         <div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"TmpStore Toolbar\">\n              <div class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                  <button class=\"btn btn-secondary btn-sm float-end\" @click=\"cancel\">Abbrechen</button>\n              </div>\n               <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\n                  <button class=\"btn btn-primary btn-sm float-end\" @click=\"deletedv\">Dienstverhältnis löschen</button>\n              </div>\n          </div>\n        </template>\n  </Modal>\n  `,\n  props: [\n      'curdv'\n  ],\n  emits: [\n    \"dvdeleted\"\n  ],\n  components: {\n    'Modal': Modal\n  },\n  inject: ['$api', '$fhcAlert'],\n  methods: {\n    deletedv: async function() {  \n      try {\n        const res = await this.$api.call(ApiEmployee.deleteDV(this.curdv.dienstverhaeltnisid)); \n        this.$emit('dvdeleted');\n        this.$refs['modalRef'].hide();\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    cancel: function() {\n      this.$refs['modalRef'].hide();  \n    },\n    showModal: function() {\n        this.$refs['modalRef'].show();\n    } \n  },\n  computed: {\n    dvlabel: function() {\n        if( this.curdv?.label !== undefined ) {\n            return this.curdv.label\n        } else {\n            return '';\n        }\n    }  \n  },\n  expose: ['showModal']\n};\n","import {Modal} from '../../../Modal.js';\nimport vertragsbestandteil_karenz from '../../../vbform/vertragsbestandteil_karenz.js';\nimport store from '../../../vbform/vbsharedstate.js';\nimport errors from '../../../vbform/errors.js';\nimport infos from '../../../vbform/infos.js';\nimport ApiKarenz from '../../../../api/factory/karenz.js';\n\nexport default {\n  name: 'KarenzModal',\n  template: `\n    <Modal :title=\"'Karenz verwalten'\" :noscroll=\"true\" ref=\"modalRef\" \n           :class=\"'vbformModal'\" id=\"karenzModal\">\n        <template #body>\n            <infos :infos=\"(infos !== undefined) ? infos : []\"></infos>\n            <errors :errors=\"(errors !== undefined) ? errors : []\"></errors>\n            <vertragsbestandteil_karenz ref=\"vertragsbestandteil_karenzRef\" :config=\"curkarenz\"></vertragsbestandteil_karenz>\n        </template>\n        <template #footer>\n         <div class=\"btn-toolbar\" role=\"toolbar\" aria-label=\"TmpStore Toolbar\">\n              <div class=\"btn-group me-2\" role=\"group\" aria-label=\"Second group\">\n                  <button class=\"btn btn-secondary btn-sm float-end\" @click=\"cancel\">Abbrechen</button>\n              </div>\n               <div class=\"btn-group\" role=\"group\" aria-label=\"First group\">\n                  <button class=\"btn btn-primary btn-sm float-end\" @click=\"enddv\">Karenz speichern</button>\n              </div>\n          </div>\n        </template>\n  </Modal>\n  `,\n  props: [\n      'curkarenz'\n  ],\n  data: function() {\n    return {\n      store: store, \n      infos: [],\n      errors: []\n    };\n  },\n  emits: [\n    \"karenzsaved\"\n  ],\n  components: {\n    'Modal': Modal,\n    'vertragsbestandteil_karenz': vertragsbestandteil_karenz,\n    'infos': infos,\n    'errors': errors\n  },\n  inject: ['$api', '$fhcAlert'],\n  methods: {\n    enddv: function() {\n      const payload = this.$refs['vertragsbestandteil_karenzRef'].getPayload();\n      \n      this.$api.call(ApiKarenz.saveKarenz(payload))\n      .then((response) => {\n        this.handleKarenzSaved(response);\n      });\n    },\n    cancel: function() {\n      this.$refs['modalRef'].hide();  \n    },\n    handleKarenzSaved: function(resp) {\n      if( resp.error > 0 ) {\n        this.errors = [resp.retval];\n        this.infos = [];\n      } else {\n        this.infos = [resp.retval];\n        this.errors = [];\n      }\n      this.$emit('karenzsaved', this.curkarenz);  \n    },\n    showModal: function() {\n        this.$refs['modalRef'].show();\n    }\n  },\n  expose: ['showModal']\n};\n","export const DropDownButton = {\n\tname: 'DropDownButton',\n    props: {\n        links: { type: Array, required: true }\n    },\n    expose: [ 'show', 'toggle', 'hide'],\n    setup() {\n\n        let buttonEle = Vue.ref(null);\n        let thisDropDownButtonObj;\n\n        Vue.onMounted(() => {\n            thisDropDownButtonObj = new bootstrap.Dropdown(buttonEle.value);\n        });\n\n        const show = () => {\n            thisDropDownButtonObj.show();\n        }\n\n        const toggle = () => {\n            thisDropDownButtonObj.toggle();\n        }\n\n        const hide = () => {\n            thisDropDownButtonObj.hide();\n        }\n\n        return { show, toggle, hide, buttonEle };\n\n    },\n    template: `\n        <div class=\"btn-group\" role=\"group\" ref=\"buttonEle\">\n            <button  type=\"button\" class=\"btn btn-sm btn-outline-secondary dropdown-toggle\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                <slot></slot>\n            </button>\n            <ul class=\"dropdown-menu\" >\n                <li v-for=\"link in links\">\n                    <a v-if=\"typeof(link?.action) === 'function'\"  class=\"dropdown-item\" href=\"#\" @click=\"link?.action\">{{ link?.text }}</a>\n                    <a v-else-if=\"typeof(link?.action) === 'string'\"  class=\"dropdown-item\" :href=\"link?.action\" >{{ link?.text }}</a>                   \n                </li>\n            </ul>\n        </div>`\n}\n","import ApiVertragsbestandteil from '../../../api/factory/vertragsbestandteil.js';\n\n\nexport const OffCanvasTimeline = {\n\tname: 'OffCanvasTimeline',\n     components: {\n        \"p-timeline\": primevue.timeline,\n        \"p-multiselect\": primevue.multiselect,\n     },\n     props: {\n        uid: String,\n        curdv: Object,\n        alldv: Array,\n     },\n     //expose: ['show', 'hide', 'toggle'],\n     emits: [ 'dateSelected' ],\n     setup( props, { expose, emit } ) {\n\n        const colorPalette = [\"#fd7f6f\", \"#7eb0d5\", \"#b2e061\", \"#bd7ebe\", \"#ffb55a\", \"#ffee65\", \"#beb9db\", \"#fdcce5\", \"#8bd3c7\"];\n        const $api = Vue.inject('$api');\n        const courseData = Vue.ref();\n        const isFetching = Vue.ref(false);\n        const title = Vue.ref(\"Timeline\");\n        const showAllDVChecked = Vue.ref(false);\n        const currentUID = Vue.toRefs(props).uid\n        const vbsData = Vue.ref();\n        const events =Vue.ref([]);\n        const isHidden = Vue.ref(true);\n        let offCanvasEle = Vue.ref(null);\n        let thisOffCanvasObj;\n        const numberFormat = new Intl.NumberFormat();\n        const selectedVBSTypen = Vue.ref([]);\n        const selectedGBSTypen = Vue.ref([]);\n        const vertragsarten = Vue.inject('vertragsarten');\n        const vertragsbestandteiltypen = Vue.inject('vertragsbestandteiltypen');\n        const gehaltstypen = Vue.inject('gehaltstypen');        \n\n        const formatDate = (ds) => {\n            if (!ds) return \"\"\n            var d = new Date(ds)\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n\n        const currentSemester = Vue.computed(() => {\n            const d = new Date();\n            let y= d.getFullYear();\n            let semesterString = \"SS\";\n\n            if (d.getMonth < 8 && d.getMonth > 1) return semesterString + y;\n            else if (d.getMonth < 2) {\n                y--;\n            }\n\n            semesterString = \"WS\";\n            return semesterString + y;\n\n        })\n\n        const dateSelected = (date) => {\n            emit('dateSelected', date);\n            hide();\n        }\n\n        const hiddenCanvasHandler = () => {\n            isHidden.value = true;\n        }\n\n\n        const shownCanvasHandler = () => {\n            isHidden.value = false;\n        }\n\n        Vue.onMounted(() => {\n            thisOffCanvasObj = new bootstrap.Offcanvas(offCanvasEle.value);\n            offCanvasEle.value.addEventListener('hidden.bs.offcanvas', hiddenCanvasHandler);\n            offCanvasEle.value.addEventListener('shown.bs.offcanvas', shownCanvasHandler);\n        })\n\n        Vue.onBeforeUnmount(() => {\n            offCanvasEle.value.removeEventListener('hidden.bs.offcanvas', hiddenCanvasHandler);\n            offCanvasEle.value.removeEventListener('shown.bs.offcanvas', shownCanvasHandler);\n        })\n\n\n        async function show() {\n\n            vbsData.value = []\n                        \n            for (const dv of props.alldv){\n                const response = await $api.call(ApiVertragsbestandteil.getAllVBs(dv.dienstverhaeltnis_id))\n                vbsData.value.push(response.data)\n            }            \n\n            events.value = generateTimeline(vbsData.value)\n            thisOffCanvasObj.show()\n        }\n\n        function hide() {\n            thisOffCanvasObj.hide();\n        }\n        function toggle() {\n            thisOffCanvasObj.toggle();\n        }\n\n        function getFreitextLabel(freitexttyp) {\n            const freitexttypMap = {\n                allin             : 'All-In',\n                ersatzarbeitskraft: 'Ersatzarbeitskraft',\n                zusatzvereinbarung: 'Zusatzvereinbarung',\n                befristung        : 'Befristung',\n                sonstiges         : 'Sonstiges'\n            }\n            return freitexttypMap[freitexttyp] !== undefined ? freitexttypMap[freitexttyp] : freitexttyp;\n        }\n\n        // TODO labels aus DB holen\n        function getBestandteilLabel(vbs) {\n            let label = '';\n            switch (vbs.vertragsbestandteiltyp_kurzbz) {\n                case 'stunden':\n                    label = 'Zeit';\n                    break;\n                case 'zeitaufzeichnung':\n                    label = 'Zeitaufzeichnung';\n                    break;\n                case 'urlaubsanspruch':\n                    label = 'Urlaubsanspruch';\n                    break;\n                case 'kuendigungsfrist':\n                    label = 'Kündigungsfrist';\n                    break;\n                case 'karenz':\n                    label = 'Karenz';\n                    break;\n                case 'freitext':\n                    label = getFreitextLabel(vbs.freitexttyp_kurzbz);\n                    break;\n                case 'funktion':\n                    if (vbs.benutzerfunktiondata.funktion_kurzbz.match(/.*zuordnung/)) {\n                        label = 'Zuordnung';\n                    } else {\n                        label = 'Tätigkeit';\n                    }\n                    \n                    break;\n\n                default:\n                    label = vbs.vertragsbestandteiltyp_kurzbz;\n                    break;\n            }\n            return label;\n        }\n\n        function getGehaltsbestandteilLabel(gbsTyp) {\n            const gbstypMap = {\n                basisgehalt : 'Basisgehalt',\n                grundgehalt : 'Grundgehalt',\n                zulage      : 'Zulage',\n                praemie     : 'Prämie',\n                GRUNDGEHALT : 'Grundgehalt',\n                PRAEMIE     : 'Prämie',\n                UEBERSTUNDEN: 'Überstundenauszahlung',\n                SONSTIGES   : 'Sonstiges'\n            }\n            return gbstypMap[gbsTyp] !== undefined ? gbstypMap[gbsTyp] : gbsTyp;\n        }\n\n        Vue.watch([selectedVBSTypen, selectedGBSTypen, showAllDVChecked], ([id,uid]) => {\n            events.value = generateTimeline(vbsData.value);                     \n        });\n\n        function generateTimeline(data) {\n            let timeline = {};\n            \n            data.forEach( (item, index) => mergeTimelineData(item, timeline, index))\n\n            return Object.values(timeline).sort((a, b) => {\n                const date1 = new Date(a.date);\n                const date2 = new Date(b.date);\n\n                return date2 - date1;\n            })\n\n\n        }\n\n        function mergeTimelineData(data, timeline, index) {\n            let filterActive = selectedVBSTypen.value.length > 0 || selectedGBSTypen.value.length > 0  || !showAllDVChecked\n            let isVBSFiltered = (vbs) => selectedVBSTypen.value.find(vbsType => vbsType.value == vbs.vertragsbestandteiltyp_kurzbz)\n            let isGBSFiltered = (gbs) => selectedGBSTypen.value.find(gbsType => gbsType.value == gbs.gehaltstyp_kurzbz)\n\n            data.forEach(vbs => {\n\n                if (!filterActive || (filterActive && isVBSFiltered(vbs))) {\n\n                    if (showAllDVChecked.value || (!showAllDVChecked.value && vbs.dienstverhaeltnis_id == props.curdv.dienstverhaeltnis_id)) {\n\n                        if (!timeline[vbs.von]) {\n                            timeline[vbs.von] = { date: vbs.von, bestandteile: []}\n                        }\n                        \n                        timeline[vbs.von].bestandteile.push({ \n                            dienstverhaeltnis_id: vbs.dienstverhaeltnis_id, \n                            index: index,\n                            typ: 'vbs', \n                            start: true, \n                            status: getBestandteilLabel(vbs), \n                            vbs, kurzbz: vbs.vertragsbestandteiltyp_kurzbz\n                        })\n\n\n                        if (vbs.bis != null) {\n                            if (!timeline[vbs.bis]) {\n                                timeline[vbs.bis] = { date: vbs.bis, bestandteile: []}\n                            }\n                            timeline[vbs.bis].bestandteile.push({ \n                                dienstverhaeltnis_id: vbs.dienstverhaeltnis_id, \n                                index: index,\n                                typ: 'vbs', \n                                start: false, \n                                status: getBestandteilLabel(vbs), \n                                vbs, kurzbz: vbs.vertragsbestandteiltyp_kurzbz\n                            })\n                        }\n                    }\n                }\n                \n                vbs.gehaltsbestandteile.forEach( gbs => {\n\n                    if (!filterActive || (filterActive && isGBSFiltered(gbs))) {\n\n                        if (showAllDVChecked.value || (!showAllDVChecked.value && vbs.dienstverhaeltnis_id == props.curdv.dienstverhaeltnis_id)) {\n\n                            if (!timeline[gbs.von]) {\n                                timeline[gbs.von] = { date: gbs.von, bestandteile: []}\n                            }\n                            timeline[gbs.von].bestandteile.push({ \n                                dienstverhaeltnis_id: gbs.dienstverhaeltnis_id, \n                                index: index,\n                                typ: 'gbs', \n                                start: true,\n                                status: getGehaltsbestandteilLabel(gbs.gehaltstyp_kurzbz), \n                                gbs, \n                                kurzbz: gbs.gehaltstyp_kurzbz\n                            })\n                        \n                            if (gbs.bis != null) {\n                                if (!timeline[gbs.bis]) {\n                                    timeline[gbs.bis] = { date: gbs.bis, bestandteile: []}\n                                }\n                                timeline[gbs.bis].bestandteile.push({ \n                                    dienstverhaeltnis_id: gbs.dienstverhaeltnis_id, \n                                    index: index,\n                                    typ: 'gbs', \n                                    start: false, \n                                    status: getGehaltsbestandteilLabel(gbs.gehaltstyp_kurzbz), \n                                    gbs, \n                                    kurzbz: gbs.gehaltstyp_kurzbz\n                                })\n                            }\n\n                        }\n                    }\n                })\n                \n            })\n        }\n\n        const formatVertragsart = (item) => {\n            let va = vertragsarten.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n\n        const formatNumber = (num) => {\n            return numberFormat.format(parseFloat(num));\n        }\n\n        // expose functions\n        expose({show, hide, toggle});\n\n        return {\n            courseData, isFetching, formatDate, formatNumber, dateSelected, currentSemester, \n            title, currentUID, events, offCanvasEle, show, hide, toggle, isHidden, \n            selectedVBSTypen, vertragsbestandteiltypen, selectedGBSTypen, gehaltstypen,              \n            showAllDVChecked, colorPalette, formatVertragsart,\n        }\n     },\n     template: `\n     <div class=\"offcanvas offcanvas-end vertragshistorie\"\n        ref=\"offCanvasEle\"\n        tabindex=\"-1\" id=\"offcanvasRight\" aria-labelledby=\"offcanvasRightLabel\">\n\n        <button type=\"button\" id=\"btnContractHistory\" class=\"offcanvas-btn btn btn-sm btn-secondary\" @click=\"isHidden ? show() : hide()\">Vertragshistorie</button>\n\n        <div class=\"offcanvas-header\">\n            <h5 id=\"offcanvasRightLabel\">Vertragshistorie</h5>\n            <button type=\"button\" class=\"btn-close text-reset\" data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"offcanvas-body\">\n\n                <ul class=\"list-group mb-1\">\n                    <li class=\"list-group-item py-1\" v-for=\"(dv, index) in alldv\"  :style=\"{ 'border-left': '5px solid ' + colorPalette[index] }\" >\n                        {{ formatVertragsart(dv.vertragsart_kurzbz) }}/{{dv.oe_bezeichnung}}, {{ formatDate(dv.von) }} - {{ formatDate(dv.bis) }}\n                        <span v-if=\"dv.dienstverhaeltnis_id==curdv.dienstverhaeltnis_id\"> (ausgewähltes DV)</span>\n                    </li>\n                </ul>\n\n                <div class=\"form-check form-switch mb-2\">\n                            <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"showAllDVChecked\" v-model=\"showAllDVChecked\">\n                            <label class=\"form-check-label\" for=\"showAllDVChecked\">alle DV anzeigen</label>\n                </div>\n                \n                <div class=\"card flex justify-content-center mb-5\" style=\"border:0\">\n                    <p-multiselect v-model=\"selectedVBSTypen\" \n                        :options=\"vertragsbestandteiltypen\" optionLabel=\"label\"                         \n                        display=\"chip\" placeholder=\"Filter Vertragsbestandteile\" \n                        appendTo=\"self\" \n                        class=\"mb-1\">\n                        <template #optiongroup=\"slotProps\">\n                            <div class=\"flex align-items-center\">                            \n                                <div>{{ slotProps.option.label }}</div>\n                            </div>\n                        </template>\n                    </p-multiselect>   \n                    <p-multiselect v-model=\"selectedGBSTypen\" \n                        :options=\"gehaltstypen\" optionLabel=\"label\"                         \n                        display=\"chip\" placeholder=\"Filter Gehaltsbestandteile\" \n                        appendTo=\"self\" \n                        class=\"mb-1\">\n                        <template #optiongroup=\"slotProps\">\n                            <div class=\"flex align-items-center\">                            \n                                <div>{{ slotProps.option.label }}</div>\n                            </div>\n                        </template>\n                    </p-multiselect>   \n\n                    \n                \n\n                </div>             \n\n                <p-timeline :value=\"events\">\n                    <template #content=\"slotProps\">\n                        <div style=\"font-weight:bold; cursor: pointer\" @click=\"dateSelected(slotProps.item.date)\">{{formatDate(slotProps.item.date)}}\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" fill=\"currentColor\" aria-hidden=\"true\" class=\"calendar-icon\"><path d=\"M29.333 8c0-2.208-1.792-4-4-4h-18.667c-2.208 0-4 1.792-4 4v18.667c0 2.208 1.792 4 4 4h18.667c2.208 0 4-1.792 4-4v-18.667zM26.667 8v18.667c0 0.736-0.597 1.333-1.333 1.333 0 0-18.667 0-18.667 0-0.736 0-1.333-0.597-1.333-1.333 0 0 0-18.667 0-18.667 0-0.736 0.597-1.333 1.333-1.333 0 0 18.667 0 18.667 0 0.736 0 1.333 0.597 1.333 1.333z\"></path><path d=\"M20 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z\"></path><path d=\"M9.333 2.667v5.333c0 0.736 0.597 1.333 1.333 1.333s1.333-0.597 1.333-1.333v-5.333c0-0.736-0.597-1.333-1.333-1.333s-1.333 0.597-1.333 1.333z\"></path><path d=\"M4 14.667h24c0.736 0 1.333-0.597 1.333-1.333s-0.597-1.333-1.333-1.333h-24c-0.736 0-1.333 0.597-1.333 1.333s0.597 1.333 1.333 1.333z\"></path></svg>                        \n                        </div>\n\n                        <template v-for=\"bestandteil in slotProps.item.bestandteile\">\n                            <div class=\"card mb-1\" :style=\"{ 'border-left': '5px solid ' + colorPalette[bestandteil.index] }\" >\n                                <div class=\"row g-0\">\n                                    <div class=\"col-md-4\" style=\"background-color:#eee\">\n                                        <div class=\"card-body rounded-start pt-1 pb-1\">\n                                        {{bestandteil.status}}<br/>\n                                        <span v-if=\"!bestandteil.start\">(beendet)</span>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-md-8\">\n                                        <div class=\"card-body pt-1 pb-1\">\n                                            <div v-if=\"bestandteil.typ == 'vbs'\">\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='stunden'\">\n                                                    {{ formatNumber(bestandteil.vbs.wochenstunden) }}h\n                                                </template>\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='funktion'\">\n                                                    {{ bestandteil.vbs.benutzerfunktiondata.funktion_bezeichnung}}<br/>\n                                                    {{ bestandteil.vbs.benutzerfunktiondata.oe_bezeichnung }}<br/>\n                                                    <template v-if=\"bestandteil.vbs.benutzerfunktiondata.funktion_kurzbz=='kstzuordnung'\">\n                                                        {{ bestandteil.vbs.benutzerfunktiondata.oe_kurzbz_sap }}\n                                                    </template>\n                                                </template>\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='zeitaufzeichnung'\">\n                                                    <i class=\"fa\" :class=\"bestandteil.vbs.zeitaufzeichnung ? 'fa-check':'fa-times' \"></i> Zeitaufzeichnung<br/>\n                                                    <i class=\"fa\" :class=\"bestandteil.vbs.azgrelevant ? 'fa-check':'fa-times' \"></i> AZG-Relevant<br/>\n                                                    <i class=\"fa\" :class=\"bestandteil.vbs.homeoffice ? 'fa-check':'fa-times' \"></i> Home-Office\n                                                </template>\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='freitext'\">\n                                                    {{ bestandteil.vbs.titel }}\n                                                </template>\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='urlaubsanspruch'\">\n                                                    {{ bestandteil.vbs.tage }} Tage\n                                                </template>\n                                                <template v-if=\"bestandteil.vbs.vertragsbestandteiltyp_kurzbz=='kuendigungsfrist'\">\n                                                    AG: {{ bestandteil.vbs.arbeitgeber_frist }} Wochen<br/>\n                                                    AN: {{ bestandteil.vbs.arbeitnehmer_frist }} Wochen\n                                                </template>\n                                                \n                                            </div>\n                                            <div v-if=\"bestandteil.typ == 'gbs'\">\n                                                € {{ formatNumber(bestandteil.gbs?.grundbetrag) }}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </template>\n                        <br/>\n                    </template>\n                </p-timeline>\n\n\n        </div>\n     </div>\n\n     `\n\n\n}","export default {\n  getDvData(dienstverhaeltnis_id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/ValorisierungCheck/getDvData',\n      params: { dienstverhaeltnis_id }\n    }\n  },\n  getValorisierungCheckData(dienstverhaeltnis_id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/ValorisierungCheck/getValorisierungCheckData',\n      params: { dienstverhaeltnis_id }\n    }\n  },\n  checkValorisationValidityOfDv(dienstverhaeltnis_id) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/ValorisierungCheck/checkValorisationValidityOfDv',\n      params: { dienstverhaeltnis_id }\n    }\n  },\n  redoValorisation(dienstverhaeltnis_id) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/ValorisierungCheck/redoValorisation',\n      params: { dienstverhaeltnis_id }\n    }\n  }\n}\n","import vbform_wrapper from './vbform/vbform_wrapper.js';\nimport enddvmodal from './vbform/enddvmodal.js';\nimport deletedvmodal from './vbform/deletedvmodal.js';\nimport karenzmodal from './vbform/karenzmodal.js';\nimport { DropDownButton } from '../../DropDownButton.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport { OffCanvasTimeline } from './OffCanvasTimeline.js';\nimport { Toast } from '../../Toast.js';\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiEmployee from '../../../api/factory/employee.js';\nimport ApiVertrag from '../../../api/factory/vertrag.js';\nimport ApiGehaltsbestandteil from '../../../api/factory/gehaltsbestandteil.js';\nimport ApiValorisierungscheck from '../../../api/factory/valorisierungcheck.js';\n\nexport const EmployeeContract = {\n\tname: 'EmployeeContract',\n    components: {\n        'vbform_wrapper': vbform_wrapper,\n        'enddvmodal': enddvmodal,\n        'deletedvmodal': deletedvmodal,\n        'karenzmodal': karenzmodal,\n        'DropDownButton': DropDownButton,\n        \"p-skeleton\": primevue.skeleton,\n        \"datepicker\": VueDatePicker,\n        ModalDialog,\n        OffCanvasTimeline,\n        Toast,\n    },\n    props: {\n        id: Number,\n        uid: String,\n        dienstverhaeltnis_id: {type: Number, required: false},\n        openhistory: {type: Boolean, required: false},\n    },\n    emits: ['updateHeader'],\n    setup(props, { emit }) {\n\n        const { watch, ref, reactive, computed, inject, onMounted } = Vue;\n        const route = VueRouter.useRoute();\n        const router = VueRouter.useRouter();\n        const { t } = usePhrasen();\n        const dvList = ref([]);\n        const vertragList = ref([]);\n        const gbtList = ref([]);\n        const gbtChartData = ref([]);\n        const isFetching = ref(false);\n        const currentDVID = ref(null);\n        const currentDV = ref(null);\n        const currentVertragID = ref(null);\n        const dvSelectedIndex = ref(1);\n        const currentVBS = reactive({\n            funktion: {\n                zuordnung: [],\n                taetigkeit: []\n            },\n            zeitaufzeichnung: [],\n            kuendigungsfrist: [],\n            stunden: [],\n            allIn: [],\n            befristung: [],\n            urlaubsanspruch: [],\n            zusatzvereinbarung: [],\n            karenz: [],\n        });\n        //const dienstverhaeltnisDialogRef = ref();\n        const VbformWrapperRef = ref();\n        const vbformmode = ref('neuanlage');\n        const vbformDV = ref(null);\n\n        const enddvmodalRef = ref();\n        const endDV = ref(null);\n\n        const deletedvmodalRef = ref();\n        const delDV = ref(null);\n\n        const karenzmodalRef = ref();\n        const curKarenz = ref(null);\n        const openhistoryFlag = ref(props.openhistory);\n\n        const truncateDate = (d) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), 12);\n\n        const numberFormat = new Intl.NumberFormat();\n        const now = ref(truncateDate(new Date()));\n\n        const currentDate = ref(now.value);\n        const confirmDeleteDVRef = ref();\n\n        const offCanvasRef = ref();\n\n        const karenztypen = Vue.inject('karenztypen');\n        const vertragsarten = inject('vertragsarten');\n        const freitexttypen = inject('freitexttypen');\n        const beendigungsgruende = inject('beendigungsgruende');\n        const teilzeittypen = inject('teilzeittypen');\n\n        const readonly = ref(false);\n        const valorisationValid = ref(true);\n\n        const $api = Vue.inject('$api');\n        const fhcAlert = inject('$fhcAlert');\n\n        const convert2UnixTS = (ds) => {\n            let d = new Date(ds);\n            return Math.round(d.getTime() / 1000)\n        }\n\n        // dummy data for chart\n        const dates = ref([]);\n        const salaries = ref([]);\n\n        const chartOptions = reactive({\n            lang: {\n                thousandsSep: '.'\n            },\n            chart: {\n                type: 'line'\n            },\n            title: {\n                text: 'Gehalt'\n            },\n            series: [{\n                    name: 'Gehalt',\n                    data: [],\n                    color: '#6fcd98',\n                    step: 'left' // or 'center' or 'right'\n                },{\n                    name: 'Gehalt (ohne Val.)',\n                    data: [],\n                    color: '#d6af02',\n                    step: 'left', // or 'center' or 'right'\n                    visible: false,\n                },\n                {\n                    name: 'Abgerechnet',\n                    data: [],\n                    color: '#cd6fca',\n                    step: 'left' // or 'center' or 'right'\n                },\n            ],\n            xAxis: {\n                type: 'datetime',\n                currentDateIndicator: {\n                    width: 2,\n                    dashStyle: 'dot',\n                    color: 'red',\n                    label: {\n                      format: '%d.%m.%Y'\n                    }\n                },\n                labels: {\n                  // Format the date\n                  formatter: function() {\n                    return Highcharts.dateFormat('%d.%m.%Y', this.value);\n                  },\n                  rotation: 90\n                },\n                /*tickPositioner: function() {\n                  return dates.value.map(function(date) {\n                    return Date.parse(date);\n                  });\n                }*/\n            },\n            tooltip: {\n                pointFormat: '<b>€ {point.y:,.2f}</b>',\n                xDateFormat: '%d.%m.%Y'\n            },\n            yAxis: {\n                //min: 0,\n                title: {\n                    text: '€'\n                }\n            },\n            credits: {\n                enabled: false\n              },\n\n\n\n        })        \n\n        const fetchData = async (uid) => {\n            if (uid == null) {\n                dvList.value = [];\n                vertragList.value = [];\n                return;\n            }\n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiEmployee.dvByPerson(uid));  \n                dvList.value = res.data || [];\n                \n                if (dvList.value.length > 0) {\n                    if (props.dienstverhaeltnis_id != undefined) {\n                        currentDVID.value = props.dienstverhaeltnis_id;\n                        currentDV.value = dvList.value.find(item => item.dienstverhaeltnis_id == props.dienstverhaeltnis_id);\n                    } else {\n                        currentDVID.value = dvList.value[0].dienstverhaeltnis_id;\n                        currentDV.value = dvList.value[0];\n                    }\n                    \n                } else {\n                    currentDVID.value = null;\n                    currentDV.value = null;\n                }\n            } catch (error) {\n                console.log(error)\n            } finally {\n                isFetching.value = false;\n            }\n\n\n        }\n\n        const fetchVertrag = async (dv_id, date) => {\n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiVertrag.vertragByDV(dv_id, convert2UnixTS(date))); \n                vertragList.value = res.data;\n                getCurrentVertragsbestandteil();\n                //}\n            } catch (error) {\n                console.log(error)\n            } finally {\n                isFetching.value = false\n            }\n        }\n\n        // Gehaltsbestandteile\n        const fetchGBT = async (dv_id, date) => {\n\n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiGehaltsbestandteil.gbtByDV(dv_id, convert2UnixTS(date)));\n                gbtList.value = res.data;\n            } catch (error) {\n                console.log(error)\n            } finally {\n                isFetching.value = false\n            }\n\n        }\n\n        // fetch chart data\n        const fetchGBTChartData = async (dv_id, date) => {\n            isFetching.value = true\n            let tempData1 = [], tempData2 = [], tempData3 = [];\n            try {\n                if (dv_id != null) {\n                    const res = await $api.call(ApiGehaltsbestandteil.gbtChartDataByDV(dv_id));\n                    gbtChartData.value = res.data;\n                    \n                    // chartOptions.series[0].data.length = 0;\n\t\t\t\t\tObject.keys(res.data.valorisiert).forEach(element => {\n\t\t\t\t\t\ttempData1.push([new Date(element).getTime(), parseFloat(res.data.valorisiert[element])]);\n\t\t\t\t\t});\n                    Object.keys(res.data.gesamt).forEach(element => {\n                       tempData2.push([new Date(element).getTime(), parseFloat(res.data.gesamt[element])]);\n                    });\n                    res.data.abgerechnet.forEach(element => {\n                        tempData3.push([new Date(element.datum).getTime(), parseFloat(element.sum)]);\n                    });\n                }\n            } catch (error) {\n                console.log(error)\n            } finally {\n                chartOptions.series[0].data = tempData1;\n                chartOptions.series[1].data = tempData2;\n\t\t\t\tchartOptions.series[2].data = tempData3;\n                isFetching.value = false\n            }\n\n        }\n\n        const deleteDV = async (dv_id) => {\n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiEmployee.deleteDV(dv_id));\n                emit('updateHeader');\n            } catch (error) {\n                console.log(error);\n            } finally {\n                isFetching.value = false;\n            }\n        }\n\n        const activeDV = computed(() => {\n            return dvList.value?.filter((dv) => {\n                let von = new Date(dv.von);\n                let bis = dv.bis != null ? new Date(dv.bis) : null;\n                return von <= currentDate.value && (bis == null || bis >= currentDate.value);\n            })\n        })\n\n        const isCurrentDVActive = computed(() => {\n            if (currentDV.value == null) return false;\n            let von = truncateDate(new Date(currentDV.value.von));\n            let bis = currentDV.value.bis != null ? truncateDate(new Date(currentDV.value.bis)) : null;\n            return von <= currentDate.value && (bis == null || bis >= currentDate.value);\n        })\n\n        const isCurrentDate = computed(() => {\n            return currentDate.value.getTime() == now.value.getTime()\n        })\n\n        fetchData(props.uid);\n        watch(\n            () => props.uid,\n            (newVal) => {\n                fetchData(newVal);\n            }\n        )\n        watch(\n            currentDVID,\n            (newVal) => {\n                if (newVal == null) return\n                fetchVertrag(newVal, currentDate.value);\n                fetchGBT(newVal, currentDate.value);\n                fetchGBTChartData(newVal);\n                checkValorisation();\n                if (openhistoryFlag.value) {\n                    console.log('*** watch currentDVID ***');\n                    Vue.nextTick().then(() => {\n                        showOffCanvas();\n                        openhistoryFlag.value = false;\n                    })\n                }\n            }\n        )\n        watch(\n            () => props.dienstverhaeltnis_id,\n            (newVal) => {\n                currentDVID.value = props.dienstverhaeltnis_id;\n                currentDV.value = dvList.value.find(item => item.dienstverhaeltnis_id == props.dienstverhaeltnis_id);\n            }\n        )\n\n        watch(\n            currentDate,\n            (newDate) => {\n                console.log('watch newDate=', newDate)\n                fetchVertrag(currentDVID.value, newDate);\n                fetchGBT(currentDVID.value, newDate)\n                fetchGBTChartData(currentDVID.value);\n            }\n        )\n\n        const dvSelectedHandler = (e) => {\n            console.log(\"DV selected: \", e.target);\n            dvSelectedIndex.value = e.target.selectedIndex + 1;\n            currentDV.value = dvList.value[e.target.selectedIndex];\n            currentDVID.value = currentDV.value.dienstverhaeltnis_id;\n            let url = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '/')\n                    + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n                    + '/extensions/FHC-Core-Personalverwaltung/Employees/'\n                    + props.id + '/' + props.uid\n                    + '/contract/' + currentDV.value.dienstverhaeltnis_id;\n            router.push( url );\n        }\n\n\n        const formatDate = (d) => {\n            if (d != null && d != '') {\n                return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n            } else {\n                return ''\n            }\n        }\n\n\n        const formatDateISO = (ds) => {\n            let padNum = (n) => {\n                if (n<10) return '0' + n;\n                return n;\n            }\n            if (ds == null) return '';\n            var d = new Date(ds);\n            return d.getFullYear() + \"-\" + padNum((d.getMonth()+1)) + \"-\" + padNum(d.getDate());\n        }\n\n        const filterVertragsbestandteil = (vertragsbestandteile, kurzbz) => {\n            let ws = vertragsbestandteile.filter(value => value.vertragsbestandteiltyp_kurzbz == kurzbz);\n            return ws;\n        }\n\n        const createDVDialog = () => {\n            vbformmode.value = 'neuanlage';\n            vbformDV.value = null;\n            VbformWrapperRef.value.showModal();\n        }\n\n        const updateDVDialog = () => {\n            vbformmode.value = 'aenderung';\n            vbformDV.value = currentDV.value;\n            VbformWrapperRef.value.showModal();\n        }\n\n        const korrekturDVDialog = () => {\n            vbformmode.value = 'korrektur';\n            vbformDV.value = currentDV.value;\n            VbformWrapperRef.value.showModal();\n        }\n\n        const endDVDialog = () => {\n            endDV.value = {\n                    dienstverhaeltnisid: currentDV.value.dienstverhaeltnis_id,\n                    unternehmen: currentDV.value.oe_kurzbz,\n                    vertragsart_kurzbz: currentDV.value.vertragsart_kurzbz,\n                    dvendegrund_kurzbz: currentDV.value.dvendegrund_kurzbz,\n                    dvendegrund_anmerkung: currentDV.value.dvendegrund_anmerkung,\n                    gueltigkeit: {\n                        guioptions: {\n                           sharedstatemode: 'ignore',\n                           disabled: [\n                               'gueltig_ab'\n                           ]\n                        },\n                        data: {\n                            gueltig_ab: currentDV.value.von,\n                            gueltig_bis: currentDV.value.bis,\n                        }\n                    },\n                    unruly: currentDV.value.unruly,\n                    person_id: currentDV.value.person_id\n                };\n            enddvmodalRef.value.showModal();\n        }\n\n        const deleteDVDialog = () => {\n            delDV.value = {\n                    dienstverhaeltnisid: currentDV.value.dienstverhaeltnis_id,\n                    label: formatVertragsart(currentDV.value.vertragsart_kurzbz) + '/' +\n                           currentDV.value.oe_bezeichnung + ', ' +\n                           formatDate(currentDV.value.von) + ' - ' +\n                           formatDate(currentDV.value.bis)\n            };\n            deletedvmodalRef.value.showModal();\n        }\n\n        const linkToLehrtaetigkeitsbestaetigungODT = () => {\n            window.location.href = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'content/mitarbeiter/lehrtaetigkeit.pdf.php?output=odt&uid=' + currentDV.value.uid;\n        }\n\n        const linkToLehrtaetigkeitsbestaetigungPDF = () => {\n            window.location.href = FHC_JS_DATA_STORAGE_OBJECT.app_root + 'content/mitarbeiter/lehrtaetigkeit.pdf.php?output=pdf&uid=' + currentDV.value.uid;\n        }\n\n        const karenzDialog = () => {\n            curKarenz.value = {\n                    type: 'vertragsbestandteilkarenz',\n                    guioptions: {\n                        id: 'test'\n                    },\n                    data: {\n                        id: null,\n                        karenztyp_kurzbz: '',\n                        geplanter_geburtstermin: '',\n                        tatsaechlicher_geburtstermin: '',\n                        gueltigkeit: {\n                            guioptions: {\n                               sharedstatemode: 'ignore',\n                               disabled: []\n                            },\n                            data: {\n                                gueltig_ab: '',\n                                gueltig_bis: '',\n                            }\n                        }\n                    }\n                };\n            karenzmodalRef.value.showModal();\n        }\n\n        const showOffCanvas = () => {\n            offCanvasRef.value.show();\n        }\n\n        \n\n        const handleDvSaved = async () => {\n            fetchData(props.uid).then(() => {\n                // data might have changed but currentDVID is still the same -> fetch updated data\n                if (currentDVID != null && currentDVID.value > 0) {\n                    fetchVertrag(currentDVID.value, currentDate.value);\n                    fetchGBT(currentDVID.value, currentDate.value);\n                    fetchGBTChartData(currentDVID.value);\n                    checkValorisation();\n                    emit('updateHeader');\n                }\n            })\n        }\n\n        const handleDvEnded = async () => {\n            fetchData(route.params.uid);\n            emit('updateHeader');\n        }\n\n        const handleUpdateUnruly = async () => {\n            fetchData(route.params.uid);\n            emit('updateHeader');\n        }\n\n        const handleDvDeleted = () => {\n            delDV.value = null;\n            let url = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '/')\n                + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n                + '/extensions/FHC-Core-Personalverwaltung/Employees/'\n                + props.id + '/' + props.uid\n                + '/contract';\n            router.push( url ).then(() => {\n                router.go(0);\n            });\n        }\n\n        const handleKarenzSaved = async () => {\n            // TODO do something sensible\n            console.log('Karenz saved');\n        }\n\n        const formatNumber = (num) => {\n            return numberFormat.format(parseFloat(num));\n        }\n\n        const setDateHandler = (d) => {\n            console.log('date set: ', d);\n            currentDate.value = truncateDate(new Date(d));\n            //currentDate.value = truncateDate(new Date(d.target.value));\n        }\n\n        // event hander for vertragshistorie\n        const dateSelectedHandler = (d) => {\n            currentDate.value = truncateDate(new Date(d));\n        }\n\n        const setDate2BisDatum = () => {\n            currentDate.value = truncateDate(new Date(currentDV.value.bis));\n        }\n\n        const setDate2VonDatum = () => {\n            currentDate.value = truncateDate(new Date(currentDV.value.von));\n        }\n\n        const getCurrentVertragsbestandteil = () => {\n            let zuordnung = [];\n            let taetigkeit = [];\n            let zeitaufzeichnung = [];\n            let kuendigungsfrist = [];\n            let stunden = [];\n            let allIn = [];\n            let befristung = [];\n            let urlaubsanspruch = [];\n            let zusatzvereinbarung = [];\n            let karenz = [];\n            vertragList.value.forEach(vbs => {\n                if (vbs.vertragsbestandteiltyp_kurzbz == 'funktion') {\n                    if (vbs.benutzerfunktiondata.funktion_kurzbz.match(/.*zuordnung/)) {\n                        zuordnung.push(vbs.benutzerfunktiondata);\n                    } else {\n                        taetigkeit.push(vbs.benutzerfunktiondata);\n                    }\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'freitext') {\n                    if (vbs.freitexttyp_kurzbz == 'allin') {\n                        allIn.push(vbs);\n                    } else if (vbs.freitexttyp_kurzbz == 'befristung') {\n                        befristung.push(vbs);\n                    } else {\n                        zusatzvereinbarung.push(vbs);\n                    }\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'kuendigungsfrist') {\n                    kuendigungsfrist.push(vbs);\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'stunden') {\n                    stunden.push(vbs);\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'urlaubsanspruch') {\n                    urlaubsanspruch.push(vbs);\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'zeitaufzeichnung') {\n                    zeitaufzeichnung.push(vbs);\n                } else if (vbs.vertragsbestandteiltyp_kurzbz == 'karenz') {\n                    karenz.push(vbs);\n                }\n            });\n            currentVBS.funktion.zuordnung = zuordnung;\n            currentVBS.funktion.taetigkeit = taetigkeit;\n            currentVBS.zeitaufzeichnung = zeitaufzeichnung;\n            currentVBS.stunden = stunden;\n            currentVBS.kuendigungsfrist = kuendigungsfrist;\n            currentVBS.allIn = allIn;\n            currentVBS.befristung = befristung;\n            currentVBS.zusatzvereinbarung = zusatzvereinbarung;\n            currentVBS.urlaubsanspruch = urlaubsanspruch;\n            currentVBS.karenz = karenz;\n\n\n        }\n\n        const dropdownLink1 = () => {\n            console.log('dropdown link clicked');\n        }\n\n        const dvDeleteHandler = () => {\n            console.log('dvDeleteHandler link clicked', currentDVID);\n            deleteDV(currentDVID.value).then(async () => {\n                fetchData(props.uid)\n                let url = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '/')\n                    + FHC_JS_DATA_STORAGE_OBJECT.ci_router\n                    + '/extensions/FHC-Core-Personalverwaltung/Employees/'\n                    + props.id + '/' + props.uid\n                    + '/contract';\n                await router.push( url )\n            });\n        }\n\n        const capitalize = (s) => {\n            return s.charAt(0).toUpperCase() + s.slice(1);\n        }\n\n        const formatGBTGrund = (item) => {\n            if (!item) return ''\n            if (item.vertragsbestandteiltyp_kurzbz=='funktion') {\n                return item.fkt_beschreibung + '/' + (item.fb_bezeichnung!=null?item.fb_bezeichnung:'') + (item.org_bezeichnung!=null?item.org_bezeichnung:'')\n            } else if (item.vertragsbestandteiltyp_kurzbz=='freitext') {\n                return capitalize(item.freitexttyp_kurzbz) + '/' + item.freitext_titel\n            }\n            return capitalize(item.vertragsbestandteiltyp_kurzbz)\n        }\n\n        const formatKarenztyp = (item) => {\n            let karenztyp = karenztypen.value.find(kt => kt.value == item);\n            return karenztyp != undefined ? karenztyp.label : item;\n        }\n\n        const formatVertragsart = (item) => {\n            let va = vertragsarten.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n\n        const formatFreitexttyp = (item) => {\n            let va = freitexttypen.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n\n        const formatBeendigungsgrund = (item) => {\n            let va = beendigungsgruende.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n\n        const formatTeilzeittyp = (item) => {\n            let va = teilzeittypen.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n\n        const truncate = (input) => input?.length > 8 ? `${input.substring(0, 8)}...` : input;\n\n        const checkValorisation = async () => {\n\t\t\tif (currentDVID != null && currentDVID.value > 0) {\n\t\t\t\tisFetching.value = true\n\t\t\t\ttry {\n                    const res = await $api.call(ApiValorisierungscheck.checkValorisationValidityOfDv(currentDVID.value));\n\t\t\t\t\tvalorisationValid.value = res.data;\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t} finally {\n\t\t\t\t\tisFetching.value = false\n\t\t\t\t}\n\t\t\t}\n        }\n        checkValorisation();\n\n        const valorisationCheckPath = computed(() => {\n\t\t\tconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\t\t\treturn `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Valorisation/Check/`+currentDVID.value;\n        });\n\n        return {\n            isFetching, dvList, vertragList, gbtList, currentDV, currentDVID, dvSelectedHandler, confirmDeleteDVRef, offCanvasRef,\n            VbformWrapperRef, route, vbformmode, vbformDV, formatNumber, activeDV, isCurrentDVActive, isCurrentDate,\n            currentVBS, dropdownLink1, setDateHandler, dvDeleteHandler, formatGBTGrund, truncate, setDate2BisDatum, setDate2VonDatum,\n            createDVDialog, updateDVDialog, korrekturDVDialog, handleDvSaved, formatDate, formatDateISO, dvSelectedIndex,\n            currentDate, chartOptions, enddvmodalRef, endDVDialog, endDV, handleDvEnded, handleUpdateUnruly, showOffCanvas, dateSelectedHandler,\n            karenzmodalRef, karenzDialog, curKarenz, handleKarenzSaved, formatKarenztyp, formatVertragsart, formatFreitexttyp,\n            readonly, t, linkToLehrtaetigkeitsbestaetigungODT, linkToLehrtaetigkeitsbestaetigungPDF, formatBeendigungsgrund,\n            deletedvmodalRef, deleteDVDialog, delDV, handleDvDeleted, formatTeilzeittyp, valorisationCheckPath, valorisationValid\n        }\n    },\n    template: `\n\n\n\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n\n      <div class=\"container-fluid px-1\">\n\n            <div class=\"row\">\n\n                <div class=\"toast-container position-absolute top-0 end-0 pt-4 pe-2\">\n                    <Toast ref=\"toastRef\">\n                        <template #body><h4>Vertrag gespeichert.</h4></template>\n                    </Toast>\n                </div>\n\n                <div class=\"col-md-12\">\n                    <div class=\"d-flex justify-content-end mb-2\">\n                        <div class=\"me-2\"><span style=\"font-size:0.5em;font-style:italic\" v-if=\"dvList?.length>0\">({{ dvSelectedIndex }} von {{ dvList.length }})  id={{currentDVID}}</span></div>\n                        <div v-if=\"!isCurrentDate\"><span class=\"badge badge-sm bg-warning me-1\">Anzeigedatum ist nicht aktueller Tag</span></div>\n                        <div><span class=\"badge badge-sm me-1\" :class=\"{'bg-success': activeDV.length > 0, 'bg-danger': activeDV.length == 0}\" v-if=\"!isFetching\">{{ activeDV.length }} aktiv zu gewähltem Datum</span></div>\n                        <div><span class=\"badge badge-sm bg-secondary\">{{ dvList?.length }} <span v-if=\"dvList\">gesamt</span></span></div>\n                    </div>\n                    <div class=\"d-flex\">\n                        <div class=\"me-auto\">\n                            <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-primary me-2\" @click=\"createDVDialog()\"><i class=\"fa fa-plus\"></i> Dienstverhältnis</button>\n                            <button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-outline-secondary me-2\" @click=\"updateDVDialog()\">DV bearbeiten</button>\n                            <DropDownButton class=\"me-2\" :links=\"[{action:linkToLehrtaetigkeitsbestaetigungODT,text:'Lehrtätigkeitsbestätigung (odt)'},{action:linkToLehrtaetigkeitsbestaetigungPDF,text:'Lehrtätigkeitsbestätigung (pdf)'}]\">\n                                Bestätigung drucken\n                            </DropDownButton>\n                            <!-- Drop Down Button -->\n                            <DropDownButton class=\"me-2\" :links=\"[{action:korrekturDVDialog,text:'DV korrigieren'},{action:endDVDialog,text:'DV beenden'},{action:deleteDVDialog,text:'DV löschen (nur in Ausnahmefällen)'}]\">\n                                Weitere Aktionen\n                            </DropDownButton>\n                            <!--button v-if=\"!readonly\" type=\"button\" class=\"btn btn-sm btn-secondary\" @click=\"showOffCanvas()\">Vertragshistorie</button-->\n                        </div>\n\n                        <div class=\"d-flex align-items-end flex-column\">\n                            <div class=\"d-grid d-sm-flex gap-2 mb-2 flex-nowrap\">\n                                <select  v-if=\"!isFetching && dvList?.length>0\" class=\"form-select form-select-sm\" v-model=\"currentDVID\" @change=\"dvSelectedHandler\" aria-label=\"DV auswählen\">\n                                    <option v-for=\"(item, index) in dvList\" :value=\"item.dienstverhaeltnis_id\"  :key=\"item.dienstverhaeltnis_id\">\n                                    {{ formatVertragsart(item.vertragsart_kurzbz) }}/{{item.oe_bezeichnung}}, {{ formatDate(item.von) }} - {{ formatDate(item.bis) }}\n                                    </option>\n                                </select>\n                                <div v-else-if=\"isFetching\" style=\"width:150px\"><p-skeleton style=\"width:100%;height:100%\"></p-skeleton></div>\n\n                                <datepicker id=\"currentDateSelect\" :modelValue=\"formatDateISO(currentDate)\"\n                                    @update:model-value=\"setDateHandler\"\n                                    v-bind:enable-time-picker=\"false\"\n                                    :clearable=\"false\"\n                                    six-weeks\n                                    auto-apply\n                                    locale=\"de\"\n                                    format=\"dd.MM.yyyy\"\n                                    model-type=\"yyyy-MM-dd\"\n                                    input-class-name=\"dp-custom-input\"\n\t\t\t\t\t\t\t\t\t:config=\"{ keepActionRow: true }\"\n\t\t\t\t\t\t\t\t\t:action-row=\"{ showNow: true, showSelect: false, showCancel: false }\"\n\t\t\t\t\t\t\t\t\tnow-button-label=\"Heute\"\n                                    style=\"max-width:140px;min-width:140px\" ></datepicker>\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class=\"row justify-content-center pt-md-2\" v-if=\"!isCurrentDVActive && dvList?.length\">\n                        <div class=\"alert alert-warning mt-3\" role=\"alert\">\n                            Dienstverhältnis ist zum ausgewählten Datum inaktiv.\n                            <span v-if=\"currentDV?.bis != null\">\n                                Anzeigedatum auf letztgültiges Datum des Dienstverhältnisses setzen: &nbsp;\n                                <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"setDate2BisDatum\">\n                                    Datum setzen\n                                </button>\n\n                            </span>\n                            <span v-else-if=\"currentDV?.von != null\">\n                                Anzeigedatum auf Von-Datum des Dienstverhältnisses setzen: &nbsp;\n                                <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"setDate2VonDatum\">\n                                    Datum setzen\n                                </button>\n\n                            </span>\n                        </div>\n                </div>\n                <div class=\"row pt-md-2\" v-if=\"isCurrentDVActive && dvList?.length\">\n                    <div class=\"col-6\">\n                        <!-- Allgemein -->\n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Allgemein</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div ref=\"baseDataFrm\" class=\"row g-3\" v-if=\"currentDV != null\">\n\n                                    <div class=\"col-md-4\">\n                                        <label class=\"col-sm-6 form-label\">Organisation</label>\n                                        <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"currentDV.oe_bezeichnung\" >\n                                    </div>\n\n                                    <div class=\"col-md-4\">\n                                        <label for=\"dvArt\" class=\"col-sm-6 form-label\">Vertragsart</label>\n                                        <div class=\"col-sm-12\">\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvArt\" :value=\"formatVertragsart(currentDV.vertragsart_kurzbz)\">\n                                        </div>\n                                    </div>\n\n                                    <div class=\"col-md-4\"></div>\n\n                                    <!-- von bis -->\n                                    <div class=\"col-md-4\">\n                                        <label class=\"form-label\" >Von</label>\n                                        <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"formatDate(currentDV.von)\" >\n                                    </div>\n\n                                    <div class=\"col-md-4\">\n                                        <label class=\"form-label\" >Bis</label>\n                                        <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"formatDate(currentDV?.bis)\" >\n                                    </div>\n\n                                    <!--div class=\"col-md-4\">\n                                        <label  class=\"form-label\" >Befristet</label>\n                                        <div class=\"col-sm-8\">\n                                            <input class=\"form-check-input mt-2\" type=\"checkbox\" id=\"befristetCheck\" disabled >\n                                        </div>\n                                    </div-->\n\n                                    <!-- DV Beendigungsgrund -->\n                                    <div class=\"col-md-4\" v-if=\"currentDV?.dvendegrund_kurzbz != null\">\n                                        <label  class=\"form-label\" >Beendigungsgrund</label>\n                                        <input readonly class=\"form-control-sm form-control-plaintext\" type=\"text\" id=\"dvendegrundKurzbz\" :value=\"formatBeendigungsgrund(currentDV?.dvendegrund_kurzbz)\"  >\n                                    </div>\n                                    <div class=\"col-md-4\"  v-else></div>\n\n                                    <div class=\"col-md-8\" v-if=\"currentDV?.dvendegrund_kurzbz != null\">\n                                        <label  class=\"form-label\" >Anmerkung</label>\n                                        <textarea class=\"form-control-sm form-control-plaintext\" readonly >{{ currentDV?.dvendegrund_anmerkung }} </textarea>\n                                    </div>\n                                    <div class=\"col-md-8\"  v-else></div>\n\n                                    <div class=\"col-md-4\"></div>\n\n                                    <!-- Befristung -->\n                                    <template v-for=\"(item, index) in currentVBS.befristung\"  >\n                                        <div class=\"col-md-4\">\n                                            <label for=\"befristet_von\" class=\"form-label\" >Befristung Von</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"formatDate(item.von)\" >\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                            <label for=\"befristet_bis\" class=\"form-label\" >Befristung Bis</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"formatDate(item.bis)\" >\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                            <label for=\"befristetCheck\" class=\"form-label\" >Befristet</label>\n                                            <div class=\"col-sm-8\">\n                                                <input class=\"form-check-input mt-2\" type=\"checkbox\" id=\"befristetCheck\" checked disabled>\n                                            </div>\n                                        </div>\n                                    </template>\n\n                                    <!-- Kündigungsfrist -->\n                                    <template v-for=\"(item, index) in currentVBS.kuendigungsfrist\"  >\n                                        <div class=\"col-md-4\">\n                                            <label for=\"dvKuendigungsfristAG\" class=\"form-label\">Kündigungsfrist AG</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvKuendigungsfristAG\" :value=\"item.arbeitgeber_frist\">\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                            <label for=\"dvKuendigungsfristAN\" class=\"form-label\">Kündigungsfrist AN</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvKuendigungsfristAN\" :value=\"item.arbeitnehmer_frist\">\n                                        </div>\n\n                                        <div class=\"col-md-4\"></div>\n                                    </template>\n\n                                    <!-- Urlaubsanspruch -->\n                                    <template v-for=\"(item, index) in currentVBS.urlaubsanspruch\"  >\n                                        <div class=\"col-md-3\">\n                                            <label for=\"dvUrlaubsanspruch\" class=\"form-label\">Urlaubsanspruch</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvUrlaubsanspruch\" :value=\"item.tage\">\n                                        </div>\n                                    </template>\n\n                                </div>\n                            </div><!-- card body -->\n                        </div><!-- card -->\n\n                        <!-- Arbeitszeit -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Arbeitszeit</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"col-md-12 py-3\" v-if=\"currentVBS.stunden.length == 0\">\n                                    Kein aktiver Vertragsbestandteil vorhanden.\n                                </div>\n                                <template v-for=\"(item, index) in currentVBS.stunden\"  >\n                                    <div class=\"row\">\n                                        <div class=\"col-md-4\">\n                                            <label for=\"dvStunden\" class=\"form-label\">Wochenstunden</label>\n                                            <div class=\"col-sm-12\">\n                                                <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvStunden\"  :value=\"formatNumber(item.wochenstunden)\">\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                            <label for=\"dvTeilzeittyp\" class=\"form-label\">Teilzeittyp</label>\n                                            <div class=\"col-sm-12\">\n                                                <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" id=\"dvTeilzeittyp\" :value=\"formatTeilzeittyp(item.teilzeittyp_kurzbz)\">\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-md-4\">\n                                                <template v-for=\"(item, index) in currentVBS.allIn\"  >\n                                                    <label  class=\"form-label\" >AllIn</label>\n                                                    <div class=\"col-sm-8\">\n                                                        <input class=\"form-check-input mt-2\" type=\"checkbox\" id=\"allInCheck\" checked disabled>\n                                                    </div>\n                                                </template>\n                                            </div>\n                                    </div>\n                                </template>\n                            </div><!-- card-body -->\n                        </div><!-- card -->\n\n                        <!-- Zeitaufzeichnung -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Zeitaufzeichnung</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                 <div class=\"col-md-12 py-3\" v-if=\"currentVBS.zeitaufzeichnung.length == 0\">\n                                    Kein aktiver Vertragsbestandteil vorhanden.\n                                </div>\n                                <div class=\"row\">\n                                    <div class=\"col-md-4\">\n                                        <template v-for=\"(item, index) in currentVBS.zeitaufzeichnung\"  >\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"zapflichtigCheck\" :checked=\"item.zeitaufzeichnung\" disabled>\n                                                <label class=\"form-check-label\" >Zeitaufzeichnungspflichtig</label>\n                                            </div>\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"azgCheck\" :checked=\"item.azgrelevant\" disabled>\n                                                <label class=\"form-check-label\" >AZG relevant</label>\n                                            </div>\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"homeofficeCheck\" :checked=\"item.homeoffice\" disabled>\n                                                <label class=\"form-check-label\" >Homeoffice</label>\n                                            </div>\n                                        </template>\n                                    </div>\n                                    <div class=\"col-md-8\"></div>\n                                </div>\n                            </div><!-- card body -->\n                        </div><!-- card -->\n\n                        <!-- Sonstige Vereinbarung -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Sonstige Vereinbarung</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"row g-3\" v-if=\"currentDV != null\">\n                                    <div class=\"col-md-12 py-3\" v-if=\"currentVBS.zusatzvereinbarung.length == 0\">\n                                        Kein aktiver Vertragsbestandteil vorhanden.\n                                    </div>\n                                    <template v-for=\"(item, index) in currentVBS.zusatzvereinbarung\"  >\n                                        <div class=\"col-md-3\">\n                                            <label class=\"form-label\" >Freitexttyp</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"formatFreitexttyp(item.freitexttyp_kurzbz)\" >\n                                        </div>\n\n                                        <div class=\"col-md-5\">\n                                            <label class=\"form-label\" >Titel</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"item.titel\" >\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label  class=\"form-label\" >Von</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatDate(item.von)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" >Bis</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatDate(item.bis)\">\n                                        </div>\n\n                                        <div class=\"col-md-12\">\n                                            <label class=\"form-label\" >Text</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"item.anmerkung\">\n                                        </div>\n                                    </template>\n                                </div>\n                            </div><!-- card-body -->\n                        </div><!-- card -->\n\n                        <!-- Karenz -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Karenz</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"row g-3\" v-if=\"currentDV != null\">\n                                    <div class=\"col-md-12 py-3\" v-if=\"currentVBS.karenz.length == 0\">\n                                        Kein aktiver Vertragsbestandteil vorhanden.\n                                    </div>\n                                    <template v-for=\"(item, index) in currentVBS.karenz\"  >\n                                        <div class=\"col-md-4\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Karenztyp</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatKarenztyp(item.karenztyp_kurzbz)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Von</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatDate(item.von)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Bis</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatDate(item.bis)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Geplanter Geb.termin</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatDate(item.geplanter_geburtstermin)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Tats. Geb.termin</label>\n                                            <input  readonly class=\"form-control-sm form-control-plaintext\" type=\"text\" :value=\"formatDate(item.tatsaechlicher_geburtstermin)\" >\n                                        </div>\n                                    </template>\n\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Dokumente -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Dokumente</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"col-md-12 py-3\">\n                                    Keine Dokumente vorhanden.\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Notizen -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Notizen</h5>\n                            </div>\n                            <div class=\"card-body\">\n                               <div class=\"col-md-12 py-3\">\n                                    Keine Notizen vorhanden.\n\t\t\t\t\t\t\t   </div>\n                            </div>\n                        </div>\n\n                    </div><!-- col-6 -->\n\n                    <div class=\"col-6\">\n                        <!-- Zuordnung und Tätigkeit -->\n                        <div class=\"card\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Zuordnung &amp; Tätigkeit</h5>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"row g-3\" v-if=\"currentDV != null\">\n                                    <template v-for=\"(item, index) in currentVBS.funktion.zuordnung\"  >\n\n                                        <div class=\"col-md-4\">\n                                            <label class=\"form-label\" v-if=\"index == 0\" >Zuordnung</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"item.funktion_bezeichnung\" >\n                                        </div>\n\n                                        <div class=\"col-md-6\">\n                                            <label class=\"form-label\" v-if=\"index == 0\">Organisationseinheit</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"'[' + item.oe_typ_bezeichnung + '] ' + item.oe_bezeichnung\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index == 0\">SAP Kostenstelle</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" v-if=\"item.funktion_kurzbz == 'kstzuordnung' && item.oe_kurzbz_sap != null\" :value=\"item.oe_kurzbz_sap\">\n                                        </div>\n\n                                    </template>\n\n                                    <div class=\"col-md-12 py-4\" v-if=\"currentVBS.funktion.taetigkeit.length == 0\">\n                                        Keine aktive Tätigkeit vorhanden.\n                                    </div>\n                                    <template v-for=\"(item, index) in currentVBS.funktion.taetigkeit\"  >\n\n                                        <div class=\"col-md-4\">\n                                            <label class=\"form-label\" v-if=\"index == 0\" >Tätigkeit</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\" :value=\"item.funktion_bezeichnung\" >\n                                        </div>\n\n                                        <div class=\"col-md-6\">\n                                            <label class=\"form-label\" v-if=\"index == 0\">Organisationseinheit</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"'[' + item.oe_typ_bezeichnung + '] ' + item.oe_bezeichnung\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                        </div>\n\n                                    </template>\n                                </div>\n                            </div><!-- card-body -->\n                        </div><!-- card -->\n\n                        <!-- Bruttomonatsgehalt  -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t\t\t\t\t<div><h5 class=\"mb-0\">Bruttomonatsgehalt</h5></div>\n\t\t\t\t\t\t\t\t\t<div v-if=\"!valorisationValid\">\n\t\t\t\t\t\t\t\t\t\t<router-link :to=\"valorisationCheckPath\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex-sm-fill text-sm-start\">\n\t\t\t\t\t\t\t\t\t\t\tZur Valorisierungsprüfung\n\t\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n                            </div>\n                            <div class=\"card-body\">\n                                <div class=\"row g-3\" v-if=\"currentDV != null\">\n                                    <div class=\"col-md-12 py-3\" v-if=\"gbtList.length == 0\">\n                                        Kein aktiver Gehaltsbestandteil vorhanden.\n                                    </div>\n                                    <template v-for=\"(item, index) in gbtList\"  >\n\n                                        <div class=\"col-md-3\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Grund</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatGBTGrund(item)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Gehaltstyp</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"item?.gehaltstyp_bezeichnung\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Betrag</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatNumber(item.grund_betrag_decrypted)\">\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Betrag val.</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"formatNumber(item.betrag_val_decrypted)\">\n                                        </div>\n\n                                        <div class=\"col-md-1\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Val.</label>\n                                            <div class=\"col-sm-8\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" :checked=\"item.valorisierung\" disabled>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"col-md-2\">\n                                            <label class=\"form-label\" v-if=\"index==0\" >Anmerkung</label>\n                                            <input type=\"text\" readonly class=\"form-control-sm form-control-plaintext\"  :value=\"truncate(item.anmerkung)\">\n                                        </div>\n\n                                    </template>\n                                </div>\n                            </div><!-- card-body -->\n                        </div> <!-- card -->\n\n                        <!-- Gehalt -->\n                        <div class=\"card mt-3\">\n                            <div class=\"card-header\">\n                                <h5 class=\"mb-0\">Gehalt</h5>\n                            </div>\n                            <div class=\"card-body\" style=\"text-align:center\">\n                                <div style=\"width:100%;height:100%;overflow:auto\">\n                                    <figure>\n                                        <highcharts class=\"chart\" :options=\"chartOptions\"></highcharts>\n                                    </figure>\n                                </div>\n                            </div><!-- card-body -->\n                        </div><!-- card -->\n\n                    </div>  <!-- col-6 -->\n                </div>  <!-- row -->\n\n            </div>\n        </div>\n\n    </div>\n\n    <vbform_wrapper\n        id=\"vbFormWrapper\"\n        ref=\"VbformWrapperRef\"\n        :title=\"'Dienstverhältnis'\"\n        :mode=\"vbformmode\"\n        :curdv=\"vbformDV\"\n        :mitarbeiter_uid=\"uid\"\n        @dvsaved=\"handleDvSaved\">\n    </vbform_wrapper>\n\n    <ModalDialog title=\"Warnung\" ref=\"confirmDeleteDVRef\">\n        <template #body>\n            Dienstverhältnis wirklich löschen?\n        </template>\n    </ModalDialog>\n\n    <enddvmodal\n        ref=\"enddvmodalRef\"\n        :curdv=\"endDV\"\n        @dvended=\"handleDvEnded\"\n        @updateunruly=\"handleUpdateUnruly\">\n    </enddvmodal>\n\n    <deletedvmodal\n        ref=\"deletedvmodalRef\"\n        :curdv=\"delDV\"\n        @dvdeleted=\"handleDvDeleted\">\n    </deletedvmodal>\n\n    <OffCanvasTimeline\n        ref=\"offCanvasRef\"\n        @dateSelected=\"dateSelectedHandler\"\n        :curdv=\"currentDV\"\n        :alldv=\"dvList\">\n    </OffCanvasTimeline>\n\n    <karenzmodal\n        ref=\"karenzmodalRef\"\n        :curkarenz=\"curKarenz\"\n        @karenzsaved=\"handleKarenzSaved\">\n    </karenzmodal>\n    `\n}\n","import ApiEmployee from '../../../api/factory/employee.js';\n\nexport const DvCard = {\n\tname: 'DvCard',\n     props: {\n        uid: String,\n        date: Date,\n     },\n     setup( props ) {\n        \n        const { watch, ref, toRefs, onMounted, inject } = Vue; \n        const dvData = ref();\n        const currentDate = ref(null);\n        const isFetching = ref(false);\n        const title = ref(\"Dienstverhältnis\");\n        const currentUID = toRefs(props).uid;   \n        const $api = Vue.inject('$api');\n\n        const formatDate = (ds) => {\n            if (ds == null) return '';\n            var d = new Date(ds);\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n\n        const convert2UnixTS = (ds) => {\n            let d = new Date(ds);\n            return Math.round(d.getTime() / 1000)\n        }\n        \n        const fetchCurrentDV = async () => {\n            if (currentUID.value == null) {\n                return;\n            }\n\t\t\ttry {\n              let ts = convert2UnixTS(currentDate.value);  // unix timestamp\n              isFetching.value = true;\n              const response = await $api.call(ApiEmployee.getCurrentDV(currentUID.value, ts));\n              isFetching.value = false;              \n              if (response?.meta?.status == 'success' && response?.data?.length>0) {\n                dvData.value = response.data;\n              } else {\n                dvData.value = null;\n              }\n\t\t\t} catch (error) {\n\t\t\t  console.log(error);\n\t\t\t} finally {\n                isFetching.value = false;\n            }\t\n\t\t}\n\n        onMounted(() => {\n            currentDate.value = props.date || new Date();\n            fetchCurrentDV();\n        })\n\n        watch(\n\t\t\tcurrentUID,\n\t\t\t() => {\n\t\t\t\tfetchCurrentDV();\n\t\t\t}\n\t\t)\n\n        watch(\n\t\t\t() => props.date,\n\t\t\tnewDate => {\n\t\t\t\tif (newDate != null) {\n                    currentDate.value = newDate;\n                    fetchCurrentDV();\n                }\n\t\t\t}\n\t\t)\n      \n        return {\n            dvData, isFetching, formatDate, title, currentUID, currentDate\n        }\n     },\n     template: `\n     <div class=\"card\">\n        <div class=\"card-header d-flex justify-content-between align-items-baseline\">\n            <h5 class=\"mb-0\">{{ title }}</h5>\n                <span class=\"text-muted\">{{ formatDate(currentDate) }}</span>\n            </div>\n            <div class=\"card-body\" style=\"text-align:left\">\n            <div v-if=\"isFetching\" class=\"spinner-border\" role=\"status\">\n                 <span class=\"visually-hidden\">Loading...</span>\n            </div>     \n            <div v-if=\"!isFetching && dvData!=null\">\n                <div v-for=\"(item, index) in dvData\" :key=\"item.dienstverhaeltnis_id\">\n                    <table class=\"dvcard table table-bordered\">\n                    <tbody>\n                        <tr><th scope=\"row\">Zeitraum </th><td>{{ formatDate(item.von) }} - {{ formatDate(item.bis) }}</td></tr>\n                        <tr><th scope=\"row\">Art</th><td>{{ item.vertragsart_kurzbz }}</td></tr>\n                        <tr v-if=\"false\" v-for=\"(salaryItem, salaryIndex) in item.gehaltsbestandteile\" :key=\"salaryItem.gehaltsbestandteil_id\">\n                            <th scope=\"row\">{{ salaryItem?.gehaltstyp_bezeichnung }}</th><td>€ {{ new Intl.NumberFormat().format(parseFloat(salaryItem.grund_betrag_decrypted)) }}</td>\n                        </tr>\n                    </tbody>\n                    </table>\n                </div>\n            </div>\n            \n            \n        </div>\n     </div>\n     \n     `\n   \n\n}","import ApiGehaltsbestandteil from '../../../api/factory/gehaltsbestandteil.js';\nimport ApiCommon from '../../../api/factory/common.js';\n\nexport const LehreCard = {\n\tname: 'LehreCard',\n     props: {\n        uid: String,\n        date: Date,\n     },\n     setup( props ) {\n        \n        const $api = Vue.inject('$api');    \n        const courseData = Vue.ref();\n        const isFetching = Vue.ref(false);\n        const title = Vue.ref(\"Lehre/Betreuung\");\n        const currentDate = Vue.ref(null);\n        const currentUID = Vue.toRefs(props).uid  \n\n        const formatDate = (ds) => {\n            if (ds == null) return '';\n            var d = new Date(ds);\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n\n        const calcSemester = () => {\n            \n            let d = new Date();\n            if (currentDate.value != null) {\n                d = new Date(currentDate.value);\n            }\n\n            let y=d.getFullYear(); \n            let semesterString = \"SS\";\n\n            if (d.getMonth() < 8 && d.getMonth() > 1) return semesterString + y;\n            else if (d.getMonth() < 2) {\n                y--; \n            }\n\n            semesterString = \"WS\";\n            return semesterString + y;\n            \n        }\n\n        const currentSemester = Vue.ref(calcSemester())   \n\n        const decSemester = () => {\n            if (currentSemester.value.startsWith('WS')) {\n                currentSemester.value = 'SS' + currentSemester.value.substring(2)\n            } else {\n                currentSemester.value = 'WS'+ (parseInt(currentSemester.value.substring(2)) - 1)\n            }\n        }\n\n        const incSemester = () => {\n            if (currentSemester.value.startsWith('WS')) {\n                currentSemester.value = 'SS' + (parseInt(currentSemester.value.substring(2)) + 1)\n            } else {\n                currentSemester.value = 'WS'+ currentSemester.value.substring(2)\n            }\n        }\n\n        const chartOptions = Vue.reactive({\n            lang: {\n                thousandsSep: '.'\n            },\n            chart: {\n                type: 'column'\n            },\n            title: {\n                text: ''\n            },\n            series: [{\n                    name: 'Lehre',\n                    data: [],\n                    color: '#6fcd98',\n                    step: 'left' // or 'center' or 'right'\n                },\n                {\n                    name: 'Betreuung',\n                    data: [],\n                    color: '#cd6fca',\n                    step: 'left' // or 'center' or 'right'\n                }, \n            ],\n            xAxis: {\n                type: 'category',                \n                labels: {                  \n                  rotation: 90\n                },\n                /*tickPositioner: function() {\n                  return dates.value.map(function(date) {\n                    return Date.parse(date);\n                  });\n                }*/\n            },\n            tooltip: {\n                pointFormat: '<b>{point.y:,.2f}</b>',\n                \n            },\n            yAxis: {\n                //min: 0,\n                title: {\n                    text: 'Semesterstunden'\n                }\n            },\n            credits: {\n                enabled: false\n              },\n                      \n        })\n\n        // fetch chart data\n        const fetchAllCourseHours = async (dv_id, date) => {\n            isFetching.value = true\n            try {\n                const res = await $api.call(ApiGehaltsbestandteil.gbtChartDataByDV(dv_id));\n                gbtChartData.value = res;\n                let tempData1 = [], tempData2 = [];\n                // chartOptions.series[0].data.length = 0;\n                Object.keys(res.gesamt).forEach(element => {\n                   tempData1.push([new Date(element).getTime(), parseFloat(res.gesamt[element])]);\n                });\n                res.abgerechnet.forEach(element => {\n                    tempData2.push([new Date(element.datum).getTime(), parseFloat(element.sum)]);\n                });\n                chartOptions.series[0].data = tempData1;\n                chartOptions.series[1].data = tempData2;\n            } catch (error) {\n                console.log(error)                \n            } finally {\n                isFetching.value = false\n            }\n           \n        }\n        \n        const fetchCourseHours = async () => {\n            if (currentUID.value == null || currentDate.value == null) {\n                return;\n            }\n\t\t\ttry {\n              isFetching.value = true;\n              const response = await $api.call(ApiCommon.getAllCourseHours(currentUID.value));\n              isFetching.value = false;         \n              let tempData1 = [], tempData2 = [];   \n              if (response.data != null) {  \t\t\t  \n                response.data.forEach(element => {\n                  tempData1.push([element.studiensemester_kurzbz, element.semesterstunden]);              \n                });\n              }\n              chartOptions.series[0].data = tempData1;\t\t\t  \t\t\t  \n\t\t\t} catch (error) {\n\t\t\t  console.log(error);\n              isFetching.value = false;           \n\t\t\t}\t\t\n\t\t}\n\n        const fetchSupportHours = async () => {\n            if (currentUID.value == null || currentDate.value == null) {\n                return;\n            }\n\t\t\ttry {\n              isFetching.value = true;\n              const response = await $api.call(ApiCommon.getAllSupportHours(currentUID.value));\n              isFetching.value = false;         \n              let tempData1 = [], tempData2 = [];     \n              if (response?.meta?.status == 'success' && response.data != null) {\n                response.data.forEach(element => {\n                    tempData1.push([element.studiensemester_kurzbz, element.semesterstunden]);\n                });\n              }\n              chartOptions.series[1].data = tempData1;\n\t\t\t  \t\t\t  \n\t\t\t} catch (error) {\n\t\t\t  console.log(error);\n              isFetching.value = false;           \n\t\t\t}\t\t\n\t\t}\n\n        Vue.onMounted(() => {\n            currentDate.value = props.date || new Date();\n            fetchCourseHours();\n        })\n\n        Vue.watch(\n\t\t\tcurrentUID,\n\t\t\t() => {\n\t\t\t\tfetchCourseHours();\n                fetchSupportHours();\n\t\t\t}\n\t\t)\n\n        Vue.watch(\n            currentSemester,\n            () => {\n                fetchCourseHours();\n                fetchSupportHours();\n            }\n        )\n      \n        return {\n            courseData, isFetching, formatDate, currentSemester, title, currentUID, currentDate, incSemester, decSemester, chartOptions,\n        }\n     },\n     template: `\n     <div class=\"card\">\n        <div class=\"card-header d-flex align-items-baseline\">\n            <h5 class=\"mb-0 flex-grow-1\">{{ title }}</h5>               \n        </div>\n        <div class=\"card-body\" style=\"text-align:center\">\n                <div style=\"width:100%;height:100%;overflow:auto\">\n                    <figure>\n                        <highcharts class=\"chart\" :options=\"chartOptions\"></highcharts>\n                    </figure>\n                </div>\n        </div><!-- card-body -->\n     </div>\n     \n     `\n   \n\n}","import ApiIssue from '../../../api/factory/issue.js';\nimport ApiVertragsbestandteil from '../../../api/factory/vertragsbestandteil.js';\nimport ApiGehaltsbestandteil from '../../../api/factory/gehaltsbestandteil.js';\nimport ApiDV from '../../../api/factory/dv.js';\n\nexport const IssuesCard = {\n\tname: 'IssuesCard',\n     components: {\n        \n     },\n     props: {\n       \n     },\n     setup( props ) {\n\n        const { watch, ref, toRefs, onMounted, inject } = Vue;         \n        const route = VueRouter.useRoute();\n        const isFetching = Vue.ref(false);\n        const title = Vue.ref(\"Issues\");\n        const currentPersonID = ref(null);\n        const currentDate = Vue.ref(null);        \n        const issues = ref([]);\n        const vertragsbestandteiltypen = inject('vertragsbestandteiltypen');\n        const gehaltstypen = inject('gehaltstypen');\n        const vertragsarten = inject('vertragsarten');\n        const $api = inject('$api');  \n        \n        const formatVertragsbestandteiltyp = (item) => {\n          let va = vertragsbestandteiltypen.value.find(kt => kt.value == item);\n          return va != undefined ? va.label : item;\n        }\n\n        const formatGehaltstyp = (item) => {\n          let va = gehaltstypen.value.find(kt => kt.value == item);\n          return va != undefined ? va.label : item;\n        }\n\n        const formatVertragsart = (item) => {\n            let va = vertragsarten.value.find(kt => kt.value == item);\n            return va != undefined ? va.label : item;\n        }\n        \n\n        const formatDate = (ds) => {\n            if (ds == undefined) return '';\n            var d = new Date(ds);\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n        \n        const fetchIssues = async () => {\n            if (currentPersonID.value == null) {\n                return;\n            }\n\t\t\ttry {\n              isFetching.value = true;\n              const response = await $api.call(ApiIssue.byPerson(currentPersonID.value));\n              isFetching.value = false;              \n              if (response?.meta?.status == 'success' && response?.data?.length>0) {\n                issues.value = response.data;\n                getBehebungData(issues.value);\n              } else {\n                issues.value = null;\n              }\n\t\t\t} catch (error) {\n\t\t\t  console.log(error);\n\t\t\t} finally {\n                isFetching.value = false;\n            }\t\n\t\t}\n\n        onMounted(() => {\n            currentDate.value = props.date || new Date();\n            currentPersonID.value = parseInt(route.params.id);\n            fetchIssues();\n        })\n\n        const getVB = async (vbid) =>  {\n            try {\n                let res = await $api.call(ApiVertragsbestandteil.getVB(vbid))\n                console.log(res);\n                return res;\n            } catch(error) {\n                console.log(error);\n            }\n            return null;\n        }\n\n        const getGB = async (gbid) =>  {\n            try {\n                let res = await $api.call(ApiGehaltsbestandteil.getGB(gbid))\n                console.log(res);\n                return res;\n            } catch(error) {\n                console.log(error);\n            }\n            return null;\n        }\n        const getDV = async (dvid) =>  {\n            try {\n                let res = await $api.call(ApiDV.getDVByID(dvid))\n                console.log(res);\n                return res;\n            } catch(error) {\n                console.log(error);\n            }\n            return null;\n        }\n\n        const getBehebungData = ( issues ) => {\n\n            issues.forEach(issue => {\n\n                let behebungParam = JSON.parse(issue.behebung_parameter);  // why is it a string?\n\n                if (behebungParam != null) {\n\n                    const keys = Object.keys(behebungParam);\n                    keys.forEach((key, index) => {              \n\n                        switch (key) {\n                            case 'dienstverhaeltnis_id':\n                            case 'erste_dienstverhaeltnis_id':\n                            case 'zweite_dienstverhaeltnis_id':\n                                    getDV( behebungParam[key] ).then((dv) => {\n\t\t\t\t\t\t\t\t\t\tif (dv.data === null) return;\n                                        let dienstverhaeltnis_id = behebungParam[key] + '';\n                                        if (!('behebung_data' in issue)) {\n                                            issue.behebung_data = { dvs: {} };                                \n                                        }\n                                        if (!('dvs' in issue.behebung_data)) {\n                                            issue.behebung_data['dvs'] = {};\n                                        }\n                                        issue.behebung_data.dvs[dienstverhaeltnis_id] = dv.data;\n                                    })\n                                    break;\n                            case 'vertragsbestandteil_id':\n                            case 'erste_vertragsbestandteil_id':\n                            case 'zweite_vertragsbestandteil_id':\n                                getVB( behebungParam[key] ).then((vb) => {\n\t\t\t\t\t\t\t\t\tif (vb.data === null) return;\n                                    let vertragsbestandteil_id = behebungParam[key] + '';\n                                    if (!('behebung_data' in issue)) {\n                                        issue.behebung_data = { vbs: {} };                                \n                                    }\n                                    if (!('vbs' in issue.behebung_data)) {\n                                        issue.behebung_data['vbs'] = {};\n                                    }\n                                    issue.behebung_data.vbs[vertragsbestandteil_id] = vb.data;\n                                })\n                                \n                                break;\n                            \n\n                            case 'gehaltsbestandteil_id':\n                                getGB( behebungParam[key] ).then((gb) => {\n\t\t\t\t\t\t\t\t\tif (gb.data === null) return;\n                                    let gehaltsbestandteil_id = behebungParam[key] + '';\n                                    if (!('behebung_data' in issue)) {\n                                        issue.behebung_data = { gbs: {} };                                \n                                    }\n                                    if (!('gbs' in issue.behebung_data)) {\n                                        issue.behebung_data['gbs'] = {};\n                                    }\n                                    issue.behebung_data.gbs[gehaltsbestandteil_id] = gb.data;\n                                })\n                                break;\n                        \n                            default:\n                                console.log('Behebungsparameter not supported', behebungParam);\n                                break;\n                        }\n                    })\n                }\n            });\n\n            \n            \n            return 66;\n        }\n\n        const isVB = (behebungParameter) => 'vertragsbestandteil_id' in behebungParameter\n        \n        const isGBT = (behebungParam) => 'gehaltsbestandteil_id' in behebungParameter\n        \n\n        watch(\n\t\t\t() => route.params,\n\t\t\tparams => {\n\t\t\t\tcurrentPersonID.value = params.id;\n               // currentPersonUID.value = params.uid;\n               fetchIssues();\n\t\t\t}\n\t\t)\n\n        // dummy events\n        /* const issues = [\n            {status: 'new', date: '1/2/2023', inhalt: 'lorem ipsum'},\n            {status: 'new', date: '1/5/2023', inhalt: 'lorem ipsum'},\n        ] */\n\n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const fullPath = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/`;\n      \n        return {\n            currentDate, isFetching, formatDate, title, currentPersonID, issues, fullPath, route, \n            formatVertragsbestandteiltyp, formatGehaltstyp,formatVertragsart,\n        }\n     },\n     template: `\n     <div class=\"card\">\n        <div class=\"card-header d-flex justify-content-between align-items-baseline\">\n            <h5 class=\"mb-0\">{{ title }}</h5>\n                <span class=\"text-muted\">{{ formatDate(currentDate) }}</span>\n        </div>\n        <div class=\"card-body\" style=\"text-align:left\">\n            <div v-if=\"isFetching\" class=\"spinner-border\" role=\"status\">\n                <span class=\"visually-hidden\">Loading...</span>\n            </div>     \n            <div v-if=\"!isFetching && issues!=null\">\n                <table class=\"table table-bordered\">\n                    <tbody>\n                        <tr><th>Datum</th><th>Inhalt</th></tr>                        \n                        <tr v-for=\"(item, index) in issues\" :key=\"item.issue_id\">\n\n                            <td>{{ formatDate(item.datum) }}</td>\n                            <td>{{ item.inhalt }} <br>\n                                <template v-if=\"item.behebung_data && item.behebung_data.vbs\">\n                                     <span v-for=\"(vb, index) in item.behebung_data.vbs\" > \n                                            <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/contract/' + vb.dienstverhaeltnis_id\" \n                                                class=\"flex-sm-fill text-sm-start\">\n                                                VB {{ formatVertragsbestandteiltyp(vb.vertragsbestandteiltyp_kurzbz) }} ({{ formatDate(vb.von) }} - {{ formatDate(vb.bis) }})\n                                            </router-link>\n                                        </span>\n                                </template>\n                                <template v-if=\"item.behebung_data && item.behebung_data.gbs\">\n                                     <span v-for=\"(gb, index) in item.behebung_data.gbs\" > \n                                            <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/contract/' + gb.dienstverhaeltnis_id\" \n                                                class=\"flex-sm-fill text-sm-start\">\n                                                GB {{ formatGehaltstyp(gb.gehaltstyp_kurzbz) }} ({{ formatDate(gb.von) }} - {{ formatDate(gb.bis) }})\n                                            </router-link>\n                                        </span>\n                                </template>\n                                <template v-if=\"item.behebung_data && item.behebung_data.dvs\">\n                                     <span v-for=\"(dv, index) in item.behebung_data.dvs\" > \n                                            <router-link :to=\"fullPath + route.params.id + '/' + route.params.uid + '/contract/' + dv.dienstverhaeltnis_id\" \n                                                class=\"flex-sm-fill text-sm-start\">\n                                                DV {{ formatVertragsart(dv.vertragsart_kurzbz) }}/{{ dv.unternehmen }} ({{ formatDate(dv.von) }} - {{ formatDate(dv.bis) }})\n                                            </router-link>\n                                        </span>\n                                </template>\n                            </td>\n                            \n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n     </div>\n     \n     `\n   \n\n}\n","export default {\n\n    personAbwesenheiten(uid) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/offTimeByPerson',   \n            params: { uid }   \n        }\n    },\n    personAbwesenheitenByYear(uid, year) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/offTimeByPerson',   \n            params: { uid: uid, year: year }   \n        }\n    },\n    personZeiterfassungByWeek(uid, year, week) {\n        return {\n            method: 'get',\n            url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/PersonAPI/timeRecordingByPerson',   \n            params: { uid, year, week }\n        }\n    },\n\n}  ","import ApiZeit from '../../../api/factory/zeit.js';\n\nexport const OffTimeCard = {\n\tname: 'OffTimeCard',\n     components: {\n        \n     },\n     props: {\n        uid: String,\n     },\n     setup( props ) {\n\n        const { watch, ref, toRefs, onMounted, inject } = Vue;                 \n        const route = VueRouter.useRoute();\n        const $api = inject('$api');  \n        const isFetching = Vue.ref(false);\n        const title = Vue.ref(\"Abwesenheiten\");\n        const currentPersonID = ref(null);\n        const currentDate = Vue.ref(null);        \n        const offTimeList = ref([]);\n        const currentUID = toRefs(props).uid;  \n        \n        const formatDate = (ds) => {\n            if (ds == undefined) return '';\n            var d = new Date(ds);\n            return d.getDate()  + \".\" + (d.getMonth()+1) + \".\" + d.getFullYear()\n        }\n        \n        const fetchOffTimeList = async () => {\n            if (currentUID.value == null) {\n                return;\n            }\n\t\t\ttry {\n              isFetching.value = true;\n              const response = await $api.call(ApiZeit.personAbwesenheiten(currentUID.value));\n              isFetching.value = false;              \n              if (response?.meta?.status == 'success' && response?.data?.length>0) {\n                offTimeList.value = response.data;\n              } else {\n                offTimeList.value = null;\n              }\n\t\t\t} catch (error) {\n\t\t\t  console.log(error);\n\t\t\t} finally {\n                isFetching.value = false;\n            }\t\n\t\t}\n\n        onMounted(() => {\n            fetchOffTimeList();\n        })        \n\n        watch(\n\t\t\tcurrentUID,\n\t\t\t() => {\n\t\t\t\tfetchOffTimeList();\n\t\t\t}\n\t\t)\n\n\n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const fullPath = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/`;\n      \n        return {\n            currentDate, isFetching, formatDate, title, currentPersonID, offTimeList, fullPath, route, \n            \n        }\n     },\n     template: `\n     <div class=\"card\">\n        <div class=\"card-header d-flex justify-content-between align-items-baseline\">\n            <h5 class=\"mb-0\">{{ title }}</h5>\n                <span class=\"text-muted\">{{ formatDate(currentDate) }}</span>\n        </div>\n        <div class=\"card-body\" style=\"text-align:left\">\n            <div v-if=\"isFetching\" class=\"spinner-border\" role=\"status\">\n                <span class=\"visually-hidden\">Loading...</span>\n            </div>     \n            <div v-if=\"!isFetching && offTimeList!=null\">\n                <table class=\"table table-bordered\">\n                    <tbody>\n                        <tr><th>Typ</th><th>Zeitraum</th></tr>                        \n                        <tr v-for=\"(item, index) in offTimeList\" :key=\"item.zeitsperre_id\">\n                            <td>{{ item.zeitsperretyp }}</td>\n                            <td>{{ formatDate(item.vondatum) }} - {{ formatDate(item.bisdatum) }}</td>                            \n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n     </div>\n     \n     `\n   \n\n}","export default {\n\n  allByPerson(uid, all) {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/getPersonFristenListe/' + uid \n            + '?all=' + all,\n    }\n  },\n\n  all() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/getFristenListe',      \n    }\n  },\n\n  updateFristenListe() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/updateFristenListe',\n    }\n  },\n\n  updateFristStatus(frist_id, status_kurzbz) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/updateFristStatus',\n      params: {frist_id, status_kurzbz}\n    }\n  },\n\n  batchUpdateFristStatus(fristen, status_kurzbz) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/batchUpdateFristStatus',\n      params: {fristen, status_kurzbz}\n    }\n  },\n  \n  upsertFrist(frist) {\n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/upsertFrist',\n      params: frist\n    }\n  },\n\n  deleteFrist(frist_id) {    \n    return {\n      method: 'post',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/deleteFrist',\n      params: {frist_id}\n    }\n  }, \n\n  getFristenStatus() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/getFristenStatus',\n    }\n  },\n\n  getFristenEreignisse() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/getFristenEreignisse',\n    }\n  },\n\n  getFristenEreignisseManuell() {\n    return {\n      method: 'get',\n      url: '/extensions/FHC-Core-Personalverwaltung/api/frontend/v1/FristenAPI/getFristenEreignisse?manuell=1',\n    }\n  },\n\n};\n","import { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiDeadline from '../../../api/factory/deadline.js';\n\n\nexport const DeadlineIssueDialog = {\n\tname: 'DeadlineIssueDialog',\n    components: {\n        Modal,\n        ModalDialog,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n    },  \n    setup(props) {\n\n        const { watch, ref, toRefs, onMounted, defineExpose, toRaw, reactive, inject } = Vue; \n        const { t } = usePhrasen();\n        const frist = ref()\n        const fristStatus = ref([])\n        const fristEreignisse = ref([])\n        const isFetching = ref(false)\n        const $api = inject('$api')\n        const fhcAlert = inject('$fhcAlert');\n\n        // Modal \n        let modalRef = ref()\n        let _resolve\n        let _reject\n\n\n        \n\n        const showModal = (f) => {\n            frist.value = f;\n            // reset form state\n            frmState.datumBlurred = false;\n            frmState.bezeichnungBlurred = false;\n            // call bootstrap show function\n            modalRef.value.show()\n\n            return new Promise((resolve, reject) => {\n                _resolve = resolve\n                _reject = reject\n            })\n        }        \n\n        const hideModal = () => {\n            modalRef.value.hide();\n        }\n\n        const fetchFristStatus = async () => {\n            try {\n                isFetching.value = true;\t\n                $api.call(\n\t\t\t        ApiDeadline.getFristenStatus())\n\t\t\t        .then(result => {\n                        fristStatus.value = result.meta.status == \"success\" ? result.data : [];\t\t\t        \t\n\t\t\t        })\n\t\t\t        .catch(fhcAlert.handleSystemError);  \t  \n                isFetching.value = false;                        \n            } catch (error) {\n                console.log(error);\n                isFetching.value = false;           \n            }\t\n          }\n    \n        const fetchFristEreignisse = async () => {\n            try {\n                isFetching.value = true;\n                $api.call(\n\t\t\t        ApiDeadline.getFristenEreignisseManuell())\n\t\t\t        .then(result => {\n                        fristEreignisse.value = result.meta.status == \"success\" ? result.data : [];\n\t\t\t        })\n\t\t\t        .catch(fhcAlert.handleSystemError);  \t  \n                isFetching.value = false;                        \n            } catch (error) {\n                console.log(error);\n                isFetching.value = false;           \n            }\t\n        }\n\n        onMounted(async () => {\n            fetchFristStatus()\n            fetchFristEreignisse()            \n        })\n\n        // -------------\n        // form handling\n        // -------------\n\n        const fristDataFrm = Vue.ref();\n\n        const frmState = Vue.reactive({ ereignisBlurred: false, bezeichnungBlurred: false, datumBlurred: false, wasValidated: false });\n\n        const validEreignis = (n) => {\n            return !!n && n != \"\";\n        }\n\n        const validBezeichnung = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validDatum = (n) => {\n            return !!n && n.trim() != \"\";\n        }\n\n        const validate = () => {\n            frmState.ereignisBlurred = true;\n            frmState.datumBlurred = true;\n            frmState.bezeichnungBlurred = true;\n            if (validEreignis(frist.value?.ereignis_kurzbz) && validDatum(frist.value?.datum) && validBezeichnung(frist.value?.bezeichnung)) {\n                return true;\n            }\n            return false;\n        }        \n\n        const hasChanged = Vue.computed(() => {\n            return Object.keys(currentValue.value).some(field => currentValue.value[field] !== preservedValue.value[field])\n        });\n\n        const okHandler = async () => {\n            if (!validate()) {\n\n                console.log(\"form invalid\");\n\n            } else {\n\n                // submit\n                try {\n                    _resolve({type: 'OK', payload: frist.value })\n                } catch (error) {\n                    console.log(error)              \n                } finally {\n                    isFetching.value = false\n                    hideModal()\n                }\n                \n                \n            }\n        }\n\n        return { modalRef, fristDataFrm, frist, t, showModal, hideModal, fristStatus, fristEreignisse, \n            validEreignis, validDatum, validBezeichnung, frmState, okHandler }\n    },\n    template: `\n    <Modal :title=\"t('fristenmanagement','termin_frist')\" ref=\"modalRef\">\n        <template #body>\n            <form class=\"row g-3\" v-if=\"frist != null\"  ref=\"fristDataFrm\" >\n                         \n                <div class=\"col-md-6\">\n                    <label for=\"ereignis_kurzbz\" class=\"form-label required\">Ereignis</label>\n                    <select  id=\"ereignis_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \" \n                        @blur=\"frmState.ereignisBlurred = true\"   v-model=\"frist.ereignis_kurzbz\" \n                        :class=\"{'is-invalid': !validEreignis(frist.ereignis_kurzbz) && frmState.ereignisBlurred}\">\n                        <option v-for=\"(item, index) in fristEreignisse\" :value=\"item.ereignis_kurzbz\" >\n                            {{ item.bezeichnung }}\n                        </option>\n                    </select>\n\n                </div>    \n\n\n                <div class=\"col-md-6\">\n                    <label for=\"bezeichnung\" class=\"form-label required\">{{ t('fristenmanagement','todo') }}</label>\n                    <input type=\"text\" class=\"form-control form-control-sm\" @blur=\"frmState.bezeichnungBlurred = true\"  \n                        id=\"bezeichnung\" \n                        v-model=\"frist.bezeichnung\" \n                        maxlength=\"255\"\n                        :class=\"{ 'is-invalid': !validBezeichnung(frist.bezeichnung) && frmState.bezeichnungBlurred}\"\n                        >\n                </div>\n\n                <div class=\"col-md-6\">\n                    <label for=\"datum\" class=\"required form-label\">{{ t('fristenmanagement','frist') }}</label>\n                    <datepicker id=\"datum\" \n                        :teleport=\"true\" \n                        @blur=\"frmState.datumBlurred = true\" \n                        :input-class-name=\"(!validDatum(frist.datum) && frmState.datumBlurred) ? 'dp-invalid-input' : ''\"  \n                        v-model=\"frist.datum\"\n                        v-bind:enable-time-picker=\"false\"\n                        text-input \n                        locale=\"de\"\n                        format=\"dd.MM.yyyy\"\n                        auto-apply \n                        model-type=\"yyyy-MM-dd\"></datepicker>\n                </div>\n\n                <div class=\"col-md-6\">\n                    <label for=\"status_kurzbz\" class=\"form-label\">Status</label>\n                    <select  id=\"status_kurzbz\" class=\"form-select form-select-sm\" aria-label=\".form-select-sm \"  v-model=\"frist.status_kurzbz\" >\n                        <option v-for=\"(item, index) in fristStatus\" :value=\"item.status_kurzbz\" >\n                            {{ item.bezeichnung }}\n                        </option>\n                    </select>\n                    \n                </div>\n                                                \n                <div class=\"col-8\" v-if=\"frist.frist_id != 0\">\n                    <div class=\"modificationdate\">{{ frist.insertamum }}/{{ frist.insertvon }}, {{ frist.updateamum }}/{{ frist.updatevon }}</div>\n                </div>\n            </form>        \n\n        </template>\n        <template #footer>\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"okHandler()\" >\n                {{ t('ui','speichern') }}\n            </button>\n        </template>\n    </Modal>\n    `\n}","\nimport { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport { DeadlineIssueDialog } from './DeadlineIssueDialog.js';\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport { CoreFilterCmpt } from \"../../../../../../js/components/filter/Filter.js\";\nimport ApiDeadline from '../../../api/factory/deadline.js';\n\n\nexport const DeadlineIssueTable = {    \n  name: 'DeadlineIssueTable',\n  components: {\n    ModalDialog,\n    \"p-skeleton\": primevue.skeleton,\n    DeadlineIssueDialog,\n    CoreFilterCmpt,\n  },\n  props: {\n    uid: String,\n  },\n  setup(props, { emit }){\n\n      const { watch, ref, toRefs, onMounted, inject } = Vue; \n      const { t } = usePhrasen();\n      const isFetching = ref(false);\n      const isFristFetching = ref(false);\n      const currentUID = toRefs(props).uid\n      const currentFrist = ref(null); \n      const fristen = ref([]);\n      const fristStatus = ref([])\n      const fristEreignisse = ref([])\n      const dialogRef = ref();\n      const confirmDeleteRef = ref();\n      const modalContainer = ref();\n      const $fhcAlert = inject('$fhcAlert');\n      const $api = Vue.inject('$api');\n\n      const redirect = (issue_id) => {\n        console.log('issue_id', person_id);\n        emit('issueSelected', person_id);\n        // window.location.href = `${protocol_host}/index.ci.php/extensions/FHC-Core-Personalverwaltung/Employees/summary?person_id=${person_id}`;\n      }   \n      \n      const fetchList = async () => {\n        if (currentUID.value == null) {\n          return;\n        }\n        try {\n          if( fristenTable.value?.tabulator !== null ) {\n            fristenTable.value.tabulator.dataLoader.alertLoader();\n          }\n          isFristFetching.value = true;\n          $api.call(ApiDeadline.allByPerson(currentUID.value, deadline_filter_all.value)).then(result => {\n            fristen.value = result.meta.status == \"success\" ? result.data : [];\t\n          }).catch($fhcAlert.handleSystemError);\n          \t\t\t  \n        } catch (error) {\n          console.log(error);         \n        } finally {\n            isFristFetching.value = false;   \n            if( fristenTable.value?.tabulator !== null ) {\n                fristenTable.value.tabulator.dataLoader.clearAlert();\n            }\n        }\t\t\n      }\n\n      const fetchFristStatus = async () => {\n        try {\n            isFetching.value = true;           \n            $api.call(ApiDeadline.getFristenStatus()).then(result => {\n              fristStatus.value = result.meta.status == \"success\" ? result.data : [];\t\t\t\n            }).catch($fhcAlert.handleSystemError);\n              \n        } catch (error) {\n            console.log(error);               \n        }\tfinally {\n            isFetching.value = false;\n        }\n      }\n\n      \n      const fristStatusList = Vue.computed(() => {\n        let result = fristStatus.value.reduce((res, x) => {\n          res[x.status_kurzbz] = x.bezeichnung;\n          return res;\n        }, {});\n        console.log(result);\n        return result\n      })\n\n      const fetchFristEreignisse = async () => {\n        try {\n            isFetching.value = true;\n            const res = await $api.call(ApiDeadline.getFristenEreignisse()); \n            fristEreignisse.value = res.data;\t\t\t  \n            isFetching.value = false;                        \n        } catch (error) {\n            console.log(error);\n            isFetching.value = false;           \n        }\t\n      }\n\n      const createFristShape = (mitarbeiter_uid) => {\n        return {\n            frist_id: 0,\n            ereignis_kurzbz: \"manuell\",\n            bezeichnung: \"\",\n            datum: null,\n            status_kurzbz: \"neu\",\n            mitarbeiter_uid: mitarbeiter_uid,\n        }\n      }\n\n      const getFristEreignisBezeichnung = (ereignis_kurzbz) => {\n        if (ereignis_kurzbz == null) return '';\n        return fristEreignisse.value.find((item) => item.ereignis_kurzbz == ereignis_kurzbz).bezeichnung\n      }\n\n      const updateDeadlines = async () => {\n        try {\n          isFetching.value = true;\n          //const res = await fhcApi.factory.Deadline.updateFristenListe();\n          const res = await $api.call(ApiDeadline.updateFristenListe()); \n          isFetching.value = false;              \n          fetchList();\t\t  \n        } catch (error) {\n          console.log(error);\n          isFetching.value = false;           \n        }\t\t\n      }\n\n      const showDeleteModal = async (id) => {\n        currentFrist.value = fristen.value.find((frist) => frist.frist_id == id);\n        if (await $fhcAlert.confirm({\n                    message: t('fristenmanagement','frist') + ' ' + getFristEreignisBezeichnung(currentFrist?.ereignis_kurzbz) + ' ' + formatDate(currentFrist?.datum) + ' ' + t('person','wirklichLoeschen'),\n                    acceptLabel: 'Löschen',\n\t\t\t\t    acceptClass: 'p-button-danger'\n                }) === false) {\n          return;\n        }    \n        \n        try {\n            //const res = await fhcApi.factory.Deadline.deleteFrist(id);   \n            const res = await $api.call(ApiDeadline.deleteFrist(id));                  \n            if (res.meta.status == \"success\") {\n                fristen.value = fristen.value.filter((frist) => frist.frist_id != id);\n                showDeletedToast();\n            }\n        } catch (error) {\n            console.log(error)              \n        } finally {\n              isFetching.value = false\n        }                  \n        \n    }\n\n      watch(\n        currentUID,\n        () => {\n          fetchList();\n        }\n      );\n  \n      (async () => {\n        await fetchFristStatus();\n        await fetchFristEreignisse();\n      })();\n\n      const onPersonSelect = (uid, person_id) => {\n        let protocol_host = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\t\n        window.location.href = `${protocol_host}/extensions/FHC-Core-Personalverwaltung/Employees/${person_id}/${uid}/summary`;\n      }\n\n      const statusChanged = async (frist_id) => {\n        console.log(frist_id);\n        const frist = fristen.value.filter((frist) => frist.frist_id == frist_id)[0];\n        try  {\n          isFetching.value = true\n          const res = await $api.call(ApiDeadline.updateFristStatus(frist_id, frist.status_kurzbz));   \n          //const res = await fhcApi.factory.Deadline.updateFristStatus(frist_id, frist.status_kurzbz);    \n          showToast();     \n        } catch (error) {\n            console.log(error);                \n        } finally {\n            isFetching.value = false;\n        }     \n\n      }\n\n      const formatDate = (d) => {\n        if (d != null && d != '') {\n        return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n        } else {\n            return ''\n        }\n      }\n\n      const addDeadline = async () => {        \n        const res = await dialogRef.value.showModal(createFristShape(currentUID.value));\n        \n        if (res.type == 'OK') {   \n          let fristPayload = res.payload;\n          console.log('addDeadline', fristPayload)\n          try  {\n            isFetching.value = true\n            const res = await $api.call(ApiDeadline.upsertFrist(fristPayload));    \n            showCreateToast();     \n            fetchList();\n          } catch (error) {\n              console.log(error);                \n          } finally {\n              isFetching.value = false;\n          }    \n        }\n        \n      }\n\n      const editDeadline = async (frist) => {   \n        let fristClone = {...frist} \n        const res = await dialogRef.value.showModal(fristClone);\n        \n        if (res.type == 'OK') {   \n          let fristPayload = res.payload;\n          delete fristPayload.status_bezeichnung\n          delete fristPayload.ma_name\n          delete fristPayload.ereignis_bezeichnung \n          delete fristPayload.person_id\n          delete fristPayload.manuell\n          console.log('editDeadline', fristPayload)\n          try  {\n            isFetching.value = true\n            const res = await $api.call(ApiDeadline.upsertFrist(fristPayload));    \n            showCreateToast();     \n            fetchList();\n          } catch (error) {\n              console.log(error);                \n          } finally {\n              isFetching.value = false;\n          }    \n        }\n        \n      }\n\n      // ------------------------\n      // Tabulator\n      // ------------------------\n\n      const fristenTable = ref(null);\n      const modalTitel = ref('');\n      const current_status_kurzbz = ref('');\n      const deadline_filter_all = ref('false');\n\n      const handleDeadlineFilterAllChanged = () => {\n          fetchList();\n      }\n\n      // Methods\n\n      const onTableCellEdited = async (cell) => {\n        console.log('onTableCellEdited', cell.getValue(), cell.getRow().getIndex())\n        try  {\n          isFetching.value = true\n          // const res = await fhcApi.factory.Deadline.updateFristStatus(cell.getRow().getIndex(), cell.getValue());    \n          const res = await $api.call(ApiDeadline.updateFristStatus(cell.getRow().getIndex(), cell.getValue()));    \n          showToast();     \n        } catch (error) {\n            console.log(error);                \n        } finally {\n            isFetching.value = false;\n        }   \n      }\n\n      const dateFormatter = (cell) => {\n        return cell.getValue()?.replace(/(.*)-(.*)-(.*)/, '$3.$2.$1');\n      }\n\n      const customHeaderFilter = (headerValue, rowValue, rowData, filterParams) => {\n          //headerValue - the value of the header filter element\n          //rowValue - the value of the column in this row\n          //rowData - the data for the row being filtered\n          //filterParams - params object passed to the headerFilterFuncParams property\n        \n          const validDate = function(d){\n              return d instanceof Date && isFinite(d);\n          }\n\n          const date1 = new Date(rowValue);\n          date1.setHours(0,0,0,0);\n          let [day, month, year] = headerValue.split('.')\n          if (year < 1000) return true;  // prevents dates like 17.5.2\n          const date2 = new Date(+year, +month - 1, +day);\n\n          return  !(validDate(date2)) || ((date2 - date1) == 0); //must return a boolean, true if it passes the filter.\n      }\n         \n\n      const addData = () => {\n        //modalTitel.value = 'Datensatz anlegen';\n        //smodalContainer.value.show();\n        addDeadline();\n      }\n/*       const manipulateData = (id) => {\n        Vue.$fhcAlert.alertInfo('ID' + id + ' do some Action');\n      } */\n/*       const deleteData = async (id) => {\n        if (await Vue.$fhcAlert.confirmDelete() === false)\n          return;\n        Vue.$fhcAlert.alertSuccess('ID' + id + ' deleted');\n      }  */     \n\n      const updateStatus = async () => {\n        let selectedData = fristenTable.value.tabulator.getSelectedData();\n        let fristen = selectedData.map((element) => parseInt(element.frist_id))\n        console.log('fristen', fristen) \n        try  {\n          isFetching.value = true\n          // const res = await fhcApi.factory.Deadline.batchUpdateFristStatus(fristen, current_status_kurzbz.value);\n          const res = await $api.call(ApiDeadline.batchUpdateFristStatus(fristen, current_status_kurzbz.value));        \n          fetchList();\n          showToast();     \n        } catch (error) {\n            $fhcAlert.handleSystemError(error)\n        } finally {\n            isFetching.value = false;\n        }     \n\n      }\n\n      const rowFormatter = (row) => {\n        let data = row.getData();\n        let now = new Date(new Date().setHours(0, 0, 0, 0));\n    \n        if(data.status_kurzbz == \"erledigt\"){\n            //row.getElement().childNodes[5].style.backgroundColor = \"#0080004d\"\n            row.getElement().childNodes[4].style.color = \"#198734\"\n        } else if (Date.parse(data.datum) <= now) {\n            row.getElement().childNodes[4].style.color = \"#871919\"\n            row.getElement().childNodes[4].style.fontWeight = \"bold\"\n        }\n      }\n\n\n\n      const columnsDef = [\n        {\n          formatter: 'rowSelection',\n          titleFormatter: 'rowSelection',\n          titleFormatterParams:{\n            rowRange:\"active\" //only toggle the values of the active filtered rows\n          },\n          hozAlign: 'center',\n          headerHozAlign: 'center',\n          headerSort: false,\n          width: 40,\n          maxWidth: 40,\n          minWidth: 40,\n        },\n        { title: 'Ereignis', field: \"ereignis_bezeichnung\", sorter:\"string\",  width: 140, headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n        { title: 'Deadline', field: \"datum\", hozAlign: \"center\",  width: 140, headerFilter:true,formatter: dateFormatter, headerFilterFunc:customHeaderFilter },\n        { title: 'To Do', field: \"bezeichnung\", hozAlign: \"left\", headerFilter:true, headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n        { title: 'Status', field: \"status_kurzbz\", hozAlign: \"center\", width: 140, sorter:\"string\", \n          headerFilter:\"list\",\n          headerFilterParams: {valuesLookup:() => fristStatus.value.map((element) => ({label: element.bezeichnung, value: element.status_kurzbz })) },\n          editor: \"list\", \n          editorParams:{\n            values:fristStatusList\n          },\n          formatter: (cell) => {\n            return fristStatus.value.find((element) => element.status_kurzbz == cell.getValue())?.bezeichnung\n          }\n        },\n        {\n          title: 'Aktionen',\n          field: 'actions',\n          width: 145,\t// Ensures Action-buttons will be always fully displayed\n          minWidth: 105,\t// Ensures Action-buttons will be always fully displayed\n          maxWidth: 145,\t// Ensures Action-buttons will be always fully displayed\n          formatter: (cell, formatterParams, onRendered) => {\n            let container = document.createElement('div');\n            container.className = \"d-flex gap-2\";            \n\n            if (cell.getRow().getData().manuell === 't' ) {\n              let button = document.createElement('button');\n              button.className = 'btn btn-sm btn-outline-secondary';\n              button.innerHTML = '<i class=\"fa fa-edit\"></i>';\n              button.addEventListener('click', (event) =>\n                editDeadline(cell.getRow().getData())\n              );\n              container.append(button);\n\n              button = document.createElement('button');\n              button.className = 'btn btn-sm btn-outline-secondary';\n              button.innerHTML = '<i class=\"fa fa-xmark\"></i>';\n              button.addEventListener('click', () =>\n                //deleteData(cell.getRow().getIndex())\n                showDeleteModal(cell.getRow().getIndex())\n              );\n              container.append(button);\n            }\n\n            return container;\n          },\n          frozen: true\n        }\n      ];   \n\n      // Options\n\n      const tabulatorOptions = Vue.reactive({\n        //return {\n          reactiveData: true,\n          data: fristen.value,\n          \n          // Unique ID\n          index: 'frist_id',\n          \n          // @see: https://tabulator.info/docs/5.2/layout#layout\n          // This is the default option and can be omitted.\n          layout: 'fitColumns',\n          \n          // Column definitions\n          columns: columnsDef,\n\n          rowFormatter: rowFormatter,\n        //}\n      })\n\n      const tabulatorEvents = Vue.computed(() => [\n        {\n            event: 'cellEdited',\n            handler: onTableCellEdited\n        },\n        {\n            event: 'tableBuilt',\n            handler: () => {\n                fetchList();\n\n\t\t\t\tVue.watch(fristen, (newVal, oldVal) => {\n\t\t\t\t  if( fristenTable.value?.tabulator !== null ) {\n\t\t\t\t\t  fristenTable.value.tabulator.setData(fristen.value);\n\t\t\t\t  }\n\t\t\t\t}, {deep: true})\n            }\n        }\n      ]);\n\n\n      // Toast \n      \n      const showToast = () => {\n          $fhcAlert.alertSuccess(t('fristenmanagement','fristStatusGespeichert'));\n      }\n\n      const showCreateToast = () => {\n        $fhcAlert.alertSuccess(t('fristenmanagement','fristGespeichert'));\n      }\n\n      const showDeletedToast = () => {\n        $fhcAlert.alertSuccess(t('fristenmanagement','fristGeloescht'));\n      }\n\n      return { t, currentFrist, getFristEreignisBezeichnung, showDeleteModal, onPersonSelect, onTableCellEdited,\n               fristen, formatDate, updateDeadlines, currentUID, fristStatus, fristEreignisse, statusChanged, addDeadline,\n               dialogRef, isFetching, isFristFetching, updateStatus,\n               fristenTable, tabulatorOptions, tabulatorEvents, addData, editDeadline,  modalContainer, modalTitel,\n               current_status_kurzbz, deadline_filter_all, handleDeadlineFilterAllChanged }\n    },\n  template: `\n    <div id=\"master\" class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-5 pb-2 mb-3\">\n                        \n      <div class=\"flex-fill align-self-center\">\n        <h1 class=\"h2\">Termine & Fristen</h1>       \n      </div>\n    </div>\n    \n\n    <DeadlineIssueDialog ref=\"dialogRef\"></DeadlineIssueDialog>\n\n    <core-filter-cmpt \n\t\t\tref=\"fristenTable\"\n\t\t\ttable-only\n\t\t\t:side-menu=\"false\"\n\t\t\t:tabulator-options=\"tabulatorOptions\"\n                        :tabulator-events=\"tabulatorEvents\"\n\t\t\tnew-btn-label=\"Termin/Frist\"\n\t\t\tnew-btn-show\n\t\t\tnew-btn-class=\"btn-primary\"\n\t\t\t@click:new=\"addDeadline\"\t\t\t\n\t\t\t>\n\t\t\t<template #actions>\t\t\t\t\n\t\t\t \t<div class=\"d-flex gap-2 align-items-baseline\">\t\t\t\t\t\n          <select  id=\"status_kurzbz\" class=\"form-select form-select-sm\"  v-model=\"current_status_kurzbz\" >\n              <option value=\"\">- Status -</option>\n              <option v-for=\"(item, index) in fristStatus\" :value=\"item.status_kurzbz\" >\n                  {{ item.bezeichnung }}\n              </option>\n          </select>\n          <button type=\"button\" class=\"btn  btn-primary btn-primary-sm me-2 text-nowrap\" @click=\"updateStatus\" :class=\"{'disabled':current_status_kurzbz==''}\">\n            <i class=\"fas fa-pencil\"></i>\n            setzen\n          </button>\n\n          <label for=\"deadline_filter_all\" class=\"ms-5\">Filter: </label>\n          <select id=\"deadline_filter_all\" class=\"form-select form-select-sm deadline_filter_all\" \n                v-model=\"deadline_filter_all\" @change=\"handleDeadlineFilterAllChanged\">\n              <option value=\"false\">vergangene erledigte ausblenden</option>\n              <option value=\"true\">alle anzeigen</option>\n          </select>\n\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</core-filter-cmpt>\n\t\t\n  `\n}","\nimport { DvCard } from './DVCard.js';\nimport { LehreCard } from './LehreCard.js';\nimport { IssuesCard } from './IssuesCard.js';\nimport { OffTimeCard } from './OffTimeCard.js';\nimport { DeadlineIssueTable } from './DeadlineIssueTable.js'\n\n\nexport const EmployeeSummary = {\n\tname: 'EmployeeSummary',\n    components: {\n        DvCard,\n        LehreCard,\n        IssuesCard,\n        OffTimeCard,\n        DeadlineIssueTable,\n        \n    },\n    props: {\n        date: Date,\n    },\n    setup() {\n\n\n        const route = VueRouter.useRoute();\n        const { watch, ref, onMounted } = Vue; \n        const currentPersonID = ref(null);\n        const currentUID = ref(null);\n        const isFetching = ref(false);\n\n        onMounted(() => {\n            currentPersonID.value = parseInt(route.params.id);\n            currentUID.value = route.params.uid;\n        })\n\n        watch(\n\t\t\t() => route.params.id,\n\t\t\tnewId => {\n\t\t\t\tcurrentPersonID.value = parseInt(newId);\n\t\t\t}\n\t\t)\n\n        watch(\n\t\t\t() => route.params.uid,\n\t\t\tnewId => {\n\t\t\t\tcurrentUID.value = newId;\n\t\t\t}\n\t\t)\n\n       /* watch(\n\t\t\t() => route.query.d,\n\t\t\tnewDate => {\n\t\t\t\tdate = newDate;\n\t\t\t}\n\t\t)*/\n\n        return {currentPersonID, currentUID, isFetching}\n    },\n    template: `\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n      <div class=\"container-fluid px-1\">\n\n            <div class=\"row\">                \n\n                <div class=\"row pt-md-4\">\n\n                    <div class=\"col\">\n                        \n                        <dv-card :uid=\"currentUID\" :date=\"date\" ></dv-card>                        \n            \n                    </div>          \n\n                    <div class=\"col\">\n                        \n                        <!--covid-card :personID=\"currentPersonID\" :date=\"date\"></covid-card-->\n\n                        <issues-card></issues-card>\n                       \n                    </div>\n\n                    <div class=\"col\">\n                        \n                        <lehre-card :uid=\"currentUID\" :date=\"date\"></lehre-card>\n\n                        <br/>\n\n                        <off-time-card :uid=\"currentUID\"></off-time-card> \n\n                    </div>\n\n                    <deadline-issue-table :uid=\"currentUID\"></deadline-issue-table>\n\n                </div>            \n\n            </div>                      \n        </div>\n\n    </div>\n\n\n    `\n}","import { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport {OrgChooser} from \"../../../components/organisation/OrgChooser.js\";\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiZeit from '../../../api/factory/zeit.js';\n\nexport const OffTime = {\n\tname: 'OffTime',\n    components: {\n        Modal,\n        ModalDialog,\n        OrgChooser,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        personID: { type: [Number, null], required: true },\n        personUID: { type: [String, null], required: true },\n    },\n    emits: ['updateHeader'],\n    setup( props, { emit } ) {\n\n        const readonly = Vue.ref(false);\n\n        const { t } = usePhrasen();\n        const $api = Vue.inject('$api');\n\n        const { personID: currentPersonID , personUID: currentPersonUID  } = Vue.toRefs(props);\n\n        const dialogRef = Vue.ref();\n\n        const isFetching = Vue.ref(false);\n\n        const unternehmen = Vue.ref();\n        const offTimeList = Vue.ref([]);\n        const jobfunctionDefList = Vue.ref([]);\n        const orgUnitList = Vue.ref([{value: '', label: '-'}]);\n\n        let currentDate = new Date();\n        const currentYear = Vue.ref(currentDate.getFullYear());\n\n\n        const offTimeTable = Vue.ref(null); // reference to your table element\n        const tabulator = Vue.ref(null); // variable to hold your table\n        const route = VueRouter.useRoute();\n        const currentValue = Vue.ref();\n\n        Vue.watch([currentPersonID, currentPersonUID], ([id,uid]) => {\n            fetchOffTimeList();\n        });\n\n        Vue.watch(currentYear, (newVal, oldVal) => {            \n            fetchOffTimeList();             \n        });     \n        \n        const dateFormatter = (cell) => {\n            return cell.getValue()?.replace(/(.*)-(.*)-(.*)/, '$3.$2.$1')\n        }\n\n        const dateFromHourFormatter = (cell) => {\n            return dateFormatter(cell) + \n                (cell.getRow().getData().vonstunde != null ? ' (' + cell.getRow().getData().vonstunde + ')' : '');\n        }\n\n        const dateToHourFormatter = (cell) => {\n            return dateFormatter(cell) + \n                (cell.getRow().getData().bisstunde != null ? ' (' + cell.getRow().getData().bisstunde + ')' : '');\n        }\n\n        const fetchOffTimeList = async () => {\n            if (currentPersonUID.value == null) {\n                return;\n            }\n            try {\n              isFetching.value = true;\n              const response = await $api.call(ApiZeit.personAbwesenheitenByYear(currentPersonUID.value, currentYear.value));\n              isFetching.value = false;              \n              console.log('abwesenheiten', response.data);\t  \n              if (response?.data?.length>0) {\n                offTimeList.value = response.data;\n              } else {\n                offTimeList.value = [];\n              }\n            } catch (error) {\n              console.log(error);\n            } finally {\n                isFetching.value = false;\n            }\t\n        }\n\n        Vue.onMounted(async () => {\n            console.log('Off time view mounted', props.personID);\n\n            await fetchOffTimeList();\n\n            const dateFormatter = (cell) => {\n                return cell.getValue()?.replace(/(.*)-(.*)-(.*)/, '$3.$2.$1');\n            }\n\n            const columnsDef = [\n                { title: t('ui','bezeichnung'), field: \"bezeichnung\", sorter:\"string\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('person','grund'), field: \"zeitsperretyp\", hozAlign: \"left\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('ui','from'), field: \"vondatum\", hozAlign: \"center\", formatter: dateFromHourFormatter, width: 140, sorter:\"string\", headerFilter:true, headerFilterFunc:customHeaderFilter },\n                { title: t('global','bis'), field: \"bisdatum\", hozAlign: \"center\", formatter: dateToHourFormatter, width: 140, sorter:\"string\", headerFilter:true, headerFilterFunc:customHeaderFilter },\n                { title: t('person','vertretung'), field: \"vertretung_uid\", hozAlign: \"left\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },\n                { title: t('person','erreichbarkeit'), field: \"erreichbarkeit\", hozAlign: \"left\", headerFilter:\"list\", headerFilterParams: {valuesLookup:true, autocomplete:true, sort:\"asc\"} },                \n              ];            \n\n            let tabulatorOptions = {\n\t\t\t\theight: \"100%\",\n\t\t\t\tlayout: \"fitColumns\",\n\t\t\t\tmovableColumns: true,\n\t\t\t\treactiveData: true,\n                columns: columnsDef,\n                //data: tableData.value,\n                data: offTimeList.value,\n\t\t\t};\n\n            tabulator.value = new Tabulator(\n\t\t\t\toffTimeTable.value,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n            \n            function customHeaderFilter(headerValue, rowValue, rowData, filterParams){\n                //headerValue - the value of the header filter element\n                //rowValue - the value of the column in this row\n                //rowData - the data for the row being filtered\n                //filterParams - params object passed to the headerFilterFuncParams property\n            \n                const validDate = function(d){\n                    return d instanceof Date && isFinite(d);\n                }\n\n                const date1 = new Date(rowValue);\n                date1.setHours(0,0,0,0);\n                let [day, month, year] = headerValue.split('.')\n                if (year < 1000) return true;  // prevents dates like 17.5.2\n                const date2 = new Date(+year, +month - 1, +day);\n                \n                return  !(validDate(date2)) || ((date2 - date1) == 0); //must return a boolean, true if it passes the filter.\n            }\n            \n        })\n\n        Vue.watch(offTimeList, (newVal, oldVal) => {\n            console.log('offTimeList changed');\n            tabulator.value?.setData(offTimeList.value);\n        }, {deep: true})\n\n        const formatDate = (d) => {\n            if (d != null && d != '') {\n\t\t        return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n            } else {\n                return ''\n            }\n        }\n \n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\n        return { \n            offTimeList, orgUnitList, \n            jobfunctionDefList,\n            currentValue,\n            currentYear,            \n            dialogRef,\n            route,            \n            unternehmen,\n            tabulator,\n            offTimeTable,            \n            formatDate, \n            t, \n         }\n    },\n    template: `\n    <div class=\"row\">\n       \n    </div>\n    <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5\"><h5>{{ t('person','abwesenheiten') }}</h5></div>        \n                </div>\n\n                <div class=\"card-body\">\n                    <div class=\"d-grid d-md-flex justify-content-between pt-2 pb-3\">\n                        \n                        <div class=\"mb-3 row\">\n                            <div class=\"col-auto\">\n                                <label for=\"yearFilter\" class=\"col-form-label\">Jahr</label>\n                            </div>\n                            <div class=\"col-auto w-50\">\n                                <input type=\"number\" class=\"form-control\" id=\"yearFilter\" placeholder=\"Jahr\" v-model=\"currentYear\">\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TABULATOR -->\n                    <div ref=\"offTimeTable\" class=\"fhc-tabulator\"></div>\n                \n                </div>\n             </div>\n         </div>\n    </div>\n            \n\n    \n    `\n}","import { Modal } from '../../Modal.js';\nimport { ModalDialog } from '../../ModalDialog.js';\nimport {OrgChooser} from \"../../../components/organisation/OrgChooser.js\";\nimport { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport ApiZeit from '../../../api/factory/zeit.js';\n\nexport const TimeRecording = {\n\tname: 'TimeRecording',\n    components: {\n        Modal,\n        ModalDialog,\n        OrgChooser,\n        \"datepicker\": VueDatePicker\n    },\n    props: {\n        personID: { type: [Number, null], required: true },\n        personUID: { type: [String, null], required: true },\n    },\n    emits: ['updateHeader'],\n    setup( props, { emit } ) {\n\n        const $api = Vue.inject('$api');\n        const readonly = Vue.ref(false);\n\n        const { t } = usePhrasen();\n\n        const { personID: currentPersonID , personUID: currentPersonUID  } = Vue.toRefs(props);\n\n        const dialogRef = Vue.ref();\n\n        const isFetching = Vue.ref(false);\n\n        const unternehmen = Vue.ref();\n        const jobfunctionDefList = Vue.ref([]);\n        const orgUnitList = Vue.ref([{value: '', label: '-'}]);\n\n        const calcWeekNumber = (date) => {\n            let  startDate = new Date(date.getFullYear(), 0, 1);\n            let days = Math.floor((date - startDate) /\n                (24 * 60 * 60 * 1000));\n\n            return Math.ceil(days / 7);\n        }\n        \n\n        let currentDate = new Date();\n        const currentYear = Vue.ref(currentDate.getFullYear());\n        const currentWeek = Vue.ref(calcWeekNumber(currentDate));\n\n        const timeRecordList = Vue.ref([]);\n        const full = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const route = VueRouter.useRoute();\n        const currentValue = Vue.ref();\n\n        Vue.watch([currentPersonID, currentPersonUID], ([id,uid]) => {\n            fetchTimeRecordingList();\n        });    \n\n        Vue.watch([currentYear, currentWeek], ([y,w]) => {\n            fetchTimeRecordingList();\n        });\n        \n        const fetchTimeRecordingList = async () => {\n            if (currentPersonUID.value == null) {\n                return;\n            }\n            try {\n              isFetching.value = true;\n              const response = await $api.call(ApiZeit.personZeiterfassungByWeek(currentPersonUID.value, currentYear.value, currentWeek.value));\n              isFetching.value = false;              \n              if (response.data.length>0) {\n                timeRecordList.value = response.data;\n              } else {\n                timeRecordList.value = [];\n              }\n            } catch (error) {\n              console.log(error);\n            } finally {\n                isFetching.value = false;\n            }\t\n        }\n\n        Vue.onMounted(async () => {\n            console.log('Time Recording view mounted', props.personID);\n\n            await fetchTimeRecordingList();\n\n            const dateFormatter = (cell) => {\n                return cell.getValue()?.replace(/(.*)-(.*)-(.*)/, '$3.$2.$1');\n            }\n        })\n            \n\n        const formatDate = (d) => {\n            if (d != null && d != '') {\n\t\t        return d.substring(8, 10) + \".\" + d.substring(5, 7) + \".\" + d.substring(0, 4);\n            } else {\n                return ''\n            }\n        }\n\n        const extractTime = (d) => {\n            if (d != null) {\n                const temp = new Date(d);\n                return  (temp.getHours() < 9 ? '0' : '') + temp.getHours() + ':' + (temp.getMinutes() < 9 ? '0' : '') + temp.getMinutes();\n            }\n            return '';\n        }\n\n        const options = { year: 'numeric', month: 'long', day: 'numeric' };\n        const formattedDate = new Intl.DateTimeFormat('de-AT', options);\n        const getWeekday = (d) => {\n            if (d != null) {\n                const temp = new Date(d);\n                return  temp.toLocaleDateString('de-AT', { weekday: 'long' });\n            }\n            return '';\n        }\n \n        const ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n        const fullPath = `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/`;\n\n        return { \n            orgUnitList, \n            currentValue,\n            currentYear,    \n            currentWeek,   \n            timeRecordList,     \n            dialogRef,\n            fullPath,\n            route,            \n            unternehmen,\n            formatDate, \n            t, \n            extractTime,\n            getWeekday,\n         }\n    },\n    template: `\n    <div class=\"row\">\n       \n    </div>\n    <div class=\"row pt-md-4\">      \n         <div class=\"col\">\n             <div class=\"card\">\n                <div class=\"card-header\">\n                    <div class=\"h5\"><h5>{{ t('person','zeiterfassung') }}</h5></div>        \n                </div>\n\n                <div class=\"card-body\">\n                    <div class=\"d-grid d-md-flex justify-content-between pt-2 pb-3\">\n                        \n                        <div class=\"mb-3 row\">\n                            <div class=\"col-auto\">\n                                <label for=\"yearFilter\" class=\"col-form-label\">Jahr</label>\n                                <input type=\"number\" class=\"form-control form-control-sm\" id=\"yearFilter\" style=\"max-width: 5rem\" placeholder=\"Jahr\" v-model=\"currentYear\">\n                            </div>\n                            <div class=\"col-auto\">\n                                <label for=\"weekFilter\" class=\"col-form-label\">Woche</label>   \n                                <input type=\"number\" class=\"form-control form-control-sm\" id=\"weekFilter\" style=\"max-width: 5rem\" min=\"1\" max=\"53\" placeholder=\"Woche\" v-model=\"currentWeek\">\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- TODO -->\n                    <table class=\"table\">\n                        <thead>\n                        <tr>\n                            <th scope=\"col\">Tag</th>\n                            <th scope=\"col\">Datum</th>\n                            <th scope=\"col\">Projekt</th>\n                            <th scope=\"col\">AP</th>\n                            <th scope=\"col\">OE</th>\n                            <th scope=\"col\">Aktivität</th>\n                            <th scope=\"col\">Start</th>\n                            <th scope=\"col\">Ende</th>\n                            <th scope=\"col\">Dauer</th>\n                            <th scope=\"col\">Beschreibung</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr v-for=\"record in timeRecordList\"  :key=\"record.dates + record.zeitaufzeichnung_id\">\n                            <td>{{ getWeekday(record.dates) }}</td>\n                            <td>{{ formatDate(record.dates) }}</td>\n                            <td>{{ record.projekt_kurzbz }}</td>\n                            <td></td>\n                            <td>{{ record.oe_kurzbz }} </td>\n                            <td>{{ record.aktivitaet_kurzbz }} </td>\n                            <td>{{ extractTime(record.start) }} </td>\n                            <td>{{ extractTime(record.ende) }} </td>\n                            <td>{{ record.diff ? record.diff : '00:00' }} </td>\n                            <td>{{ record.beschreibung }}</td>\n                        </tr>\n                        </tbody>\n\n\n\n\n                    </table>\n                \n                </div>\n             </div>\n         </div>\n    </div>\n            \n\n    \n    `\n}","import { usePhrasen } from '../../../../../../../public/js/mixins/Phrasen.js';\nimport { OffTime } from './OffTime.js';\nimport { TimeRecording } from './TimeRecording.js';\n\nexport const EmployeeTime = {\n\tname: 'EmployeeTime',\n    components: {\n        OffTime,\n        TimeRecording,\n    },\n    props: {\n    },\n    setup() {\n\n\n        const route = VueRouter.useRoute();\n        const { watch, ref, onMounted } = Vue; \n        const currentPersonID = ref(null);\n        const currentUID = ref(null);\n        const isFetching = ref(false);\n        const items = [\"offtime\", \"timerecording\"];\n        const activeItem = Vue.ref(\"offtime\");\n        const { t } = usePhrasen();\n\n        onMounted(() => {\n            currentPersonID.value = parseInt(route.params.id);\n            currentUID.value = route.params.uid;\n        })\n\n        watch(\n\t\t\t() => route.params.id,\n\t\t\tnewId => {\n\t\t\t\tcurrentPersonID.value = parseInt(newId);\n\t\t\t}\n\t\t)\n\n        watch(\n\t\t\t() => route.params.uid,\n\t\t\tnewId => {\n\t\t\t\tcurrentUID.value = newId;\n\t\t\t}\n\t\t)\n\n        const isActive = (menuItem) => {\n            return activeItem.value === menuItem;\n       }\n\n       const setActive = (menuItem) => {\n           activeItem.value = menuItem;\n           console.log(\"activeItem: \", menuItem);\n       }\n\n\n        return {currentPersonID, currentUID, isFetching, items, isActive, setActive,t}\n    },\n    template: `\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n        <div class=\"container-fluid px-1\">\n\n            <div class=\"row pt-md-2\">\n            \n                <nav class=\"nav flex-column col-md-2 subsubnav\">\n                    <a\n                        class=\"nav-link\"\n                        :class=\"{ active: isActive(items[0]) }\"\n                        @click.prevent=\"setActive(items[0])\"\n                        href=\"#base\"\n                    >{{ t('person', 'abwesenheiten') }}</a\n                    >\n                    <a\n                        class=\"nav-link\"\n                        :class=\"{ active: isActive(items[1]) }\"\n                        @click.prevent=\"setActive(items[1])\"\n                        href=\"#employee\"\n                        >{{ t('person', 'zeiterfassung') }}</a\n                    >                   \n                </nav>\n                <div class=\"tab-content col-md-10\" id=\"nav-tabContent\">\n\n\n                    <div\n                    class=\"tab-pane\"\n                    :class=\"{ active: isActive(items[0]) }\"\n                    role=\"tabpanel\"\n                    >\n                        <off-time :personID=\"currentPersonID\" :personUID=\"currentUID\" ></off-time>\n                    </div>\n                    <div\n                        class=\"tab-pane\"\n                        :class=\"{ active: isActive(items[1]) }\"\n                        role=\"tabpanel\"\n                    >\n                        <time-recording :personID=\"currentPersonID\" :personUID=\"currentUID\" ></time-recording>\n                    </div>\n\n                </div>\n\n            </div>\n                               \n        </div>\n\n    </div>\n\n    `\n}","\n\nexport const EmployeeLifeCycle = {\n\tname: 'EmployeeLifeCycle',\n    components: {\n \n    },\n    props: {\n    },\n    setup() {\n\n\n        const route = VueRouter.useRoute();\n        const { watch, ref, onMounted } = Vue; \n        const currentPersonID = ref(null);\n        const currentUID = ref(null);\n        const isFetching = ref(false);\n\n        onMounted(() => {\n            currentPersonID.value = parseInt(route.params.id);\n            currentUID.value = route.params.uid;\n        })\n\n        watch(\n\t\t\t() => route.params.id,\n\t\t\tnewId => {\n\t\t\t\tcurrentPersonID.value = parseInt(newId);\n\t\t\t}\n\t\t)\n\n        watch(\n\t\t\t() => route.params.uid,\n\t\t\tnewId => {\n\t\t\t\tcurrentUID.value = newId;\n\t\t\t}\n\t\t)\n\n\n        return {currentPersonID, currentUID, isFetching}\n    },\n    template: `\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n      <div class=\"container-fluid px-1\">\n\n            <div class=\"row\">                \n\n                <div class=\"row pt-md-4\">\n\n                    work in progress...\n                    \n                </div>            \n\n            </div>                      \n        </div>\n\n    </div>\n\n    `\n}","\n\nexport const EmployeeDocument = {\n\tname: 'EmployeeDocument',\n    components: {\n \n    },\n    props: {\n    },\n    setup() {\n\n\n        const route = VueRouter.useRoute();\n        const { watch, ref, onMounted } = Vue; \n        const currentPersonID = ref(null);\n        const currentUID = ref(null);\n        const isFetching = ref(false);\n\n        onMounted(() => {\n            currentPersonID.value = parseInt(route.params.id);\n            currentUID.value = route.params.uid;\n        })\n\n        watch(\n\t\t\t() => route.params.id,\n\t\t\tnewId => {\n\t\t\t\tcurrentPersonID.value = parseInt(newId);\n\t\t\t}\n\t\t)\n\n        watch(\n\t\t\t() => route.params.uid,\n\t\t\tnewId => {\n\t\t\t\tcurrentUID.value = newId;\n\t\t\t}\n\t\t)\n\n\n        return {currentPersonID, currentUID, isFetching}\n    },\n    template: `\n    <div class=\"d-flex justify-content-between align-items-center ms-sm-auto col-lg-12 p-md-2\">\n      <div class=\"container-fluid px-1\">\n\n            <div class=\"row\">                \n\n                <div class=\"row pt-md-4\">\n\n                    work in progress...\n\n                    \n                </div>            \n\n            </div>                      \n        </div>\n\n    </div>\n\n    `\n}","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsearch(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/search';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchAdvanced(searchsettings, config) {\n\t\tconst url = '/api/frontend/v1/searchbar/searchAdvanced';\n\t\treturn this.$fhcApi.post(url, searchsettings, config);\n\t},\n\tsearchdummy(searchsettings) {\n\t\tconst url = 'public/js/apps/api/dummyapi.php/Search';\n\t\treturn this.$fhcApi.post(url, searchsettings);\n\t}\n};\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/loadModule/' + category);\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst payload = {categories, language}\n\t\treturn this.$fhcApi.post('/api/frontend/v1/phrasen/setLanguage', payload);\n\t},\n\tgetLanguage() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getLanguage', {});\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/phrasen/getAllLanguages', {});\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/header',\n\t\t\t{ navigation_page }\n\t\t);\n\t},\n\tgetMenu: function(navigation_page) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/navigation/menu',\n\t\t\t{ navigation_page }\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/saveCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t);\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeCustomFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/applyFilterFields',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t);\n\t},\n\taddFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/addFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/filter/removeFilterField',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t);\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t);\n\t},\n\tgetFilter(wsParams) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/filter/getFilter',\n\t\t\t{\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t);\n\t}\n};\n\n","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tabmeldung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/abmeldung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(stdsem, prestudent_id, grund) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/abmeldung/createAntrag', {\n\t\t\t\tstudiensemester: stdsem,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\tif (!Array.isArray(antrag_id))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t\t{ antrag_id }\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag_id.map(antrag => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/abmeldung/cancelAntrag',\n\t\t\t\t{ antrag_id: antrag.studierendenantrag_id },\n\t\t\t\t{ errorHeader: '#' + antrag.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t},\n\tunterbrechung: {\n\t\tgetDetails(antrag_id, prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/unterbrechung/'\n\t\t\t\t+ (antrag_id !== undefined ? 'getDetailsForAntrag/' + antrag_id : 'getDetailsForNewAntrag/' + prestudent_id);\n\t\t\treturn this.$fhcApi.get(url);\n\t\t},\n\t\tcreate(studiensemester, prestudent_id, grund, datum_wiedereinstieg, attachment) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/createAntrag', {\n\t\t\t\tstudiensemester,\n\t\t\t\tprestudent_id,\n\t\t\t\tgrund,\n\t\t\t\tdatum_wiedereinstieg,\n\t\t\t\tattachment\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(antrag_id) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/unterbrechung/cancelAntrag', {\n\t\t\t\tantrag_id\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t}\n\t},\n\twiederholung: {\n\t\tgetDetails(prestudent_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getDetailsForNewAntrag/' + prestudent_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tgetLvs(antrag_id) {\n\t\t\tconst url = '/api/frontend/v1/studstatus/wiederholung/getLvs/' + antrag_id;\n\t\t\treturn this.$fhcApi.get(url)\n\t\t},\n\t\tcreate(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/createAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tcancel(prestudent_id, studiensemester) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/cancelAntrag', {\n\t\t\t\tprestudent_id,\n\t\t\t\tstudiensemester\n\t\t\t}, {\n\t\t\t\terrorHandling: 'strict'\n\t\t\t});\n\t\t},\n\t\tsaveLvs(forbiddenLvs, mandatoryLvs) {\n\t\t\treturn this.$fhcApi.post('/api/frontend/v1/studstatus/wiederholung/saveLvs', {\n\t\t\t\tforbiddenLvs,\n\t\t\t\tmandatoryLvs\n\t\t\t});\n\t\t}\n\t},\n\tleitung: {\n\t\tgetStgs() {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getActiveStgs');\n\t\t},\n\t\tgetAntraege(url, config, params) {\n\t\t\treturn this.$fhcApi\n\t\t\t\t.get('/api/frontend/v1/studstatus/leitung/getAntraege/' + url)\n\t\t\t\t.then(res => res.data); // Return data for tabulator\n\t\t},\n\t\tgetHistory(antrag_id) {\n\t\t\treturn this.$fhcApi.get('/api/frontend/v1/studstatus/leitung/getHistory/' + antrag_id)\n\t\t},\n\t\tgetPrestudents(query, signal) {\n\t\t\treturn this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/getPrestudents',\n\t\t\t\t{ query },\n\t\t\t\t{\n                                    signal: signal,\n                                    timeout: 30000\n                                }\n\t\t\t);\n\t\t},\n\t\tapprove(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/rejectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\treopen(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/reopenAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/pauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tunpause(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/unpauseAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tobject(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/objectAntrag',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tapproveObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/approveObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t},\n\t\tdenyObjection(antrag) {\n\t\t\tif (!Array.isArray(antrag))\n\t\t\t\treturn this.$fhcApi.post(\n\t\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\t\tantrag\n\t\t\t\t);\n\t\t\treturn Promise.allSettled(antrag.map(a => this.$fhcApi.post(\n\t\t\t\t'/api/frontend/v1/studstatus/leitung/denyObjection',\n\t\t\t\ta,\n\t\t\t\t{ errorHeader: '#' + a.studierendenantrag_id }\n\t\t\t)));\n\t\t}\n\t}\n};","export default {\n\n  getView: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getView/${uid}`,{}\n    );\n  },\n\n  fotoSperre: function (value) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/fotoSperre/${value}`,\n      {}\n    );\n    \n  },\n\n  isStudent: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isStudent`,\n      {\n        uid:uid,\n      }\n    );\n  },\n\n  isMitarbeiter: function (uid) {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/isMitarbeiter/${uid}`,\n      {}\n    );\n  },\n\n  getZustellAdresse: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellAdresse`,{}\n    );\n  },\n\n  getZustellKontakt: function () {\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getZustellKontakt`,{}\n    );\n  },\n\n  getGemeinden: function(nation,zip){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      `/api/frontend/v1/Profil/getGemeinden/${nation}/${zip}`,\n      {}\n    );\n    \n  },\n  getAllNationen:function(){\n    return this.$fhcApi.get(\n      FHC_JS_DATA_STORAGE_OBJECT.app_root + \n      FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n      \"/api/frontend/v1/Profil/getAllNationen\",{}\n    );\n  },\n}","export default {\n    //! API calls for profil update requests\n  \n    getStatus: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getStatus`,{});\n    },\n  \n    getTopic: function () {\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getTopic`,{});\n    },\n  \n    acceptProfilRequest: function ({profil_update_id, uid, status_message, topic, requested_change}) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/acceptProfilRequest\",{profil_update_id, uid, status_message, topic, requested_change});\n    },\n  \n    denyProfilRequest: function ({profil_update_id, uid, topic, status_message}) {\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/denyProfilRequest\",{profil_update_id,uid,topic,status_message});\n    },\n  \n    insertFile: function (dms, replace = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/insertFile/${replace}`,\n        dms);\n\n    },\n    \n    getProfilRequestFiles: function (requestID) {\n      return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/getProfilRequestFiles/${requestID}`,{});\n    },\n  \n    selectProfilRequest: function (uid = null, id = null) {\n\n        return this.$fhcApi.get(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/selectProfilRequest`,\n        {...(uid?{uid}:{}),\n          ...(id?{id}:{})\n        });\n    },\n  \n    insertProfilRequest: function (topic, payload, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        \"/api/frontend/v1/ProfilUpdate/insertProfilRequest\",\n        {\n          topic,\n          payload,\n          ...(fileID ? { fileID } : {}),\n        });\n    },\n  \n    updateProfilRequest: function (topic, payload, ID, fileID = null) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/updateProfilRequest`,\n        {\n          topic,\n          payload,\n          ID,\n          ...(fileID ? { fileID: fileID } : {}),\n        });\n    },\n  \n    deleteProfilRequest: function (requestID) {\n\n      return this.$fhcApi.post(\n        FHC_JS_DATA_STORAGE_OBJECT.app_root +\n        FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n        `/api/frontend/v1/ProfilUpdate/deleteProfilRequest`,\n        {\n          requestID,\n        });\n    },\n  };\n  ","\nexport default {\n\tgetRoomInfo(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getRoomplan',\n\t\t\t{  ort_kurzbz, start_date, end_date}\n\t\t);\n\t},\n\tgetStunden() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/Stunden',\n\t\t\t{}\n\t\t);\n\t},\n\tgetOrtReservierungen(ort_kurzbz, start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/LvPlan/getReservierungen/${ort_kurzbz}`,\n\t\t\t{ start_date, end_date}\n\t\t);\n\t},\n\tgetLvPlanReservierungen(start_date, end_date) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'/api/frontend/v1/LvPlan/getReservierungen',\n\t\t\t{ start_date, end_date }\n\t\t);\n\t},\n\tgetLehreinheitStudiensemester(lehreinheit_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLehreinheitStudiensemester/${lehreinheit_id}`,\n\t\t\t{}\n\t\t);\n\t},\n\tstudiensemesterDateInterval(date) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/studiensemesterDateInterval/${date}`,\n\t\t\t{}\n\t\t);\n\t},\n\tLvPlanEvents(start_date, end_date, lv_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/LvPlan/LvPlanEvents',\n\t\t\t{ start_date, end_date, lv_id }\n\t\t);\n\t},\n\t\n\t\n};","import verband from './stv/verband.js';\nimport students from './stv/students.js';\nimport filter from './stv/filter.js';\nimport konto from './stv/konto.js';\nimport group from './stv/group.js';\nimport kontakt from './stv/kontakt.js';\nimport prestudent from './stv/prestudent.js';\nimport status from './stv/status.js';\nimport details from './stv/details.js';\nimport exam from './stv/exam.js';\nimport abschlusspruefung from './stv/abschlusspruefung.js';\nimport grades from './stv/grades.js';\nimport mobility from './stv/mobility.js';\nimport archiv from './stv/archiv.js';\nimport documents from './stv/documents.js';\nimport exemptions from './stv/exemptions.js';\nimport jointstudies from \"./stv/jointstudies.js\";\nimport courselist from './stv/courselist.js';\n\nexport default {\n\tverband,\n\tstudents,\n\tfilter,\n\tkonto,\n\tgroup,\n\tkontakt,\n\tprestudent,\n\tstatus,\n\tdetails,\n\texam,\n\tabschlusspruefung,\n\tgrades,\n\tmobility,\n\tarchiv,\n\tdocuments,\n\texemptions,\n\tjointstudies,\n\tcourselist,\n\tconfigStudent() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/student');\n\t},\n\tconfigStudents() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/config/students');\n\t}\n};\n","export default {\n\tget() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/verband');\n\t},\n\tfavorites: {\n\t\tget() {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/stv/favorites');\n\t\t},\n\t\tset(favorites) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/stv/favorites/set', {\n\t\t\t\tfavorites\n\t\t\t});\n\t\t}\n\t}\n}","export default {\n\tuid(uid, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/uid/'\n\t\t\t+ encodeURIComponent(uid);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tprestudent(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/prestudent/'\n\t\t\t+ encodeURIComponent(prestudent_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tperson(person_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/students/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t+ '/person/'\n\t\t\t+ encodeURIComponent(person_id);\n\t\treturn this.$fhcApi.getUri(url);\n\t},\n\tverband(relative_path) {\n\t\treturn this.$fhcApi.getUri('api/frontend/v1/stv/students/' + relative_path);\n\t}\n}","export default {\n\tgetStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/filter/getStg');\n\t},\n\tsetStg(studiengang_kz) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/filter/setStg', {\n\t\t\tstudiengang_kz\n\t\t});\n\t}\n};","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/konto/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id),\n\t\t\t\tonly_open: self.filter,\n\t\t\t\tstudiengang_kz: self.studiengang_kz_intern ? self.stg_kz : ''\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tcheckDoubles(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/checkDoubles', data, {\n\t\t\tconfirmErrorHandler: error => true\n\t\t});\n\t},\n\tinsert(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/insert', data);\n\t},\n\tcounter(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/counter', data);\n\t},\n\tedit(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/konto/update', data);\n\t},\n\tdelete(buchungsnr) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/konto/delete', {buchungsnr});\n\t},\n\tgetBuchungstypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/konto/getBuchungstypen');\n\t}\n};","export default {\n\tgetGruppen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/Gruppen/getGruppen/' + params.id);\n\t},\n\tdeleteGroup(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/Gruppen/deleteGruppe/', params);\n\t}\n}","export default {\n\t//------------- address.js-----------\n\tgetAdressen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressen/' + params.id);\n\t},\n\taddNewAddress(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewAddress/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadAddress(address_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadAddress/', {address_id});\n\t},\n\tupdateAddress(form, address_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateAddress/' + address_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteAddress(address_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteAddress/', {address_id});\n\t},\n\tgetPlaces(plz) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getPlaces/' + plz);\n\t},\n\tgetFirmen(searchString) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getFirmen/' + searchString);\n\t},\n\tgetNations() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/address/getNations/');\n\t},\n\tgetAdressentypen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getAdressentypen/');\n\t},\n\n\t//------------- bankverbindung.js-----------\n\tgetBankverbindung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getBankverbindung/' + params.id);\n\t},\n\taddNewBankverbindung(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewBankverbindung/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadBankverbindung(bankverbindung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadBankverbindung/', {bankverbindung_id});\n\t},\n\tupdateBankverbindung(form, bankverbindung_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateBankverbindung/' + bankverbindung_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteBankverbindung(bankverbindung_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteBankverbindung/', {bankverbindung_id});\n\t},\n\n\t//------------- contact.js-----------\n\tgetKontakte (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakte/' + params.id);\n\t},\n\taddNewContact(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/addNewContact/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadContact(kontakt_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/loadContact/', {kontakt_id});\n\t},\n\tupdateContact(form, kontakt_id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/kontakt/updateContact/' + kontakt_id,\n\t\t\tdata\n\t\t);\n\t},\n\tdeleteContact(kontakt_id) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/kontakt/deleteContact/', {kontakt_id});\n\t},\n\tgetStandorteByFirma(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getStandorteByFirma/' + searchString);\n\t},\n\tgetKontakttypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/kontakt/getKontakttypen/');\n\t}\n};","export default {\n\n//------------- Prestudent.js------------------------------------------------------\n\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\treturn \tthis.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/prestudent/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz)\n\t\t\t);\n\t},\n\tupdatePrestudent(form, prestudent_id, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/prestudent/updatePrestudent/' + prestudent_id,\n\t\t\tdata\n\t\t);\n\t},\n\tgetBezeichnungZGV() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungZGV/');\n\t},\n\tgetBezeichnungMZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungMZgv/');\n\t},\n\tgetBezeichnungDZgv() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBezeichnungDZgv/');\n\t},\n\tgetStgs() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStgs/');\n\t},\n\tgetAusbildung() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAusbildung/');\n\t},\n\tgetAufmerksamdurch() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getAufmerksamdurch/');\n\t},\n\tgetBerufstaetigkeit() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBerufstaetigkeit/');\n\t},\n\tgetTypenStg() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getTypenStg/');\n\t},\n\tgetBisstandort() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getBisstandort/');\n\t},\n\n//------------- MultiStatus.js------------------------------------------------------\n\tgetHistoryPrestudent (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getHistoryPrestudent/' + params.id);\n\t},\n\tgetMaxSem(studiengang_kzs) {\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/status/getMaxSemester/', {studiengang_kzs});\n\t},\n\tadvanceStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/advanceStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tconfirmStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/confirmStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tisLastStatus(id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/isLastStatus/' + id);\n\t},\n\tdeleteStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/deleteStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tgetLastBismeldestichtag() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getLastBismeldestichtag/');\n\t},\n\n//------------- History.js------------------------------------------------------\n\tgetHistoryPrestudents (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getHistoryPrestudents/' + params.id);\n\t},\n\n}","export default {\n\n//------------- Modal.js------------------------------------------------------\n\n\tinsertStatus(form, id, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/status/insertStatus/' + id,\n\t\t\tdata\n\t\t);\n\t},\n\tloadStatus({prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/status/loadStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester\n\t\t);\n\t},\n\tupdateStatus(form, {prestudent_id, status_kurzbz, studiensemester_kurzbz, ausbildungssemester}, data) {\n\t\treturn this.$fhcApi.post(\n\t\t\tform,\n\t\t\t'api/frontend/v1/stv/status/updateStatus/'\n\t\t\t+ prestudent_id + '/'\n\t\t\t+ status_kurzbz + '/'\n\t\t\t+ studiensemester_kurzbz + '/'\n\t\t\t+ ausbildungssemester,\n\t\t\tdata\n\t\t);\n\t},\n\tgetStudienplaene(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudienplaene/' + prestudent_id);\n\t},\n\tgetStudiengang(prestudent_id) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/prestudent/getStudiengang/' + prestudent_id);\n\t},\n\tgetStatusgruende() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusgruende/');\n\t},\n\tgetStati() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/lists/getStati/');\n\t},\n\n//------------- Dropdown.js------------------------------------------------------\n\n\taddStudent(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/addStudent/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tchangeStatus(id, data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/status/changeStatus/' + id,\n\t\t\tdata,\n\t\t\t{errorHeader: id}\n\t\t);\n\t},\n\tgetStatusarray() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/status/getStatusarray/');\n\t}\n}","export default {\n\tget(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/student/get/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(url);\n\t},\n\tsave(form, prestudent_id, studiensemester_kurzbz, data) {\n\t\tlet url = 'api/frontend/v1/stv/student/save/'\n\t\t\t+ encodeURIComponent(prestudent_id)\n\t\t\t+ '/'\n\t\t\t+ encodeURIComponent(studiensemester_kurzbz);\n\t\treturn this.$fhcApi.post(form, url, data);\n\t},\n}\n","export default {\n\tgetPruefungen(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getPruefungen/' + params.id);\n\t},\n\tloadPruefung(pruefung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/loadPruefung/' + pruefung_id);\n\t},\n\tgetTypenPruefungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getTypenPruefungen');\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/getAllLehreinheiten/', data)\n\t},\n\tgetLvsByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsByStudent/' + uid)\n\t},\n\tgetLvsandLesByStudent(uid, semester){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsandLesByStudent/' + uid + '/' + semester);\n\t},\n\tgetLvsAndMas(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getLvsAndMas/' + uid)\n\t},\n\tgetMitarbeiterLv(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getMitarbeiterLv/' + id)\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/pruefung/getNoten');\n\t},\n\tcheckZeugnisnoteLv(data){\n\t\treturn \tthis.$fhcApi.post('api/frontend/v1/stv/pruefung/checkZeugnisnoteLv/', data)\n\t},\n\taddPruefung(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/insertPruefung/',  data);\n\t},\n\tupdatePruefung(form, id, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/pruefung/updatePruefung/' + id,  data);\n\t},\n\tdeletePruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/pruefung/deletePruefung/' + id)\n\t}\n}","export default {\n\n\tgetAbschlusspruefung (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getAbschlusspruefung/' + params.id);\n\t},\n\taddNewAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/insertAbschlusspruefung/', data\n\t\t);\n\t},\n\tloadAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/loadAbschlusspruefung/', {id});\n\t},\n\tupdateAbschlusspruefung(form, data) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/abschlusspruefung/updateAbschlusspruefung/', data\n\t\t);\n\t},\n\tdeleteAbschlusspruefung(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/deleteAbschlusspruefung/', {id});\n\t},\n\tgetTypenAbschlusspruefung(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAbschlusspruefung/');\n\t},\n\tgetTypenAntritte(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getTypenAntritte/');\n\t},\n\tgetBeurteilungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getBeurteilungen/');\n\t},\n\tgetAkadGrade(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getAkadGrade/', {studiengang_kz});\n\t},\n\tgetTypStudiengang(studiengang_kz){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/getTypStudiengang/', {studiengang_kz});\n\t},\n\tgetMitarbeiter(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getMitarbeiter/' + searchString);\n\t},\n\tgetPruefer(searchString){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getPruefer/' + searchString);\n\t},\n\tgetNoten(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/abschlusspruefung/getNoten/');\n\t},\n\tcheckForExistingExams(uids) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/abschlusspruefung/checkForExistingExams/', {uids}\n\t\t);\n\t}\n}","export default {\n\tlist() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/grades/list');\n\t},\n\tgetCertificate(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getCertificate/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetTeacherProposal(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getTeacherProposal/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tgetRepeaterGrades(prestudent_id, studiensemester_kurzbz) {\n\t\tlet url = 'api/frontend/v1/stv/grades/getRepeaterGrades/' + encodeURIComponent(prestudent_id);\n\t\tif (!!studiensemester_kurzbz) {\n\t\t\turl = url + '/' + encodeURIComponent(studiensemester_kurzbz);\n\t\t}\n\t\treturn this.$fhcApi.get(url);\n\t},\n\tupdateCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, note, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/updateCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz,\n\t\t\t\tnote\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tdeleteCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/deleteCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyTeacherProposalToCertificate({lehrveranstaltung_id, student_uid, studiensemester_kurzbz, lehrveranstaltung_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyTeacherProposalToCertificate',\n\t\t\t{\n\t\t\t\tlehrveranstaltung_id,\n\t\t\t\tstudent_uid,\n\t\t\t\tstudiensemester_kurzbz\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lehrveranstaltung_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tcopyRepeaterGradeToCertificate({studierendenantrag_lehrveranstaltung_id, lv_bezeichnung}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/stv/grades/copyRepeaterGradeToCertificate',\n\t\t\t{\n\t\t\t\tstudierendenantrag_lehrveranstaltung_id\n\t\t\t},\n\t\t\t{\n\t\t\t\terrorHeader: lv_bezeichnung\n\t\t\t}\n\t\t);\n\t},\n\tgetGradeFromPoints(points, lehrveranstaltung_id, studiensemester_kurzbz, manualErrorHandling) {\n\t\tconst config = manualErrorHandling ? {errorHandling: false} : {};\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/grades/getGradeFromPoints',\n\t\t\t{\n\t\t\t\t\"points\": points,\n\t\t\t\t\"lehrveranstaltung_id\": lehrveranstaltung_id,\n\t\t\t\t\"studiensemester_kurzbz\": studiensemester_kurzbz\n\t\t\t},\n\t\t\tconfig\n\t\t\t);\n\t}\n}","export default {\n\tgetMobilitaeten (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getMobilitaeten/' + params.id);\n\t},\n\tgetProgramsMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getProgramsMobility/');\n\t},\n\taddNewMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/insertMobility/', data);\n\t},\n\tloadMobility(bisio_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/loadMobility/' + bisio_id);\n\t},\n\tupdateMobility(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/mobility/updateMobility/', data);\n\t},\n\tdeleteMobility(bisio_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobility/' + bisio_id);\n\t},\n\tgetLVList(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLVList/' + studiengang_kz);\n\t},\n\tgetAllLehreinheiten(data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/getAllLehreinheiten/', data)\n\t},\n\tgetLvsandLesByStudent(uid){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getLvsandLesByStudent/' + uid);\n\t},\n\tgetPurposes(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getPurposes/' + params.id);\n\t},\n\tgetSupports(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getSupports/' + params.id);\n\t},\n\tgetListPurposes() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListPurposes/');\n\t},\n\tgetListSupports() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/mobility/getListSupports/');\n\t},\n\tdeleteMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilityPurpose/' + params.bisio_id, params);\n\t},\n\taddMobilityPurpose(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilityPurpose/' + params.bisio_id, params);\n\t},\n\tdeleteMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/deleteMobilitySupport/' + params.bisio_id, params);\n\t},\n\taddMobilitySupport(params) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/mobility/addMobilitySupport/' + params.bisio_id, params);\n\t},\n\n}","export default {\n\ttabulatorConfig(config, self) {\n\t\tconfig.ajaxURL = 'api/frontend/v1/stv/archiv/get';\n\t\tconfig.ajaxParams = () => {\n\t\t\tconst params = {\n\t\t\t\tperson_id: self.modelValue.person_id || self.modelValue.map(e => e.person_id)\n\t\t\t};\n\t\t\treturn params;\n\t\t};\n\t\tconfig.ajaxRequestFunc = (url, config, params) => this.$fhcApi.post(url, params, config);\n\t\tconfig.ajaxResponse = (url, params, response) => response.data;\n\n\t\treturn config;\n\t},\n\tgetArchivVorlagen() {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/getArchivVorlagen');\n\t},\n\tarchive(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archive',\n\t\t\tdata\n\t\t);\n\t},\n\tarchiveSigned(data) {\n\t\treturn this.$fhcApi.post(\n\t\t\t'api/frontend/v1/documents/archiveSigned',\n\t\t\tdata\n\t\t);\n\t},\n\tupdate(data) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/update', data);\n\t},\n\tdelete({akte_id, studiengang_kz}) {\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/archiv/delete', {akte_id, studiengang_kz});\n\t}\n};\n","export default {\n\tgetDocumentsUnaccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsUnaccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tgetDocumentsAccepted(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDocumentsAccepted/' + params.id + '/' + params.studiengang_kz);\n\t},\n\tdeleteZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteZuordnung/' + params.prestudent_id + '/' + params.dokument_kurzbz);\n\t},\n\tcreateZuordnung(params){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/createZuordnung/'\n\t\t\t+ params.prestudent_id + '/'\n\t\t\t+ params.dokument_kurzbz);\n\t},\n\tloadAkte(akte_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/loadAkte/' + akte_id);\n\t},\n\tgetDoktypen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/dokumente/getDoktypen/');\n\t},\n\tupdateFile(akte_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/updateAkte/' + akte_id,\n\t\t\tdata);\n\t},\n\tdeleteFile(akte_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/deleteAkte/' + akte_id);\n\t},\n\tuploadFile(prestudent_id, data){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/dokumente/uploadDokument/' + prestudent_id,\n\t\t\tdata);\n\t},\n}","export default {\n\tgetAnrechnungen(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getAnrechnungen/' + params.id);\n\t},\n\tgetLehrveranstaltungen(prestudent_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLehrveranstaltungen/' + prestudent_id);\n\t},\n\tgetBegruendungen(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getBegruendungen/');\n\t},\n\tgetLvsKompatibel(lv_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLvsKompatibel/' + lv_id);\n\t},\n\tgetLektoren(studiengang_kz){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/getLektoren/' + studiengang_kz);\n\t},\n\taddNewAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/insertAnrechnung/', data);\n\t},\n\tloadAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/anrechnungen/loadAnrechnung/' + anrechnung_id);\n\t},\n\teditAnrechnung(form, data){\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/stv/anrechnungen/updateAnrechnung/', data);\n\t},\n\tdeleteAnrechnung(anrechnung_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/anrechnungen/deleteAnrechnung/' + anrechnung_id);\n\t},\n}","export default {\n\tgetStudies(url, config, params) {\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudien/' + params.id);\n\t},\n\tgetTypenMobility(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getTypenMobility/');\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudiensemester/');\n\t},\n\tgetStudyprograms(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStudienprogramme/');\n\t},\n\tgetListPartner(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getPartnerfirmen/');\n\t},\n\tgetStatiPrestudent(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/getStatiPrestudent/');\n\t},\n\tloadStudy(id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/GemeinsameStudien/loadStudie/' + id);\n\t},\n\tinsertStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/insertStudie/', data);\n\t},\n\tupdateStudy(form, data){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/stv/GemeinsameStudien/updateStudie/', data);\n\t},\n\tdeleteStudy(id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/stv/GemeinsameStudien/deleteStudie/' + id);\n\t},\n\n}","export default {\n\tgetCourselist(url, config, params) {\n\t\t//corresponding logic controller Stundenplan.php\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStundenplan/'\n\t\t\t+ params.student_uid + '/'\n\t\t\t+ params.start_date + '/'\n\t\t\t+ params.end_date + '/'\n\t\t\t+ params.group_consecutiveHours + '/'\n\t\t\t+ params.dbStundenplanTable\n\t\t);\n\t},\n\tgetStudiensemester(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/stv/LvTermine/getStudiensemester/');\n\t},\n}","import person from \"./notiz/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetNotizen (url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getNotizen/' + params.id + '/' + params.type);\n\t},\n\tgetUid(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getUid/');\n\t},\n\taddNewNotiz(form, id, formData) {\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/addNewNotiz/' + id,\n\t\t\tformData\n\t\t);\n\t},\n\tloadNotiz(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadNotiz/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tloadDokumente(notiz_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/loadDokumente/', {\n\t\t\tnotiz_id\n\t\t});\n\t},\n\tdeleteNotiz(notiz_id, type_id, id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/notiz/notizPerson/deleteNotiz/', {\n\t\t\tnotiz_id,\n\t\t\ttype_id,\n\t\t\tid\n\t\t});\n\t},\n\tupdateNotiz(form, notiz_id, formData){\n\t\treturn this.$fhcApi.post(form,'api/frontend/v1/notiz/notizPerson/updateNotiz/' + notiz_id,\n\t\t\tformData\n\t\t);\n\t},\n\tgetMitarbeiter(event){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/getMitarbeiter/' + event);\n\t},\n\tisBerechtigt(id, type_id){\n\t\treturn this.$fhcApi.get('api/frontend/v1/notiz/notizPerson/isBerechtigt/');\n\t}\n}","import person from \"./betriebsmittel/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\tgetAllBetriebsmittel(url, config, params){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getAllBetriebsmittel/' + params.type + '/' + params.id);\n\t},\n\taddNewBetriebsmittel(form, person_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/addNewBetriebsmittel/' +\n\t\t\tperson_id, formData\n\t\t);\n\t},\n\tloadBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/loadBetriebsmittel/' + betriebsmittelperson_id);\n\t},\n\tupdateBetriebsmittel(form, betriebsmittelperson_id, formData) {\n\t\treturn this.$fhcApi.post(form, 'api/frontend/v1/betriebsmittel/betriebsmittelP/updateBetriebsmittel/' + betriebsmittelperson_id,\n\t\t\tformData);\n\t},\n\tdeleteBetriebsmittel(betriebsmittelperson_id){\n\t\treturn this.$fhcApi.post('api/frontend/v1/betriebsmittel/betriebsmittelP/deleteBetriebsmittel/' +\tbetriebsmittelperson_id);\n\t},\n\tgetTypenBetriebsmittel(){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/getTypenBetriebsmittel/');\n\t},\n\tloadInventarliste(query){\n\t\treturn this.$fhcApi.get('api/frontend/v1/betriebsmittel/betriebsmittelP/loadInventarliste/' +\tquery);\n\t}\n}","export default {\n\tupdatePersonUnrulyStatus(person_id, unrulyParam) {\n\n\t\ttry {\n\t\t\tconst payload = {person_id, unruly: unrulyParam}\n\t\t\tconst url = '/api/frontend/v1/checkperson/CheckPerson/updatePersonUnrulyStatus';\n\t\t\treturn this.$fhcApi.post(url, payload, null);\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t},\n\tfilterPerson(payload, base = ''){\n\n\t\ttry {\n\t\t\tconst url = base + '/api/frontend/v1/checkperson/CheckPerson/filterPerson';\n\t\t\treturn axios.post(url, payload)\n\t\t} catch (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t}\n}","export default {\n  getContentID(ort_kurbz) {\n\t\treturn this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            \"/api/frontend/v1/Ort/ContentID\",\n\t\t\t{ ort_kurzbz: ort_kurbz }\n\t\t);\n\t},\n\tgetRooms(datum, von, bis, typ, personenanzahl = 0) {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getRooms\",\n\t\t\t{ datum, von, bis, typ, personenanzahl }\n\t\t);\n\t},\n\tgetRoomTypes() {\n\t\treturn this.$fhcApi.get(\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.app_root +\n\t\t\tFHC_JS_DATA_STORAGE_OBJECT.ci_router +\n\t\t\t\"/api/frontend/v1/Ort/getTypes\"\n\t\t);\n\t}\n}","export default {\n    content(content_id, version=null, sprache=null, sichtbar=null) {\n        return this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/content\",\n\t\t\t{ \n\t\t\t\tcontent_id: content_id,\n\t\t\t\t...(version?{version}:{}),\n\t\t\t\t...(sprache?{sprache}:{}),\n\t\t\t\t...(sichtbar?{sichtbar}:{}),\n            }\n        );\n    },\n\t//api function used for the news View that renders the html\n\tgetNews(page = 1, page_size = 10, sprache) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNews\",\n\t\t\t{\n\t\t\t\tpage,\n\t\t\t\tpage_size,\n\t\t\t\tsprache,\n\t\t\t},\n\t\t);\n\t},\n\t//api function used for the widget component\n\tnews(limit) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/news\",\n\t\t\t{\n\t\t\t\tlimit: limit\n\t\t\t}\n\t\t);\n\t},\n\tgetNewsRowCount: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getNewsRowCount\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetNewsExtra: function(){\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Cms/getStudiengangInfoForNews\",\n\t\t\t{}\n\t\t);\n\t}\n  }","export default {\n    getStudentenMail(lehreinheit_id) {\n          return this.$fhcApi.get(\n              FHC_JS_DATA_STORAGE_OBJECT.app_root +\n              FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n              \"/api/frontend/v1/Lehre/lvStudentenMail\",\n              { lehreinheit_id: lehreinheit_id }\n          );\n      },\n\tgetLvInfo(studiensemester_kurzbz, lehrveranstaltung_id) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/LV/${studiensemester_kurzbz}/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentPruefungen(lehrveranstaltung_id){\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/Pruefungen/${lehrveranstaltung_id}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektarbeiten(uid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektarbeiten/${uid}`\n\t\t\t, {}\n\t\t);\n\t},\n\tgetStudentProjektabgaben(detail) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getStudentProjektabgaben`\n\t\t\t, {\n\t\t\t\tprojektarbeit_id: detail.projektarbeit_id,\n\t\t\t\tstudent_uid: detail.student_uid\n\t\t\t}\n\t\t);\n\t},\n\tpostStudentProjektarbeitEndupload(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitEndupload';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tpostStudentProjektarbeitZwischenabgabe(formData) {\n\t\tconst url = '/api/frontend/v1/Lehre/postStudentProjektarbeitZwischenabgabe';\n\t\tconst headers = {Headers: { \"Content-Type\": \"multipart/form-data\" }}\n\t\treturn this.$fhcApi.post(url, formData, headers)\n\t},\n\tgetStudentProjektarbeitAbgabeFile(paabgabe_id, student_uid) {\n\t\tconst url = `/Cis/Abgabetool/getStudentProjektarbeitAbgabeFile?paabgabe_id=${paabgabe_id}&student_uid=${student_uid}`;\n\n\t\twindow.location = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + url\n\t},\n\tgetMitarbeiterProjektarbeiten(uid, all) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Lehre/getMitarbeiterProjektarbeiten?showall=${all}`\n\t\t\t, {}\n\t\t);\n\t},\n\tpostProjektarbeitAbgabe(termin) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id: termin.paabgabe_id,\n\t\t\tpaabgabetyp_kurzbz: termin.bezeichnung.paabgabetyp_kurzbz,\n\t\t\tdatum: termin.datum,\n\t\t\tfixtermin: termin.fixtermin,\n\t\t\tinsertvon: termin.insertvon,\n\t\t\tkurzbz: termin.kurzbz,\n\t\t\tprojektarbeit_id: termin.projektarbeit_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t\t\n\t},\n\tdeleteProjektarbeitAbgabe(paabgabe_id) {\n\t\tconst payload = {\n\t\t\tpaabgabe_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/deleteProjektarbeitAbgabe';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tpostSerientermin(datum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids) {\n\t\tconst payload = {\n\t\t\tdatum, paabgabetyp_kurzbz, bezeichnung, kurzbz, projektarbeit_ids\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/postSerientermin';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t},\n\tfetchDeadlines(person_id) {\n\t\tconst payload = {\n\t\t\tperson_id\n\t\t}\n\t\tconst url = '/api/frontend/v1/Lehre/fetchDeadlines';\n\n\t\treturn this.$fhcApi.post(url, payload, null)\n\t}\n  }","export default {\n    getLvMenu(lvid, studiensemester_kurzbz) {\n        return this.$fhcApi.get(\n            FHC_JS_DATA_STORAGE_OBJECT.app_root +\n            FHC_JS_DATA_STORAGE_OBJECT.ci_router +\n            `/api/frontend/v1/LvMenu/getLvMenu/${lvid}/${studiensemester_kurzbz}`,\n            {}\n        );\n    },\n\n      \n  }","import person from \"./messages/person.js\";\n\nexport default {\n\tperson\n}","export default {\n\t\tgetMessages(url, config, params) {\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessages/' + params.id + '/' + params.type + '/' + params.size + '/' + params.page);\n\t\t},\n\t\tgetVorlagen(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getVorlagen/');\n\t\t},\n\t\tgetMsgVarsLoggedInUser(){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsLoggedInUser/');\n\t\t},\n\t\tgetMessageVarsPerson(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMessageVarsPerson/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetMsgVarsPrestudent(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getMsgVarsPrestudent/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPersonId(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getPersonId/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetUid(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getUid/'+ params.id + '/' + params.type_id);\n\t\t},\n\t\tgetDataVorlage(vorlage_kurzbz){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getDataVorlage/' + vorlage_kurzbz);\n\t\t},\n\t\tgetNameOfDefaultRecipient(params){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getNameOfDefaultRecipient/' + params.id + '/' + params.type_id);\n\t\t},\n\t\tgetPreviewText(params, data){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/getPreviewText/' + params.id + '/' + params.type_id,\n\t\t\t\tdata);\n\t\t},\n\t\tgetReplyData(messageId){\n\t\t\treturn this.$fhcApi.get('api/frontend/v1/messages/messages/getReplyData/' + messageId);\n\t\t},\n\t\tsendMessageFromModalContext(form, id, data) {\n\t\t\treturn this.$fhcApi.post(form,'api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tsendMessage(id, data) {\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/sendMessage/' + id,\n\t\t\t\tdata);\n\t\t},\n\t\tdeleteMessage(messageId){\n\t\t\treturn this.$fhcApi.post('api/frontend/v1/messages/messages/deleteMessage/' + messageId);\n\t\t}\n}","export default {\n\tgetVorlagen() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagen/');\n\t},\n\tgetVorlagenByLoggedInUser() {\n\t\treturn this.$fhcApi.get('api/frontend/v1/vorlagen/vorlagen/getVorlagenByLoggedInUser/');\n\t}\n}","export default {\n\n\tgetStudiensemester: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/components/Cis/Mylv/Studiensemester',\n\t\t\t{}\n\t\t);\n\t},\n\n\tgetAllStudienSemester: function (studiensemester=undefined, studiengang=undefined, semester=undefined, studienplan=undefined) {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/Studium/getStudienAllSemester',\n\t\t\t{studiensemester, studiengang, semester, studienplan}\n\t\t);\n\t},\n\n\tgetStudiengaengeForStudienSemester: function (studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudiengaengeForStudienSemester/${studiensemester}`,\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudienplaeneBySemester: function (studiengang, studiensemester) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getStudienplaeneBySemester`,\n\t\t\t{\n\t\t\t\tstudiengang,\n\t\t\t\tstudiensemester,\n\t\t\t}\n\t\t);\n\t},\n\tgetLvPlanForStudiensemester: function (studiensemester, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/LvPlan/getLvPlanForStudiensemester/${studiensemester}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\tgetLvEvaluierungInfo: function (studiensemester_kurzbz, lvid) {\n\t\treturn this.$fhcApi.get(\n\t\t\t`/api/frontend/v1/Studium/getLvEvaluierungInfo/${studiensemester_kurzbz}/${lvid}`,\n\t\t\t{\n\t\t\t}\n\t\t);\n\t},\n\t\n}","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport search from \"./search.js\";\nimport phrasen from \"./phrasen.js\";\nimport navigation from \"./navigation.js\";\nimport filter from \"./filter.js\";\nimport studstatus from \"./studstatus.js\";\nimport profil from \"./profil.js\";\nimport profilUpdate from \"./profilUpdate.js\";\nimport lvPlan from \"./lvPlan.js\";\nimport bookmark from \"./bookmark.js\";\nimport stv from \"./stv.js\";\nimport notiz from \"./notiz.js\";\nimport betriebsmittel from \"./betriebsmittel.js\";\nimport checkperson from \"./checkperson.js\";\nimport ampeln from \"./ampeln.js\";\nimport ort from \"./ort.js\";\nimport cms from \"./cms.js\";\nimport lehre from \"./lehre.js\";\nimport addons from \"./addons.js\";\nimport messages from \"./messages.js\";\nimport vorlagen from \"./vorlagen.js\";\nimport studiengang from \"./studiengang.js\";\nimport menu from \"./menu.js\";\nimport dashboard from \"./dashboard.js\";\nimport authinfo from \"./authinfo.js\";\nimport studium from \"./studium.js\";\nimport language from \"./language.js\";\n\nexport default {\n    search,\n    phrasen,\n    navigation,\n    dashboard,\n    filter,\n    studstatus,\n    profil,\n    profilUpdate,\n    lvPlan,\n    bookmark,\n    stv,\n    notiz,\n    betriebsmittel,\n    checkperson,\n    ampeln,\n    ort,\n    cms,\n    lehre,\n    addons,\n    messages,\n    vorlagen,\n    addons,\n\tstudiengang,\n\tmenu,\n\tauthinfo,\n\tstudium,\n    language\n};\n","export default {\n\tasync getViewData() {\n\t\tconst url = `/api/frontend/v1/Cis4FhcApi/getViewData`;\n\t\treturn this.$fhcApi.get(url, null, null)\n\t},\n}","export default {\n\n    getBookmarks: function () {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/getBookmarks`\n        ,{}\n      );\n    },\n  \n    delete: function (bookmark_id) {\n      return this.$fhcApi.get(\n        `/api/frontend/v1/Bookmark/delete/${bookmark_id}`\n        ,{}\n      ); \n    },\n\n\tupdate: function ({ bookmark_id, url, title, tag=null}) {\n\t\treturn this.$fhcApi.post(\n\t\t\t`/api/frontend/v1/Bookmark/update/${bookmark_id}`\n\t\t\t, {\n\t\t\t\turl: url,\n\t\t\t\ttitle: title\n\t\t\t}\n\t\t);\n\t},\n\n    insert: function ({url, title, tag}) {\n      return this.$fhcApi.post(\n        `/api/frontend/v1/Bookmark/insert`\n        ,{\n          url: url,\n          title: title,\n          tag: tag\n        }\n      ); \n    },\n}","export default {\n    \n    open: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/open`,{});\n    },\n\n    all: function () {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/all`,{});\n    },\n\n    confirm: function (ampel_id) {\n        return this.$fhcApi.get(\n        `/api/frontend/v1/Ampeln/confirm/${ampel_id}`,{});\n    },\n\n}","export default {\n\tstudiengangInformation: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/Studgang/getStudiengangInfo\",\n\t\t\t{}\n\t\t);\n\t},\n\tgetStudiengangByKz: function (studiengang_kz) {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/organisation/StudiengangEP/getStudiengangByKz\",\n\t\t\t{\n\t\t\t\t\"studiengang_kz\": studiengang_kz\n\t\t\t}\n\t\t);\n\t}\n}","export default {\n\tgetMenu: function () {\n\t\treturn this.$fhcApi.get(\n\t\t\t\"/api/frontend/v1/CisMenu/getMenu\",\n\t\t\t{}\n\t\t);\n\t}\n\n}","\nexport default {\n\tgetAuthUID() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthUID',\n\t\t\t{ }\n\t\t);\n\t},\n\tgetAuthInfo() {\n\t\treturn this.$fhcApi.get(\n\t\t\t'/api/frontend/v1/AuthInfo/getAuthInfo',\n\t\t\t{}\n\t\t);\n\t},\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetAll() {\n\t\treturn this.$fhcApi.get('/api/frontend/v1/language/get');\n\t}\n};","/** TODO(chris):\n * when deleting this file be sure to\n * remove line 1 & 90 from ../plugins/Phrasen.js\n */\nimport FhcApiFactory from '../api/fhcapifactory.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$fhcApi) {\n\t\t\t/* Deprecated Code start */\n\t\t\tif (options?.factory) {\n\t\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\t\tapp.config.globalProperties.$fhcApi.factory.addEndpoints(options.factory);\n\t\t\t}\n\t\t\t/* Deprecated Code end */\n\t\t\treturn;\n\t\t}\n\n\t\tfunction _get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\n\t\tfunction _clean_return_value(response) {\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = {response};\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tconst baseURL = FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\";\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router + \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(response => {\n\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\treturn _clean_return_value(response);\n\n\t\t\t// NOTE(chris): loop through errors\n\t\t\tif (response.data.errors)\n\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t);\n\n\t\t\treturn _clean_return_value(response);\n\t\t}, error => {\n\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\n\t\t\tif (error.config?.errorHandling == 'off'\n\t\t\t\t|| error.config?.errorHandling === false\n\t\t\t\t|| error.config?.errorHandling == 'success')\n\t\t\t\treturn Promise.reject(error);\n\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL, true);\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t\t}\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\terror.response.data.errors = error.response.data.errors.filter(\n\t\t\t\t\terr => (error.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$fhcApi._defaultErrorHandlers[err.type])(err, error.config)\n\t\t\t\t);\n\t\t\t\tif (!error.response.data.errors.length)\n\t\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else if (error.request) {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('error', error.message, error.request.responseURL);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t} else {\n\t\t\t\tapp.config.globalProperties.$fhcAlert.alertError(error.message);\n\t\t\t\treturn Promise.reject({...{handled: true}, ...error});\n\t\t\t}\n\n\t\t\treturn Promise.reject(error);\n\t\t});\n\n\t\tapp.config.globalProperties.$fhcApi = {\n\t\t\tgetUri(url) {\n\t\t\t\tconsole.warn('$fhcApi.getUri is DEPRECATED! Use $api.getUri instead.');\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\tconsole.warn('$fhcApi.get is DEPRECATED! Use $api.get instead.');\n\t\t\t\t[uri, params, config] = _get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\tconsole.warn('$fhcApi.post is DEPRECATED! Use $api.post instead.');\n\t\t\t\t[uri, data, config] = _get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\t_defaultErrorHandlers: {\n\t\t\t\tvalidation(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form) {\n\t\t\t\t\t\tconfig.form.clearValidation();\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.messages);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (Array.isArray(error.messages)) {\n\t\t\t\t\t\terror.messages.forEach($fhcAlert.alertError);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (typeof error.messages == 'object') {\n\t\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t\tObject.values(error.messages).forEach(\n\t\t\t\t\t\t\t\tvalue => $fhcAlert.alertDefault(\n\t\t\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tObject.entries(error.messages).forEach(\n\t\t\t\t\t\t\t\t([key, value]) => $fhcAlert.alertDefault('error', key, value, true)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tgeneral(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tif (config?.form)\n\t\t\t\t\t\tconfig.form.setFeedback(false, error.message);\n\t\t\t\t\telse if (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertError(error.message);\n\t\t\t\t},\n\t\t\t\tphp(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('warn', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t$fhcAlert.alertDefault('info', 'PHP ' + error.severity, message, true);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texception(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tdb(error) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t$fhcAlert.alertSystemError(message);\n\t\t\t\t},\n\t\t\t\tauth(error, config) {\n\t\t\t\t\tconst $fhcAlert = app.config.globalProperties.$fhcAlert;\n\n\t\t\t\t\tvar message = '';\n\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\t\t\t\t\tif (config?.errorHeader)\n\t\t\t\t\t\t$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\tArray.isArray(config.errorHeader) ? app.config.globalProperties.$p.t.apply(null, config.errorHeader) : config.errorHeader,\n\t\t\t\t\t\t\terror.message,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\t$fhcAlert.alertDefault('error', error.message, message);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/* Deprecated Code start */\n\t\tclass FhcApiFactoryWrapper {\n\t\t\tconstructor(factorypart, root) {\n\t\t\t\tif (root === undefined) {\n\t\t\t\t\tthis.$fhcApi = {\n\t\t\t\t\t\tgetUri(url) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.getUri(url);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget(form, uri, params, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.get(form, uri, params, config);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpost(form, uri, data, config) {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.post(form, uri, data, config);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tObject.defineProperty(this.$fhcApi, 'factory', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tconsole.warn('$fhcApi.factory is DEPRECATED!');\n\t\t\t\t\t\t\treturn app.config.globalProperties.$fhcApi.factory;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tapp.config.globalProperties.$fhcApi.factory = this;\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(this, '$fhcApi', {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\treturn (root || this).$fhcApi;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.addEndpoints(factorypart, true)\n\t\t\t}\n\n\t\t\taddEndpoints(factorypart, noWarn) {\n\t\t\t\tObject.keys(factorypart).forEach(key => {\n\t\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\t\tget() {\n\t\t\t\t\t\t\tif (typeof factorypart[key] == 'function')\n\t\t\t\t\t\t\t\treturn factorypart[key].bind(this);\n\t\t\t\t\t\t\treturn new FhcApiFactoryWrapper(factorypart[key], this.$fhcApi.factory);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tif (!noWarn) console.warn('$fhcApi.factory.addEndpoints() is DEPRECATED!');\n\t\t\t}\n\t\t}\n\n\t\tconst factory = new FhcApiFactoryWrapper(FhcApiFactory);\n\t\tif (options?.factory) {\n\t\t\tconsole.warn(\"$fhcApi is DEPRECATED!\");\n\t\t\tfactory.addEndpoints(options.factory);\n\t\t}\n\n\t\tapp.config.globalProperties.$fhcApi.factory = factory;\n\t\t/* Deprecated Code end */\n\t\t\n\t\tapp.provide('$fhcApi', app.config.globalProperties.$fhcApi);\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n * \n * @usage:\n * Preperations:\n * Be sure to have PrimeVue loaded  with the toast and confirmdialog\n * components as primevue variable\n * Install:\n * Import this Plugin and install it with the app.use() function.\n * Use:\n * In your component you can call now the global property $fhcAlert\n * which has the following functions:\n * \n * alertSuccess\n * ------------\n * Displays a success message\n * @param string\tmessage\n * @return void\n * \n * alertInfo\n * ---------\n * Displays an info message\n * @param string\tmessage\n * @return void\n * \n * alertWarning\n * ------------\n * Displays a warning\n * @param string\tmessage\n * @return void\n * \n * alertError\n * ----------\n * Displays an error\n * @param string\tmessage\n * @return void\n * \n * alertSystemError\n * ----------------\n * Displays an alert with the error details and a button to mail\n * the error to the Support Team\n * @param string\tmessage\n * @return void\n * \n * confirmDelete\n * -------------\n * Displays a confirmation dialog and returns a Promise which resolves\n * with true or false depending und the pressed button.\n * @return Promise\n * \n * alertDefault\n * ------------\n * Displays an alert\n * @param string\tseverity\t\tcan be 'success', 'info', 'warning', 'error'\n * @param string\ttitle\n * @param string\tmessage\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * alertMultiple\n * -------------\n * Displays multiple alerts\n * @param array\t\tmessageArray\n * @param string\tseverity\t\t(optional) defaults to 'info'\n * @param string\ttitle\t\t\t(optional) defaults to 'Info'\n * @param boolean\tsticky\t\t\t(optional) defaults to false\n * @return void\n * \n * handleSystemError\n * -----------------\n * Automatiticly determine how to display an system error and display it.\n * This would be used in a catch block of an ajax call.\n * @param mixed\t\terror\n * @return void\n * \n * handleSystemMessage\n * -------------------\n * Automatiticly determine how to display a message and display it.\n * @param mixed\t\tmessage\n * @return void\n */\nimport PvConfig from \"../../../index.ci.php/public/js/components/primevue/config/config.esm.min.js\";\nimport PvToast from \"../../../index.ci.php/public/js/components/primevue/toast/toast.esm.min.js\";\nimport PvConfirm from \"../../../index.ci.php/public/js/components/primevue/confirmdialog/confirmdialog.esm.min.js\";\nimport PvConfirmationService from \"../../../index.ci.php/public/js/components/primevue/confirmationservice/confirmationservice.esm.min.js\";\nimport FhcPhrasen from \"./Phrasen.js\";\n\nimport {CoreRESTClient} from '../RESTClient.js';\n\nconst helperAppContainer = document.createElement('div');\n\nconst helperApp = Vue.createApp({\n\tname: \"FhcAlertApp\",\n\tcomponents: {\n\t\tPvToast,\n\t\tPvConfirm\n\t},\n\tmethods: {\n\t\tmailToUrl(slotProps) {\n\t\t\tlet mailTo = FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto;\n\t\t\tlet subject = 'Meldung%20Systemfehler';\n\t\t\tlet body = `\n\t\t\t\tDanke, dass Sie uns den Fehler melden. %0D%0A %0D%0A\n\t\t\t\tBitte beschreiben Sie uns ausführlich das Problem.%0D%0A\n\t\t\t\tBsp: Ich habe X ausgewählt und Y angelegt. Beim Speichern erhielt ich die Fehlermeldung. [Optional: Ich habe den Browser Z verwendet.]%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tPROBLEM: ... %0D%0A %0D%0A %0D%0A\n\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A\n\t\t\t\tFehler URL: ` + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method + `%0D%0A\n\t\t\t\tFehler Meldung: ` + slotProps.message.detail + `%0D%0A\n\t\t\t\t-----------------------------------------------------------------------------------------------------------------------------------%0D%0A %0D%0A\n\t\t\t\tWir kümmern uns um eine rasche Behebung des Problems!`\n\n\t\t\treturn \"mailto:\" + mailTo + \"?subject=\" + subject + \"&body=\" + body;\n\t\t},\n\t\topenMessagecard(e) {\n\t\t\tbootstrap.Collapse.getOrCreateInstance(e.target.getAttribute('href')).toggle();\n\t\t}\n\t},\n\tunmounted() {\n\t\thelperAppContainer.parentElement.removeChild(helperAppContainer);\n\t},\n\tcomputed: {\n\t\tshowmaillink: function() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.systemerror_mailto !== '';\n\t\t}\n\t},\n\ttemplate: /* html */`\n\t<pv-toast ref=\"toast\" class=\"fhc-alert\" :base-z-index=\"99999\">\n\t\t<template #message=\"{ message }\">\n\t\t\t<!--span :class=\"slotProps.iconClass\"></span-->\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{ message.summary }}</span>\n\t\t\t\t<div v-if=\"message.detail && message.html\" class=\"p-toast-detail\" v-html=\"message.detail\"></div>\n\t\t\t\t<div v-else-if=\"message.detail\" class=\"p-toast-detail\">{{ message.detail }}</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-toast ref=\"alert\" class=\"fhc-alert\" :base-z-index=\"99999\" position=\"center\">\n\t\t<template #message=\"slotProps\">\n\t\t\t<i class=\"fa fa-circle-exclamation fa-2xl mt-3\"></i>\n\t\t\t<div class=\"p-toast-message-text\">\n\t\t\t\t<span class=\"p-toast-summary\">{{slotProps.message.summary}}</span>\n\t\t\t\t<div class=\"p-toast-detail my-3\">Sorry! Ein interner technischer Fehler ist aufgetreten.</div>\n\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"align-bottom flex-fill me-2\"\n\t\t\t\t\t\tdata-bs-toggle=\"collapse\"\n\t\t\t\t\t\t:href=\"'#fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-expanded=\"false\"\n\t\t\t\t\t\t:aria-controls=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\"\n\t\t\t\t\t\t@click=\"openMessagecard\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler anzeigen\n\t\t\t\t\t</a>\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"showmaillink\"\n\t\t\t\t\t\tclass=\"btn btn-primary flex-fill\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t:href=\"mailToUrl(slotProps)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\tFehler melden\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"messageCard\" :id=\"'fhcAlertCollapseMessageCard' + slotProps.message.id\" class=\"collapse mt-3\">\n\t\t\t\t\t<div class=\"card card-body text-body small alertCollapseText\">\n\t\t\t\t\t\t{{slotProps.message.detail}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</pv-toast>\n\t<pv-confirm group=\"fhcAlertConfirm\"></pv-confirm>`\n});\n\nhelperApp.use(PvConfig);\nhelperApp.use(PvConfirmationService);\n//helperApp.use(FhcPhrasen);\n\nconst helperAppInstance = helperApp.mount(helperAppContainer);\n\ndocument.body.appendChild(helperAppContainer);\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (!app.config.globalProperties.$p)\n\t\t\tapp.use(FhcPhrasen);\n\n\t\tconst $fhcAlert = {\n\t\t\talertSuccess(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSuccess);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'success', summary: 'Info', detail: message, life: 1000});\n\t\t\t},\n\t\t\talertInfo(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertInfo);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'info', summary: 'Info', detail: message, life: 3000 });\n\t\t\t},\n\t\t\talertWarning(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertWarning);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'warn', summary: 'Achtung', detail: message});\n\t\t\t},\n\t\t\talertError(message) {\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertError);\n\t\t\t\thelperAppInstance.$refs.toast.add({ severity: 'error', summary: 'Achtung', detail: message });\n\t\t\t},\n\t\t\talertSystemError(message) {\n\t\t\t\t//TODO(Manu) for translation of content of template: restructure in data\n\t\t\t\t//and update definitions with  translations\n\n\t\t\t\tif (Array.isArray(message))\n\t\t\t\t\treturn message.forEach(this.alertSystemError);\n\t\t\t\thelperAppInstance.$refs.alert.add({\n\t\t\t\t\tseverity: 'error',\n\t\t\t\t\tsummary: Vue.computed(() => app.config.globalProperties.$p.t('alert/systemerror')),\n\t\t\t\t\tdetail: message});\n\t\t\t},\n\t\t\tconfirmDelete() {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: 'fhcAlertConfirm',\n\t\t\t\t\t\theader: Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: Vue.computed(() => app.config.globalProperties.$p.t('alert/confirm_delete')),\n\t\t\t\t\t\tacceptLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/loeschen')),\n\t\t\t\t\t\tacceptClass: 'p-button-danger',\n\t\t\t\t\t\trejectLabel: Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: 'p-button-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tconfirm(options) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\thelperAppInstance.$confirm.require({\n\t\t\t\t\t\tgroup: options?.group ?? 'fhcAlertConfirm',\n\t\t\t\t\t\theader: options?.header ?? Vue.computed(() => app.config.globalProperties.$p.t('alert/attention')),\n\t\t\t\t\t\tmessage: options?.message ?? '',\n\t\t\t\t\t\tacceptLabel: options?.acceptLabel ?? 'Ok',\n\t\t\t\t\t\tacceptClass: options?.acceptClass ?? 'btn btn-primary',\n\t\t\t\t\t\trejectLabel: options?.rejectLabel ?? Vue.computed(() => app.config.globalProperties.$p.t('ui/abbrechen')),\n\t\t\t\t\t\trejectClass: options?.rejectClass ?? 'btn btn-outline-secondary',\n\t\t\t\t\t\taccept() {\n\t\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\treject() {\n\t\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\talertDefault(severity, title, message, sticky = false, html = false) {\n\t\t\t\tlet options = { severity: severity, summary: title, detail: message, html };\n\t\t\t\t\n\t\t\t\tif (!sticky)\n\t\t\t\t\toptions.life = 3000;\n\n\t\t\t\thelperAppInstance.$refs.toast.add(options);\n\t\t\t},\n\t\t\talertMultiple(messageArray, severity = 'info', title = 'Info', sticky = false, html = false){\n\t\t\t\t// Check, if array has only string values\n\t\t\t\tif (messageArray.every(message => typeof message === 'string')) {\n\t\t\t\t\tmessageArray.forEach(message => this.alertDefault(severity, title, message, sticky, html));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\thandleSystemError(error) {\n\t\t\t\t// don't show an error message to the user if the error was an aborted request\n\t\t\t\tif(error.hasOwnProperty('name') && error.name.toLowerCase() === \"AbortError\".toLowerCase())\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is string\n\t\t\t\tif (typeof error === 'string')\n\t\t\t\t\treturn $fhcAlert.alertSystemError(error);\n\n\t\t\t\t// Error is array of strings\n\t\t\t\tif (Array.isArray(error) && error.every(err => typeof err === 'string'))\n\t\t\t\t\treturn error.every($fhcAlert.alertSystemError);\n\n\t\t\t\t// Error has been handled already\n\t\t\t\tif (error.hasOwnProperty('handled') && error.handled)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\t// Error is object\n\t\t\t\tif (typeof error === 'object' && error !== null) {\n\t\t\t\t\tlet errMsg = '';\n\n\n\t\t\t\t\tif (error.hasOwnProperty('response') && error.response?.data?.retval)\n\t\t\t\t\t\terrMsg += 'Error Message: ' + (error.response.data.retval.message || error.response.data.retval) + '\\r\\n';\n\t\t\t\t\telse if (error.hasOwnProperty('message'))\n\t\t\t\t\t\terrMsg += 'Error Message: ' + error.message.toUpperCase() + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('config') && error.config.hasOwnProperty('url'))\n\t\t\t\t\t\terrMsg += 'Error ConfigURL: ' + error.config.url + '\\r\\n';\n\n\t\t\t\t\tif (error.hasOwnProperty('stack'))\n\t\t\t\t\t\terrMsg += 'Error Stack: ' + error.stack + '\\r\\n';\n\t\t\t\t\t\n\t\t\t\t\t// Fallback object error message\n\t\t\t\t\tif (errMsg == '')\n\t\t\t\t\t\terrMsg = 'Error Message: ' + JSON.stringify(error) + '\\r\\n';\n\n\t\t\t\t\terrMsg += 'Error Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\n\t\t\t\t\treturn $fhcAlert.alertSystemError(errMsg);\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' + FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\thandleSystemMessage(message) {\n\t\t\t\t// Message is string\n\t\t\t\tif (typeof message === 'string')\n\t\t\t\t\treturn $fhcAlert.alertWarning(message);\n\n\t\t\t\t// Message is array of strings\n\t\t\t\tif (Array.isArray(message)) {\n\t\t\t\t\t// If Array has only Strings\n\t\t\t\t\tif (message.every(msg => typeof msg === 'string'))\n\t\t\t\t\t\treturn message.every($fhcAlert.alertWarning);\n\n\t\t\t\t\t// If Array has only Objects\n\t\t\t\t\tif (message.every(msg => typeof msg === 'object') && msg !== null) {\n\t\t\t\t\t\treturn message.every(msg => {\n\t\t\t\t\t\t\tif (msg.hasOwnProperty('data') && msg.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(msg.data.retval));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(msg));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Message is Object with data property\n\t\t\t\tif (typeof message === 'object' && message !== null){\n\t\t\t\t\tif (message.hasOwnProperty('data') && message.data.hasOwnProperty('retval')) {\n\t\t\t\t\t\t// NOTE(chris): changed: alertSystemError => alertWarning\n\t\t\t\t\t\t$fhcAlert.alertWarning(JSON.stringify(message.data.retval));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$fhcAlert.alertSystemError(JSON.stringify(message));\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Fallback\n\t\t\t\t$fhcAlert.alertSystemError('alertSystemError throws Generic Error\\r\\nError Controller Path: ' + FHC_JS_DATA_STORAGE_OBJECT.called_path + '/' +  FHC_JS_DATA_STORAGE_OBJECT.called_method);\n\t\t\t},\n\t\t\tresetFormValidation(form) {\n\t\t\t\tconst event = new Event('fhc-form-reset');\n\t\t\t\tform.querySelectorAll(['[data-fhc-form-validate],[data-fhc-form-error]']).forEach(el => el.dispatchEvent(event));\n\t\t\t\t/*const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\tif (alert) {\n\t\t\t\t\talert.innerHTML = '';\n\t\t\t\t\talert.classList.add('d-none');\n\t\t\t\t}\n\t\t\t\tform.querySelectorAll('.invalid-feedback').forEach(n => n.remove());\n\t\t\t\tform.querySelectorAll('.is-invalid').forEach(n => n.classList.remove('is-invalid'));\n\t\t\t\tform.querySelectorAll('.is-valid').forEach(n => n.classList.remove('is-valid'));*/\n\t\t\t},\n\t\t\thandleFormValidation(error, form) {\n\t\t\t\tif (form === undefined) {\n\t\t\t\t\tif (error && error.nodeType === Node.ELEMENT_NODE)\n\t\t\t\t\t\treturn err => $fhcAlert.handleFormValidation(err, error);\n\t\t\t\t} else {\n\t\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t\tif (typeof errors !== \"object\")\n\t\t\t\t\t\t\terrors = error.response.data;\n\n\t\t\t\t\t\t// NOTE(chris): reset form validation\n\t\t\t\t\t\t$fhcAlert.resetFormValidation(form);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// NOTE(chris): set form input validation\n\t\t\t\t\t\tconst notFound = Object.entries(errors).filter(([key, detail]) => {\n\t\t\t\t\t\t\tconst input = form.querySelector('[data-fhc-form-validate=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t\t\tinput.dispatchEvent(new CustomEvent('fhc-form-invalidate', {detail}));\n\n\t\t\t\t\t\t\t/*const input = form.querySelector('[name=\"' + key + '\"]');\n\t\t\t\t\t\t\tif (!input)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\tinput.classList.add('is-invalid');\n\t\t\t\t\t\t\tconst feedback = document.createElement('div');\n\t\t\t\t\t\t\tfeedback.classList.add('invalid-feedback');\n\t\t\t\t\t\t\tfeedback.innerHTML = detail;\n\t\t\t\t\t\t\tinput.after(feedback);*/\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}).map(arr => arr[1]);\n\n\n\t\t\t\t\t\t//const alert = form.querySelector('div.alert.alert-danger[role=\"alert\"]');\n\t\t\t\t\t\tconst alert = form.querySelector('[data-fhc-form-error]');\n\t\t\t\t\t\tif (alert && notFound.length) {\n\t\t\t\t\t\t\talert.dispatchEvent(new CustomEvent('fhc-form-error', {detail: notFound}));\n\t\t\t\t\t\t\t/*notFound.forEach(txt => {\n\t\t\t\t\t\t\t\tconst p = document.createElement('p');\n\t\t\t\t\t\t\t\tp.innerHTML = txt;\n\t\t\t\t\t\t\t\talert.append(p);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (notFound.length) {\n\t\t\t\t\t\t\t\talert.lastChild.classList.add('mb-0');\n\t\t\t\t\t\t\t\talert.classList.remove('d-none');\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotFound.forEach($fhcAlert.alertError);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (error?.response?.status == 400) {\n\t\t\t\t\tlet errors = CoreRESTClient.getError(error.response.data);\n\t\t\t\t\t$fhcAlert.alertError((typeof errors === 'object') ? Object.values(errors) : errors);\n\t\t\t\t} else {\n\t\t\t\t\t$fhcAlert.handleSystemError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tapp.config.globalProperties.$fhcAlert = $fhcAlert;\n\t\tapp.provide('$fhcAlert', app.config.globalProperties.$fhcAlert);\n\t}\n}","import FhcAlert from './FhcAlert.js';\n\n\nexport default {\n\tinstall: (app, options) => {\n\t\tif (app.config.globalProperties.$api) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!app.config.globalProperties.$fhcAlert)\n\t\t\tapp.use(FhcAlert);\n\n\t\tfunction _send_array_or_object(errors, func) {\n\t\t\tif (Array.isArray(errors))\n\t\t\t\terrors.forEach(func);\n\t\t\telse\n\t\t\t\tObject.entries(errors).forEach(\n\t\t\t\t\t([title, errs]) => errs.forEach(\n\t\t\t\t\t\terror => func(error, title)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\t\tlet DEFAULT_ERROR_CONFIG = {\n\t\t\tsuccess: true,\n\t\t\tfail: true,\n\t\t\tcombine: {\n\t\t\t\tform: ['validation', 'general'],\n\t\t\t\ttoast: ['validation', 'general', 'not_found', 'site_failed']\n\t\t\t},\n\t\t\thandler: {\n\t\t\t\tform(form, errors) {\n\t\t\t\t\tform.clearValidation();\n\t\t\t\t\terrors.forEach(err => form.setFeedback(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\terr.messages || err.message\n\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t\tasync toast(errors) {\n\t\t\t\t\tconst $p = app.config.globalProperties.$p;\n\t\t\t\t\tif (!$p)\n\t\t\t\t\t\treturn Promise.reject('Phrasen plugin not loaded!');\n\t\t\t\t\n\t\t\t\t\tasync function _format_toast(errors) {\n\t\t\t\t\t\terrors = errors.reduce((result, err) => {\n\t\t\t\t\t\t\tswitch (err.type) {\n\t\t\t\t\t\t\tcase 'not_found':\n\t\t\t\t\t\t\tcase 'site_failed':\n\t\t\t\t\t\t\t\tif (err.message)\n\t\t\t\t\t\t\t\t\tresult[err.message] = [err.url];\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tresult._default = [err.url];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'general':\n\t\t\t\t\t\t\t\tif (!result._default)\n\t\t\t\t\t\t\t\t\tresult._default = [];\n\t\t\t\t\t\t\t\tresult._default.push(err.message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'validation':\n\t\t\t\t\t\t\t\tObject.entries(err.messages)\n\t\t\t\t\t\t\t\t\t.forEach(([field, msg]) => {\n\t\t\t\t\t\t\t\t\t\tif (!result[field])\n\t\t\t\t\t\t\t\t\t\t\tresult[field] = [];\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(msg))\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(...msg);\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tresult[field].push(msg);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t\tlet counter = 0;\n\t\t\t\t\t\tconst msgs = await Promise.all(Object.entries(errors)\n\t\t\t\t\t\t\t.sort((a, b) => ['_default'].indexOf(b[0]) - ['_default'].indexOf(a[0])) // sort _default first\n\t\t\t\t\t\t\t.map(async ([field, msgs]) => {\n\t\t\t\t\t\t\t\tif (field == '_default') {\n\t\t\t\t\t\t\t\t\tawait $p.loadCategory('dashboard');\n\t\t\t\t\t\t\t\t\tconst general = $p.t('dashboard/general');\n\t\t\t\t\t\t\t\t\tfield = '<dt class=\"d-none\">' + general + '</dt>';\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tfield = '<dt>' + field + '</dt>';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcounter += msgs.length;\n\t\t\t\t\t\t\t\treturn field\n\t\t\t\t\t\t\t\t\t+ '<dd>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('</dd><dd>')\n\t\t\t\t\t\t\t\t\t+ '</dd>';\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcounter,\n\t\t\t\t\t\t\tmsgs\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet counter, msgs;\n\t\t\t\t\tif (Array.isArray(errors)) {\n\t\t\t\t\t\t({ counter, msgs } = await _format_toast(errors));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t({ counter, msgs } = await Object.entries(errors)\n\t\t\t\t\t\t\t.reduce(async (res, [title, errs]) => {\n\t\t\t\t\t\t\t\tconst result = await res;\n\t\t\t\t\t\t\t\tconst { counter, msgs } = await _format_toast(errs);\n\t\t\t\t\t\t\t\tresult.counter += counter;\n\t\t\t\t\t\t\t\tresult.msgs.push('<dt>'\n\t\t\t\t\t\t\t\t\t+ title\n\t\t\t\t\t\t\t\t\t+ '</dt><dd><dl>'\n\t\t\t\t\t\t\t\t\t+ msgs.join('')\n\t\t\t\t\t\t\t\t\t+ '</dl></dd>');\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}, Promise.resolve({ counter: 0, msgs: []})));\n\t\t\t\t\t}\n\n\t\t\t\t\tawait $p.loadCategory('ui');\n\t\t\t\t\tconst n_errors = $p.t('ui/n_errors', { n: counter });\n\n\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\tn_errors,\n\t\t\t\t\t\t'<dl>' + msgs.join('') + '</dl>',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tphp(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tswitch (error.severity) {\n\t\t\t\t\t\t\tcase 'Warning':\n\t\t\t\t\t\t\tcase 'Core Warning':\n\t\t\t\t\t\t\tcase 'Compile Warning':\n\t\t\t\t\t\t\tcase 'User Warning':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('warn', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'Notice':\n\t\t\t\t\t\t\tcase 'User Notice':\n\t\t\t\t\t\t\tcase 'Runtime Notice':\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\ttitle += ': PHP ' + error.severity;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ttitle = 'PHP ' + error.severity;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault('info', title, message, true);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = 'Type: PHP ' + error.severity + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\t\t\tmessage = title + '\\n\\n' + message;\n\t\t\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\texception(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Type: ' + error.class + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\t\t\t\t\t\tif (error.backtrace && error.backtrace.length) {\n\t\t\t\t\t\t\tmessage += '\\nBacktrace: ';\n\t\t\t\t\t\t\terror.backtrace.forEach(err => {\n\t\t\t\t\t\t\t\tmessage += '\\n\\tFile: ' + err.file + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tLine: ' + err.line + '\\n';\n\t\t\t\t\t\t\t\tmessage += '\\tFunction: ' + err.function + '\\n';\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tdb(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\tmessage += title + '\\n\\n';\n\t\t\t\t\t\tif (error.heading !== undefined)\n\t\t\t\t\t\t\tmessage += error.heading + '\\n\\n';\n\t\t\t\t\t\tif (error.code !== undefined)\n\t\t\t\t\t\t\tmessage += 'Code: ' + error.code + '\\n\\n';\n\t\t\t\t\t\tif (error.sql !== undefined)\n\t\t\t\t\t\t\tmessage += 'SQL: ' + error.sql + '\\n\\n';\n\t\t\t\t\t\tif (error.message !== undefined)\n\t\t\t\t\t\t\tmessage += 'Message: ' + error.message + '\\n\\n';\n\t\t\t\t\t\telse if (error.messages !== undefined)\n\t\t\t\t\t\t\tmessage += 'Messages: ' + error.messages.join('\\n\\t') + '\\n\\n';\n\t\t\t\t\t\tif (error.filename !== undefined)\n\t\t\t\t\t\t\tmessage += 'Filename: ' + error.filename + '\\n';\n\t\t\t\t\t\tif (error.line !== undefined)\n\t\t\t\t\t\t\tmessage += 'Line Number: ' + error.line + '\\n';\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertSystemError(message);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tauth(errors) {\n\t\t\t\t\t_send_array_or_object(errors, (error, title) => {\n\t\t\t\t\t\tif (title)\n\t\t\t\t\t\t\ttitle += ': ' + error.message;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\ttitle = error.message;\n\n\t\t\t\t\t\tvar message = '';\n\t\t\t\t\t\tmessage += 'Controller name: ' + error.controller + '\\n';\n\t\t\t\t\t\tmessage += 'Method name: ' + error.method + '\\n';\n\t\t\t\t\t\tmessage += 'Required permissions: ' + error.required_permissions;\n\n\t\t\t\t\t\tapp.config.globalProperties.$fhcAlert.alertDefault(\n\t\t\t\t\t\t\t'error',\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options?.errorHandling !== undefined)\n\t\t\tDEFAULT_ERROR_CONFIG = _merge_error_config(options.errorHandling);\n\t\t\n\t\tfunction get_config(form, uri, data, config) {\n\t\t\tif (typeof form == 'string' && config === undefined) {\n\t\t\t\t[uri, data, config] = [form, uri, data];\n\t\t\t\tform = undefined;\n\t\t\t} else if (form) {\n\t\t\t\tif (typeof form != 'object')\n\t\t\t\t\tthrow new TypeError('Parameter 1 of _get_config must be an object or a string');\n\t\t\t\tif (uri === undefined && data === undefined && config === undefined) {\n\t\t\t\t\tconfig = form;\n\t\t\t\t\tform = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (form) {\n\t\t\t\t// NOTE(chris): check if form is fhc-form\n\t\t\t\tif (!form.clearValidation || !form.setFeedback)\n\t\t\t\t\tthrow new TypeError(\"'form' is not a Form Component\");\n\n\t\t\t\tform = {\n\t\t\t\t\tclearValidation: form.clearValidation,\n\t\t\t\t\tsetFeedback: form.setFeedback\n\t\t\t\t};\n\n\t\t\t\tif (config)\n\t\t\t\t\tconfig.form = form;\n\t\t\t\telse\n\t\t\t\t\tconfig = {form};\n\t\t\t}\n\n\t\t\treturn [uri, data, config];\n\t\t}\n\t\tfunction clean_return_value(response) {\n\t\t\tif (typeof response.data === 'string' || response.data instanceof String)\n\t\t\t\treturn clean_return_value({ data: response });\n\n\t\t\tconst result = response.data;\n\t\t\tdelete response.data;\n\t\t\tif (!result)\n\t\t\t\treturn {meta: {response}, data: null};\n\t\t\tif (!result.meta)\n\t\t\t\tresult.meta = { response };\n\t\t\telse\n\t\t\t\tresult.meta.response = response;\n\t\t\treturn result;\n\t\t}\n\t\tfunction _merge_error_config(config) {\n\t\t\tif (config === false || config === 'off')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false, fail: false };\n\t\t\t\n\t\t\tif (!config || config === true)\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tif (config === 'success')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, fail: false };\n\t\t\t\n\t\t\tif (config === 'fail')\n\t\t\t\treturn { ...DEFAULT_ERROR_CONFIG, success: false };\n\t\t\t\n\t\t\tconst { success, fail, handler, combine } = config;\n\t\t\t\n\t\t\tconfig = { ...DEFAULT_ERROR_CONFIG };\n\n\t\t\tObject.entries({ fail, success }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = value;\n\t\t\t});\n\t\t\tObject.entries({ handler, combine }).forEach(([key, value]) => {\n\t\t\t\tif (value !== undefined)\n\t\t\t\t\tconfig[key] = { ...config[key], ...value };\n\t\t\t});\n\n\t\t\treturn config;\n\t\t}\n\t\tfunction get_error_handler(config) {\n\t\t\tconst result = _merge_error_config(config?.errorHandling);\n\n\t\t\tif (!config?.form) {\n\t\t\t\tresult.combine = { ...result.combine, form: [] };\n\t\t\t} else {\n\t\t\t\tconst formHandler = result.handler.form;\n\t\t\t\tresult.handler = { ...result.handler, form: errors => formHandler(config.form, errors) };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tfunction get_error_list(error) {\n\t\t\tif (error.response) {\n\t\t\t\tif (error.response.status == 404) {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\ttype: 'not_found',\n\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tif (error.response.data.errors == undefined) return [];\n\t\t\t\t\treturn error.response.data.errors;\n\t\t\t\t}\n\t\t\t} else if (error.request) {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'site_failed',\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\turl: error.request.responseURL\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\treturn [{\n\t\t\t\t\ttype: 'script',\n\t\t\t\t\tmessage: error.message\n\t\t\t\t}];\n\t\t\t}\n\t\t}\n\t\tfunction popHandleableErrors(errorHandling, errors) {\n\t\t\tconst result = {};\n\t\t\tconst copy = [];\n\n\t\t\tif (errors == undefined) return {};\n\n\t\t\twhile (errors.length)\n\t\t\t\tcopy.push(errors.pop());\n\t\t\tfor (var error of copy) {\n\t\t\t\tlet type = error.type;\n\t\t\t\tlet newType = null;\n\t\t\t\tfor (var t in errorHandling.combine) {\n\t\t\t\t\tlet newTypeCombinesType = errorHandling\n\t\t\t\t\t\t.combine[t]\n\t\t\t\t\t\t.includes(type);\n\t\t\t\t\tlet newTypeHasHandler = errorHandling.handler[t];\n\t\t\t\t\tif (newTypeCombinesType && newTypeHasHandler) {\n\t\t\t\t\t\tnewType = t;\n\t\t\t\t\t\tif (newType == 'form')\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (newType)\n\t\t\t\t\ttype = newType;\n\t\t\t\tconst handler = errorHandling.handler[type];\n\t\t\t\tif (handler) {\n\t\t\t\t\tif (!result[type])\n\t\t\t\t\t\tresult[type] = [];\n\t\t\t\t\tif (Array.isArray(error))\n\t\t\t\t\t\tresult[type].push(...error);\n\t\t\t\t\telse\n\t\t\t\t\t\tresult[type].push(error);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\terrors.push(error);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst fhcApiAxios = axios.create({\n\t\t\ttimeout: 500000,\n\t\t\tbaseURL: FHC_JS_DATA_STORAGE_OBJECT.app_root\n\t\t\t\t+ FHC_JS_DATA_STORAGE_OBJECT.ci_router\n\t\t\t\t+ \"/\"\n\t\t});\n\n\t\tfhcApiAxios.interceptors.request.use(config => {\n\t\t\tif (config.method != 'post' || !config.data)\n\t\t\t\treturn config;\n\n\t\t\tif (config.data instanceof FormData)\n\t\t\t\treturn config;\n\n\t\t\tif (!Object.values(config.data).every(item => {\n\t\t\t\tif (item instanceof FileList)\n\t\t\t\t\treturn false;\n\t\t\t\tif (Array.isArray(item))\n\t\t\t\t\treturn item.every(i => !(i instanceof File));\n\t\t\t\treturn true;\n\t\t\t})) {\n\t\t\t\tconst newData = Object.entries(config.data).reduce((nd, [key, item]) => {\n\t\t\t\t\tif (item instanceof FileList) {\n\t\t\t\t\t\tfor (const file of item)\n\t\t\t\t\t\t\tnd.FormData.append(key + (item.length > 1 ? '[]' : ''), file);\n\t\t\t\t\t} else if (Array.isArray(item)) {\n\t\t\t\t\t\tif (item.every(i => !(i instanceof File))) {\n\t\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.forEach(file => nd.FormData.append(key + (item.length > 1 ? '[]' : ''), file));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnd.jsondata[key] = item;\n\t\t\t\t\t}\n\t\t\t\t\treturn nd;\n\t\t\t\t}, {\n\t\t\t\t\tFormData: new FormData(),\n\t\t\t\t\tjsondata: {}\n\t\t\t\t});\n\t\t\t\tnewData.FormData.append('_jsondata', JSON.stringify(newData.jsondata));\n\t\t\t\tconfig.data = newData.FormData;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t});\n\n\t\tfhcApiAxios.interceptors.response.use(\n\t\t\tresponse => {\n\t\t\t\tif (response.config?.errorHandling == 'off'\n\t\t\t\t\t|| response.config?.errorHandling === false\n\t\t\t\t\t|| response.config?.errorHandling == 'fail')\n\t\t\t\t\treturn clean_return_value(response);\n\n\t\t\t\t// NOTE(chris): loop through errors\n\t\t\t\tif (response.data.errors)\n\t\t\t\t\tresponse.data.errors = response.data.errors.filter(\n\t\t\t\t\t\terr => (response.config[err.type + 'ErrorHandler'] || app.config.globalProperties.$api._defaultErrorHandlers[err.type])(err, response.config)\n\t\t\t\t\t);\n\n\t\t\t\treturn clean_return_value(response);\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tif (error.code == 'ERR_CANCELED')\n\t\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\n\t\t\t\tconst errorConfig = get_error_handler(error.config);\n\n\t\t\t\tif (!errorConfig.fail)\n\t\t\t\t\treturn Promise.reject(error);\n\n\t\t\t\tconst remaining = get_error_list(error);\n\n\t\t\t\tconst errors = popHandleableErrors(errorConfig, remaining);\n\n\t\t\t\tfor (var type in errors) {\n\t\t\t\t\terrorConfig.handler[type](errors[type]);\n\t\t\t\t}\n\n\t\t\t\tif (remaining.length)\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\n\t\t\t\treturn Promise.reject({ handled: true, ...error });\n\t\t\t}\n\t\t);\n\n\t\tapp.config.globalProperties.$api = {\n\t\t\tgetUri(url) {\n\t\t\t\treturn fhcApiAxios.getUri({url});\n\t\t\t},\n\t\t\tget(form, uri, params, config) {\n\t\t\t\t[uri, params, config] = get_config(form, uri, params, config);\n\t\t\t\tif (params) {\n\t\t\t\t\tif (config)\n\t\t\t\t\t\tconfig.params = params;\n\t\t\t\t\telse\n\t\t\t\t\t\tconfig = {params};\n\t\t\t\t}\n\t\t\t\treturn fhcApiAxios.get(uri, config);\n\t\t\t},\n\t\t\tpost(form, uri, data, config) {\n\t\t\t\t[uri, data, config] = get_config(form, uri, data, config);\n\t\t\t\treturn fhcApiAxios.post(uri, data, config);\n\t\t\t},\n\t\t\tcall(factory, configoverwrite, form) {\n\t\t\t\tif (Array.isArray(factory)) {\n\t\t\t\t\tconst $api = app.config.globalProperties.$api;\n\n\t\t\t\t\treturn Promise\n\t\t\t\t\t\t.allSettled(factory.map((config, index) => {\n\t\t\t\t\t\t\tif (!Array.isArray(config))\n\t\t\t\t\t\t\t\tconfig = ['#' + index, config];\n\t\t\t\t\t\t\treturn $api.call(config[1], {\n\t\t\t\t\t\t\t\terrorHeader: config[0],\n\t\t\t\t\t\t\t\terrorHandling: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\tconst [ , , config ] = get_config(form, undefined, undefined, configoverwrite || {});\n\t\t\t\t\t\t\tconst errorConfig = get_error_handler(config);\n\n\t\t\t\t\t\t\tif (!errorConfig.success && !errorConfig.fail) {\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst typedErrors = {};\n\t\t\t\t\t\t\tfor (var res of result) {\n\t\t\t\t\t\t\t\tconst [ allowed, item ] = res.status === 'fulfilled'\n\t\t\t\t\t\t\t\t\t? [ errorConfig.success, res.value ]\n\t\t\t\t\t\t\t\t\t: [ errorConfig.fail, res.reason ];\n\t\t\t\t\t\t\t\tif (!allowed)\n\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\tconst errors = popHandleableErrors(errorConfig, get_error_list(item));\n\n\t\t\t\t\t\t\t\tfor (var type in errors) {\n\t\t\t\t\t\t\t\t\tif (!typedErrors[type])\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type] = {\n\t\t\t\t\t\t\t\t\t\t\t[item.config.errorHeader]: errors[type]\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\ttypedErrors[type][item.config.errorHeader] = errors[type];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var errType in typedErrors) {\n\t\t\t\t\t\t\t\terrorConfig.handler[errType](typedErrors[errType]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tlet { method, url, params, config } = factory;\n\t\t\t\tif (configoverwrite !== undefined) {\n\t\t\t\t\tconfig = configoverwrite;\n\t\t\t\t}\n\t\t\t\tif (!method) {\n\t\t\t\t\tmethod = 'get';\n\t\t\t\t}\n\t\t\t\tif (method.toLowerCase)\n\t\t\t\t\tmethod = method.toLowerCase();\n\t\t\t\tif (method == 'get') {\n\t\t\t\t\treturn this.get(form, url, params, config);\n\t\t\t\t} else if (method == 'post') {\n\t\t\t\t\treturn this.post(form, url, params, config);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"FhcApi: method not allowed:\", method);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetErrorHandler(config) {\n\t\t\t\treturn get_error_handler(config);\n\t\t\t}\n\t\t};\n\n\t\tapp.provide('$api', app.config.globalProperties.$api);\n\t}\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tloadCategory(category) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/loadModule/' + category\n\t\t};\n\t},\n\tsetLanguage(categories,language) {\n\t\tconst params = {categories, language}\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/phrasen/setLanguage',\n\t\t\tparams\n\t\t};\n\t},\n\tgetLanguage() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getLanguage'\n\t\t};\n\t},\n\tgetActiveDbLanguages() {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/phrasen/getAllLanguages'\n\t\t};\n\t}\n};","import OldFhcApi from '../plugin/OldFhcApi.js'; // TODO(chris): remove at some point\nimport PluginsApi from './Api.js';\nimport ApiPhrasen from '../api/factory/phrasen.js';\n\nconst categories = Vue.reactive({});\nconst loadingModules = {};\nlet user_language = Vue.ref(FHC_JS_DATA_STORAGE_OBJECT.user_language);\nexport let user_locale = Vue.computed(()=>{\n\tif(!user_language.value) return null;\n\treturn FHC_JS_DATA_STORAGE_OBJECT.server_languages.find(language => language.sprache == user_language.value).LC_Time;\n});\n\nfunction extractCategory(obj, category) {\n\treturn obj.filter(e => e.category == category).reduce((res, elem) => {\n\t\tif (!res[elem.phrase])\n\t\t\tres[elem.phrase] = elem.text;\n\t\treturn res;\n\t}, {});\n}\nfunction getValueForLoadedPhrase(category, phrase, params) {\n\tlet result = categories[category][phrase];\n\tif (!result)\n\t\treturn '<< PHRASE ' + phrase + '>>';\n\tif (params)\n\t\tresult = result.replace(/\\{([^}]*)\\}/g, (match, p1) => params[p1] === undefined ? match : params[p1]);\n\treturn result;\n}\n\nconst phrasen = {\n\tuser_language,\n\tuser_locale,\n\tsetLanguage(language) {\n\t\tconst catArray = Object.keys(categories)\n\t\treturn this.config.globalProperties.$api\n\t\t\t.call(ApiPhrasen.setLanguage(catArray, language))\n\t\t\t.then(res => {\n\t\t\t\tres.data.forEach(row => {\n\t\t\t\t\tcategories[row.category][row.phrase] = row.text\n\t\t\t\t})\n\n\t\t\t\t// update the reactive data that holds the current active user_language\n\t\t\t\tuser_language.value = language;\n\n\t\t\t\treturn res\n\t\t\t})\n\t},\n\tloadCategory(category) {\n\t\tif (Array.isArray(category))\n\t\t\treturn Promise.all(category.map(this.config.globalProperties\n\t\t\t\t.$p.loadCategory));\n\n\t\tif (!loadingModules[category])\n\t\t\tloadingModules[category] = this.config.globalProperties.$api\n\t\t\t\t.call(ApiPhrasen.loadCategory(category))\n\t\t\t\t.then(res => res?.data ? extractCategory(res.data, category) : {})\n\t\t\t\t.then(res => {\n\t\t\t\t\tcategories[category] = res;\n\t\t\t\t});\n\t\treturn loadingModules[category];\n\t},\n\tt_ref(category, phrase, params) {\n\t\tconsole.warn('deprecated');\n\t\treturn Vue.computed(() => this.t(category, phrase, params));\n\t},\n\tt(category, phrase, params) {\n\t\tif (params === undefined && (\n\t\t\t(Array.isArray(category) && category.length == 2) ||\n\t\t\t(category.split && category.split('/').length == 2))\n\t\t\t) {\n\t\t\tparams = phrase;\n\t\t\t[category, phrase] = category.split ? category.split('/') : category;\n\t\t}\n\t\tif (phrase === undefined) {\n\t\t\tconsole.error('invalid input', category, phrase, params);\n\t\t\treturn '';\n\t\t}\n\t\tlet val = Vue.computed(() => {\n\t\t\tif (!categories[category])\n\t\t\t\treturn '';\n\t\t\treturn getValueForLoadedPhrase(category, phrase, params);\n\t\t});\n\t\tif (!categories[category])\n\t\t\tthis.loadCategory(category);\n\t\treturn val.value;\n\t}\n};\n\nexport default {\n\tinstall(app, options) {\n\t\tif (!app.config.globalProperties.$fhcApi)\n\t\t\tapp.use(OldFhcApi); // TODO(chris): remove at some point\n\t\tif (!app.config.globalProperties.$api)\n\t\t\tapp.use(PluginsApi);\n\t\tapp.config.globalProperties.$p = {\n\t\t\tt: phrasen.t,\n\t\t\tloadCategory: cat => phrasen.loadCategory.call(app, cat),\n\t\t\tsetLanguage: lang => phrasen.setLanguage.call(app, lang),\n\t\t\tuser_language: user_language,\n\t\t\tuser_locale,\n\t\t\tt_ref: phrasen.t_ref\n\t\t};\n\t\tapp.provide('$p', app.config.globalProperties.$p);\n\t}\n}","export const formatter = {\n\tformatDateGerman: function(date) {\n\t\tif (typeof date == 'undefined') return '';\n\n\t\tconst re = /([0-9]{4})-([0-9]{2})-([0-9]{2})/;\n\t\tvar matches = null;\n\n\t\tif( null !== date && null !== (matches = date.match(re)) ) {\n\t\t\treturn matches[3] + '.' + matches[2] + '.' + matches[1];\n\t\t} else {\n\t\t\treturn date;\n\t\t}\n\t},\n\tformatCurrencyGerman: function(amount) {\n\t\treturn new Intl.NumberFormat(\n\t\t\t\"de-DE\",\n\t\t\t{ minimumFractionDigits: 2, maximumFractionDigits: 2 }\n\t\t).format(amount);\n\t}\n}\n","import {CoreNavigationCmpt} from '../../../../../js/components/navigation/Navigation.js';\nimport searchbar from \"../../../../../js/components/searchbar/searchbar.js\";\nimport ApiSearchbar from  '../../../../../js/api/factory/searchbar.js';\nimport {searchbaroptions} from \"../../apps/common.js\";\nimport {Modal} from '../Modal.js';\nimport {formatter} from './valorisationformathelper.js';\nimport ApiValorisierungCheck from '../../api/factory/valorisierungcheck.js';\n\nexport const ValorisationCheck = {\n\tname: 'ValorisationCheck',\n\tprops: {\n\t\tdienstverhaeltnis_id: { type: Number, required: true }\n\t},\n\tcomponents: {\n\t\tsearchbar,\n\t\tCoreNavigationCmpt,\n\t\tModal\n\t},\n\tinject: ['$api', '$fhcAlert'],\n\tdata() {\n\t\treturn \t{\n\t\t\tsearchbaroptions: searchbaroptions,\n\t\t\tappSideMenuEntries: {},\n\t\t\tvalorisierungCheckData: {},\n\t\t\tdvData: {},\n\t\t\tviewedValorisierungMethod: {},\n\t\t\tformatter: formatter\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.getAllData();\n\t},\n\tmethods: {\n\t\tsearchfunction: function(params) {\n\t\t\treturn this.$api.call(ApiSearchbar.search(params));\n\t\t},\n\t\tgetAllData: function() {\n\t\t\tthis.getDvData();\n\t\t\tthis.getValorisierungCheckData();\n\t\t},\n\t\tgetDvData: function() {\n\t\t\tconst res = this.$api.call(ApiValorisierungCheck.getDvData(this.dienstverhaeltnis_id))\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.dvData = response.data;\n\t\t\t\t})\n\t\t\t\t.catch(this.handleErrors);\n\t\t},\n\t\tgetValorisierungCheckData: function() {\n\t\t\tconst res = this.$api.call(ApiValorisierungCheck.getValorisierungCheckData(this.dienstverhaeltnis_id))\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.valorisierungCheckData = response.data;\n\t\t\t\t})\n\t\t\t\t.catch(this.handleErrors);\n\t\t},\n\t\tredoValorisation: function() {\n\t\t\tconst res = this.$api.call(ApiValorisierungCheck.redoValorisation(this.dienstverhaeltnis_id))\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.getAllData();\n\t\t\t\t})\n\t\t\t\t.catch(this.handleErrors);\n\t\t},\n\t\tshowMethodenInfo: function(event, valorisierung) {\n\t\t\tthis.viewedValorisierungMethod = valorisierung;\n\t\t\tthis.$refs.infoModalRef.show();\n\t\t},\n\t\tnewSideMenuEntryHandler: function(payload) {\n\t\t\t\tthis.appSideMenuEntries = payload;\n\t\t},\n\t\thandleErrors: function(response) {\n\t\t\tif (response.hasOwnProperty('response') && response.response?.data?.errors) {\n\t\t\t\tfor (let error of response.response.data.errors) {\n\t\t\t\t\tthis.$fhcAlert.handleSystemError(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.$fhcAlert.handleSystemError(response);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tgetFHCUrl: function() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.app_root + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\t\t},\n\t\tvalorisierungCheckDataArr: function() {\n\t\t\tlet dataArr = [];\n\t\t\tfor (let gehaltsbestandteil_id in this.valorisierungCheckData)\n\t\t\t{\n\t\t\t\tlet va = this.valorisierungCheckData[gehaltsbestandteil_id];\n\t\t\t\tva.gehaltsbestandteil_id = gehaltsbestandteil_id;\n\t\t\t\tdataArr.push(va);\n\t\t\t}\n\t\t\tdataArr.sort(function(a, b){\n\t\t\t\tif (a.valorisierung == true && b.valorisierung == false) return -1;\n\t\t\t\tif (a.bis == null && b.bis != null) return -1;\n\t\t\t\tif (a.bis != null && b.bis == null) return 1;\n\t\t\t\treturn b.von.localeCompare(a.von)\n\t\t\t});\n\t\t\treturn dataArr;\n\t\t},\n\t\tfinalCalculatedValorisations: function() {\n\t\t\tlet valorisations = {};\n\t\t\tfor (let gehaltsbestandteil_id in this.valorisierungCheckData)\n\t\t\t{\n\t\t\t\tlet va = this.valorisierungCheckData[gehaltsbestandteil_id]['valorisation_methods'];\n\n\t\t\t\t// initialize with Grundbetrag\n\t\t\t\tvalorisations[gehaltsbestandteil_id] = parseFloat(this.valorisierungCheckData[gehaltsbestandteil_id]['grundbetrag']);\n\n\t\t\t\tif (va == null) continue;\n\n\t\t\t\t// get last calculated amount\n\t\t\t\tlet latestDate = Object.keys(va).reduce((a, b) => va[a] > va[b] ? a : b);\n\t\t\t\tlet lastBetrag = parseFloat(va[latestDate].calculated_betrag_valorisiert);\n\t\t\t\tif (!lastBetrag) continue;\n\t\t\t\tvalorisations[gehaltsbestandteil_id] = lastBetrag;\n\t\t\t}\n\n\t\t\treturn valorisations;\n\t\t},\n\t\tdienstverhaeltnisInfo: function() {\n\t\t\tlet dienstverhaeltnisInfo = {};\n\t\t\tif (this.dvData.length > 0)\n\t\t\t{\n\t\t\t\tlet dv = this.dvData[0];\n\t\t\t\tdienstverhaeltnisInfo = {\n\t\t\t\t\t'von': dv.von,\n\t\t\t\t\t'vertragsart': dv.vertragsart,\n\t\t\t\t\t'vorname': dv.vorname,\n\t\t\t\t\t'nachname': dv.nachname,\n\t\t\t\t\t'unternehmen': dv.unternehmen\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn dienstverhaeltnisInfo;\n\t\t},\n\t\tdienstverhaeltnisSums: function() {\n\t\t\tlet sums = {\n\t\t\t\tsaved: 0,\n\t\t\t\tcalculated: 0\n\t\t\t};\n\n\t\t\tfor (let gehaltsbestandteil_id in this.valorisierungCheckData)\n\t\t\t{\n\t\t\t\tsums.saved += parseFloat(this.valorisierungCheckData[gehaltsbestandteil_id].final_betrag_valorisiert);\n\t\t\t}\n\n\t\t\tif (Object.keys(this.finalCalculatedValorisations).length <= 0) return sums;\n\n\t\t\tsums.calculated = Object.values(this.finalCalculatedValorisations).reduce((a, b) => a + b);\n\n\t\t\treturn sums;\n\t\t},\n\t\tvalorisierungValid: function() {\n\t\t\tfor (let gehaltsbestandteil_id in this.valorisierungCheckData) {\n\t\t\t\tlet valData = this.valorisierungCheckData[gehaltsbestandteil_id];\n\n\t\t\t\t// if saved betrag valorisiert different from calculated - invalid\n\t\t\t\tif (valData['final_betrag_valorisiert'] != this.finalCalculatedValorisations[gehaltsbestandteil_id]) return false;\n\n\t\t\t\tfor (let methodIdx in valData['valorisation_methods']) {\n\t\t\t\t\tlet method = valData['valorisation_methods'][methodIdx];\n\n\t\t\t\t\t// if history betrag valorisiert different from calculated - invalid\n\t\t\t\t\tif (method.historie_betrag_valorisiert != method.calculated_betrag_valorisiert) return false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t},\n\ttemplate: `\n\n\t<header class=\"navbar navbar-expand-lg navbar-dark sticky-top bg-dark flex-md-nowrap p-0 border-bottom\">\n\t<a class=\"navbar-brand col-md-3 col-lg-2 me-0 px-3\" :href=\"getFHCUrl\">FHComplete [PV21]</a>\n\t<button class=\"navbar-toggler position-absolute d-md-none collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#sidebarMenu\" aria-controls=\"sidebarMenu\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n\t\t<span class=\"navbar-toggler-icon\"></span>\n\t</button>\n\t<div id=\"chooser\" class=\"w-100\">\n\t\t<searchbar :searchoptions=\"searchbaroptions\" :searchfunction=\"searchfunction\"></searchbar>\n\t</div>\n\t<div class=\"navbar-nav\">\n\t\t<div class=\"nav-item dropdown\">\n\t\t<a class=\"nav-link dropdown-toggle px-3\" data-bs-toggle=\"dropdown\" href=\"#\" id=\"navbarDropdownMenuLink\">Häufige Funktionen</a>\n\t\t<ul class=\"dropdown-menu\" aria-labelledby=\"navbarDropdownMenuLink\">\n\t\t\t<li><a class=\"dropdown-item\" href=\"#\">Action</a></li>\n\t\t\t<li><a class=\"dropdown-item\" href=\"#\">Another action</a></li>\n\t\t\t<li><a class=\"dropdown-item\" href=\"#\">Something else here</a></li>\n\t\t</ul>\n\t\t</div>noheader\n\t</div>\n\t</header>\n\n\t<div class=\"container-fluid\">\n\t<div class=\"row\">\n\n\t<core-navigation-cmpt :add-side-menu-entries=\"appSideMenuEntries\" hide-top-menu left-nav-css-classes=\"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse\"></core-navigation-cmpt>\n\n\t<main class=\"col-md-9 ms-sm-auto col-lg-10 px-md-4\" style=\"height:100%\">\n\n\t\t<div class=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3\">\n\t\t\t<h1 class=\"h2\">\n\t\t\t\tValorisierungscheck {{dienstverhaeltnisInfo.vorname+' '+dienstverhaeltnisInfo.nachname}},\n\t\t\t\t{{ dienstverhaeltnisInfo.unternehmen }}, {{ dienstverhaeltnisInfo.vertragsart }},\n\t\t\t\t{{ this.formatter.formatDateGerman(dienstverhaeltnisInfo.von) }}\n\t\t\t</h1>\n\t\t\t<div class=\"btn-toolbar mb-2 mb-md-0\">\n\t\t\t<div class=\"btn-group me-2\">\n\t\t\t\t<!--button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"expandAllHandler\">Expand</button>\n\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" @click=\"collapseAllHandler\">Collapse</button-->\n\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"row\">\n\n\t\t\t<div class=\"col-6\">\n\t\t\t\t<div class=\"d-flex mb-3 align-items-center\" v-if=\"valorisierungValid\">\n\t\t\t\t\t<label class=\"text-success\"><i class=\"fa fa-check\"></i>&nbsp;Valorisierung korrekt gespeichert</label>&nbsp;\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"d-flex mb-3 align-items-center\" v-else>\n\t\t\t\t\t<label class=\"text-danger\"><i class=\"fa fa-x\"></i>&nbsp;Gespeicherte Valorisierung weicht von berechneter Valorisierung ab!</label>&nbsp;\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary ml-auto\" @click=\"redoValorisation\">Valorisierung neu berechnen und speichern</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"col-6 mb-3 text-end fw-bold fs-5\">\n\t\t\t\t&sum; Historie: {{ this.formatter.formatCurrencyGerman(dienstverhaeltnisSums.saved) }};\n\t\t\t\t&sum; berechnet: {{ this.formatter.formatCurrencyGerman(dienstverhaeltnisSums.calculated) }}\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class=\"mh-100 pb-5\">\n\t\t\t<div class=\"row\" v-for=\"method in valorisierungCheckDataArr\">\n\t\t\t\t<h1 class=\"h3\">\n\t\t\t\t\tGehaltsbestandteil {{ method.gehaltstyp }},\n\t\t\t\t\t{{ this.formatter.formatDateGerman(method.von) }}<span v-if=\"method.bis != null\"> - {{ this.formatter.formatDateGerman(method.bis) }}</span>, Betrag valorisiert:\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-bind:class=\"finalCalculatedValorisations[method.gehaltsbestandteil_id] != method.final_betrag_valorisiert ? 'text-danger' : ''\">\n\t\t\t\t\t\t{{ this.formatter.formatCurrencyGerman(method.final_betrag_valorisiert) }}\n\t\t\t\t\t</span>,\n\t\t\t\t\tValorisierung:\n\t\t\t\t\t{{ method.valorisierung ? 'Ja' : 'Nein' }}\n\t\t\t\t</h1>\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<table class=\"table table-condensed table-bordered\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr class=\"text-center\">\n\t\t\t\t\t\t\t\t<th colspan=\"3\">Historie</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Valorisierungsdatum</th>\n\t\t\t\t\t\t\t\t<th>Bezeichnung</th>\n\t\t\t\t\t\t\t\t<th>Betrag valorisiert</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td>Grundbetrag</td>\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatCurrencyGerman(method.grundbetrag) }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr v-for=\"(valorisierung, valorisierungsdatum) in method.valorisation_methods\"\n\t\t\t\t\t\t\t\tv-bind:class=\"valorisierung.calculated_betrag_valorisiert != valorisierung.historie_betrag_valorisiert ? 'table-danger' : ''\">\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatDateGerman(valorisierungsdatum) }}</td>\n\t\t\t\t\t\t\t\t<td>{{ valorisierung.valorisierung_kurzbz }}</td>\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatCurrencyGerman(valorisierung.historie_betrag_valorisiert) }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-6\">\n\t\t\t\t\t<table class=\"table table-condensed table-bordered\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr class=\"text-center\">\n\t\t\t\t\t\t\t\t<th colspan=\"4\">Berechnet</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>Valorisierungsdatum</th>\n\t\t\t\t\t\t\t\t<th>Bezeichnung</th>\n\t\t\t\t\t\t\t\t<th>Methode</th>\n\t\t\t\t\t\t\t\t<th>Betrag valorisiert</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t<td>Grundbetrag</td>\n\t\t\t\t\t\t\t\t<td>-</td>\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatCurrencyGerman(method.grundbetrag) }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr v-for=\"(valorisierung, valorisierungsdatum) in method.valorisation_methods\"\n\t\t\t\t\t\t\t\tv-bind:class=\"valorisierung.calculated_betrag_valorisiert != valorisierung.historie_betrag_valorisiert ? 'table-danger' : ''\">\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatDateGerman(valorisierungsdatum) }}</td>\n\t\t\t\t\t\t\t\t<td>{{ valorisierung.valorisierung_kurzbz }}</td>\n\t\t\t\t\t\t\t\t<td>{{ valorisierung.valorisierung_methode_kurzbz }}&nbsp;\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-info-circle fa-lg\" role=\"button\" @click=\"showMethodenInfo($event, valorisierung)\"></i>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{{ this.formatter.formatCurrencyGerman(valorisierung.calculated_betrag_valorisiert) }}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</main>\n\n\t</div>\n\t</div>\n\t<!-- detail modal -->\n\t<Modal :title=\"'Valorisierungsmethode Information'\" ref=\"infoModalRef\" v-model=\"viewedValorisierungMethod\">\n\t\t<template #body>\n\t\t\t<table class=\"table table-bordered\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Bezeichnung</th>\n\t\t\t\t\t\t<td>{{viewedValorisierungMethod.valorisierung_methode_kurzbz}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Beschreibung</th>\n\t\t\t\t\t\t<td>{{viewedValorisierungMethod.valorisierung_methode_beschreibung}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Parameter</th>\n\t\t\t\t\t\t<td><pre>{{JSON.stringify(this.viewedValorisierungMethod.valorisierung_methode_parameter, null, 2)}}</pre></td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</template>\n\t</Modal>\n\t`\n};\n","import {default as EmployeeHome} from \"../components/employee/EmployeeHome.js\";\nimport {EmployeePerson} from \"../components/employee/EmployeePerson.js\";\nimport {EmployeeContract} from \"../components/employee/contract/EmployeeContract.js\";\nimport {EmployeeSummary } from \"../components/employee/summary/EmployeeSummary.js\";\nimport {EmployeeTime} from \"../components/employee/time/EmployeeTime.js\";\nimport { EmployeeLifeCycle } from \"../components/employee/lifecycle/EmployeeLifeCycle.js\";\nimport { EmployeeDocument } from \"../components/employee/document/EmployeeDocument.js\";\nimport Phrasen from '../../../../js/plugins/Phrasen.js';\nimport FhcAlert from '../../../../js/plugins/FhcAlert.js';\nimport * as typeDefinition from '../helpers/typeDefinition/loader.js';\nimport {ValorisationCheck} from \"../components/bulk/ValorisationCheck.js\";\nimport ApiCommon from '../api/factory/common.js';\nimport ApiDV from  '../api/factory/dv.js';\n\nvar personSelectedRef = { callback: () => {}};\n\n// path to CI-Router without host and port (requires https!)\nconst ciPath = FHC_JS_DATA_STORAGE_OBJECT.app_root.replace(/(https:|)(^|\\/\\/)(.*?\\/)/g, '') + FHC_JS_DATA_STORAGE_OBJECT.ci_router;\n\nconst router = VueRouter.createRouter(\n\t{\n\t\thistory: VueRouter.createWebHistory(),\n\t\troutes: [\n\t\t\t{ path: `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees`, component: EmployeeHome }, // /index.ci.php/extensions/FHC-Core-Personalverwaltung/Employees/\n\t\t\t{ path: `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Employees/:id/:uid`, component: EmployeeHome, name: 'Employee',\n\t\t\t\tchildren: [\t\t\t\t\t\n\t\t\t\t\t{ path: '', \n\t\t\t\t\t  component: EmployeePerson, \n\t\t\t\t\t  name: 'person',\n\t\t\t\t\t  props: route => ({ id: parseInt(route.params.id), uid: route.params.uid })  },\n\t\t\t\t\t{ path: 'contract',\n\t\t\t\t\t  component: EmployeeContract,\n\t\t\t\t\t  props: route => ({ id: parseInt(route.params.id), uid: route.params.uid, openhistory: location.href.indexOf(\"#dvhistory\") != -1}) },\n\t\t\t\t\t{ path: 'contract/:dienstverhaeltnis_id',\n\t\t\t\t\t  component: EmployeeContract,\n\t\t\t\t\t  props: route => ({ id: parseInt(route.params.id), uid: route.params.uid, dienstverhaeltnis_id: parseInt(route.params.dienstverhaeltnis_id) })\n\t\t\t\t\t },\n\t\t\t\t\t{ path: 'time', component: EmployeeTime, name: 'time' },\n\t\t\t\t\t{ path: 'lifecycle', component: EmployeeLifeCycle, name: 'lifecycle' },\n\t\t\t\t\t{ path: 'document', component: EmployeeDocument, name: 'document' },\n\t\t\t\t\t{ path: 'summary', component: EmployeeSummary, name: 'summary', props: route => ({ date: route.query.d })},\n\t\t\t\t]\n\t\t    },\n\t\t\t{ path: `/${ciPath}/extensions/FHC-Core-Personalverwaltung/Valorisation/Check/:dienstverhaeltnis_id`, component: ValorisationCheck, props: route => ({ dienstverhaeltnis_id: parseInt(route.params.dienstverhaeltnis_id) })}\n\t\t],\n\t}\n);\n\nHighcharts.setOptions({\n\tlang: {\n\t\tthousandsSep: '.',\n\t\tdecimalPoint: ',',\n\t\tdateFormat: 'dd.mm.YYYY'\n\t}\n  })\n\nconst sprache = Vue.ref([]);\nconst nations = Vue.ref([]);\nconst standorte = Vue.ref([]);\nconst orte = Vue.ref([]);\nconst ausbildung = Vue.ref([]);\nconst kontakttyp = Vue.ref([]);\nconst adressentyp = Vue.ref([]);\nconst sachaufwandtyp  = Vue.ref([]);\nconst karenztypen = Vue.ref([]);\nconst teilzeittypen = Vue.ref([]);\nconst vertragsarten = Vue.ref([]);\nconst vertragsbestandteiltypen = Vue.ref([]);\nconst freitexttypen = Vue.ref([]);\nconst gehaltstypen = Vue.ref([]);\nconst hourlyratetypes = Vue.ref([]);\nconst unternehmen = Vue.ref([]);\nconst beendigungsgruende = Vue.ref([]);\n\nconst pvApp = Vue.createApp({\n\tname: 'PV21Employee',\n\tsetup() {\n\t\t// init shared data\n\t\t\n\n\t\tVue.provide(\"sprache\",sprache);\n\t\tVue.provide(\"nations\",nations);\n\t\tVue.provide(\"standorte\",standorte);\n\t\tVue.provide(\"orte\",orte);\n\t\tVue.provide(\"ausbildung\",ausbildung);\n\t\tVue.provide(\"kontakttyp\",kontakttyp);\n\t\tVue.provide(\"adressentyp\",adressentyp);\n\t\tVue.provide(\"sachaufwandtyp\",sachaufwandtyp);\n\t\tVue.provide(\"karenztypen\",karenztypen);\n\t\tVue.provide(\"teilzeittypen\",teilzeittypen);\n\t\tVue.provide(\"vertragsarten\",vertragsarten);\n\t\tVue.provide(\"vertragsbestandteiltypen\",vertragsbestandteiltypen);\n\t\tVue.provide(\"gehaltstypen\",gehaltstypen);\n\t\tVue.provide(\"freitexttypen\",freitexttypen);\n\t\tVue.provide(\"hourlyratetypes\",hourlyratetypes);\n\t\tVue.provide(\"unternehmen\",unternehmen);\n\t\tVue.provide('beendigungsgruende',beendigungsgruende);\n\t}\n}).use(router);\n\n\npvApp.use(primevue.config.default);\npvApp.use(highchartsPlugin, {tagName: 'highcharts'});\npvApp.use(Phrasen);\npvApp.use(FhcAlert);\npvApp.mount('#wrapper');\n\npvApp.config.globalProperties.$api.call(ApiCommon.getSprache()).then((r) => {\n\tsprache.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getNations()).then((r) => {\n\tnations.value = r.data\n})\n\npvApp.config.globalProperties.$api.call(ApiCommon.getAusbildung()).then((r) => {\n\tausbildung.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getOrte()).then((r) => {\n\torte.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getStandorteIntern()).then((r) => {\n\tstandorte.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getKontakttyp()).then((r) => {\n\tkontakttyp.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getAdressentyp()).then((r) => {\n\tadressentyp.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getSachaufwandTyp()).then((r) => {\n\tsachaufwandtyp.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getKarenztypen()).then((r) => {\n\tkarenztypen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getTeilzeittypen()).then((r) => {\n\tteilzeittypen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getVertragsarten()).then((r) => {\n\tvertragsarten.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getGehaltstypen()).then((r) => {\n\tgehaltstypen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getVertragsbestandteiltypen()).then((r) => {\n\tvertragsbestandteiltypen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getFreitexttypen()).then((r) => {\n\tfreitexttypen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiCommon.getStundensatztypen()).then((r) => {\n\thourlyratetypes.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiDV.getUnternehmen()).then((r) => {\n\tunternehmen.value = r.data\n})\npvApp.config.globalProperties.$api.call(ApiDV.getDvEndeGruende()).then((r) => {\n\tbeendigungsgruende.value = r.data\n}) \n\n\n\n"],"names":["CoreFetchCmpt","emits","props","refresh","type","Boolean","apiFunction","required","Function","apiFunctionParameters","watch","newValue","oldValue","this","fetchData","data","loading","error","errorMessage","created","methods","apiFunctionResult","Promise","then","successHandler","catch","errorHandler","finally","finallyHandler","setError","response","$emit","undefined","retval","message","template","FILTER_COMPONENT_NEW_FILTER","FilterConfig","filters","Array","default","columns","fields","switchFilter","applyFilterConfig","saveCustomFilter","currentFields","computed","types","reduce","a","c","toLowerCase","indexOf","name","n","evt","currentTarget","value","filteredFields","filter","el","condition","length","alert","addField","push","removeField","index","splice","FilterColumns","selected","names","Object","hide","show","selectedFields","toggle","field","DEFAULT_ICONS","jsonLines","xlsx","pdf","html","json","csv","DEFAULT_LABELS","TableDownload","tabulator","config","String","iconClass","currentConfig","prototype","toString","call","split","isArray","newConfig","k","v","stringToFileFormatter","icon","label","formatter","map","validateFileFormatter","input","lcInput","includes","window","XLSX","jspdf","jsPDF","autoTable","download","file","options","elementDataMap","WeakMap","collapseAutoClose","mounted","binding","open","set","contains","target","collapse","bootstrap","Collapse","getInstance","addEventListener","document","get","beforeUnmount","removeEventListener","collapsibleAutoHideFunc","Tabulator","extendModule","fitDataStretchFrozen","forced","colsWidth","tableWidth","table","rowManager","element","clientWidth","gap","lastCol","forEach","column","i","widthFixed","reinitializeWidth","responsiveLayout","modules","responsive","visible","definition","frozen","getWidth","modExists","setWidth","update","ApiFilter","wsParams","method","url","params","filterUniqueId","filterType","customFilterName","removeCustomFilter","filterId","applyFilterFields","filterFields","addFilterField","filterField","removeFilterField","getFilterById","getFilter","_uuid","CoreFilterCmpt","components","directives","onNwNewEntry","title","description","sideMenu","tabulatorOptions","tabulatorEvents","tableOnly","noColumnFilter","reload","reloadBtnInfotext","newBtnShow","newBtnClass","newBtnDisabled","newBtnLabel","uniqueId","idField","parentIdField","countOnly","useSelectionSpan","uuid","filterName","filterActive","dataset","datasetMetadata","availableFilters","selectedFilter","fetchCmptRefresh","fetchCmptApiFunction","fetchCmptApiFunctionParams","fetchCmptDataFetched","fetchResult","tableBuilt","tabulatorHasSelector","selectedData","persistence","sort","headerFilter","group","page","notSelectedFields","x","filteredData","JSON","parse","stringify","filteredColumns","hasOwnProperty","col","resizable","fieldIdsForVisibilty","getColumns","def","getDefinition","getField","fieldNames","res","idExtra","columnsForFilter","filterTitles","reloadTable","setData","initTabulator","placeholder","$p","loadCategory","t","resolve","location","hash","slice","resolvePromiseFunc","setRenderData","startFetchCmpt","$api","layout","movableColumns","columnDefaults","tooltip","height","minHeight","maxHeight","selectable","dataTree","$refs","on","event","handler","toDelete","childIdx","child","appendChild","counter","cols","isVisible","_setHeaderFilter","updateTabulator","_updateTabulator","setColumns","clearFilters","getHeaderFilters","setHeaderFilterValue","clearFilter","render","j","setSideMenu","setDropDownMenu","personalFilters","filtersArray","filtersCount","link","id","filter_id","desc","onClickCall","handlerGetFilterById","subscriptDescription","subscriptLinkClass","subscriptLinkValue","onClickSubscriptCall","handlerRemoveCustomFilter","children","option","dataFetchedCallback","FHC_JS_DATA_STORAGE_OBJECT","called_path","called_method","handlerSaveCustomFilter","getAttribute","substring","attr","parentId","parentIdx","parent","_children","beforeCreate","$props","ApiNavigation","getHeader","navigation_page","getMenu","CoreNavigationCmpt","addHeaderMenuEntries","addSideMenuEntries","hideTopMenu","leftNavCssClasses","headerMenu","headerMenuEntries","hm","keys","sideMenuEntries","sm","getNavigationPage","fetchCmptApiFunctionHeader","fetchCmptApiFunctionSideMenu","fetchCmptDataFetchedHeader","fetchCmptDataFetchedMenu","getDataBsToggle","header","verticalsplit","availHeight","topheight","bottomheight","mousePosY","resize","vsplitter","vsplitterOffset","selfOffsetTop","calcHeights","trackVerticalSplitterOffsetTop","updated","windowheight","innerHeight","oldavailHeight","offsetTop","offsetHeight","Math","floor","collapseTop","collapseBottom","showBoth","isCollapsed","dragStart","e","preventDefault","stopPropagation","dragEnd","drag","clientY","offsetY","topOrBottomClass","topheightcss","bottomheightcss","TemplateAction","action","actionHref","actionFunc","renderif","TemplateFrame","ResultAction","ResultActions","actions","image","imageFallback","person$3","emails","Set","email","room","mode","equipment","replace","RegExp","address","zip","city","street","employee","organisationunit","student","photo_url","foto","prestudent$1","status","stg_kuerzel","dms","mimetype","cms$1","inject","preview","template_kurzbz","text","content","lower","firstOccurence","min","query","posInText","substr","content_url","$fhcApi","getUri","app_root","mergedStudent","ResultPrestudent","ResultStudent","prestudent","list","item","pop","mergedPerson","person","find","person_id","students","idx","arr","some","tmpitem","uid","b","telurl","phone","inaktiv","aktiv","searchbar","cms","provide","Vue","lastQuery","searchtimer","hidetimer","searchsettings","searchstr","getSearchStr","getInitiallySelectedTypes","searchresult","searchmode","showresult","searching","abortController","settingsDropdown","searchTypesPlaceholder","typeLabels","join","values","searchoptions","newSearchValue","origin","sessionStorage","setItem","localStorage","search","settings","console","warn","nextTick","calcSearchResultHeight","clearInput","hideresult","focus","result","localStorageValue","getItem","checkSettingsVisibility","handleShowSettings","handleHideSettings","rect","results","getBoundingClientRect","style","ceil","calcSearchResultExtent","calcheightonly","searchbox","top","bottom","right","width","clearTimeout","abort","setTimeout","callsearchapi","showsearchresult","AbortController","searchfunction","timeout","signal","meta","searchstring","mergeResults","mergeTypes","mergedType","mergeKey","renderer","rank","retry","code","refreshsearch","togglesettings","searchfocusin","searchfocusout","dash2camelCase","string","g","toUpperCase","isValidRenderer","camelCaseRenderer","$","getActions","ApiSearchbar","searchCis","searchStv","categories","loadingModules","extractCategory","obj","category","elem","phrase","reloadRefs","getValueForLoadedPhrase","triggerRef","match","p1","phrasen","t_ref","initialval","FHC_JS_PHRASES_STORAGE_OBJECT","tmp_category","val","ref","axios","ci_router","err","loadLazy","unref","Phrasen$1","p","usePhrasen","CORE_REST_CLIENT_ERROR","CORE_REST_CLIENT_RETVAL","CoreRESTClient","wsURL","wsParameters","axiosParameters","_axiosCall","post","isSuccess","isError","hasData","trim","getData","getError","getErrorCode","_generateRouterURI","uri","_printDebug","parameters","errorThrown","axiosCallObj","prop","protocol_host","searchbaroptions","cssclass","defaultaction","profil","childactions","raum","content_id","ort_kurzbz","operation","oe_kurzbz","href","ModalDialog","expose","setup","emit","thisModalObj","_resolve","modalConfirmEle","onMounted","Modal","async","reject","ok","cancel","ApiPerson","filterPerson","searchVal","personBaseData","updatePersonBaseData","payload","personEmployeeData","updatePersonEmployeeData","personEmployeeKurzbzExists","kurzbz","deletePersonBankData","bankverbindung_id","upsertPersonBankData","personBankData","personAddressData","deletePersonAddressData","adresse_id","upsertPersonAddressData","personContactData","deletePersonContactData","kontakt_id","upsertPersonContactData","uidByPerson","person_uid","personMaterialExpenses","deletePersonMaterialExpenses","sachaufwand_id","upsertPersonMaterialExpenses","deletePersonJobFunction","benutzerfunktion_id","upsertPersonJobFunction","updatePersonUnruly","BaseData","datepicker","VueDatePicker","modelValue","personID","Number","personUID","writePermission","$fhcAlert","readonly","toRefs","theModel","isFetching","dialogRef","sprache","nations","currentValue","handleSystemError","telefonklappe","alias","anrede","titelpre","titelpost","nachname","vorname","vornamen","geschlecht","staatsbuergerschaft","geburtsnation","anmerkung","homepage","preservedValue","currentVal","oldVal","log","toggleMode","hasChanged","confirm","acceptLabel","acceptClass","baseDataFrm","frmState","reactive","nachnameBlured","geburtsdatumBlured","svnrBlured","wasValidated","showToast","alertSuccess","GESCHLECHT","w","m","u","readonlyBlocker","save","checkValidity","updateHeader","validNachname","validGeburtsdatum","validSVNR","svnr","weight","datum","nummer","pruefzahl","sum","svnr_raw","parseInt","charAt","printNation","nation_code","nation_text","printLanguage","languageIndex","findIndex","user_language","bezeichnung","EmployeeData","ausbildung","standorte","orte","validKurzbz","mitarbeiter_uid","personalnummer","lektor","fixangestellt","stundensatz","ausbildungcode","ext_id","bismelden","standort_id","kleriker","habilitation","insertamum","insertvon","updatevon","updateamum","employeeDataFrm","kurzbzBlured","validateKurzbz","msg","getAusbildungbez","ausbildungbez","getStandortbez","noscroll","modalEle","BankData","bankdataList","createShape","anschrift","iban","bic","blz","kontonr","typ","verrechnung","bankdataListArray","modalRef","confirmDeleteRef","hideModal","bankDataFrm","ibanBlured","validIban","isChecksumValid","ASCII_0","charCodeAt","ASCII_A","acc","add","validate","showDeletedToast","showAddModal","bankBlured","okHandler","r","showDeleteModal","showEditModal","ApiCommon","getGemeinden","plz","getOrtschaften","getContractExpire","year","month","getContractNew","getBirthdays","date","getCovidState","d","getAllCourseHours","getAllSupportHours","getNations","getSachaufwandTyp","getKontakttyp","getAdressentyp","getSprache","getAusbildung","getStandorteIntern","getOrte","getKarenztypen","getGehaltstypen","getVertragsarten","getVertragsbestandteiltypen","getTeilzeittypen","getFreitexttypen","getStundensatztypen","AddressData","addressList","isEditActive","currentAddress","adressentyp","gemeinden","ortschaften","watchEffect","nation","addressListArray","addressDataFrm","plzBlured","ortBlured","typBlured","validPLZ","validOrt","validTyp","ort","strasse","gemeinde","heimatadresse","zustelladresse","firma_id","rechnungsadresse","co_name","alertInfo","EmailTelData","contactList","currentContact","kontakttyp","contactListArray","contactDataFrm","kontaktBlured","validKontakt","kontakt","showDeleteToast","zustellung","ContactData","editMode","activeItem","items","isActive","menuItem","setActive","MaterialExpensesData","numberFormat","Intl","NumberFormat","minimumFractionDigits","materialdataList","sachaufwandtyp_kurzbz","beginn","ende","betrag","materialdataListArray","materialDataFrm","beginnBlurred","validBeginn","validBetrag","betragBlurred","getType","formatDate","formatNumber","num","parseFloat","isNaN","format","Toast","thisToastObj","toastEle","backgroundColor","ApiStundensatz","getStundensaetze","deleteStundensatz","stundensatz_id","updateStundensatz","HourlyRateData","hourlyRatedataList","unternehmen","stundensatztyp","gueltig_von","gueltig_bis","houryratedataListArray","houryrateDataFrm","typBlurred","bisBlurred","satzBlurred","unternehmenBlurred","validInput","checkDates","Date","ApiOrgViewer","getOrgStructure","oe","getOrgPersonen","getOrgHeads","OrgChooser","customClass","orgList","oeRef","fetchHead","old","orgSelected","ApiFunktion","getContractFunctions","getOrgetsForCompany","getCompanyByOrget","orget","getCurrentFunctions","getAllUserFunctions","getAllFunctions","JobFunction","readonlyMode","currentPersonID","currentPersonUID","jobfunctionList","jobfunctionDefList","orgUnitList","aktivChecked","tableData","route","VueRouter","useRoute","convertArrayToObject","array","key","rawList","funktion_kurzbz","datum_von","datum_bis","wochenstunden","unternehmen_kurzbz","fetchOrgUnits","fetchFunctions","dateFormatter","cell","getValue","createDomButton","classValue","clickHandler","nodeBtn","createElement","classAttrBtn","createAttribute","setAttributeNode","nodeI","classAttrI","btnFormatter","nodeDiv","classAttrDiv","nodeBtnDel","nodeBtnEdit","getRow","dienstverhaeltnis_unternehmen","columnsDef","fullPath","dienstverhaeltnis_id","sorter","headerFilterParams","valuesLookup","autocomplete","hozAlign","headerFilterFunc","customHeaderFilter","headerSort","reactiveData","jobfunctionListArray","headerValue","rowValue","rowData","filterParams","date1","setHours","day","date2","isFinite","getJobFunction","newVal","deep","jobFunctionFrm","orgetBlurred","funktionBlurred","notEmpty","orgets","unshift","benutzerfunktionen","fachbereich_bezeichnung","funktion_oebezeichnung","funktion_beschreibung","unternehmenSelectedHandler","FhcTabs","tabview","TabView","tabpanel","TabPanel","accessibility","arg","cursor","prev","next","modifiers","vertical","act","parentNode","querySelector","tabIndex","ariaSelected","previousSibling","nextSibling","click","activetab","from","node","ariaSetSize","ariaPosInSet","classList","pos","Symbol","border","useprimevue","current","tabs","currentTab","component","calcActiveIndex","initConfig","handleTabClick","change","$nextTick","_addToTabs","suffix","showSuffix","markRaw","defineAsyncComponent","import","suffixhelper","entries","updateSuffix","getTabSuffix","tab","getSuffix","getTabSuffixes","EmployeePerson","editmode","path","restricted","ApiVertragsbestandteil","getCurrentVBs","dvid","getCurrentAndFutureVBs","URLSearchParams","getAllVBs","getVB","vbid","ApiEmployee","createEmployee","employeeData","personAbteilung","personHeaderData","dvByPerson","getCurrentDV","ts","deleteDV","dv_id","uploadPersonEmployeeFoto","imagedata","deletePersonEmployeeFoto","getEmployeesWithoutContract","dvInfoByPerson","EmployeeStatus","tags","router","useRouter","dvList","vertragList","currentDate","vertragsarten","karenztypen","teilzeittypen","formatVertragsart","va","kt","formatKarenztyp","karenztyp","formatTeilzeittyp","teilzeittyp","statusList","statusTags","generateStatusList","anzDV","dvIDs","dv","von","bis","vertragsart_kurzbz","css","all","dvID","allData","vbs","vertragsbestandteiltyp_kurzbz","freitexttyp_kurzbz","karenztyp_kurzbz","teilzeittyp_kurzbz","isReady","ApiIssue","byPerson","countPersonOpenIssues","checkPerson","openIssuesPersons","EmployeeHeader","primevue","skeleton","fileInput","previewImage","statusRef","isFetchingName","isFetchingIssues","openissuescount","fetchHeaderData","resAbteilung","abteilung","fetchOpenIssuesCount","openissues","$el","resetPreview","showModal","postDeleteFile","pickFile","files","reader","FileReader","onload","readAsDataURL","alertError","postFile","redirect","FHC_JS_CONFIG","getStatusTags","statusArr","unruly","ds","toISOString","EmployeeNav","ciPath","close","maybeAddDate","EmployeeEditor","personid","personuid","isNew","employeeHeaderRef","dateChanged","updateHeaderHandler","SearchExistingDialog","surname","birthdate","personList","surnameRef","personSelectedHandler","take","reset","getDate","getMonth","getFullYear","rest","ApiCheckPerson","updatePersonUnrulyStatus","base","CreateEmployeeFrm","defaultval","defaultvalRef","toRef","gebdatum","createEmployeeFrm","unrulyPersonList","vornameBlured","emailBlured","geschlechtBlured","validVorname","validGeschlecht","validEmail","redirect2Employee","Error","Step","selectedTitle","CreateWizard","Steps","slots","stepTitles","step","selectStep","stepsRef","searchExistingRef","schnellanlageRef","_reject","cancelHandler","showCreateHandler","getSelectedTitle","searchCriteriaHandler","takeHandler","EmployeeHome","Sidebar","isEditorOpen","appSideMenuEntries","verticalsplitRef","createWizardRef","selectRecordHandler","row","PersonId","UID","employeesTabulatorEvents","rows","getElementById","innerHTML","employeesTabulatorOptions","footerElement","formatterParams","tickElement","crossElement","tristate","elementAttributes","headerFilterEmptyCheck","onRendered","onBeforeRouteUpdate","to","newSideMenuEntryHandler","openCreateWizard","debug_viewer","store","tmpstoreid","showmsgs","gueltigkeit","gueltig_ab","getDV","setDV","getDVPayload","addVB","vb","removeVB","getVBsPayload","getMode","setMode","getTmpStoreId","setTmpStoreId","presetable","getSortedChildrenFromPreset","preset","tmpchildren","compareVBorGBgueltigvon","avon","bvon","getTime","Infinity","reverse","vba","vbb","configurable","isinputdisabled","inputname","guioptions","disabled","showinput","hidden","markGBsEnded","gbh","toggledelete","db_delete","setGBsDelete","setDelete","hastobedeleted","isendable","endable","isdeleteable","deleteable","isremoveable","removeable","canhavegehaltsbestandteile","getgehaltsbestandteile","gbs","getgueltigkeit","vbcssclasses","classes","nobottomborder","nobottommargin","initialsharedstatemode","validator","sharedstate","sharedstatemode","mixins","setDataFromSharedSate","setGUIOptionsFromConfig","setDataFromConfig","gueltigkeitchanged","getPayload","changesharedstatemode","markended","tag_vor_aenderung_gueltig_ab","setDate","isdisabled","minDateBis","errors","padleft","padright","getColumnClass","colwidth","infos","gehaltsbestandteil","gehaltstyp","betrag_valorisiert","valorisierung","valorisierungssperre","auszahlungen","isselected","optvalue","selvalue","removeGB","markGBEnded","randomValue","uuidValue","random","gehaltsbestandteilhelper","addGB","gb","parts","childcount","ApiStunden","vertragsbestandteilstunden","stunden","lists","vertragsbestandteilzeitaufzeichnung","zeitaufzeichnung","azgrelevant","homeoffice","vertragsbestandteilfunktion","funktion","benutzerfunktionid","funktionen","selectedfunktion","selectedorget","getFunktionen","resetDropdowns","setAutocompleteFunktion","setAutocompleteOrget","getGehaltsbestandteilePayload","searchFunktionen","that","searchOrgets","getFunktionDropdownPlaceholder","getOrgetDropdownPlaceholder","ApiKarenz","saveKarenz","vertragsbestandteil_karenz","geplanter_geburtstermin","tatsaechlicher_geburtstermin","vertragsbestandteillist","vertragsbestandteiltyp","vertragsbestandteilfreitext","freitexttyp","titel","freitext","kuendigungsrelevant","vertragsbestandteilkuendigungsfrist","arbeitgeber_frist","arbeitnehmer_frist","vertragsbestandteilurlaubsanspruch","tage","vertragsbestandteilkarenz","childdefaults","updateVBsInStore","getChildren","ApiDV","getUnternehmen","getDVByID","endDV","deactivateDV","getDvEndeGruende","dienstverhaeltnis","showdvcheckoverlap","checkoverlap","dvendegrund_kurzbz","dvendegrund_anmerkung","dvendegruende","isconfigured","dienstverhaeltnisid","isaenderung","gueltigkeitaenderung","formheader","getGueltigkeitsAenderung","ApiFreitext","ApiGehaltsbestandteil","gbtByDV","unixdate","gbtChartDataByDV","getGB","gbid","vbformhelper","errorcounts","getErrorsCount","calcErrorCount","errorcount","childuuid","sibling","vblistgroup","tabsspacer","vblistgroupspacer","freitexttypen","gehaltstypen","setScrollBarWidthCSSVar","getJSON","scrollDiv","cssText","body","scrollbarWidth","offsetWidth","removeChild","setProperty","presets_chooser","selectedpresetidx","usedpresets","selectmode","resetSelectedPreset","presets","for_vertragsart_kurzbz","default_for_vertragsart_kurzbz","selectpreset","ApiTmpStore","storeToTmpStore","tmpStoreId","listTmpStoreForMA","mauid","getTmpStoreById","deleteFromTmpStore","tmpstorehelper","selectedtmpstoreidx","tmpstores","fetchTmpStoreList","resetselected","ApiTmpstore","deleteFromTmpStorePromise","saveToTmpStore","selecttmpstore","tmp_store_id","formdata","getTmpStoreLabel","tmpstore","ivorname","inachname","uvorname","unachname","getTmpStoresForModeAndDV","vbgb2gui","today","vbout","vb2gui","isDeleteable","freitext2gui","funktion2gui","karenz2gui","kuendigungsfrist2gui","stunden2gui","urlaubsanspruch2gui","zeitaufzeichnung2gui","gehaltsbestandteile","gehaltsbestandteil2gui","getToday","isFuture","bt","isEndable","gueltigkeit2gui","vertragsbestandteil_id","benutzerfunktiondata","gehaltsbestandteil_id","gehaltstyp_kurzbz","grundbetrag","savedpayloadchecker","vbconfig","btfields","getFieldsForBt","checkpayload","checkvb","checkRemoveable","checkDeleteable","checkEndable","checkDisabled","ApiVertrag","saveForm","dryrun","vertragByDV","vbform_wrapper","vbhjson","spinners","saving","validating","Phrasen","resetStoreDV","resetpreset","changedModeOrCurDV","newval","oldval","resetTmpStoreHelper","curdv","presetselected","presettostore","searchforvbs","vbgui","iterateChilds","childs","handleSaved","handleValidated","handlePresetSelected","handleLoadedFromTmpStore","getTitle","getSaveButtonLabel","enddvmodal","unrulyInternal","enddv","handleDVEnded","resp","saveUnrulyPerson","deletedvmodal","deletedv","dvlabel","karenzmodal","handleKarenzSaved","curkarenz","DropDownButton","links","thisDropDownButtonObj","buttonEle","Dropdown","OffCanvasTimeline","timeline","multiselect","alldv","courseData","showAllDVChecked","currentUID","vbsData","events","isHidden","thisOffCanvasObj","offCanvasEle","selectedVBSTypen","selectedGBSTypen","vertragsbestandteiltypen","currentSemester","y","semesterString","hiddenCanvasHandler","shownCanvasHandler","generateTimeline","getBestandteilLabel","freitexttypMap","allin","ersatzarbeitskraft","zusatzvereinbarung","befristung","sonstiges","getFreitextLabel","getGehaltsbestandteilLabel","gbsTyp","gbstypMap","basisgehalt","grundgehalt","zulage","praemie","GRUNDGEHALT","PRAEMIE","UEBERSTUNDEN","SONSTIGES","isVBSFiltered","vbsType","isGBSFiltered","gbsType","bestandteile","start","mergeTimelineData","Offcanvas","onBeforeUnmount","dateSelected","colorPalette","ApiValorisierungCheck","getDvData","getValorisierungCheckData","checkValorisationValidityOfDv","redoValorisation","EmployeeContract","openhistory","gbtList","gbtChartData","currentDVID","currentDV","dvSelectedIndex","currentVBS","zuordnung","taetigkeit","kuendigungsfrist","allIn","urlaubsanspruch","karenz","VbformWrapperRef","vbformmode","vbformDV","enddvmodalRef","deletedvmodalRef","delDV","karenzmodalRef","curKarenz","openhistoryFlag","truncateDate","now","confirmDeleteDVRef","offCanvasRef","beendigungsgruende","valorisationValid","convert2UnixTS","round","chartOptions","lang","thousandsSep","chart","series","color","xAxis","currentDateIndicator","dashStyle","labels","Highcharts","dateFormat","rotation","pointFormat","xDateFormat","yAxis","credits","enabled","fetchVertrag","getCurrentVertragsbestandteil","fetchGBT","fetchGBTChartData","tempData1","tempData2","tempData3","valorisiert","gesamt","abgerechnet","activeDV","isCurrentDVActive","isCurrentDate","checkValorisation","showOffCanvas","newDate","capitalize","s","ApiValorisierungscheck","valorisationCheckPath","dvSelectedHandler","selectedIndex","dropdownLink1","setDateHandler","dvDeleteHandler","formatGBTGrund","fkt_beschreibung","fb_bezeichnung","org_bezeichnung","freitext_titel","truncate","setDate2BisDatum","setDate2VonDatum","createDVDialog","updateDVDialog","korrekturDVDialog","handleDvSaved","formatDateISO","padNum","endDVDialog","handleDvEnded","handleUpdateUnruly","dateSelectedHandler","karenzDialog","formatFreitexttyp","linkToLehrtaetigkeitsbestaetigungODT","linkToLehrtaetigkeitsbestaetigungPDF","formatBeendigungsgrund","deleteDVDialog","oe_bezeichnung","handleDvDeleted","go","DvCard","dvData","fetchCurrentDV","LehreCard","calcSemester","fetchCourseHours","studiensemester_kurzbz","semesterstunden","fetchSupportHours","incSemester","startsWith","decSemester","IssuesCard","issues","fetchIssues","getBehebungData","issue","behebungParam","behebung_parameter","behebung_data","dvs","formatVertragsbestandteiltyp","formatGehaltstyp","ApiZeit","personAbwesenheiten","personAbwesenheitenByYear","personZeiterfassungByWeek","week","OffTimeCard","offTimeList","fetchOffTimeList","ApiDeadline","allByPerson","updateFristenListe","updateFristStatus","frist_id","status_kurzbz","batchUpdateFristStatus","fristen","upsertFrist","frist","deleteFrist","getFristenStatus","getFristenEreignisse","getFristenEreignisseManuell","DeadlineIssueDialog","defineExpose","toRaw","fristStatus","fristEreignisse","fhcAlert","fetchFristStatus","fetchFristEreignisse","fristDataFrm","ereignisBlurred","bezeichnungBlurred","datumBlurred","validEreignis","validBezeichnung","validDatum","f","ereignis_kurzbz","DeadlineIssueTable","isFristFetching","currentFrist","modalContainer","fetchList","fristenTable","dataLoader","alertLoader","deadline_filter_all","clearAlert","fristStatusList","getFristEreignisBezeichnung","addDeadline","fristPayload","showCreateToast","editDeadline","fristClone","status_bezeichnung","ma_name","ereignis_bezeichnung","manuell","modalTitel","current_status_kurzbz","onTableCellEdited","getIndex","titleFormatter","titleFormatterParams","rowRange","headerHozAlign","maxWidth","minWidth","editor","editorParams","container","className","button","append","rowFormatter","getElement","childNodes","fontWeight","onPersonSelect","updateDeadlines","statusChanged","updateStatus","getSelectedData","addData","handleDeadlineFilterAllChanged","EmployeeSummary","newId","OffTime","currentYear","offTimeTable","dateFromHourFormatter","vonstunde","dateToHourFormatter","bisstunde","TimeRecording","currentWeek","startDate","days","calcWeekNumber","timeRecordList","fetchTimeRecordingList","extractTime","temp","getHours","getMinutes","getWeekday","toLocaleDateString","weekday","EmployeeTime","EmployeeLifeCycle","EmployeeDocument","searchAdvanced","searchdummy","phrasen$1","setLanguage","language","getLanguage","getActiveDbLanguages","navigation","filter$1","studstatus","abmeldung","getDetails","antrag_id","prestudent_id","create","stdsem","grund","studiensemester","errorHandling","allSettled","antrag","studierendenantrag_id","errorHeader","unterbrechung","datum_wiedereinstieg","attachment","wiederholung","getLvs","saveLvs","forbiddenLvs","mandatoryLvs","leitung","getStgs","getAntraege","getHistory","getPrestudents","approve","reopen","pause","unpause","object","approveObjection","denyObjection","getView","fotoSperre","isStudent","isMitarbeiter","getZustellAdresse","getZustellKontakt","getAllNationen","profilUpdate","getStatus","getTopic","acceptProfilRequest","profil_update_id","status_message","topic","requested_change","denyProfilRequest","insertFile","getProfilRequestFiles","requestID","selectProfilRequest","insertProfilRequest","fileID","updateProfilRequest","ID","deleteProfilRequest","lvPlan","getRoomInfo","start_date","end_date","getStunden","getOrtReservierungen","getLvPlanReservierungen","getLehreinheitStudiensemester","lehreinheit_id","studiensemesterDateInterval","LvPlanEvents","lv_id","stv","verband","favorites","encodeURIComponent","relative_path","getStg","setStg","studiengang_kz","konto","tabulatorConfig","self","ajaxURL","ajaxParams","only_open","studiengang_kz_intern","stg_kz","ajaxRequestFunc","ajaxResponse","checkDoubles","form","confirmErrorHandler","insert","edit","delete","buchungsnr","getBuchungstypen","getGruppen","deleteGroup","getAdressen","addNewAddress","loadAddress","address_id","updateAddress","deleteAddress","getPlaces","getFirmen","searchString","getAdressentypen","getBankverbindung","addNewBankverbindung","loadBankverbindung","updateBankverbindung","deleteBankverbindung","getKontakte","addNewContact","loadContact","updateContact","deleteContact","getStandorteByFirma","getKontakttypen","updatePrestudent","getBezeichnungZGV","getBezeichnungMZgv","getBezeichnungDZgv","getAufmerksamdurch","getBerufstaetigkeit","getTypenStg","getBisstandort","getHistoryPrestudent","getMaxSem","studiengang_kzs","advanceStatus","ausbildungssemester","confirmStatus","isLastStatus","deleteStatus","getLastBismeldestichtag","getHistoryPrestudents","insertStatus","loadStatus","getStudienplaene","getStudiengang","getStatusgruende","getStati","addStudent","changeStatus","getStatusarray","details","exam","getPruefungen","loadPruefung","pruefung_id","getTypenPruefungen","getAllLehreinheiten","getLvsByStudent","getLvsandLesByStudent","semester","getLvsAndMas","getMitarbeiterLv","getNoten","checkZeugnisnoteLv","addPruefung","updatePruefung","deletePruefung","abschlusspruefung","getAbschlusspruefung","addNewAbschlusspruefung","loadAbschlusspruefung","updateAbschlusspruefung","deleteAbschlusspruefung","getTypenAbschlusspruefung","getTypenAntritte","getBeurteilungen","getAkadGrade","getTypStudiengang","getMitarbeiter","getPruefer","checkForExistingExams","uids","grades","getCertificate","getTeacherProposal","getRepeaterGrades","updateCertificate","lehrveranstaltung_id","student_uid","note","lehrveranstaltung_bezeichnung","deleteCertificate","copyTeacherProposalToCertificate","copyRepeaterGradeToCertificate","studierendenantrag_lehrveranstaltung_id","lv_bezeichnung","getGradeFromPoints","points","manualErrorHandling","mobility","getMobilitaeten","getProgramsMobility","addNewMobility","loadMobility","bisio_id","updateMobility","deleteMobility","getLVList","getPurposes","getSupports","getListPurposes","getListSupports","deleteMobilityPurpose","addMobilityPurpose","deleteMobilitySupport","addMobilitySupport","archiv","getArchivVorlagen","archive","archiveSigned","akte_id","documents","getDocumentsUnaccepted","getDocumentsAccepted","deleteZuordnung","dokument_kurzbz","createZuordnung","loadAkte","getDoktypen","updateFile","deleteFile","uploadFile","exemptions","getAnrechnungen","getLehrveranstaltungen","getBegruendungen","getLvsKompatibel","getLektoren","addNewAnrechnung","loadAnrechnung","anrechnung_id","editAnrechnung","deleteAnrechnung","jointstudies","getStudies","getTypenMobility","getStudiensemester","getStudyprograms","getListPartner","getStatiPrestudent","loadStudy","insertStudy","updateStudy","deleteStudy","courselist","getCourselist","group_consecutiveHours","dbStundenplanTable","configStudent","configStudents","notiz","getNotizen","getUid","addNewNotiz","formData","loadNotiz","notiz_id","loadDokumente","deleteNotiz","type_id","updateNotiz","isBerechtigt","betriebsmittel","getAllBetriebsmittel","addNewBetriebsmittel","loadBetriebsmittel","betriebsmittelperson_id","updateBetriebsmittel","deleteBetriebsmittel","getTypenBetriebsmittel","loadInventarliste","checkperson","unrulyParam","getContentID","ort_kurbz","getRooms","personenanzahl","getRoomTypes","version","sichtbar","getNews","page_size","news","limit","getNewsRowCount","getNewsExtra","lehre","getStudentenMail","getLvInfo","getStudentPruefungen","getStudentProjektarbeiten","getStudentProjektabgaben","detail","projektarbeit_id","postStudentProjektarbeitEndupload","Headers","postStudentProjektarbeitZwischenabgabe","getStudentProjektarbeitAbgabeFile","paabgabe_id","getMitarbeiterProjektarbeiten","postProjektarbeitAbgabe","termin","paabgabetyp_kurzbz","fixtermin","deleteProjektarbeitAbgabe","postSerientermin","projektarbeit_ids","fetchDeadlines","addons","getLvMenu","lvid","messages","getMessages","size","getVorlagen","getMsgVarsLoggedInUser","getMessageVarsPerson","getMsgVarsPrestudent","getPersonId","getDataVorlage","vorlage_kurzbz","getNameOfDefaultRecipient","getPreviewText","getReplyData","messageId","sendMessageFromModalContext","sendMessage","deleteMessage","vorlagen","getVorlagenByLoggedInUser","studium","getAllStudienSemester","studiengang","studienplan","getStudiengaengeForStudienSemester","getStudienplaeneBySemester","getLvPlanForStudiensemester","getLvEvaluierungInfo","FhcApiFactory","dashboard","getViewData","bookmark","getBookmarks","bookmark_id","tag","ampeln","ampel_id","studiengangInformation","getStudiengangByKz","menu","authinfo","getAuthUID","getAuthInfo","getAll","OldFhcApi","install","app","globalProperties","factory","addEndpoints","_get_config","TypeError","clearValidation","setFeedback","_clean_return_value","fhcApiAxios","baseURL","interceptors","request","use","FormData","every","FileList","File","newData","nd","jsondata","_defaultErrorHandlers","handled","alertDefault","responseURL","validation","apply","general","php","filename","line","backtrace","function","severity","alertSystemError","exception","class","db","heading","sql","auth","controller","required_permissions","FhcApiFactoryWrapper","constructor","factorypart","root","defineProperty","noWarn","bind","helperAppContainer","helperApp","createApp","PvToast","PvConfirm","mailToUrl","slotProps","systemerror_mailto","openMessagecard","getOrCreateInstance","unmounted","parentElement","showmaillink","PvConfig","PvConfirmationService","helperAppInstance","mount","FhcAlert","FhcPhrasen","toast","summary","life","alertWarning","confirmDelete","$confirm","require","rejectLabel","rejectClass","accept","sticky","alertMultiple","messageArray","errMsg","stack","handleSystemMessage","resetFormValidation","Event","querySelectorAll","dispatchEvent","handleFormValidation","nodeType","Node","ELEMENT_NODE","notFound","CustomEvent","PluginsApi","_send_array_or_object","func","errs","DEFAULT_ERROR_CONFIG","success","fail","combine","_format_toast","_default","msgs","n_errors","get_config","clean_return_value","_merge_error_config","get_error_handler","formHandler","get_error_list","popHandleableErrors","copy","newType","newTypeCombinesType","newTypeHasHandler","errorConfig","remaining","configoverwrite","typedErrors","allowed","reason","errType","getErrorHandler","ApiPhrasen","user_locale","server_languages","LC_Time","catArray","cat","formatDateGerman","matches","formatCurrencyGerman","amount","maximumFractionDigits","ValorisationCheck","valorisierungCheckData","viewedValorisierungMethod","getAllData","handleErrors","showMethodenInfo","infoModalRef","getFHCUrl","valorisierungCheckDataArr","dataArr","localeCompare","finalCalculatedValorisations","valorisations","latestDate","lastBetrag","calculated_betrag_valorisiert","dienstverhaeltnisInfo","vertragsart","dienstverhaeltnisSums","sums","saved","calculated","final_betrag_valorisiert","valorisierungValid","valData","methodIdx","historie_betrag_valorisiert","createRouter","history","createWebHistory","routes","setOptions","decimalPoint","sachaufwandtyp","hourlyratetypes","pvApp","highchartsPlugin","tagName"],"mappings":"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"}