{"version":3,"file":"IssueViewer.js","sources":["../../../../../extensions/FHC-Core-Personalverwaltung/js/apps/IssueViewerTabulatorSetup.js","../../../../../js/components/Fetch.js","../../../../../js/components/filter/Filter/Config.js","../../../../../js/components/filter/Filter/Columns.js","../../../../../js/components/filter/Table/Download.js","../../../../../js/directives/collapseAutoClose.js","../../../../../js/tabulator/layouts/fitDataStretchFrozen.js","../../../../../js/api/factory/filter.js","../../../../../js/components/filter/Filter.js","../../../../../js/api/factory/navigation.js","../../../../../js/components/navigation/Navigation.js","../../../../../extensions/FHC-Core-Personalverwaltung/js/apps/IssueViewer.js"],"sourcesContent":["/**\n * Copyright (C) 2023 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const IssueViewerTabulatorOptions = {\n\theight: 700,\n\tlayout: 'fitColumns',\n\tcolumns: [\n\t\t{title: 'Datum', field: 'Datum', headerFilter: true, formatter:\n\t\t\tfunction(cell){\n\t\t\t\treturn cell.getValue().replace(/(.*)-(.*)-(.*)\\s(.*)/, '$3.$2.$1 $4');\n\t\t\t}\n\t\t},\n\t\t{title: 'Fehlercode', field: 'Fehlercode', headerFilter: true},\n\t\t{title: 'Inhalt', field: 'Inhalt', headerFilter: true},\n\t\t{title: 'Vorname', field: 'Vorname', headerFilter: true},\n\t\t{title: 'Nachname', field: 'Nachname', headerFilter: true},\n\t\t{title: 'Person Id', field: 'PersonId', headerFilter: true},\n\t\t{title: 'Statuscode', field: 'Statuscode', headerFilter: true},\n\t\t{title: 'Verarbeitet von', field: 'Verarbeitet von', headerFilter: true},\n\t\t{title: 'Verarbeitet am', field: 'Verarbeitet am', headerFilter: true},\n\t\t{title: 'Issue Id', field: 'IssueId', headerFilter: true},\n\t\t{title: 'Fehlertyp', field: 'Fehlertyp', headerFilter: true}\n\t],\n\trowFormatter: function(row) {\n\t\tlet data = row.getData(); // get data for this row\n\n\t\t// If data is not null and provides the property Fehlertyp and it is not null\n\t\tif (data != null && data.hasOwnProperty('Fehlertyp') && data.Fehlertyp != null)\n\t\t{\n\t\t\tlet fehlertyp = data.Fehlertyp;\n\t\t\tlet statuscode = data.Statuscode;\n\n\t\t\t// color errors and warnings\n\t\t\tif (statuscode == \"resolved\")\n\t\t\t{\n\t\t\t\trow.getElement().style.color = \"green\";\n\t\t\t}\n\t\t\telse if (fehlertyp == \"error\")\n\t\t\t{\n\t\t\t\trow.getElement().style.color = \"red\";\n\t\t\t}\n\t\t\telse if (fehlertyp == \"warning\")\n\t\t\t{\n\t\t\t\trow.getElement().style.color = \"orange\";\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n *\n */\nexport const IssueViewerTabulatorEventHandlers = [\n\t{\n\t\t// show issue text on row click\n\t\tevent: \"rowClick\",\n\t\thandler: function(e, row) {\n\t\t\talert(row.getData().Inhalt);\n\t\t}\n\t}\n];\n\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport const CoreFetchCmpt = {\n\temits: ['dataFetched'], // this component can emit the event dataFetched that it is catched by this component itself\n\tprops: {\n\t\trefresh: { // to refresh this component\n\t\t\ttype: Boolean\n\t\t},\n\t\tapiFunction: { // the function to call, must return a Promise\n\t\t\trequired: true,\n\t\t\ttype: Function\n\t\t},\n\t\tapiFunctionParameters: {} // parameters for the apiFunction, type mixed, optional\n\t},\n\twatch: {\n\t\t/**\n\t\t * If the refresh property is changed then call fetchData\n\t\t */\n\t\trefresh: function (newValue, oldValue) {\n\t\t\tthis.fetchData();\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tloading: false, // if in loading or not\n\t\t\terror: false, // if an error occurred while loading data\n\t\t\terrorMessage: null // the error message\n\t\t};\n\t},\n\tcreated: function() {\n\t\tthis.fetchData();\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchData: function() {\n\t\t\tthis.loading = true; // loader started\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = null;\n\n\t\t\t// Checks if the apifunction is a callable function\n\t\t\tif (typeof this.apiFunction == \"function\")\n\t\t\t{\n\t\t\t\t// Call the function stored in apiFunction\n\t        \t\tlet apiFunctionResult = this.apiFunction(this.apiFunctionParameters);\n\n\t\t\t\t// It is expected that the function returns a Promise\n\t\t\t\tif (apiFunctionResult instanceof Promise)\n\t\t\t\t{\n\t\t\t\t\tapiFunctionResult\n\t\t\t\t\t\t.then(this.successHandler) // on success\n\t\t\t\t\t\t.catch(this.errorHandler) // on error\n\t\t\t\t\t\t.finally(this.finallyHandler); // finally in any case\n\t\t\t\t}\n\t\t\t\telse // otherwise display an error\n\t\t\t\t{\n\t\t\t\t\tthis.setError(\"The called apiFunction does not return a Promise\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // otherwise display an error\n\t\t\t{\n\t\t\t\tthis.setError(\"Property apiFunction is not a function\");\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsetError: function(errorMessage) {\n\t\t\tthis.loading = false; // loading ended\n\t\t\tthis.error = true; // error occurred\n\t\t\tthis.errorMessage = errorMessage; // save the error message\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsuccessHandler: function(response) {\n\t\t\tthis.$emit('dataFetched', response ? response.data : undefined); // trigger the event dataFetched\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\terrorHandler: function(error) {\n\t\t\tif (error.response?.data?.retval)\n\t\t\t\tthis.setError(error.response.data.retval);\n\t\t\telse if (error.data?.message)\n\t\t\t\tthis.setError(error.data.message);\n\t\t\telse\n\t\t\t\tthis.setError(error.message);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfinallyHandler: function() {\n\t\t\tthis.loading = false; // loading ended\n\t\t}\n\t},\n\ttemplate: `\n\t\t<slot v-if=\"loading\" name=\"loading\">\n\t\t\t<div class=\"fetch-loader\">Loading...</div>\n\t\t</slot>\n\t\t<slot v-else-if=\"error\" name=\"error\" :error-message=\"errorMessage\">\n\t\t\t<div class=\"fetch-error\">{{ errorMessage }}</div>\n\t\t</slot>\n\t\t<slot v-else></slot>\n\t`\n};\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfilters: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tcolumns: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\temits: {\n\t\tswitchFilter: ['filterId'],\n\t\tapplyFilterConfig: ['filterFields'],\n\t\tsaveCustomFilter: ['customFilterName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tcurrentFields: []\n\t\t};\n\t},\n\tcomputed: {\n\t\ttypes() {\n\t\t\treturn this.columns.reduce((a,c) => {\n\t\t\t\tlet type = c.type.toLowerCase();\n\t\t\t\tif (type.indexOf('int') >= 0)\n\t\t\t\t\ta[c.name] = 'Numeric';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('varchar') >= 0 || \n\t\t\t\t\ttype.indexOf('text') >= 0 || \n\t\t\t\t\ttype.indexOf('bpchar') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Text';\n\t\t\t\telse if (\n\t\t\t\t\ttype.indexOf('timestamp') >= 0 || \n\t\t\t\t\ttype.indexOf('date') >= 0\n\t\t\t\t)\n\t\t\t\t\ta[c.name] = 'Date';\n\t\t\t\telse\n\t\t\t\t\ta[c.name] = '';\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t}\n\t},\n\twatch: {\n\t\tfields(n) {\n\t\t\tthis.currentFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\tswitchFilter(evt) {\n\t\t\tthis.$emit('switchFilter', evt.currentTarget.value);\n\t\t},\n\t\tapplyFilterConfig() {\n\t\t\tconst filteredFields = this.currentFields.filter(el => el.name != FILTER_COMPONENT_NEW_FILTER);\n\t\t\tif (filteredFields.filter(el => el.condition == \"\").length)\n\t\t\t\talert(\"Please fill all the filter options\");\n\t\t\telse\n\t\t\t\tthis.$emit('applyFilterConfig', filteredFields);\n\t\t},\n\t\taddField(evt) {\n\t\t\tthis.currentFields.push({\n\t\t\t\tname: FILTER_COMPONENT_NEW_FILTER\n\t\t\t});\n\t\t},\n\t\tremoveField(index) {\n\t\t\tthis.currentFields.splice(index, 1);\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-config\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"card-body\">\n\t\t\t\t<div v-if=\"filters.length\" class=\"mb-4\">\n\t\t\t\t\t<select class=\"form-select\" @change=\"switchFilter\">\n\t\t\t\t\t\t<option value=\"\">Bitte auswählen...</option>\n\t\t\t\t\t\t<option v-for=\"filter in filters\" :value=\"filter.id\">\n\t\t\t\t\t\t\t{{ filter.description }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"btn btn-outline-dark\" type=\"button\" @click=addField>\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span> Neuer Filter\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filter-config-fields my-3\">\n\t\t\t\t\t<div v-for=\"(filterField, index) in currentFields\" class=\"filter-config-field row\">\n\n\t\t\t\t\t\t<div class=\"col-5\">\n\t\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t\t<span class=\"input-group-text\">Filter {{ index + 1 }}</span>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tclass=\"form-select\"\n\t\t\t\t\t\t\t\t\tv-model=\"filterField.name\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Feld zum Filter hinzufügen...</option>\n\t\t\t\t\t\t\t\t\t<option v-for=\"col in columns\" :value=\"col.name\">\n\t\t\t\t\t\t\t\t\t\t{{ col.title }}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Numeric -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Numeric'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Text'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"equal\">Gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nequal\">Nicht gleich</option>\n\t\t\t\t\t\t\t\t\t<option value=\"contains\">Enthält</option>\n\t\t\t\t\t\t\t\t\t<option value=\"ncontains\">Enthält nicht</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<!-- Timestamp and date -->\n\t\t\t\t\t\t<template v-if=\"types[filterField.name] == 'Date'\">\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.operation\">\n\t\t\t\t\t\t\t\t\t<option value=\"gt\">Größer als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"lt\">Weniger als</option>\n\t\t\t\t\t\t\t\t\t<option value=\"set\">Eingestellt ist</option>\n\t\t\t\t\t\t\t\t\t<option value=\"nset\">Eingestellt nicht ist</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-1\">\n\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" v-model=\"filterField.condition\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"col-2\">\n\t\t\t\t\t\t\t\t<select class=\"form-select\" v-model=\"filterField.option\">\n\t\t\t\t\t\t\t\t\t<option value=\"minutes\">Minuten</option>\n\t\t\t\t\t\t\t\t\t<option value=\"hours\">Stunden</option>\n\t\t\t\t\t\t\t\t\t<option value=\"days\">Tage</option>\n\t\t\t\t\t\t\t\t\t<option value=\"months\">Monate</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\n\t\t\t\t\t\t<div class=\"col text-end\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"btn btn-outline-dark\"\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"removeField(index)\"\n\t\t\t\t\t\t\t\ttitle=\"Filter entfernen\"\n\t\t\t\t\t\t\t\taria-title=\"Filter entfernen\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa-solid fa-minus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Filter save options -->\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-7\">\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<input ref=\"filterName\" type=\"text\" class=\"form-control\" placeholder=\"Filternamen eingeben...\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-secondary\" @click=\"$emit('saveCustomFilter', $refs.filterName.value)\">Filter speichern</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col\">\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-outline-dark\" @click=\"applyFilterConfig\">Filter anwenden</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\tfields: Array,\n\t\tselected: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t},\n\t\tnames: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t}\n\t},\n\temits: {\n\t\thide: ['fieldName'],\n\t\tshow: ['fieldName']\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tselectedFields: []\n\t\t};\n\t},\n\twatch: {\n\t\tselected(n) {\n\t\t\tthis.selectedFields = n;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle(field) {\n\t\t\tif (this.selectedFields.indexOf(field) != -1)\n\t\t\t{\n\t\t\t\tthis.selectedFields.splice(this.selectedFields.indexOf(field), 1);\n\t\t\t\tthis.$emit('hide', field);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.selectedFields.push(field);\n\t\t\t\tthis.$emit('show', field);\n\t\t\t}\n\t\t}\n\t},\n\ttemplate: `\n\t<div class=\"filter-columns\">\n\t\t<div class=\"card\">\n\t\t\t<div class=\"d-flex flex-wrap gap-2 p-3 justify-content-center\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"fieldToDisplay in fields\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:class=\"selectedFields.indexOf(fieldToDisplay) != -1 ? 'btn-dark' : 'btn-outline-dark' \"\n\t\t\t\t\t@click=\"toggle(fieldToDisplay)\"\n\t\t\t\t>\n\t\t\t\t\t{{ names[fieldToDisplay] || fieldToDisplay }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n\n","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_ICONS = {\n\tjsonLines: 'fa-file-lines',\n\txlsx: 'fa-file-excel',\n\tpdf: 'fa-file-pdf',\n\thtml: 'fa-file-code',\n\tjson: 'fa-file',\n\tcsv: 'fa-file-csv'\n};\nconst DEFAULT_LABELS = {\n\tjsonLines: 'Download as JSONLINES',\n\txlsx: 'Download as XLSX',\n\tpdf: 'Download as PDF',\n\thtml: 'Download as HTML',\n\tjson: 'Download as JSON',\n\tcsv: 'Download as CSV '\n};\n\n\n/**\n *\n */\nexport default {\n\tprops: {\n\t\ttabulator: Object,\n\t\tconfig: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\ticonClass: [String, Array, Object]\n\t},\n\tcomputed: {\n\t\tcurrentConfig() {\n\t\t\tif (!this.config)\n\t\t\t\treturn false;\n\n\t\t\tlet config = this.config;\n\n\t\t\tif (config instanceof Function)\n\t\t\t\treturn [config];\n\n\t\t\tif (config === null)\n\t\t\t\treturn [];\n\n\t\t\tif (this.config === true)\n\t\t\t\tconfig = ['csv'];\n\n\t\t\tif (Object.prototype.toString.call(config) === \"[object String]\")\n\t\t\t\tconfig = config.split(',');\n\n\t\t\tif (typeof config === 'object' && !Array.isArray(config)) {\n\t\t\t\tlet newConfig = [];\n\t\t\t\tfor (var k in config) {\n\t\t\t\t\tvar v = config[k], type;\n\t\t\t\t\t\n\t\t\t\t\tif (!v)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\n\t\t\t\t\tif (Object.prototype.toString.call(v) === \"[object String]\") {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(v);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: v === k ? DEFAULT_LABELS[type] : k,\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\t\tif(type !== null) {\n\t\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert('neither ' + k + ' nor ' + v + ' are supported download file types');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (typeof v === 'object' && !Array.isArray(v)) {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tif (v.formatter === undefined)\n\t\t\t\t\t\t\t\tv.formatter = type;\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = DEFAULT_LABELS[type];\n\t\t\t\t\t\t\tif (v.icon === undefined)\n\t\t\t\t\t\t\t\tv.icon = DEFAULT_ICONS[type];\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (v.label === undefined)\n\t\t\t\t\t\t\t\tv.label = k;\n\t\t\t\t\t\t\tnewConfig.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttype = this.stringToFileFormatter(k);\n\t\t\t\t\t\tif (type !== null) {\n\t\t\t\t\t\t\tnewConfig.push({\n\t\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[type],\n\t\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[type],\n\t\t\t\t\t\t\t\tformatter: type\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\talert(k + ' is not a supported download file type');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconfig = newConfig;\n\t\t\t}\n\n\t\t\tif (Array.isArray(config))\n\t\t\t{\n\t\t\t\tconfig = config.map(el => {\n\t\t\t\t\tif (Object.prototype.toString.call(el) === \"[object String]\") {\n\t\t\t\t\t\tlet formatter = this.stringToFileFormatter(el);\n\t\t\t\t\t\tif (formatter === null)\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ticon: 'fa-solid ' + DEFAULT_ICONS[formatter],\n\t\t\t\t\t\t\tlabel: DEFAULT_LABELS[formatter],\n\t\t\t\t\t\t\tformatter\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (el instanceof Function)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tformatter: el\n\t\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (typeof el === 'object' && !Array.isArray(el) && el !== null) {\n\t\t\t\t\t\tif (el.formatter instanceof Function)\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\tif (this.validateFileFormatter(el.formatter))\n\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn null;\n\t\t\t\t}).filter(el => el !== null);\n\n\t\t\t\tif (config.length < 2)\n\t\t\t\t\treturn config;\n\n\t\t\t\tif (config.filter(el => el.label || el.icon).length == config.length)\n\t\t\t\t\treturn config;\n\n\t\t\t\talert('Config not valid');\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\tmethods: {\n\t\tstringToFileFormatter(input) {\n\t\t\tlet lcInput = input.toLowerCase();\n\t\t\t\n\t\t\tif (lcInput == 'jsonlines')\n\t\t\t\treturn 'jsonLines';\n\t\t\t\n\t\t\tif (['xlsx', 'pdf', 'html', 'json', 'csv'].includes(lcInput))\n\t\t\t\treturn lcInput;\n\n\t\t\treturn null;\n\t\t},\n\t\tvalidateFileFormatter(input) {\n\t\t\tlet formatter = this.stringToFileFormatter(input);\n\t\t\tif (!formatter) {\n\t\t\t\talert(input + ' is not a supported file formatter');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (formatter == 'xlsx') {\n\t\t\t\tif (!window.XLSX) {\n\t\t\t\t\talert('XLSX Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formatter == 'pdf') {\n\t\t\t\tif (!window.jspdf) {\n\t\t\t\t\talert('jsPDF Library not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar doc = new jspdf.jsPDF({});\n\t\t\t\tif (!doc.autoTable) {\n\t\t\t\t\talert('jsPDF-AutoTable Plugin not loaded');\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tdownload(config) {\n\t\t\tthis.tabulator.download(config.formatter, config.file, config.options)\n\t\t}\n\t},\n\ttemplate: `\n\t<template v-if=\"currentConfig\">\n\t\t<template v-if=\"currentConfig.length == 1\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\t@click.prevent=\"download(currentConfig[0])\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</template>\n\t\t<div v-else class=\"dropdown d-inline\">\n\t\t\t<a\n\t\t\t\thref=\"#\"\n\t\t\t\tclass=\"table-download\"\n\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\ttitle=\"Download\"\n\t\t\t\taria-title=\"Download\"\n\t\t\t\trole=\"button\"\n\t\t\t\tdata-bs-toggle=\"dropdown\"\n\t\t\t\taria-expanded=\"false\"\n\t\t\t>\n\t\t\t\t<span :class=\"iconClass || 'fa-solid fa-xl fa-download'\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t\t<ul class=\"dropdown-menu dropdown-menu-end\">\n\t\t\t\t<li v-for=\"(conf, i) in currentConfig\" :key=\"i\">\n\t\t\t\t\t<a class=\"dropdown-item\" href=\"#\" @click.prevent=\"download(conf)\">\n\t\t\t\t\t\t<span v-if=\"conf.icon\" :class=\"conf.icon\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{conf.label}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</template>\n\t`\n};\n\n","const elementDataMap = new WeakMap();\n\nexport default {\n\tmounted(el, binding) {\n\t\tlet open = false;\n\t\telementDataMap.set(el, evt => {\n\t\t\tif (!open)\n\t\t\t\treturn;\n\n\t\t\tif (el.contains(evt.target))\n\t\t\t\treturn;\n\n\t\t\tconst collapse = bootstrap.Collapse.getInstance(el)\n\t\t\tif (collapse)\n\t\t\t\tcollapse.hide();\n\t\t});\n\t\tel.addEventListener('shown.bs.collapse', () => {\n\t\t\topen = true;\n\t\t});\n\t\tel.addEventListener('hide.bs.collapse', () => {\n\t\t\topen = false;\n\t\t});\n\t\tdocument.addEventListener('click', elementDataMap.get(el), true);\n\t},\n\tbeforeUnmount(el, binding) {\n\t\tdocument.removeEventListener('click', elementDataMap.get(el));\n\t\tdelete el.collapsibleAutoHideFunc;\n\t}\n}","/**\n * This may need changes if Tabulator gets updated!\n *\n * Current working Version: 5.5.2\n * \n * This is a copy of the fitDataStretch function. The only difference\n * is the check for frozen columns on line 22.\n */\n\nexport default window.Tabulator?.extendModule(\"layout\", \"modes\", {\n\tfitDataStretchFrozen(columns, forced) {\n\t\tvar colsWidth = 0,\n\t\ttableWidth = this.table.rowManager.element.clientWidth,\n\t\tgap = 0,\n\t\tlastCol = false;\n\n\t\tcolumns.forEach((column, i) => {\n\t\t\tif (!column.widthFixed) {\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible && !column.definition.frozen) {\n\t\t\t\tlastCol = column;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\tif (lastCol){\n\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tlastCol.setWidth(0);\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\tif (gap > 0) {\n\t\t\t\tlastCol.setWidth(gap);\n\t\t\t} else {\n\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t}\n\t}\n});\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tsaveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/saveCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tcustomFilterName: wsParams.customFilterName\n\t\t\t}\n\t\t};\n\t},\n\tremoveCustomFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeCustomFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tapplyFilterFields(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/applyFilterFields',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterFields: wsParams.filterFields\n\t\t\t}\n\t\t};\n\t},\n\taddFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/addFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tremoveFilterField(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'post',\n\t\t\turl: '/api/frontend/v1/filter/removeFilterField',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterField: wsParams.filterField\n\t\t\t}\n\t\t};\n\t},\n\tgetFilterById(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType,\n\t\t\t\tfilterId: wsParams.filterId\n\t\t\t}\n\t\t};\n\t},\n\tgetFilter(wsParams) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/filter/getFilter',\n\t\t\tparams: {\n\t\t\t\tfilterUniqueId: wsParams.filterUniqueId,\n\t\t\t\tfilterType: wsParams.filterType\n\t\t\t}\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2022 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport FilterConfig from './Filter/Config.js';\nimport FilterColumns from './Filter/Columns.js';\nimport TableDownload from './Table/Download.js';\nimport collapseAutoClose from '../../directives/collapseAutoClose.js';\n\nimport moduleLayoutFitDataStretchFrozen from '../../tabulator/layouts/fitDataStretchFrozen.js';\n\nimport ApiFilter from '../../api/factory/filter.js';\n\n//\nconst FILTER_COMPONENT_NEW_FILTER = 'Filter Component New Filter';\nconst FILTER_COMPONENT_NEW_FILTER_TYPE = 'Filter Component New Filter Type';\n\nvar _uuid = 0;\n\n/**\n *\n */\nexport const CoreFilterCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt,\n\t\tFilterConfig,\n\t\tFilterColumns,\n\t\tTableDownload\n\t},\n\tdirectives: {\n\t\tcollapseAutoClose\n\t},\n\temits: [\n\t\t'nwNewEntry',\n\t\t'click:new',\n\t\t'tableBuilt',\n\t\t'uuidDefined'\n\t],\n\tprops: {\n\t\tonNwNewEntry: Function, // NOTE(chris): Hack to get the nwNewEntry listener into $props\n\t\ttitle: String,\n\t\tdescription: String,\n\t\tsideMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tfilterType: {\n\t\t\ttype: String\n\t\t},\n\t\ttabulatorOptions: Object,\n\t\ttabulatorEvents: Array,\n\t\ttableOnly: Boolean,\n\t\tnoColumnFilter:Boolean,\n\t\treload: Boolean,\n\t\treloadBtnInfotext: String,\n\t\tdownload: {\n\t\t\ttype: [Boolean, String, Function, Array, Object],\n\t\t\tdefault: false\n\t\t},\n\t\tnewBtnShow: Boolean,\n\t\tnewBtnClass: [String, Array, Object],\n\t\tnewBtnDisabled: Boolean,\n\t\tnewBtnLabel: String,\n\t\tuniqueId: String,\n\n\t\tidField: String,\n\t\tparentIdField: String,\n\t\tcountOnly: Boolean,\n\t\tuseSelectionSpan: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\tuuid: 0,\n\t\t\t// FilterCmpt properties\n\t\t\tfilterName: null,\n\t\t\tfilterActive: false,\n\t\t\tfields: null,\n\t\t\tdataset: null,\n\t\t\tdatasetMetadata: null,\n\t\t\tselectedFields: null,\n\t\t\tfilterFields: null,\n\n\t\t\tavailableFilters: null,\n\t\t\tselectedFilter: null,\n\n\t\t\t// FetchCmpt binded properties\n\t\t\tfetchCmptRefresh: false,\n\t\t\tfetchCmptApiFunction: null,\n\t\t\tfetchCmptApiFunctionParams: null,\n\t\t\tfetchCmptDataFetched: null,\n\n\t\t\tfetchResult: null,\n\n\t\t\ttabulator: null,\n\t\t\ttableBuilt: false,\n\t\t\ttabulatorHasSelector: false,\n\t\t\tselectedData: [],\n\t\t\tpersistence: {\n\t\t\t\tsort: true,\n\t\t\t\tcolumns: true,\n\t\t\t\tfilter: false,\n\t\t\t\theaderFilter: false,\n\t\t\t\tgroup: false,\n\t\t\t\tpage: false,\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\tnotSelectedFields() {\n\t\t\tif (!this.fields || !this.selectedFields)\n\t\t\t\treturn null;\n\t\t\treturn this.fields.filter(x => this.selectedFields.indexOf(x) === -1)\n\t\t},\n\t\tfilteredData() {\n\t\t\tif (!this.dataset)\n\t\t\t\treturn [];\n\t\t\treturn JSON.parse(JSON.stringify(this.dataset));\n\t\t},\n\t\tfilteredColumns() {\n\t\t\tlet fields = JSON.parse(JSON.stringify(this.fields)) || [];\n\t\t\tlet selectedFields = JSON.parse(JSON.stringify(this.selectedFields)) || [];\n\n\t\t\tlet columns = null;\n\n\t\t\t// If the tabulator options has been provided and it contains the property columns\n\t\t\tif (this.tabulatorOptions && this.tabulatorOptions.hasOwnProperty('columns'))\n\t\t\t\tcolumns = this.tabulatorOptions.columns;\n\n\t\t\t// If columns is not an array or it is an array with less elements then the array fields\n\t\t\tif (!Array.isArray(columns) || (Array.isArray(columns) && columns.length < fields.length))\n\t\t\t{\n\t\t\t\tcolumns = []; // set it as an empty array\n\n\t\t\t\t// Loop throught all the retrieved columns from database\n\t\t\t\tfor (let field of fields)\n\t\t\t\t{\n\t\t\t\t\t// Create a new column having the title equal to the field name\n\t\t\t\t\tlet column = {\n\t\t\t\t\t\ttitle: field,\n\t\t\t\t\t\tfield: field\n\t\t\t\t\t};\n\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\tcolumn.visible = selectedFields.indexOf(field) >= 0;\n\n\t\t\t\t\t// Add the new column to the list of columns\n\t\t\t\t\tcolumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse // the property columns has been provided in the tabulator options\n\t\t\t{\n\t\t\t\t// Loop throught the property columns of the tabulator options\n\t\t\t\tfor (let col of columns)\n\t\t\t\t{\n\t\t\t\t\t// If the column has to be displayed or not\n\t\t\t\t\t/* fields.indexOf(col.field) == -1; ensures displaying formatter colums\n\t\t\t\t\te.g. column with rowSelection checkboxes or with custom formatted action buttons */\n\t\t\t\t\tcol.visible = selectedFields.indexOf(col.field) >= 0 || fields.indexOf(col.field) == -1;\n\n\t\t\t\t\tif (col.hasOwnProperty('resizable'))\n\t\t\t\t\t\tcol.resizable = col.visible;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn columns;\n\t\t},\n\t\tfieldIdsForVisibilty() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn [];\n\t\t\treturn this.tabulator.getColumns().filter(col => {\n\t\t\t\tlet def = col.getDefinition();\n\t\t\t\treturn !def.frozen && def.title && def.formatter != \"responsiveCollapse\";\n\t\t\t}).map(col => col.getField());\n\t\t},\n\t\tfieldNames() {\n\t\t\tif (!this.tableBuilt)\n\t\t\t\treturn {};\n\t\t\treturn this.tabulator.getColumns().reduce((res, col) => {\n\t\t\t\tres[col.getField()] = col.getDefinition().title;\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t\t},\n\t\tidExtra() {\n\t\t\tif (!this.uuid)\n\t\t\t\treturn '';\n\t\t\treturn '-' + this.uuid;\n\t\t},\n\t\tcolumnsForFilter() {\n\t\t\tif (!this.filteredColumns || !this.datasetMetadata)\n\t\t\t\treturn [];\n\t\t\tconst filterTitles = this.filteredColumns.reduce((a,c) => {\n\t\t\t\ta[c.field] = c.title;\n\t\t\t\treturn a;\n\t\t\t}, {});\n\t\t\treturn this.datasetMetadata.map(el => ({...el, ...{title: filterTitles[el.name]}}));\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable() {\n\t\t\tif (this.tableOnly)\n\t\t\t\tthis.tabulator.setData();\n\t\t\telse\n\t\t\t\tthis.getFilter();\n\t\t},\n\t\tasync initTabulator() {\n\t\t\tlet placeholder = '< Phrasen Plugin not loaded! >';\n\t\t\tif (this.$p) {\n\t\t\t\tawait this.$p.loadCategory('ui');\n\t\t\t\tplaceholder = this.$p.t('ui/keineDatenVorhanden');\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\t// prefetch data to get fields & selectedFields for filteredColumns & filteredData\n\t\t\t\tawait new Promise(resolve => {\n\t\t\t\t\tconst filterId = window.location.hash ? window.location.hash.slice(1) : null;\n\n\t\t\t\t\tconst resolvePromiseFunc = data => {\n\t\t\t\t\t\tthis.setRenderData(data);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\t// get the filter data\n\t\t\t\t\tif (filterId === null)\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t\t\t{ filterId },\n\t\t\t\t\t\t\tresolvePromiseFunc\n\t\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Define a default tabulator options in case it was not provided\n\t\t\tlet tabulatorOptions = {...{\n\t\t\t\t\tlayout: \"fitDataStretchFrozen\",\n\t\t\t\t\tmovableColumns: true,\n\t\t\t\t\tcolumnDefaults:{\n\t\t\t\t\t\ttooltip: true\n\t\t\t\t\t},\n\t\t\t\t\tplaceholder,\n\t\t\t\t\tpersistence: this.persistence,\n\t\t\t\t}, ...(this.tabulatorOptions || {})};\n\n\t\t\t// set default height if no height property is set\n\t\t\tif (tabulatorOptions.height === undefined &&\n\t\t\t\ttabulatorOptions.minHeight === undefined &&\n\t\t\t\ttabulatorOptions.maxHeight === undefined) {\n\t\t\t\ttabulatorOptions.height = 500;\n\t\t\t}\n\n\t\t\tif (!this.tableOnly) {\n\t\t\t\ttabulatorOptions.data = this.filteredData;\n\t\t\t\ttabulatorOptions.columns = this.filteredColumns;\n\t\t\t} else {\n\t\t\t\ttabulatorOptions.columns.forEach(col => {\n\t\t\t\t\tif (col.visible === undefined)\n\t\t\t\t\t\tcol.visible = true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (tabulatorOptions.selectable || (tabulatorOptions.columns && tabulatorOptions.columns.filter(el => el.formatter == 'rowSelection').length))\n\t\t\t\tthis.tabulatorHasSelector = true;\n\n\t\t\tif (this.idField) {\n\t\t\t\t// enable nested tabulator if parent Id given\n\t\t\t\tif (this.parentIdField) tabulatorOptions.dataTree = true;\n\t\t\t\t// set tabulator index\n\t\t\t\ttabulatorOptions.index = this.idField;\n\t\t\t}\n\n\t\t\t// Start the tabulator with the build options\n\t\t\tthis.tabulator = new Tabulator(\n\t\t\t\tthis.$refs.table,\n\t\t\t\ttabulatorOptions\n\t\t\t);\n\t\t\t// If event handlers have been provided\n\t\t\tif (Array.isArray(this.tabulatorEvents) && this.tabulatorEvents.length > 0)\n\t\t\t{\n\t\t\t\t// Attach all the provided event handlers to the started tabulator\n\t\t\t\tfor (let evt of this.tabulatorEvents)\n\t\t\t\t\tthis.tabulator.on(evt.event, evt.handler);\n\t\t\t}\n\t\t\tthis.tabulator.on('tableBuilt', () => {this.tableBuilt = true; this.$emit('tableBuilt');});\n\t\t\tthis.tabulator.on(\"rowSelectionChanged\", data => {\n\t\t\t\tthis.selectedData = data;\n\t\t\t});\n\n\t\t\t// if nested tabulator, restructure data\n\t\t\tif (this.parentIdField && this.idField) {\n\t\t\t\tthis.tabulator.on(\"dataLoading\", data => {\n\t\t\t\t\tlet toDelete = [];\n\n\t\t\t\t\t// loop through all data\n\t\t\t\t\tfor (let childIdx = 0; childIdx < data.length; childIdx++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet child = data[childIdx];\n\n\t\t\t\t\t\t// if it has parent id, it is a child\n\t\t\t\t\t\tif (child[this.parentIdField])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// append the child on the right place. If parent found, mark original sw child on 0 level for deleting\n\t\t\t\t\t\t\tif (this.appendChild(data, child)) toDelete.push(childIdx);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// delete the marked children from 0 level\n\t\t\t\t\tfor (let counter = 0; counter < toDelete.length; counter++)\n\t\t\t\t\t{\n\t\t\t\t\t\t// decrease index by counter as index of data array changes after every deletion\n\t\t\t\t\t\tdata.splice(toDelete[counter] - counter, 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (this.tableOnly) {\n\t\t\t\tthis.tabulator.on('tableBuilt', () => {\n\t\t\t\t\tconst cols = this.tabulator.getColumns();\n\t\t\t\t\tthis.fields = cols.map(col => col.getField());\n\t\t\t\t\tthis.selectedFields = cols.filter(col => col.isVisible()).map(col => col.getField());\n\t\t\t\t\tif (this.tabulator.options.persistence.headerFilter)\n\t\t\t\t\t\tthis._setHeaderFilter();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.tabulator.on(\"dataFiltered\", filters => {\n\t\t\t\tthis.filterActive = filters.length > 0;\n\t\t\t});\n\t\t},\n\t\tupdateTabulator() {\n\t\t\tif (this.tabulator) {\n\t\t\t\tif (this.tableBuilt)\n\t\t\t\t\tthis._updateTabulator();\n\t\t\t\telse\n\t\t\t\t\tthis.tabulator.on('tableBuilt', this._updateTabulator);\n\t\t\t}\n\t\t},\n\t\t_updateTabulator() {\n\t\t\tthis.tabulatorHasSelector = this.tabulatorOptions.selectable || this.filteredColumns.filter(el => el.formatter == 'rowSelection').length;\n\t\t\tthis.tabulator.setColumns(this.filteredColumns);\n\t\t\tthis.tabulator.setData(this.filteredData);\n\t\t\tthis._setHeaderFilter()\n\t\t},\n\t\tclearFilters()\n\t\t{\n\t\t\tlet existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, \"\");\n\t\t\t});\n\t\t\tthis.tabulator.clearFilter();\n\t\t\tthis.filterActive = false;\n\t\t},\n\t\t_setHeaderFilter()\n\t\t{\n\t\t\tconst existingFilters = this.tabulator.getHeaderFilters();\n\t\t\texistingFilters.forEach(filter => {\n\t\t\t\tthis.tabulator.setHeaderFilterValue(filter.field, filter.value);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetFilter() {\n\t\t\tif (this.selectedFilter === null)\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilter(wsParams)),\n\t\t\t\t\tnull,\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tthis.startFetchCmpt(\n\t\t\t\t\twsParams => this.$api.call(ApiFilter.getFilterById(wsParams)),\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterId: this.selectedFilter\n\t\t\t\t\t},\n\t\t\t\t\tthis.render\n\t\t\t\t);\n\t\t},\n\t\tsetRenderData(data) {\n\t\t\tthis.fetchResult = data;\n\t\t\tthis.filterName = data.filterName;\n\t\t\tthis.dataset = data.dataset;\n\t\t\tthis.datasetMetadata = data.datasetMetadata;\n\n\t\t\tthis.fields = data.fields;\n\t\t\tthis.selectedFields = data.selectedFields;\n\t\t\tthis.filterFields = [];\n\n\t\t\tfor (let i = 0; i < data.datasetMetadata.length; i++)\n\t\t\t{\n\t\t\t\tfor (let j = 0; j < data.filters.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (data.datasetMetadata[i].name == data.filters[j].name)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet filter = data.filters[j];\n\t\t\t\t\t\tfilter.type = data.datasetMetadata[i].type;\n\n\t\t\t\t\t\tthis.filterFields.push(filter);\n\t\t\t\t\t\t//break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\trender(response) {\n\t\t\tlet data = response;\n\n\t\t\tthis.setRenderData(data);\n\n\t\t\t// If the side menu is active\n\t\t\tif (this.sideMenu === true)\n\t\t\t{\n\t\t\t\tthis.setSideMenu(data);\n\t\t\t}\n\t\t\telse // otherwise use the dropdown in the filter options\n\t\t\t{\n\t\t\t\tthis.setDropDownMenu(data);\n\t\t\t}\n\t\t\tthis.updateTabulator();\n\t\t},\n\t\t/**\n\t\t * Set the menu\n\t\t */\n\t\tsetSideMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tlink: link + personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc,\n\t\t\t\t\tsubscriptDescription: personalFilters[filtersCount].subscriptDescription,\n\t\t\t\t\tsubscriptLinkClass: personalFilters[filtersCount].subscriptLinkClass,\n\t\t\t\t\tsubscriptLinkValue: personalFilters[filtersCount].subscriptLinkValue,\n\t\t\t\t\tsort: filtersCount,\n\t\t\t\t\tonClickCall: this.handlerGetFilterById,\n\t\t\t\t\tonClickSubscriptCall: this.handlerRemoveCustomFilter\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\n\t\t\tthis.$emit(\n\t\t\t\t'nwNewEntry',\n\t\t\t\t{\n\t\t\t\t\tlink: \"#\",\n\t\t\t\t\tdescription: \"Filters\",\n\t\t\t\t\ticon: \"filter\",\n\t\t\t\t\tchildren: filtersArray\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Set the drop down menu\n\t\t */\n\t\tsetDropDownMenu(data) {\n\t\t\tlet filters = data.sideMenu.filters;\n\t\t\tlet personalFilters = data.sideMenu.personalFilters;\n\t\t\tlet filtersArray = [];\n\n\t\t\tfor (let filtersCount = 0; filtersCount < filters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = filters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: filters[filtersCount].filter_id,\n\t\t\t\t\toption: filters[filtersCount].filter_id,\n\t\t\t\t\tdescription: filters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfor (let filtersCount = 0; filtersCount < personalFilters.length; filtersCount++)\n\t\t\t{\n\t\t\t\tlet link = personalFilters[filtersCount].link;\n\n\t\t\t\tif (link == null) link = '#';\n\n\t\t\t\tfiltersArray[filtersArray.length] = {\n\t\t\t\t\tid: personalFilters[filtersCount].filter_id,\n\t\t\t\t\toption: personalFilters[filtersCount].filter_id,\n\t\t\t\t\tdescription: personalFilters[filtersCount].desc\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.availableFilters = filtersArray;\n\t\t},\n\t\t/**\n\t\t * Used to start/refresh the FetchCmpt\n\t\t */\n\t\tstartFetchCmpt(apiFunction, apiFunctionParameters, dataFetchedCallback) {\n\t\t\t// Assign the function api of the FetchCmpt binded property\n\t\t\tthis.fetchCmptApiFunction = apiFunction;\n\n\t\t\t// In case a null value is provided set the parameters as an empty object\n\t\t\tif (apiFunctionParameters == null) apiFunctionParameters = {};\n\n\t\t\t// Always needed parameters\n\t\t\tapiFunctionParameters.filterUniqueId = FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t\tapiFunctionParameters.filterType = this.filterType;\n\n\t\t\tif (this.uniqueId)\n\t\t\t\tapiFunctionParameters.filterUniqueId += '_' + this.uniqueId;\n\n\t\t\t// Assign parameters to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptApiFunctionParams = apiFunctionParameters;\n\t\t\t// Assign data fetch callback to the FetchCmpt binded properties\n\t\t\tthis.fetchCmptDataFetched = dataFetchedCallback;\n\t\t\t// Set the FetchCmpt binded property refresh to have the component to refresh\n\t\t\t// NOTE: this should be the last one to be called because it triggers the FetchCmpt to start to refresh\n\t\t\tthis.fetchCmptRefresh === true ? this.fetchCmptRefresh = false : this.fetchCmptRefresh = true;\n\t\t},\n\n\t\t// ------------------------------------------------------------------------------------------------------------------\n\t\t// Event handlers\n\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerSaveCustomFilter(customFilterName) {\n\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.saveCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tcustomFilterName\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\thandlerRemoveCustomFilter(event) {\n\t\t\tlet filterId = event.currentTarget.getAttribute(\"href\").substring(1);\n\t\t\tif (filterId === this.selectedFilter)\n\t\t\t\tthis.selectedFilter = null;\n\t\t\t//\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.removeCustomFilter(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterId: filterId\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t/*\n\t\t *\n\t\t */\n\t\thandlerGetFilterById: function(event) {\n\n\t\t\tlet filterId = null;\n\n\t\t\t// Get the attribute href if side menu is rendered\n\t\t\tlet attr = event.currentTarget.getAttribute(\"href\");\n\n\t\t\t// Otherwise get the value of the drop down menu\n\t\t\tif (attr == null)\n\t\t\t{\n\t\t\t\tfilterId = event.currentTarget.value;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfilterId = attr.substring(1);\n\t\t\t}\n\n\t\t\tthis.switchFilter(filterId);\n\t\t},\n\t\tswitchFilter(filterId) {\n\t\t\tthis.selectedFilter = filterId;\n\t\t\tthis.getFilter();\n\t\t},\n\t\tapplyFilterConfig(filterFields) {\n\t\t\tthis.selectedFilter = null;\n\t\t\tthis.startFetchCmpt(\n\t\t\t\twsParams => this.$api.call(ApiFilter.applyFilterFields(wsParams)),\n\t\t\t\t{\n\t\t\t\t\tfilterFields\n\t\t\t\t},\n\t\t\t\tthis.getFilter\n\t\t\t);\n\t\t},\n\n\t\t// append child to it's parent\n\t\tappendChild(data, child) {\n\t\t\t// get parent id\n\t\t\tlet parentId = child[this.parentIdField];\n\n\t\t\t// loop thorugh all data\n\t\t\tfor (let parentIdx = 0; parentIdx < data.length; parentIdx++)\n\t\t\t{\n\t\t\t\tlet parent = data[parentIdx];\n\n\t\t\t\t// if it's the parent\n\t\t\t\tif (parent[this.idField] == parentId)\n\t\t\t\t{\n\t\t\t\t\t// create children array if not done yet\n\t\t\t\t\tif (!parent._children) parent._children = [];\n\n\t\t\t\t\t// if child is not included in children array, append the child\n\t\t\t\t\tif (!parent._children.includes(child)) parent._children.push(child);\n\n\t\t\t\t\t// parent found\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// search children for parents\n\t\t\t\telse if (parent._children) this.appendChild(parent._children, child);\n\t\t\t}\n\n\t\t\t// parent not found\n\t\t\treturn false;\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tif (!this.tableOnly == !this.filterType)\n\t\t\talert('You can not have a filter-type in table-only mode!');\n\t},\n\tcreated() {\n\t\tif (this.sideMenu && (!this.$props.onNwNewEntry || !(this.$props.onNwNewEntry instanceof Function)))\n\t\t\talert('\"nwNewEntry\" listener is mandatory when sideMenu is true');\n\t\tthis.uuid = _uuid++;\n\t\tthis.$emit('uuidDefined', this.uuid)\n\t},\n\tmounted() {\n\t\tthis.initTabulator().then(() => {\n\t\t\tif (!this.tableOnly) {\n\t\t\t\tthis.selectedFilter = window.location.hash ? window.location.hash.slice(1) : null;\n\t\t\t\tthis.render(this.fetchResult);\n\t\t\t}\n\t\t});\n\n\t},\n\ttemplate: `\n\t\t<!-- Load filter data -->\n\t\t<core-fetch-cmpt\n\t\t\tv-if=\"!tableOnly && fetchCmptApiFunction\"\n\t\t\tv-bind:api-function=\"fetchCmptApiFunction\"\n\t\t\tv-bind:api-function-parameters=\"fetchCmptApiFunctionParams\"\n\t\t\tv-bind:refresh=\"fetchCmptRefresh\"\n\t\t\t@data-fetched=\"fetchCmptDataFetched\">\n\t\t</core-fetch-cmpt>\n\n\t\t<div class=\"row\" v-if=\"title != null && title != ''\">\n\t\t\t<div class=\"col-lg-12\">\n\t\t\t\t<h3 class=\"page-header mt-1 mb-4\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :id=\"'filterCollapsables' + idExtra\">\n\n\t\t\t<div class=\"d-flex flex-row justify-content-between flex-wrap\">\n\t\t\t\t<div v-if=\"newBtnShow || reload || $slots.search || $slots.actions\" class=\"d-flex gap-2 align-items-baseline flex-wrap\">\n\t\t\t\t\t<button v-if=\"newBtnShow\" class=\"btn btn-primary\" :class=\"newBtnClass\" :title=\"newBtnLabel ? undefined : 'New'\" :aria-label=\"newBtnLabel ? undefined : 'New'\" @click=\"$emit('click:new', $event)\" :disabled=\"newBtnDisabled\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-plus\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t{{ newBtnLabel }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button v-if=\"reload\" class=\"btn btn-outline-secondary\" aria-label=\"Reload\" @click=\"reloadTable\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-rotate-right\" aria-hidden=\"true\"  :title=\"reloadBtnInfotext ? reloadBtnInfotext : 'Reload'\" ></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span v-if=\"$slots.actions && tabulatorHasSelector && useSelectionSpan\">\n\t\t\t\t\t\t<span v-if=\"countOnly\">{{ selectedData.length }} ausgewählt</span>\n\t\t\t\t\t\t<span v-else id=\"selected-info-text\"> Mit {{ selectedData.length }} ausgewählten:</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"actions\" v-bind=\"{selected: tabulatorHasSelector ? selectedData : []}\"></slot>\n\t\t\t\t\t<slot name=\"search\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"d-flex gap-1 align-items-baseline flex-grow-1 justify-content-end\">\n\t\t\t\t\t<span v-if=\"!tableOnly\">[ {{ filterName }} ]</span>\n\t\t\t\t\t<span v-else-if=\"description\" v-html=\"description\"></span>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"!tableOnly || $slots.filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseFilters' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" v-if=\"filterActive\"  class=\"btn btn-link px-0 fhc-text\" :title=\"$p.t('ui','filterdelete')\" @click=\"clearFilters\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-filter-circle-xmark\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<a aria-label=\"filter\" href=\"#\" class=\"btn btn-link px-0 fhc-text\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapseColumns' + idExtra\">\n\t\t\t\t\t\t<span class=\"fa-solid fa-xl fa-table-columns\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t\t<table-download class=\"btn btn-link px-0 fhc-text\" :tabulator=\"tabulator\" :config=\"download\"></table-download>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<filter-columns\n\t\t\t\t:id=\"'collapseColumns' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:fields=\"fieldIdsForVisibilty\"\n\t\t\t\t:selected=\"selectedFields\"\n\t\t\t\t:names=\"fieldNames\"\n\t\t\t\t@hide=\"tabulator.hideColumn($event)\"\n\t\t\t\t@show=\"tabulator.showColumn($event)\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-columns>\n\n\t\t\t<filter-config\n\t\t\t\tv-if=\"!tableOnly\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\t:filters=\"!sideMenu ? (availableFilters || []) : []\"\n\t\t\t\t:columns=\"columnsForFilter\"\n\t\t\t\t:fields=\"filterFields || []\"\n\t\t\t\t@switch-filter=\"switchFilter\"\n\t\t\t\t@apply-filter-config=\"applyFilterConfig\"\n\t\t\t\t@save-custom-filter=\"handlerSaveCustomFilter\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t></filter-config>\n\t\t\t<div\n\t\t\t\tv-else-if=\"$slots.filter\"\n\t\t\t\t:id=\"'collapseFilters' + idExtra\"\n\t\t\t\tclass=\"card-body collapse\"\n\t\t\t\t:data-bs-parent=\"'#filterCollapsables' + idExtra\"\n\t\t\t\tv-collapse-auto-close\n\t\t\t\t>\n\t\t\t\t<slot name=\"filter\"></slot>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Tabulator -->\n\t\t<div ref=\"table\" :id=\"'filterTableDataset' + idExtra\" class=\"filter-table-dataset\"></div>\n\t`\n};\n","/**\n * Copyright (C) 2025 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport default {\n\tgetHeader(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/header',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t},\n\tgetMenu(navigation_page) {\n\t\treturn {\n\t\t\tmethod: 'get',\n\t\t\turl: '/api/frontend/v1/navigation/menu',\n\t\t\tparams: { navigation_page }\n\t\t};\n\t}\n};","/**\n * Copyright (C) 2024 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {CoreFetchCmpt} from '../../components/Fetch.js';\nimport ApiNavigation from '../../api/factory/navigation.js';\n\n/**\n *\n */\nexport const CoreNavigationCmpt = {\n\tcomponents: {\n\t\tCoreFetchCmpt\n\t},\n\tprops: {\n\t\taddHeaderMenuEntries: Object, // property used to add new header menu entries from another app/component\n\t\taddSideMenuEntries: Object, // property used to add new side menu entries from another app/component\n\t\thideTopMenu: Boolean,\n\t\tleftNavCssClasses: {\n\t\t\ttype: String,\n\t\t\tdefault: 'navbar navbar-left-side'\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\theaderMenu: {}, // header menu entries\n\t\t\tsideMenu: {} // side menu entries\n\t\t};\n\t},\n\tcomputed: {\n\t\t/**\n\t\t *\n\t\t */\n\t\theaderMenuEntries() {\n\t\t\t//\n\t\t\tlet hm = this.headerMenu ? {...this.headerMenu} : {};\n\t\t\tif (this.headerMenu != null && this.addHeaderMenuEntries != null && Object.keys(this.addHeaderMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\thm[this.addHeaderMenuEntries.description] = this.addHeaderMenuEntries;\n\t\t\t}\n\t\t\treturn hm;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tsideMenuEntries() {\n\t\t\t//\n\t\t\tlet sm = this.sideMenu ? {...this.sideMenu} : {};\n\t\t\tif (this.sideMenu != null && this.addSideMenuEntries != null && Object.keys(this.addSideMenuEntries).length > 0)\n\t\t\t{\n\t\t\t\tsm[this.addSideMenuEntries.description] = this.addSideMenuEntries;\n\t\t\t}\n\t\t\treturn sm;\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetNavigationPage() {\n\t\t\treturn FHC_JS_DATA_STORAGE_OBJECT.called_path + \"/\" + FHC_JS_DATA_STORAGE_OBJECT.called_method;\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionHeader() {\n\t\t\treturn this.$api.call(ApiNavigation.getHeader(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptApiFunctionSideMenu() {\n\t\t\treturn this.$api.call(ApiNavigation.getMenu(this.getNavigationPage()))\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedHeader(data) {\n\t\t\tthis.headerMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tfetchCmptDataFetchedMenu(data) {\n\t\t\tthis.sideMenu = data || {};\n\t\t},\n\t\t/**\n\t\t *\n\t\t */\n\t\tgetDataBsToggle(header) {\n\t\t\treturn !header.children ? null : 'dropdown';\n\t\t}\n\t},\n\ttemplate: `\n\t\t<!-- Load head menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionHeader\" @data-fetched=\"fetchCmptDataFetchedHeader\"></core-fetch-cmpt>\n\t\t<!-- Load side menu -->\n\t\t<core-fetch-cmpt v-bind:api-function=\"fetchCmptApiFunctionSideMenu\" @data-fetched=\"fetchCmptDataFetchedMenu\"></core-fetch-cmpt>\n\n\t\t<!-- Top menu -->\n\t\t<nav class=\"navbar navbar-expand-lg navbar-header\" v-if=\"!hideTopMenu\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"header in headerMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item dropdown\">\n\t\t\t\t\t\t<a class=\"nav-link header-menu-link-entry\"\n\t\t\t\t\t\t\tv-bind:data-bs-toggle=\"this.getDataBsToggle(header)\"\n\t\t\t\t\t\t\tv-bind:class=\"{ 'dropdown-toggle': header.children }\"\n\t\t\t\t\t\t\tv-bind:href=\"header.link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i class=\"fa-solid fa-fw header-menu-icon\" v-bind:class=\"'fa-' + header.icon\" v-if=\"header.icon\"></i> {{ header.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" v-if=\"header.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in header.children\">\n\t\t\t\t\t\t\t\t<li><a class=\"dropdown-item\" v-bind:href=\"child.link\">{{ child.description }}</a></li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t\t<slot></slot>\n\t\t</nav>\n\n\t\t<!-- Left side menu -->\n\t\t<nav :class=\"leftNavCssClasses\">\n\t\t\t<ul class=\"navbar-nav\">\n\t\t\t\t<!-- 1st level -->\n\t\t\t\t<template v-for=\"menu in sideMenuEntries\">\n\t\t\t\t\t<li class=\"nav-item\">\n\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"menu.link\" @click=menu.onClickCall>\n\t\t\t\t\t\t\t<i class=\"fa fa-fw\" v-bind:class=\"'fa-'+ menu.icon\"></i> {{ menu.description }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class=\"nav-link left-side-menu-second-level\" v-if=\"menu.children\">\n\t\t\t\t\t\t\t<!-- 2nd level -->\n\t\t\t\t\t\t\t<template v-for=\"child in menu.children\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t<a class=\"nav-link left-side-menu-link-entry\" v-bind:href=\"child.link\" @click=child.onClickCall>\n\t\t\t\t\t\t\t\t\t\t&emsp;&emsp;{{ child.description }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"nav-link left-side-menu-link-entry\"\n\t\t\t\t\t\t\t\t\t\tv-bind:class=\"child.subscriptLinkClass\"\n\t\t\t\t\t\t\t\t\t\tv-if=\"child.subscriptDescription\"\n\t\t\t\t\t\t\t\t\t\tv-bind:href=\"child.link\"\n\t\t\t\t\t\t\t\t\t\t@click=child.onClickSubscriptCall\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ child.subscriptDescription }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</template>\n\t\t\t</ul>\n\t\t</nav>\n\t`\n};\n\n","/**\n * Copyright (C) 2023 fhcomplete.org\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport {IssueViewerTabulatorOptions} from './IssueViewerTabulatorSetup.js';\nimport {IssueViewerTabulatorEventHandlers} from './IssueViewerTabulatorSetup.js';\n\nimport {CoreFilterCmpt} from '../../../../js/components/filter/Filter.js';\nimport {CoreNavigationCmpt} from '../../../../js/components/navigation/Navigation.js';\n\nconst issueViewerApp = Vue.createApp({\n\tname: 'PV21IssueViewer',\n\tdata: function() {\n\t\treturn {\n\t\t\tappSideMenuEntries: {},\n\t\t\tissueViewerTabulatorOptions: IssueViewerTabulatorOptions,\n\t\t\tissueViewerTabulatorEventHandlers: IssueViewerTabulatorEventHandlers\n\t\t};\n\t},\n\tcomponents: {\n\t\tCoreNavigationCmpt,\n\t\tCoreFilterCmpt\n\t},\n\tmethods: {\n\t\tnewSideMenuEntryHandler: function(payload) {\n\t\t\tthis.appSideMenuEntries = payload;\n\t\t}\n\t}\n});\n\nissueViewerApp.mount('#main');\n"],"names":["IssueViewerTabulatorOptions","height","layout","columns","title","field","headerFilter","formatter","cell","getValue","replace","rowFormatter","row","data","getData","hasOwnProperty","Fehlertyp","fehlertyp","Statuscode","getElement","style","color","IssueViewerTabulatorEventHandlers","event","handler","e","alert","Inhalt","CoreFetchCmpt","emits","props","refresh","type","Boolean","apiFunction","required","Function","apiFunctionParameters","watch","newValue","oldValue","this","fetchData","loading","error","errorMessage","created","methods","apiFunctionResult","Promise","then","successHandler","catch","errorHandler","finally","finallyHandler","setError","response","$emit","undefined","retval","message","template","FILTER_COMPONENT_NEW_FILTER","FilterConfig","filters","Array","default","fields","switchFilter","applyFilterConfig","saveCustomFilter","currentFields","computed","types","reduce","a","c","toLowerCase","indexOf","name","n","evt","currentTarget","value","filteredFields","filter","el","condition","length","addField","push","removeField","index","splice","FilterColumns","selected","names","Object","hide","show","selectedFields","toggle","DEFAULT_ICONS","jsonLines","xlsx","pdf","html","json","csv","DEFAULT_LABELS","TableDownload","tabulator","config","String","iconClass","currentConfig","prototype","toString","call","split","isArray","newConfig","k","v","stringToFileFormatter","icon","label","map","validateFileFormatter","input","lcInput","includes","window","XLSX","jspdf","jsPDF","autoTable","download","file","options","elementDataMap","WeakMap","collapseAutoClose","mounted","binding","open","set","contains","target","collapse","bootstrap","Collapse","getInstance","addEventListener","document","get","beforeUnmount","removeEventListener","collapsibleAutoHideFunc","Tabulator","extendModule","fitDataStretchFrozen","forced","colsWidth","tableWidth","table","rowManager","element","clientWidth","gap","lastCol","forEach","column","i","widthFixed","reinitializeWidth","responsiveLayout","modules","responsive","visible","definition","frozen","getWidth","modExists","setWidth","update","ApiFilter","wsParams","method","url","params","filterUniqueId","filterType","customFilterName","removeCustomFilter","filterId","applyFilterFields","filterFields","addFilterField","filterField","removeFilterField","getFilterById","getFilter","_uuid","CoreFilterCmpt","components","directives","onNwNewEntry","description","sideMenu","tabulatorOptions","tabulatorEvents","tableOnly","noColumnFilter","reload","reloadBtnInfotext","newBtnShow","newBtnClass","newBtnDisabled","newBtnLabel","uniqueId","idField","parentIdField","countOnly","useSelectionSpan","uuid","filterName","filterActive","dataset","datasetMetadata","availableFilters","selectedFilter","fetchCmptRefresh","fetchCmptApiFunction","fetchCmptApiFunctionParams","fetchCmptDataFetched","fetchResult","tableBuilt","tabulatorHasSelector","selectedData","persistence","sort","group","page","notSelectedFields","x","filteredData","JSON","parse","stringify","filteredColumns","col","resizable","fieldIdsForVisibilty","getColumns","def","getDefinition","getField","fieldNames","res","idExtra","columnsForFilter","filterTitles","reloadTable","setData","initTabulator","placeholder","$p","loadCategory","t","resolve","location","hash","slice","resolvePromiseFunc","setRenderData","startFetchCmpt","$api","movableColumns","columnDefaults","tooltip","minHeight","maxHeight","selectable","dataTree","$refs","on","toDelete","childIdx","child","appendChild","counter","cols","isVisible","_setHeaderFilter","updateTabulator","_updateTabulator","setColumns","clearFilters","getHeaderFilters","setHeaderFilterValue","clearFilter","render","j","setSideMenu","setDropDownMenu","personalFilters","filtersArray","filtersCount","link","id","filter_id","desc","onClickCall","handlerGetFilterById","subscriptDescription","subscriptLinkClass","subscriptLinkValue","onClickSubscriptCall","handlerRemoveCustomFilter","children","option","dataFetchedCallback","FHC_JS_DATA_STORAGE_OBJECT","called_path","called_method","handlerSaveCustomFilter","getAttribute","substring","attr","parentId","parentIdx","parent","_children","beforeCreate","$props","ApiNavigation","getHeader","navigation_page","getMenu","CoreNavigationCmpt","addHeaderMenuEntries","addSideMenuEntries","hideTopMenu","leftNavCssClasses","headerMenu","headerMenuEntries","hm","keys","sideMenuEntries","sm","getNavigationPage","fetchCmptApiFunctionHeader","fetchCmptApiFunctionSideMenu","fetchCmptDataFetchedHeader","fetchCmptDataFetchedMenu","getDataBsToggle","header","Vue","createApp","appSideMenuEntries","issueViewerTabulatorOptions","issueViewerTabulatorEventHandlers","newSideMenuEntryHandler","payload","mount"],"mappings":"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"}